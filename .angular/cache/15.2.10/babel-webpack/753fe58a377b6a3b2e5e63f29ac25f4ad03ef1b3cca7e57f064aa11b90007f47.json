{"ast":null,"code":"import { Animation, Browser, ChildProperty, Complex, Component, Event, EventHandler, KeyboardEvents, L10n, NotifyPropertyChanges, Property, SanitizeHtmlHelper, Touch, addClass, append, attributes, classList, closest, compile, createElement, debounce, detach, extend, formatUnit, getComponent, getUniqueID, getValue, isNullOrUndefined, isUndefined, matches, prepend, remove, removeClass, rippleEffect, select, selectAll, setStyleAttribute, setValue } from '@syncfusion/ej2-base';\nimport { DataManager, DataUtil, JsonAdaptor, Predicate, Query } from '@syncfusion/ej2-data';\nimport { ListBase, Sortable, cssClass, moveTo } from '@syncfusion/ej2-lists';\nimport { Popup, createSpinner, getZindexPartial, hideSpinner, isCollide, showSpinner } from '@syncfusion/ej2-popups';\nimport { Input, TextBox } from '@syncfusion/ej2-inputs';\nimport { Skeleton } from '@syncfusion/ej2-notifications';\nimport { Button, createCheckBox } from '@syncfusion/ej2-buttons';\nimport { TreeView } from '@syncfusion/ej2-navigations';\n\n/**\n * IncrementalSearch module file\n */\nvar queryString = '';\nvar prevString = '';\nvar tempQueryString = '';\nvar matches$1 = [];\nvar activeClass = 'e-active';\nvar prevElementId = '';\n/**\n * Search and focus the list item based on key code matches with list text content\n *\n * @param  { number } keyCode - Specifies the key code which pressed on keyboard events.\n * @param  { HTMLElement[]} items - Specifies an array of HTMLElement, from which matches find has done.\n * @param { number } selectedIndex - Specifies the selected item in list item, so that search will happen\n * after selected item otherwise it will do from initial.\n * @param  { boolean } ignoreCase - Specifies the case consideration when search has done.\n * @param {string} elementId - Specifies the list element ID.\n * @returns {Element} Returns list item based on key code matches with list text content.\n */\nfunction incrementalSearch(keyCode, items, selectedIndex, ignoreCase, elementId, queryStringUpdated, currentValue, isVirtual, refresh) {\n  if (!queryStringUpdated || queryString === '') {\n    if (tempQueryString != '') {\n      queryString = tempQueryString + String.fromCharCode(keyCode);\n      tempQueryString = '';\n    } else {\n      queryString += String.fromCharCode(keyCode);\n    }\n  } else if (queryString == prevString) {\n    tempQueryString = String.fromCharCode(keyCode);\n  }\n  if (isVirtual) {\n    setTimeout(function () {\n      tempQueryString = '';\n    }, 700);\n    setTimeout(function () {\n      queryString = '';\n    }, 3000);\n  } else {\n    setTimeout(function () {\n      queryString = '';\n    }, 1000);\n  }\n  var index;\n  queryString = ignoreCase ? queryString.toLowerCase() : queryString;\n  if (prevElementId === elementId && prevString === queryString && !refresh) {\n    for (var i = 0; i < matches$1.length; i++) {\n      if (matches$1[i].classList.contains(activeClass)) {\n        index = i;\n        break;\n      }\n      if (currentValue && matches$1[i].textContent.toLowerCase() === currentValue.toLowerCase()) {\n        index = i;\n        break;\n      }\n    }\n    index = index + 1;\n    if (isVirtual) {\n      return matches$1[index] && matches$1.length - 1 != index ? matches$1[index] : matches$1[matches$1.length];\n    }\n    return matches$1[index] ? matches$1[index] : matches$1[0];\n  } else {\n    var listItems = items;\n    var strLength = queryString.length;\n    var text = void 0;\n    var item = void 0;\n    selectedIndex = selectedIndex ? selectedIndex + 1 : 0;\n    var i = selectedIndex;\n    matches$1 = [];\n    do {\n      if (i === listItems.length) {\n        i = -1;\n      }\n      if (i === -1) {\n        index = 0;\n      } else {\n        index = i;\n      }\n      item = listItems[index];\n      text = ignoreCase ? item.innerText.toLowerCase() : item.innerText;\n      if (text.substr(0, strLength) === queryString) {\n        matches$1.push(listItems[index]);\n      }\n      i++;\n    } while (i !== selectedIndex);\n    prevString = queryString;\n    prevElementId = elementId;\n    if (isVirtual) {\n      var indexUpdated = false;\n      for (var i_1 = 0; i_1 < matches$1.length; i_1++) {\n        if (currentValue && matches$1[i_1].textContent.toLowerCase() === currentValue.toLowerCase()) {\n          index = i_1;\n          indexUpdated = true;\n          break;\n        }\n      }\n      if (currentValue && indexUpdated) {\n        index = index + 1;\n      }\n      return matches$1[index] ? matches$1[index] : matches$1[0];\n    }\n    return matches$1[0];\n  }\n}\n/**\n * Search the list item based on given input value matches with search type.\n *\n * @param {string} inputVal - Specifies the given input value.\n * @param {HTMLElement[]} items - Specifies the list items.\n * @param {SearchType} searchType - Specifies the filter type.\n * @param {boolean} ignoreCase - Specifies the case sensitive option for search operation.\n * @returns {Element | number} Returns the search matched items.\n */\nfunction Search(inputVal, items, searchType, ignoreCase, dataSource, fields, type) {\n  var listItems = items;\n  ignoreCase = ignoreCase !== undefined && ignoreCase !== null ? ignoreCase : true;\n  var itemData = {\n    item: null,\n    index: null\n  };\n  if (inputVal && inputVal.length) {\n    var strLength = inputVal.length;\n    var queryStr = ignoreCase ? inputVal.toLocaleLowerCase() : inputVal;\n    queryStr = escapeCharRegExp(queryStr);\n    var _loop_1 = function (i, itemsData) {\n      var item = itemsData[i];\n      var text = void 0;\n      var filterValue;\n      if (items && dataSource) {\n        var checkField_1 = item;\n        var fieldValue_1 = fields.text.split('.');\n        dataSource.filter(function (data) {\n          Array.prototype.slice.call(fieldValue_1).forEach(function (value) {\n            /* eslint-disable security/detect-object-injection */\n            if (type === 'object' && !data.isHeader && checkField_1.textContent.toString().indexOf(data[value]) !== -1 && checkField_1.getAttribute('data-value') === data[fields.value].toString() || type === 'string' && checkField_1.textContent.toString().indexOf(data) !== -1) {\n              filterValue = type === 'object' ? data[value] : data;\n            }\n          });\n        });\n      }\n      text = dataSource && filterValue ? (ignoreCase ? filterValue.toString().toLocaleLowerCase() : filterValue).replace(/^\\s+|\\s+$/g, '') : (ignoreCase ? item.textContent.toLocaleLowerCase() : item.textContent).replace(/^\\s+|\\s+$/g, '');\n      /* eslint-disable security/detect-non-literal-regexp */\n      if (searchType === 'Equal' && text === queryStr || searchType === 'StartsWith' && text.substr(0, strLength) === queryStr || searchType === 'EndsWith' && text.substr(text.length - queryStr.length) === queryStr || searchType === 'Contains' && new RegExp(queryStr, \"g\").test(text)) {\n        itemData.item = item;\n        itemData.index = i;\n        return {\n          value: {\n            item: item,\n            index: i\n          }\n        };\n      }\n    };\n    for (var i = 0, itemsData = listItems; i < itemsData.length; i++) {\n      var state_1 = _loop_1(i, itemsData);\n      if (typeof state_1 === \"object\") return state_1.value;\n    }\n    return itemData;\n    /* eslint-enable security/detect-non-literal-regexp */\n  }\n\n  return itemData;\n}\n/* eslint-enable security/detect-object-injection */\nfunction escapeCharRegExp(value) {\n  return value.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n}\nfunction resetIncrementalSearchValues(elementId) {\n  if (prevElementId === elementId) {\n    prevElementId = '';\n    prevString = '';\n    queryString = '';\n    matches$1 = [];\n  }\n}\n\n/**\n * Function helps to find which highlightSearch is to call based on your data.\n *\n * @param  {HTMLElement} element - Specifies an li element.\n * @param  {string} query - Specifies the string to be highlighted.\n * @param  {boolean} ignoreCase - Specifies the ignoreCase option.\n * @param  {HightLightType} type - Specifies the type of highlight.\n * @returns {void}\n */\nfunction highlightSearch(element, query, ignoreCase, type) {\n  if (query === '') {\n    return;\n  } else {\n    var ignoreRegex = ignoreCase ? 'gim' : 'gm';\n    // eslint-disable-next-line\n    query = /^[a-zA-Z0-9- ]*$/.test(query) ? query : query.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&');\n    var replaceQuery = type === 'StartsWith' ? '^(' + query + ')' : type === 'EndsWith' ? '(' + query + ')$' : '(' + query + ')';\n    // eslint-disable-next-line security/detect-non-literal-regexp\n    findTextNode(element, new RegExp(replaceQuery, ignoreRegex));\n  }\n}\n/* eslint-enable jsdoc/require-param, valid-jsdoc */\n/**\n *\n * @param {HTMLElement} element - Specifies the element.\n * @param {RegExp} pattern - Specifies the regex to match the searched text.\n * @returns {void}\n */\nfunction findTextNode(element, pattern) {\n  for (var index = 0; element.childNodes && index < element.childNodes.length; index++) {\n    if (element.childNodes[index].nodeType === 3 && element.childNodes[index].textContent.trim() !== '') {\n      var value = element.childNodes[index].nodeValue.trim().replace(pattern, '<span class=\"e-highlight\">$1</span>');\n      element.childNodes[index].nodeValue = '';\n      element.innerHTML = element.innerHTML.trim() + value;\n      break;\n    } else {\n      findTextNode(element.childNodes[index], pattern);\n    }\n  }\n}\n/**\n * Function helps to remove highlighted element based on your data.\n *\n * @param  {HTMLElement} content - Specifies an content element.\n * @returns {void}\n */\nfunction revertHighlightSearch(content) {\n  var contentElement = content.querySelectorAll('.e-highlight');\n  for (var i = contentElement.length - 1; i >= 0; i--) {\n    var parent_1 = contentElement[i].parentNode;\n    var text = document.createTextNode(contentElement[i].textContent);\n    parent_1.replaceChild(text, contentElement[i]);\n  }\n}\nvar __assign = undefined && undefined.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __awaiter = undefined && undefined.__awaiter || function (thisArg, _arguments, P, generator) {\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : new P(function (resolve) {\n        resolve(result.value);\n      }).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __generator = undefined && undefined.__generator || function (thisArg, body) {\n  var _ = {\n      label: 0,\n      sent: function () {\n        if (t[0] & 1) throw t[1];\n        return t[1];\n      },\n      trys: [],\n      ops: []\n    },\n    f,\n    y,\n    t,\n    g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n        case 7:\n          op = _.ops.pop();\n          _.trys.pop();\n          continue;\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n            _.ops.push(op);\n            break;\n          }\n          if (t[2]) _.ops.pop();\n          _.trys.pop();\n          continue;\n      }\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\nvar VirtualScroll = /** @__PURE__ @class */function () {\n  function VirtualScroll(parent) {\n    var _this = this;\n    this.sentinelInfo = {\n      'up': {\n        check: function (rect, info) {\n          var top = rect.top - _this.containerElementRect.top;\n          info.entered = top >= 0;\n          return top + _this.parent.listItemHeight * _this.parent.virtualItemCount / 2 >= 0;\n        },\n        axis: 'Y'\n      },\n      'down': {\n        check: function (rect, info) {\n          var cHeight = _this.parent.popupContentElement.clientHeight;\n          var top = rect.bottom;\n          info.entered = rect.bottom <= _this.containerElementRect.bottom;\n          return top - _this.parent.listItemHeight * _this.parent.virtualItemCount / 2 <= _this.parent.listItemHeight * _this.parent.virtualItemCount / 2;\n        },\n        axis: 'Y'\n      }\n    };\n    this.parent = parent;\n    this.removeEventListener();\n    this.addEventListener();\n  }\n  VirtualScroll.prototype.addEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    this.parent.on('observe', this.observe, this);\n    this.parent.on('setGeneratedData', this.setGeneratedData, this);\n    this.parent.on('dataProcessAsync', this.dataProcessAsync, this);\n    this.parent.on('setCurrentViewDataAsync', this.setCurrentViewDataAsync, this);\n    this.parent.on('bindScrollEvent', this.bindScrollEvent, this);\n  };\n  VirtualScroll.prototype.removeEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    this.parent.off('observe', this.observe);\n    this.parent.off('setGeneratedData', this.setGeneratedData);\n    this.parent.off('dataProcessAsync', this.dataProcessAsync);\n    this.parent.off('setCurrentViewDataAsync', this.setCurrentViewDataAsync);\n    this.parent.off('bindScrollEvent', this.bindScrollEvent);\n  };\n  VirtualScroll.prototype.bindScrollEvent = function (component) {\n    var _this = this;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    this.component = component.component;\n    this.observe(function (scrollArgs) {\n      return _this.scrollListener(scrollArgs);\n    });\n  };\n  VirtualScroll.prototype.observe = function (callback) {\n    this.containerElementRect = this.parent.popupContentElement.getBoundingClientRect();\n    EventHandler.add(this.parent.popupContentElement, 'wheel mousedown', this.popupScrollHandler, this);\n    this.touchModule = new Touch(this.parent.popupContentElement, {\n      scroll: this.popupScrollHandler.bind(this)\n    });\n    EventHandler.add(this.parent.popupContentElement, 'scroll', this.virtualScrollHandler(callback), this);\n  };\n  VirtualScroll.prototype.getModuleName = function () {\n    return 'VirtualScroll';\n  };\n  VirtualScroll.prototype.popupScrollHandler = function (e) {\n    this.parent.isMouseScrollAction = true;\n    this.parent.isPreventScrollAction = false;\n  };\n  VirtualScroll.prototype.getPageQuery = function (query, virtualStartIndex, virtualEndIndex) {\n    if (virtualEndIndex !== 0 && !this.parent.allowFiltering && this.component !== 'autocomplete') {\n      query = query.skip(virtualStartIndex);\n    }\n    return query;\n  };\n  VirtualScroll.prototype.setGeneratedData = function (qStartIndex, recentlyGeneratedData) {\n    var loopIteration = 0;\n    var endIndex = this.parent.listData.length + this.parent.virtualItemStartIndex;\n    for (var i = this.parent.virtualItemStartIndex; i < endIndex; i++) {\n      var alreadyAddedData = this.parent.generatedDataObject[i];\n      if (!alreadyAddedData) {\n        if (recentlyGeneratedData !== null && this.parent.listData.slice(loopIteration, loopIteration + 1).length > 0) {\n          var slicedData = this.parent.listData.slice(loopIteration, loopIteration + 1);\n          if (slicedData.length > 0) {\n            // Safely assign slicedData to this.parent.generatedDataObject[i]\n            this.parent.generatedDataObject[i] = slicedData;\n          }\n        }\n      }\n      loopIteration++;\n    }\n  };\n  VirtualScroll.prototype.generateAndExecuteQueryAsync = function (query, virtualItemStartIndex, virtualItemEndIndex, isQueryGenerated) {\n    if (virtualItemStartIndex === void 0) {\n      virtualItemStartIndex = 0;\n    }\n    if (virtualItemEndIndex === void 0) {\n      virtualItemEndIndex = 0;\n    }\n    if (isQueryGenerated === void 0) {\n      isQueryGenerated = false;\n    }\n    var dataSource = this.parent.dataSource;\n    if (!isQueryGenerated) {\n      if (!isNullOrUndefined(this.parent.query)) {\n        var newQuery = this.removeSkipAndTakeEvents(this.parent.query.clone());\n        query = this.getPageQuery(newQuery, virtualItemStartIndex, virtualItemEndIndex);\n      } else {\n        query = this.getPageQuery(query, virtualItemStartIndex, virtualItemEndIndex);\n      }\n    }\n    var tempCustomFilter = this.parent.isCustomFilter;\n    if (this.component === 'combobox') {\n      var totalData = 0;\n      if (this.parent.dataSource instanceof DataManager) {\n        totalData = this.parent.dataSource.dataSource.json.length;\n      } else if (this.parent.dataSource && this.parent.dataSource.length > 0) {\n        totalData = this.parent.dataSource.length;\n      }\n      if (totalData > 0) {\n        this.parent.isCustomFilter = totalData == this.parent.totalItemCount && this.parent.queryString != this.parent.typedString ? true : this.parent.isCustomFilter;\n      }\n    }\n    this.parent.resetList(dataSource, this.parent.fields, query);\n    this.parent.isCustomFilter = tempCustomFilter;\n  };\n  VirtualScroll.prototype.removeSkipAndTakeEvents = function (query) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    query.queries = query.queries.filter(function (event) {\n      return event.fn !== 'onSkip' && event.fn !== 'onTake';\n    });\n    return query;\n  };\n  VirtualScroll.prototype.setCurrentViewDataAsync = function () {\n    // eslint-disable-next-line\n    var currentData = [];\n    for (var i = this.parent.viewPortInfo.startIndex; i < this.parent.viewPortInfo.endIndex; i++) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      var alreadyAddedData = this.parent.generatedDataObject[i];\n      if (alreadyAddedData) {\n        currentData.push(alreadyAddedData[0]);\n      }\n    }\n    this.parent.renderItems(currentData, this.parent.fields);\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var virtualTrackElement = this.parent.list.getElementsByClassName('e-virtual-ddl')[0];\n    if (virtualTrackElement) {\n      virtualTrackElement.style = this.parent.GetVirtualTrackHeight();\n    }\n    this.parent.UpdateSkeleton();\n    this.parent.liCollections = this.parent.list.querySelectorAll('.e-list-item');\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var virtualContentElement = this.parent.list.getElementsByClassName('e-virtual-ddl-content')[0];\n    if (virtualContentElement) {\n      virtualContentElement.style = this.parent.getTransformValues();\n    }\n    if (this.parent.fields.groupBy) {\n      this.parent.scrollStop();\n    }\n  };\n  VirtualScroll.prototype.generateQueryAndSetQueryIndexAsync = function (query, isPopupOpen) {\n    var isStartIndexInitialised = false;\n    var queryStartIndex = 0;\n    var queryEndIndex = 0;\n    var sortedDataStartIndex = 0;\n    var vEndIndex = this.parent && this.parent.viewPortInfo.endIndex !== 0 ? this.parent.viewPortInfo.endIndex : sortedDataStartIndex + this.parent.getItems().length;\n    if (!isPopupOpen && vEndIndex !== 0) {\n      for (var i = this.parent.viewPortInfo.startIndex; i <= vEndIndex; i++) {\n        if (!(i in this.parent.generatedDataObject)) {\n          if (!isStartIndexInitialised) {\n            isStartIndexInitialised = true;\n            queryStartIndex = queryEndIndex = i;\n          } else {\n            queryEndIndex = i === vEndIndex ? i : i + 1;\n          }\n        }\n      }\n    }\n    if (isStartIndexInitialised && !(this.parent.totalItemCount == queryStartIndex && this.parent.totalItemCount == queryEndIndex)) {\n      this.parent.virtualItemStartIndex = queryStartIndex;\n      this.parent.virtualItemEndIndex = queryEndIndex;\n      this.generateAndExecuteQueryAsync(query, queryStartIndex, queryEndIndex);\n    }\n    this.setCurrentViewDataAsync();\n  };\n  VirtualScroll.prototype.dataProcessAsync = function (isOpenPopup) {\n    this.parent.selectedValueInfo = null;\n    this.parent.virtualItemStartIndex = this.parent.viewPortInfo.startIndex;\n    this.parent.virtualItemEndIndex = this.parent.viewPortInfo.endIndex;\n    this.generateQueryAndSetQueryIndexAsync(new Query(), isOpenPopup);\n  };\n  VirtualScroll.prototype.virtualScrollRefreshAsync = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            this.parent.isCustomFilter = !(this.parent.isTyped || this.component === 'combobox' && this.parent.allowFiltering && this.parent.queryString != this.parent.typedString || !isNullOrUndefined(this.parent.filterInput) && !isNullOrUndefined(this.parent.filterInput.value) && this.parent.filterInput.value !== '' && this.component !== 'combobox') && !(this.component === 'autocomplete' && this.parent.value != null) || this.parent.isCustomFilter;\n            if (this.parent.allowFiltering || this.component === 'autocomplete') {\n              if (!isNullOrUndefined(this.parent.typedString) && !(this.component === 'combobox' && !isNullOrUndefined(this.parent.typedString) && this.parent.allowFiltering)) {\n                if (this.parent.viewPortInfo.endIndex >= this.parent.dataCount) {\n                  this.parent.viewPortInfo.endIndex = this.parent.dataCount;\n                }\n                if (this.parent.viewPortInfo.startIndex >= this.parent.dataCount) {\n                  this.parent.viewPortInfo.startIndex = this.parent.dataCount - this.parent.itemCount;\n                }\n              } else {\n                this.parent.getSkeletonCount(true);\n                if (this.component === 'combobox') {\n                  this.parent.skeletonCount = this.parent.totalItemCount != 0 && this.parent.totalItemCount < this.parent.itemCount * 2 ? 0 : this.parent.skeletonCount;\n                }\n              }\n            }\n            return [4 /*yield*/, this.dataProcessAsync()];\n          case 1:\n            _a.sent();\n            if (this.parent.keyboardEvent != null) {\n              this.parent.handleVirtualKeyboardActions(this.parent.keyboardEvent, this.parent.pageCount);\n            }\n            this.parent.isCustomFilter = false;\n            return [2 /*return*/];\n        }\n      });\n    });\n  };\n\n  VirtualScroll.prototype.scrollListener = function (scrollArgs) {\n    var _this = this;\n    if (!this.parent.isPreventScrollAction) {\n      var info = scrollArgs.sentinel;\n      var pStartIndex = this.parent.previousStartIndex;\n      this.parent.viewPortInfo = this.getInfoFromView(scrollArgs.direction, info, scrollArgs.offset, false);\n      this.parent.isUpwardScrolling = false;\n      if (this.parent.previousStartIndex !== pStartIndex && !this.parent.isKeyBoardAction) {\n        this.parent.isScrollActionTriggered = false;\n        this.parent.currentPageNumber = this.parent.viewPortInfo.currentPageNumber;\n        this.parent.virtualListInfo = __assign({}, this.parent.viewPortInfo);\n        this.parent.isPreventKeyAction = true;\n        this.parent.isVirtualScrolling = true;\n        setTimeout(function () {\n          _this.parent.pageCount = _this.parent.getPageCount();\n          _this.virtualScrollRefreshAsync().then(function () {\n            if (_this.parent.popupObj) {\n              _this.parent.list = _this.parent.popupObj.element.querySelector('.' + 'e-content') || select('.' + 'e-content');\n              _this.parent.updateSelectionList();\n              _this.parent.liCollections = _this.parent.getItems();\n            }\n            _this.parent.isKeyBoardAction = false;\n            _this.parent.isVirtualScrolling = false;\n            _this.parent.isPreventKeyAction = false;\n          });\n        }, 5);\n      } else if (this.parent.isScrollActionTriggered) {\n        this.parent.isPreventKeyAction = false;\n        this.parent.isScrollActionTriggered = false;\n        var virtualListCount = this.parent.list.querySelectorAll('.e-virtual-list').length;\n        var listElement = this.parent.list.querySelector('.' + 'e-list-item');\n        var translateY = scrollArgs.offset.top - listElement.offsetHeight * virtualListCount;\n        this.parent.list.getElementsByClassName('e-virtual-ddl-content')[0].style.transform = \"translate(0px,\" + translateY + \"px)\";\n      }\n      this.parent.previousInfo = this.parent.viewPortInfo;\n    }\n  };\n  VirtualScroll.prototype.getPageCount = function (popupElement, returnExactCount) {\n    if (returnExactCount === void 0) {\n      returnExactCount = false;\n    }\n    var list = popupElement && popupElement.querySelector('.e-content');\n    if (list) {\n      var liHeight = list.classList.contains('e-nodata') ? null : getComputedStyle(list.querySelectorAll('.e-list-item')[0], null).getPropertyValue('height');\n      var pageCount = list.getBoundingClientRect().height / parseInt(liHeight, 10);\n      return returnExactCount ? pageCount : Math.round(pageCount);\n    }\n    return 0;\n  };\n  VirtualScroll.prototype.getRowHeight = function () {\n    return isNullOrUndefined(this.parent.liCollections) || this.parent.liCollections.length == 0 ? 0 : Math.ceil(this.parent.liCollections[0].getBoundingClientRect().height);\n  };\n  VirtualScroll.prototype.getInfoFromView = function (direction, info, e, isscrollAction) {\n    var infoType = {\n      direction: direction,\n      sentinelInfo: info,\n      offsets: e,\n      startIndex: this.parent.previousStartIndex,\n      endIndex: this.parent.previousEndIndex\n    };\n    var vHeight = this.parent.popupContentElement.getBoundingClientRect().height;\n    //Row Start and End Index calculation\n    var rowHeight = this.parent.listItemHeight;\n    var exactTopIndex = e.top / rowHeight;\n    var infoViewIndices = vHeight / rowHeight;\n    var exactEndIndex = exactTopIndex + infoViewIndices;\n    var pageSizeBy4 = this.parent.virtualItemCount / 4;\n    var totalItemCount = this.parent.totalItemCount;\n    if (infoType.direction === 'down') {\n      var sIndex = Math.round(exactEndIndex) - Math.round(pageSizeBy4);\n      if (isNullOrUndefined(infoType.startIndex) || exactEndIndex > infoType.startIndex + Math.round(this.parent.virtualItemCount / 2 + pageSizeBy4) && infoType.endIndex !== totalItemCount) {\n        infoType.startIndex = sIndex >= 0 ? Math.round(sIndex) : 0;\n        infoType.startIndex = infoType.startIndex > exactTopIndex ? Math.floor(exactTopIndex) : infoType.startIndex;\n        var eIndex = infoType.startIndex + this.parent.virtualItemCount;\n        infoType.startIndex = eIndex < exactEndIndex ? Math.ceil(exactEndIndex) - this.parent.virtualItemCount : infoType.startIndex;\n        infoType.endIndex = eIndex < totalItemCount ? eIndex : totalItemCount;\n        infoType.startIndex = eIndex >= totalItemCount ? infoType.endIndex - this.parent.virtualItemCount > 0 ? infoType.endIndex - this.parent.virtualItemCount : 0 : infoType.startIndex;\n        infoType.currentPageNumber = Math.ceil(infoType.endIndex / this.parent.virtualItemCount);\n      }\n    } else if (infoType.direction === 'up') {\n      if (infoType.startIndex && infoType.endIndex) {\n        var loadAtIndex = Math.round((infoType.startIndex * rowHeight + pageSizeBy4 * rowHeight) / rowHeight);\n        if (exactTopIndex < loadAtIndex) {\n          var idxAddedToExactTop = pageSizeBy4 > infoViewIndices ? pageSizeBy4 : infoViewIndices + infoViewIndices / 4;\n          var eIndex = Math.round(exactTopIndex + idxAddedToExactTop);\n          infoType.endIndex = eIndex < totalItemCount ? eIndex : totalItemCount;\n          var sIndex = infoType.endIndex - this.parent.virtualItemCount;\n          infoType.startIndex = sIndex > 0 ? sIndex : 0;\n          infoType.endIndex = sIndex < 0 ? this.parent.virtualItemCount : infoType.endIndex;\n          infoType.currentPageNumber = Math.ceil(infoType.startIndex / this.parent.virtualItemCount);\n        }\n      }\n    }\n    if (!isscrollAction) {\n      this.parent.previousStartIndex = infoType.startIndex;\n      this.parent.startIndex = infoType.startIndex;\n      this.parent.previousEndIndex = infoType.endIndex;\n    } else {\n      this.parent.scrollPreStartIndex = infoType.startIndex;\n    }\n    return infoType;\n  };\n  VirtualScroll.prototype.virtualScrollHandler = function (callback) {\n    var _this = this;\n    var delay = Browser.info.name === 'chrome' ? 200 : 100;\n    var prevTop = 0;\n    var debounced100 = debounce(callback, delay);\n    var debounced50 = debounce(callback, 50);\n    return function (e) {\n      var top = e.target.scrollTop;\n      var left = e.target.scrollLeft;\n      var direction = prevTop < top && !_this.parent.isUpwardScrolling ? 'down' : 'up';\n      prevTop = top;\n      var current = _this.sentinelInfo[direction];\n      var pstartIndex = _this.parent.scrollPreStartIndex;\n      var scrollOffsetargs = {\n        top: top,\n        left: left\n      };\n      if (_this.parent.list.querySelectorAll('.e-virtual-list').length > 0) {\n        var infoview = _this.getInfoFromView(direction, current, scrollOffsetargs, true);\n        if (_this.parent.scrollPreStartIndex != pstartIndex && !_this.parent.isPreventScrollAction) {\n          _this.parent.isScrollActionTriggered = true;\n          var virtualPoup = _this.parent.list.querySelector('.e-virtual-ddl-content');\n          virtualPoup.style.transform = \"translate(0px,\" + top + \"px)\";\n        }\n      }\n      var debounceFunction = debounced100;\n      if (current.axis === 'X') {\n        debounceFunction = debounced50;\n      }\n      debounceFunction({\n        direction: direction,\n        sentinel: current,\n        offset: {\n          top: top,\n          left: left\n        },\n        focusElement: document.activeElement\n      });\n    };\n  };\n  VirtualScroll.prototype.destroy = function () {\n    this.removeEventListener();\n  };\n  return VirtualScroll;\n}();\n\n/**\n * Common source\n */\n\nvar __extends = undefined && undefined.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar FieldSettings = /** @__PURE__ @class */function (_super) {\n  __extends(FieldSettings, _super);\n  function FieldSettings() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  __decorate([Property()], FieldSettings.prototype, \"text\", void 0);\n  __decorate([Property()], FieldSettings.prototype, \"value\", void 0);\n  __decorate([Property()], FieldSettings.prototype, \"iconCss\", void 0);\n  __decorate([Property()], FieldSettings.prototype, \"groupBy\", void 0);\n  __decorate([Property()], FieldSettings.prototype, \"htmlAttributes\", void 0);\n  return FieldSettings;\n}(ChildProperty);\nvar dropDownBaseClasses = {\n  root: 'e-dropdownbase',\n  rtl: 'e-rtl',\n  content: 'e-content',\n  selected: 'e-active',\n  hover: 'e-hover',\n  noData: 'e-nodata',\n  fixedHead: 'e-fixed-head',\n  focus: 'e-item-focus',\n  li: 'e-list-item',\n  group: 'e-list-group-item',\n  disabled: 'e-disabled',\n  grouping: 'e-dd-group'\n};\nvar ITEMTEMPLATE_PROPERTY = 'ItemTemplate';\nvar DISPLAYTEMPLATE_PROPERTY = 'DisplayTemplate';\nvar SPINNERTEMPLATE_PROPERTY = 'SpinnerTemplate';\nvar VALUETEMPLATE_PROPERTY = 'ValueTemplate';\nvar GROUPTEMPLATE_PROPERTY = 'GroupTemplate';\nvar HEADERTEMPLATE_PROPERTY = 'HeaderTemplate';\nvar FOOTERTEMPLATE_PROPERTY = 'FooterTemplate';\nvar NORECORDSTEMPLATE_PROPERTY = 'NoRecordsTemplate';\nvar ACTIONFAILURETEMPLATE_PROPERTY = 'ActionFailureTemplate';\nvar HIDE_GROUPLIST = 'e-hide-group-header';\n/**\n * DropDownBase component will generate the list items based on given data and act as base class to drop-down related components\n */\nvar DropDownBase = /** @__PURE__ @class */function (_super) {\n  __extends(DropDownBase, _super);\n  /**\n   * * Constructor for DropDownBase class\n   *\n   * @param {DropDownBaseModel} options - Specifies the DropDownBase model.\n   * @param {string | HTMLElement} element - Specifies the element to render as component.\n   * @private\n   */\n  function DropDownBase(options, element) {\n    var _this = _super.call(this, options, element) || this;\n    _this.preventChange = false;\n    _this.isAngular = false;\n    _this.isPreventChange = false;\n    _this.isDynamicDataChange = false;\n    _this.addedNewItem = false;\n    _this.isAddNewItemTemplate = false;\n    _this.isRequesting = false;\n    _this.isVirtualizationEnabled = false;\n    _this.isAllowFiltering = false;\n    _this.virtualizedItemsCount = 0;\n    _this.totalItemCount = 0;\n    _this.dataCount = 0;\n    _this.isRemoteDataUpdated = false;\n    _this.isIncrementalRequest = false;\n    _this.itemCount = 10;\n    return _this;\n  }\n  DropDownBase.prototype.getPropObject = function (prop, newProp, oldProp) {\n    var newProperty = new Object();\n    var oldProperty = new Object();\n    var propName = function (prop) {\n      return prop;\n    };\n    newProperty[propName(prop)] = newProp[propName(prop)];\n    oldProperty[propName(prop)] = oldProp[propName(prop)];\n    var data = new Object();\n    data.newProperty = newProperty;\n    data.oldProperty = oldProperty;\n    return data;\n  };\n  DropDownBase.prototype.getValueByText = function (text, ignoreCase, ignoreAccent) {\n    var value = null;\n    if (!isNullOrUndefined(this.listData)) {\n      if (ignoreCase) {\n        value = this.checkValueCase(text, true, ignoreAccent);\n      } else {\n        value = this.checkValueCase(text, false, ignoreAccent);\n      }\n    }\n    return value;\n  };\n  DropDownBase.prototype.checkValueCase = function (text, ignoreCase, ignoreAccent, isTextByValue) {\n    var _this = this;\n    var value = null;\n    if (isTextByValue) {\n      value = text;\n    }\n    var dataSource = this.listData;\n    var fields = this.fields;\n    var type = this.typeOfData(dataSource).typeof;\n    if (type === 'string' || type === 'number' || type === 'boolean') {\n      for (var _i = 0, dataSource_1 = dataSource; _i < dataSource_1.length; _i++) {\n        var item = dataSource_1[_i];\n        if (!isNullOrUndefined(item)) {\n          if (ignoreAccent) {\n            value = this.checkingAccent(String(item), text, ignoreCase);\n          } else {\n            if (ignoreCase) {\n              if (this.checkIgnoreCase(String(item), text)) {\n                value = this.getItemValue(String(item), text, ignoreCase);\n              }\n            } else {\n              if (this.checkNonIgnoreCase(String(item), text)) {\n                value = this.getItemValue(String(item), text, ignoreCase, isTextByValue);\n              }\n            }\n          }\n        }\n      }\n    } else {\n      if (ignoreCase) {\n        dataSource.filter(function (item) {\n          var itemValue = getValue(fields.value, item);\n          if (!isNullOrUndefined(itemValue) && _this.checkIgnoreCase(getValue(fields.text, item).toString(), text)) {\n            value = getValue(fields.value, item);\n          }\n        });\n      } else {\n        if (isTextByValue) {\n          var compareValue_1 = null;\n          compareValue_1 = value;\n          dataSource.filter(function (item) {\n            var itemValue = getValue(fields.value, item);\n            if (!isNullOrUndefined(itemValue) && !isNullOrUndefined(value) && itemValue.toString() === compareValue_1.toString()) {\n              value = getValue(fields.text, item);\n            }\n          });\n        } else {\n          dataSource.filter(function (item) {\n            if (_this.checkNonIgnoreCase(getValue(fields.text, item), text)) {\n              value = getValue(fields.value, item);\n            }\n          });\n        }\n      }\n    }\n    return value;\n  };\n  DropDownBase.prototype.checkingAccent = function (item, text, ignoreCase) {\n    var dataItem = DataUtil.ignoreDiacritics(String(item));\n    var textItem = DataUtil.ignoreDiacritics(text.toString());\n    var value = null;\n    if (ignoreCase) {\n      if (this.checkIgnoreCase(dataItem, textItem)) {\n        value = this.getItemValue(String(item), text, ignoreCase);\n      }\n    } else {\n      if (this.checkNonIgnoreCase(String(item), text)) {\n        value = this.getItemValue(String(item), text, ignoreCase);\n      }\n    }\n    return value;\n  };\n  DropDownBase.prototype.checkIgnoreCase = function (item, text) {\n    return String(item).toLowerCase() === text.toString().toLowerCase() ? true : false;\n  };\n  DropDownBase.prototype.checkNonIgnoreCase = function (item, text) {\n    return String(item) === text.toString() ? true : false;\n  };\n  DropDownBase.prototype.getItemValue = function (dataItem, typedText, ignoreCase, isTextByValue) {\n    var value = null;\n    var dataSource = this.listData;\n    var type = this.typeOfData(dataSource).typeof;\n    if (isTextByValue) {\n      value = dataItem.toString();\n    } else {\n      if (ignoreCase) {\n        value = type === 'string' ? String(dataItem) : this.getFormattedValue(String(dataItem));\n      } else {\n        value = type === 'string' ? typedText : this.getFormattedValue(typedText);\n      }\n    }\n    return value;\n  };\n  DropDownBase.prototype.templateCompiler = function (baseTemplate) {\n    var checkTemplate = false;\n    if (typeof baseTemplate !== 'function' && baseTemplate) {\n      try {\n        checkTemplate = selectAll(baseTemplate, document).length ? true : false;\n      } catch (exception) {\n        checkTemplate = false;\n      }\n    }\n    return checkTemplate;\n  };\n  DropDownBase.prototype.l10nUpdate = function (actionFailure) {\n    var ele = this.getModuleName() === 'listbox' ? this.ulElement : this.list;\n    if (this.noRecordsTemplate !== 'No records found' || this.actionFailureTemplate !== 'Request failed') {\n      var template = actionFailure ? this.actionFailureTemplate : this.noRecordsTemplate;\n      var compiledString = void 0;\n      var templateId = actionFailure ? this.actionFailureTemplateId : this.noRecordsTemplateId;\n      ele.innerHTML = '';\n      var tempaltecheck = this.templateCompiler(template);\n      if (typeof template !== 'function' && tempaltecheck) {\n        compiledString = compile(select(template, document).innerHTML.trim());\n      } else {\n        compiledString = compile(template);\n      }\n      var templateName = actionFailure ? 'actionFailureTemplate' : 'noRecordsTemplate';\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      var noDataElement = void 0;\n      if (this.isReact && typeof template === 'function') {\n        noDataElement = compiledString({}, this, templateName, templateId, this.isStringTemplate, null);\n      } else {\n        noDataElement = compiledString({}, this, templateName, templateId, this.isStringTemplate, null, ele);\n      }\n      if (noDataElement && noDataElement.length > 0) {\n        for (var i = 0; i < noDataElement.length; i++) {\n          if (this.getModuleName() === 'listbox' && templateName === 'noRecordsTemplate') {\n            if (noDataElement[i].nodeName === '#text') {\n              var liElem = this.createElement('li');\n              liElem.textContent = noDataElement[i].textContent;\n              liElem.classList.add('e-list-nrt');\n              liElem.setAttribute('role', 'option');\n              ele.appendChild(liElem);\n            } else {\n              noDataElement[i].classList.add('e-list-nr-template');\n              ele.appendChild(noDataElement[i]);\n            }\n          } else {\n            if (noDataElement[i] instanceof HTMLElement) {\n              ele.appendChild(noDataElement[i]);\n            }\n          }\n        }\n      }\n      this.renderReactTemplates();\n    } else {\n      var l10nLocale = {\n        noRecordsTemplate: 'No records found',\n        actionFailureTemplate: 'Request failed'\n      };\n      var componentLocale = new L10n(this.getLocaleName(), {}, this.locale);\n      if (componentLocale.getConstant('actionFailureTemplate') !== '' || componentLocale.getConstant('noRecordsTemplate') !== '') {\n        this.l10n = componentLocale;\n      } else {\n        this.l10n = new L10n(this.getModuleName() === 'listbox' ? 'listbox' : this.getModuleName() === 'mention' ? 'mention' : 'dropdowns', l10nLocale, this.locale);\n      }\n      var content = actionFailure ? this.l10n.getConstant('actionFailureTemplate') : this.l10n.getConstant('noRecordsTemplate');\n      if (this.getModuleName() === 'listbox') {\n        var liElem = this.createElement('li');\n        liElem.textContent = content;\n        ele.appendChild(liElem);\n        liElem.classList.add('e-list-nrt');\n        liElem.setAttribute('role', 'option');\n      } else {\n        if (!isNullOrUndefined(ele)) {\n          ele.innerHTML = content;\n        }\n      }\n    }\n  };\n  DropDownBase.prototype.getLocaleName = function () {\n    return 'drop-down-base';\n  };\n  DropDownBase.prototype.getTextByValue = function (value) {\n    var text = this.checkValueCase(value, false, false, true);\n    return text;\n  };\n  DropDownBase.prototype.getFormattedValue = function (value) {\n    if (this.listData && this.listData.length) {\n      var item = void 0;\n      if (this.properties.allowCustomValue && this.properties.value && this.properties.value instanceof Array && this.properties.value.length > 0) {\n        item = this.typeOfData(this.properties.value);\n      } else {\n        item = this.typeOfData(this.listData);\n      }\n      if (typeof getValue(this.fields.value ? this.fields.value : 'value', item.item) === 'number' || item.typeof === 'number') {\n        return parseFloat(value);\n      }\n      if (typeof getValue(this.fields.value ? this.fields.value : 'value', item.item) === 'boolean' || item.typeof === 'boolean') {\n        return value === 'true' || '' + value === 'true';\n      }\n    }\n    return value;\n  };\n  /**\n   * Sets RTL to dropdownbase wrapper\n   *\n   * @returns {void}\n   */\n  DropDownBase.prototype.setEnableRtl = function () {\n    if (!isNullOrUndefined(this.enableRtlElements)) {\n      if (this.list) {\n        this.enableRtlElements.push(this.list);\n      }\n      if (this.enableRtl) {\n        addClass(this.enableRtlElements, dropDownBaseClasses.rtl);\n      } else {\n        removeClass(this.enableRtlElements, dropDownBaseClasses.rtl);\n      }\n    }\n  };\n  /**\n   * Initialize the Component.\n   *\n   * @returns {void}\n   */\n  DropDownBase.prototype.initialize = function (e) {\n    this.bindEvent = true;\n    this.actionFailureTemplateId = \"\" + this.element.id + ACTIONFAILURETEMPLATE_PROPERTY;\n    if (this.element.tagName === 'UL') {\n      var jsonElement = ListBase.createJsonFromElement(this.element);\n      this.setProperties({\n        fields: {\n          text: 'text',\n          value: 'text'\n        }\n      }, true);\n      this.resetList(jsonElement, this.fields);\n    } else if (this.element.tagName === 'SELECT') {\n      var dataSource = this.dataSource instanceof Array ? this.dataSource.length > 0 ? true : false : !isNullOrUndefined(this.dataSource) ? true : false;\n      if (!dataSource) {\n        this.renderItemsBySelect();\n      } else if (this.isDynamicDataChange) {\n        this.setListData(this.dataSource, this.fields, this.query);\n      }\n    } else {\n      this.setListData(this.dataSource, this.fields, this.query, e);\n    }\n  };\n  /**\n   * Get the properties to be maintained in persisted state.\n   *\n   * @returns {string} Returns the persisted data of the component.\n   */\n  DropDownBase.prototype.getPersistData = function () {\n    return this.addOnPersist([]);\n  };\n  /**\n   * Sets the enabled state to DropDownBase.\n   *\n   * @param {string} value - Specifies the attribute values to add on the input element.\n   * @returns {void}\n   */\n  DropDownBase.prototype.updateDataAttribute = function (value) {\n    var invalidAttr = ['class', 'style', 'id', 'type', 'aria-expanded', 'aria-autocomplete', 'aria-readonly'];\n    var attr = {};\n    for (var a = 0; a < this.element.attributes.length; a++) {\n      if (invalidAttr.indexOf(this.element.attributes[a].name) === -1 && !(this.getModuleName() === 'dropdownlist' && this.element.attributes[a].name === 'readonly')) {\n        attr[this.element.attributes[a].name] = this.element.getAttribute(this.element.attributes[a].name);\n      }\n    }\n    extend(attr, value, attr);\n    this.setProperties({\n      htmlAttributes: attr\n    }, true);\n  };\n  DropDownBase.prototype.renderItemsBySelect = function () {\n    var element = this.element;\n    var fields = {\n      value: 'value',\n      text: 'text'\n    };\n    var jsonElement = [];\n    var group = element.querySelectorAll('select>optgroup');\n    var option = element.querySelectorAll('select>option');\n    this.getJSONfromOption(jsonElement, option, fields);\n    if (group.length) {\n      for (var i = 0; i < group.length; i++) {\n        var item = group[i];\n        var optionGroup = {};\n        optionGroup[fields.text] = item.label;\n        optionGroup.isHeader = true;\n        var child = item.querySelectorAll('option');\n        jsonElement.push(optionGroup);\n        this.getJSONfromOption(jsonElement, child, fields);\n      }\n      element.querySelectorAll('select>option');\n    }\n    this.updateFields(fields.text, fields.value, this.fields.groupBy, this.fields.htmlAttributes, this.fields.iconCss);\n    this.resetList(jsonElement, fields);\n  };\n  DropDownBase.prototype.updateFields = function (text, value, groupBy, htmlAttributes, iconCss) {\n    var field = {\n      'fields': {\n        text: text,\n        value: value,\n        groupBy: !isNullOrUndefined(groupBy) ? groupBy : this.fields && this.fields.groupBy,\n        htmlAttributes: !isNullOrUndefined(htmlAttributes) ? htmlAttributes : this.fields && this.fields.htmlAttributes,\n        iconCss: !isNullOrUndefined(iconCss) ? iconCss : this.fields && this.fields.iconCss\n      }\n    };\n    this.setProperties(field, true);\n  };\n  DropDownBase.prototype.getJSONfromOption = function (items, options, fields) {\n    for (var _i = 0, options_1 = options; _i < options_1.length; _i++) {\n      var option = options_1[_i];\n      var json = {};\n      json[fields.text] = option.innerText;\n      json[fields.value] = !isNullOrUndefined(option.getAttribute(fields.value)) ? option.getAttribute(fields.value) : option.innerText;\n      items.push(json);\n    }\n  };\n  /**\n   * Execute before render the list items\n   *\n   * @private\n   * @returns {void}\n   */\n  DropDownBase.prototype.preRender = function () {\n    // there is no event handler\n    this.scrollTimer = -1;\n    this.enableRtlElements = [];\n    this.isRequested = false;\n    this.isDataFetched = false;\n    this.itemTemplateId = \"\" + this.element.id + ITEMTEMPLATE_PROPERTY;\n    this.displayTemplateId = \"\" + this.element.id + DISPLAYTEMPLATE_PROPERTY;\n    this.spinnerTemplateId = \"\" + this.element.id + SPINNERTEMPLATE_PROPERTY;\n    this.valueTemplateId = \"\" + this.element.id + VALUETEMPLATE_PROPERTY;\n    this.groupTemplateId = \"\" + this.element.id + GROUPTEMPLATE_PROPERTY;\n    this.headerTemplateId = \"\" + this.element.id + HEADERTEMPLATE_PROPERTY;\n    this.footerTemplateId = \"\" + this.element.id + FOOTERTEMPLATE_PROPERTY;\n    this.noRecordsTemplateId = \"\" + this.element.id + NORECORDSTEMPLATE_PROPERTY;\n  };\n  /**\n   * Creates the list items of DropDownBase component.\n   *\n   * @param {Object[] | string[] | number[] | DataManager | boolean[]} dataSource - Specifies the data to generate the list.\n   * @param {FieldSettingsModel} fields - Maps the columns of the data table and binds the data to the component.\n   * @param {Query} query - Accepts the external Query that execute along with data processing.\n   * @returns {void}\n   */\n  DropDownBase.prototype.setListData = function (dataSource, fields, query, event) {\n    var _this = this;\n    fields = fields ? fields : this.fields;\n    var ulElement;\n    this.isActive = true;\n    var eventArgs = {\n      cancel: false,\n      data: dataSource,\n      query: query\n    };\n    this.isPreventChange = this.isAngular && this.preventChange ? true : this.isPreventChange;\n    if (!this.isRequesting) {\n      this.trigger('actionBegin', eventArgs, function (eventArgs) {\n        if (!eventArgs.cancel) {\n          _this.isRequesting = true;\n          _this.showSpinner();\n          if (dataSource instanceof DataManager && !_this.virtualGroupDataSource) {\n            _this.isRequested = true;\n            if (_this.isDataFetched) {\n              _this.emptyDataRequest(fields);\n              return;\n            }\n            eventArgs.data.executeQuery(_this.getQuery(eventArgs.query)).then(function (e) {\n              _this.isPreventChange = _this.isAngular && _this.preventChange ? true : _this.isPreventChange;\n              _this.trigger('actionComplete', e, function (e) {\n                if (!_this.virtualGroupDataSource && _this.isVirtualizationEnabled) {\n                  _this.isRemoteDataUpdated = true;\n                  if (_this.getModuleName() === 'combobox' && _this.isAllowFiltering && _this.isVirtualizationEnabled && e.result) {\n                    e.result = e.result.result;\n                  }\n                  if (e.result.length > 0) {\n                    var dataSource_2 = e.result;\n                    if (_this.isVirtualizationEnabled && _this.fields.groupBy) {\n                      var data = new DataManager(dataSource_2).executeLocal(new Query().group(_this.fields.groupBy));\n                      _this.virtualGroupDataSource = data.records;\n                    } else {\n                      _this.virtualGroupDataSource = dataSource_2;\n                      _this.hideSpinner();\n                      _this.isRequested = false;\n                      _this.isRequesting = false;\n                      _this.setListData(dataSource_2, fields, query, event);\n                      return;\n                    }\n                  }\n                  _this.hideSpinner();\n                  _this.isRequested = false;\n                  _this.isRequesting = false;\n                  _this.updatePopupState();\n                  return;\n                }\n                if (!e.cancel) {\n                  _this.isRequesting = false;\n                  var listItems = e.result;\n                  if (_this.isIncrementalRequest) {\n                    ulElement = _this.renderItems(listItems, fields);\n                    return;\n                  }\n                  if (listItems.length === 0) {\n                    _this.isDataFetched = true;\n                  }\n                  _this.dataCount = e.count;\n                  _this.totalItemCount = e.count;\n                  ulElement = _this.renderItems(listItems, fields);\n                  _this.onActionComplete(ulElement, listItems, e);\n                  if (_this.groupTemplate) {\n                    _this.renderGroupTemplate(ulElement);\n                  }\n                  _this.isRequested = false;\n                  _this.bindChildItems(listItems, ulElement, fields, e);\n                }\n              });\n            }).catch(function (e) {\n              _this.isRequested = false;\n              _this.isRequesting = false;\n              _this.onActionFailure(e);\n              _this.hideSpinner();\n            });\n          } else {\n            _this.isRequesting = false;\n            var listItems = void 0;\n            if (_this.isVirtualizationEnabled && !_this.virtualGroupDataSource && _this.fields.groupBy) {\n              var data = new DataManager(_this.dataSource).executeLocal(new Query().group(_this.fields.groupBy));\n              _this.virtualGroupDataSource = data.records;\n            }\n            var dataManager = _this.isVirtualizationEnabled && _this.virtualGroupDataSource ? new DataManager(_this.virtualGroupDataSource) : new DataManager(eventArgs.data);\n            listItems = _this.getQuery(eventArgs.query).executeLocal(dataManager);\n            if (_this.isVirtualizationEnabled && _this.getModuleName() === 'autocomplete' && listItems.count != 0 && listItems.count < _this.itemCount * 2) {\n              var newQuery = _this.getQuery(eventArgs.query);\n              if (newQuery) {\n                for (var queryElements = 0; queryElements < newQuery.queries.length; queryElements++) {\n                  if (newQuery.queries[queryElements].fn === 'onTake') {\n                    newQuery.queries[queryElements].e.nos = listItems.count;\n                    listItems = newQuery.executeLocal(dataManager);\n                    break;\n                  }\n                }\n              }\n            }\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            _this.dataCount = listItems.count;\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            _this.totalItemCount = listItems.count;\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            listItems = _this.isVirtualizationEnabled ? listItems.result : listItems;\n            var localDataArgs = {\n              cancel: false,\n              result: listItems\n            };\n            _this.isPreventChange = _this.isAngular && _this.preventChange ? true : _this.isPreventChange;\n            _this.trigger('actionComplete', localDataArgs, function (localDataArgs) {\n              if (_this.isIncrementalRequest) {\n                ulElement = _this.renderItems(localDataArgs.result, fields);\n                return;\n              }\n              if (!localDataArgs.cancel) {\n                ulElement = _this.renderItems(localDataArgs.result, fields);\n                _this.onActionComplete(ulElement, localDataArgs.result, event);\n                if (_this.groupTemplate) {\n                  _this.renderGroupTemplate(ulElement);\n                }\n                _this.bindChildItems(localDataArgs.result, ulElement, fields);\n                setTimeout(function () {\n                  if (_this.getModuleName() === 'multiselect' && _this.itemTemplate != null && ulElement.childElementCount > 0 && (ulElement.children[0].childElementCount > 0 || _this.fields.groupBy && ulElement.children[1] && ulElement.children[1].childElementCount > 0)) {\n                    _this.updateDataList();\n                  }\n                });\n              }\n            });\n          }\n        }\n      });\n    }\n  };\n  DropDownBase.prototype.updatePopupState = function () {\n    // Used this method in component side.\n  };\n  DropDownBase.prototype.updateRemoteData = function () {\n    this.setListData(this.dataSource, this.fields, this.query);\n  };\n  DropDownBase.prototype.bindChildItems = function (listItems, ulElement, fields, e) {\n    var _this = this;\n    if (listItems.length >= 100 && this.getModuleName() === 'autocomplete') {\n      setTimeout(function () {\n        var childNode = _this.remainingItems(_this.sortedData, fields);\n        append(childNode, ulElement);\n        _this.liCollections = _this.list.querySelectorAll('.' + dropDownBaseClasses.li);\n        _this.updateListValues();\n        _this.raiseDataBound(listItems, e);\n      }, 0);\n    } else {\n      this.raiseDataBound(listItems, e);\n    }\n  };\n  DropDownBase.prototype.updateListValues = function () {\n    // Used this method in component side.\n  };\n  DropDownBase.prototype.findListElement = function (list, findNode, attribute, value) {\n    var liElement = null;\n    if (list) {\n      var listArr = [].slice.call(list.querySelectorAll(findNode));\n      for (var index = 0; index < listArr.length; index++) {\n        if (listArr[index].getAttribute(attribute) === value + '') {\n          liElement = listArr[index];\n          break;\n        }\n      }\n    }\n    return liElement;\n  };\n  DropDownBase.prototype.raiseDataBound = function (listItems, e) {\n    this.hideSpinner();\n    var dataBoundEventArgs = {\n      items: listItems,\n      e: e\n    };\n    this.trigger('dataBound', dataBoundEventArgs);\n  };\n  DropDownBase.prototype.remainingItems = function (dataSource, fields) {\n    var spliceData = new DataManager(dataSource).executeLocal(new Query().skip(100));\n    if (this.itemTemplate) {\n      var listElements = this.templateListItem(spliceData, fields);\n      return [].slice.call(listElements.childNodes);\n    }\n    var type = this.typeOfData(spliceData).typeof;\n    if (type === 'string' || type === 'number' || type === 'boolean') {\n      return ListBase.createListItemFromArray(this.createElement, spliceData, true, this.listOption(spliceData, fields), this);\n    }\n    return ListBase.createListItemFromJson(this.createElement, spliceData, this.listOption(spliceData, fields), 1, true, this);\n  };\n  DropDownBase.prototype.emptyDataRequest = function (fields) {\n    var listItems = [];\n    this.onActionComplete(this.renderItems(listItems, fields), listItems);\n    this.isRequested = false;\n    this.hideSpinner();\n  };\n  DropDownBase.prototype.showSpinner = function () {\n    // Used this method in component side.\n  };\n  DropDownBase.prototype.hideSpinner = function () {\n    // Used this method in component side.\n  };\n  DropDownBase.prototype.onActionFailure = function (e) {\n    this.liCollections = [];\n    this.trigger('actionFailure', e);\n    this.l10nUpdate(true);\n    if (!isNullOrUndefined(this.list)) {\n      addClass([this.list], dropDownBaseClasses.noData);\n    }\n  };\n  /* eslint-disable @typescript-eslint/no-unused-vars */\n  DropDownBase.prototype.onActionComplete = function (ulElement, list, e) {\n    /* eslint-enable @typescript-eslint/no-unused-vars */\n    this.listData = list;\n    if (this.isVirtualizationEnabled) {\n      this.notify(\"setGeneratedData\", {\n        module: \"VirtualScroll\"\n      });\n    }\n    if (this.getModuleName() !== 'listbox') {\n      ulElement.setAttribute('tabindex', '0');\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    if (this.isReact) {\n      this.clearTemplate(['itemTemplate', 'groupTemplate', 'actionFailureTemplate', 'noRecordsTemplate']);\n    }\n    if (!this.isVirtualizationEnabled) {\n      this.fixedHeaderElement = isNullOrUndefined(this.fixedHeaderElement) ? this.fixedHeaderElement : null;\n    }\n    if (this.getModuleName() === 'multiselect' && this.properties.allowCustomValue && this.fields.groupBy) {\n      for (var i = 0; i < ulElement.childElementCount; i++) {\n        if (ulElement.children[i].classList.contains('e-list-group-item')) {\n          if (isNullOrUndefined(ulElement.children[i].innerHTML) || ulElement.children[i].innerHTML == \"\") {\n            addClass([ulElement.children[i]], HIDE_GROUPLIST);\n          }\n        }\n      }\n    }\n    if (!isNullOrUndefined(this.list)) {\n      if (!this.isVirtualizationEnabled) {\n        this.list.innerHTML = '';\n        this.list.appendChild(ulElement);\n        this.liCollections = this.list.querySelectorAll('.' + dropDownBaseClasses.li);\n        this.ulElement = this.list.querySelector('ul');\n        this.postRender(this.list, list, this.bindEvent);\n      }\n    }\n  };\n  /* eslint-disable @typescript-eslint/no-unused-vars */\n  DropDownBase.prototype.postRender = function (listElement, list, bindEvent) {\n    /* eslint-enable @typescript-eslint/no-unused-vars */\n    var focusItem = listElement.querySelector('.' + dropDownBaseClasses.li);\n    var selectedItem = listElement.querySelector('.' + dropDownBaseClasses.selected);\n    if (focusItem && !selectedItem) {\n      focusItem.classList.add(dropDownBaseClasses.focus);\n    }\n    if (list.length <= 0) {\n      this.l10nUpdate();\n      addClass([listElement], dropDownBaseClasses.noData);\n    } else {\n      listElement.classList.remove(dropDownBaseClasses.noData);\n    }\n  };\n  /**\n   * Get the query to do the data operation before list item generation.\n   *\n   * @param {Query} query - Accepts the external Query that execute along with data processing.\n   * @returns {Query} Returns the query to do the data query operation.\n   */\n  DropDownBase.prototype.getQuery = function (query) {\n    return query ? query : this.query ? this.query : new Query();\n  };\n  DropDownBase.prototype.updateVirtualizationProperties = function (itemCount, filtering) {\n    this.isVirtualizationEnabled = true;\n    this.virtualizedItemsCount = itemCount;\n    this.isAllowFiltering = filtering;\n  };\n  /**\n   * To render the template content for group header element.\n   *\n   * @param {HTMLElement} listEle - Specifies the group list elements.\n   * @returns {void}\n   */\n  DropDownBase.prototype.renderGroupTemplate = function (listEle) {\n    if (this.fields.groupBy !== null && this.dataSource || this.element.querySelector('.' + dropDownBaseClasses.group)) {\n      var dataSource = this.dataSource;\n      var option = {\n        groupTemplateID: this.groupTemplateId,\n        isStringTemplate: this.isStringTemplate\n      };\n      var headerItems = listEle.querySelectorAll('.' + dropDownBaseClasses.group);\n      var groupcheck = this.templateCompiler(this.groupTemplate);\n      if (typeof this.groupTemplate !== 'function' && groupcheck) {\n        var groupValue = select(this.groupTemplate, document).innerHTML.trim();\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        var tempHeaders = ListBase.renderGroupTemplate(groupValue, dataSource, this.fields.properties, headerItems, option, this);\n        //EJ2-55168- Group checkbox is not working with group template\n        if (this.isGroupChecking) {\n          for (var i = 0; i < tempHeaders.length; i++) {\n            this.notify('addItem', {\n              module: 'CheckBoxSelection',\n              item: tempHeaders[i]\n            });\n          }\n        }\n      } else {\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        var tempHeaders = ListBase.renderGroupTemplate(this.groupTemplate, dataSource, this.fields.properties, headerItems, option, this);\n        //EJ2-55168- Group checkbox is not working with group template\n        if (this.isGroupChecking) {\n          for (var i = 0; i < tempHeaders.length; i++) {\n            this.notify('addItem', {\n              module: 'CheckBoxSelection',\n              item: tempHeaders[i]\n            });\n          }\n        }\n      }\n      this.renderReactTemplates();\n    }\n  };\n  /**\n   * To create the ul li list items\n   *\n   * @param {object []} dataSource - Specifies the data to generate the list.\n   * @param {FieldSettingsModel} fields - Maps the columns of the data table and binds the data to the component.\n   * @returns {HTMLElement} Return the ul li list items.\n   */\n  DropDownBase.prototype.createListItems = function (dataSource, fields) {\n    if (dataSource) {\n      if (fields.groupBy || this.element.querySelector('optgroup')) {\n        if (fields.groupBy) {\n          if (this.sortOrder !== 'None') {\n            dataSource = this.getSortedDataSource(dataSource);\n          }\n          dataSource = ListBase.groupDataSource(dataSource, fields.properties, this.sortOrder);\n        }\n        addClass([this.list], dropDownBaseClasses.grouping);\n      } else {\n        dataSource = this.getSortedDataSource(dataSource);\n      }\n      var options = this.listOption(dataSource, fields);\n      var spliceData = dataSource.length > 100 ? new DataManager(dataSource).executeLocal(new Query().take(100)) : dataSource;\n      this.sortedData = dataSource;\n      return ListBase.createList(this.createElement, this.getModuleName() === 'autocomplete' ? spliceData : dataSource, options, true, this);\n    }\n    return null;\n  };\n  DropDownBase.prototype.listOption = function (dataSource, fields) {\n    var iconCss = isNullOrUndefined(fields.iconCss) ? false : true;\n    var fieldValues = !isNullOrUndefined(fields.properties) ? fields.properties : fields;\n    var options = fields.text !== null || fields.value !== null ? {\n      fields: fieldValues,\n      showIcon: iconCss,\n      ariaAttributes: {\n        groupItemRole: 'presentation'\n      }\n    } : {\n      fields: {\n        value: 'text'\n      }\n    };\n    return extend({}, options, fields, true);\n  };\n  DropDownBase.prototype.setFloatingHeader = function (e) {\n    if (!isNullOrUndefined(this.list) && !this.list.classList.contains(dropDownBaseClasses.noData)) {\n      if (isNullOrUndefined(this.fixedHeaderElement)) {\n        this.fixedHeaderElement = this.createElement('div', {\n          className: dropDownBaseClasses.fixedHead\n        });\n        if (!isNullOrUndefined(this.list) && !this.list.querySelector('li').classList.contains(dropDownBaseClasses.group)) {\n          this.fixedHeaderElement.style.display = 'none';\n        }\n        if (!isNullOrUndefined(this.fixedHeaderElement) && !isNullOrUndefined(this.list)) {\n          prepend([this.fixedHeaderElement], this.list);\n        }\n        this.setFixedHeader();\n      }\n      if (!isNullOrUndefined(this.fixedHeaderElement) && this.fixedHeaderElement.style.zIndex === '0') {\n        this.setFixedHeader();\n      }\n      this.scrollStop(e);\n    }\n  };\n  DropDownBase.prototype.scrollStop = function (e, isDownkey) {\n    var target = !isNullOrUndefined(e) ? e.target : this.list;\n    var liHeight = parseInt(getComputedStyle(this.getValidLi(), null).getPropertyValue('height'), 10);\n    var topIndex = Math.round(target.scrollTop / liHeight);\n    var liCollections = this.list.querySelectorAll('li' + ':not(.e-hide-listitem)');\n    var virtualListCount = this.list.querySelectorAll('.e-virtual-list').length;\n    var count = 0;\n    var isCount = false;\n    for (var i = topIndex; i > -1; i--) {\n      var index = this.isVirtualizationEnabled ? i + virtualListCount : i;\n      if (this.isVirtualizationEnabled) {\n        var groupListLength = this.list.querySelectorAll('.e-list-group-item').length;\n        var loadedGroupList = 0;\n        if (isCount) {\n          count++;\n        }\n        if (this.updateGroupHeader(index, liCollections, target)) {\n          loadedGroupList++;\n          if (count >= this.getPageCount()) {\n            break;\n          }\n          if (groupListLength <= loadedGroupList) {\n            break;\n          }\n        }\n        if (isDownkey) {\n          if (!isNullOrUndefined(liCollections[index]) && liCollections[index].classList.contains(dropDownBaseClasses.selected) && this.getModuleName() !== 'autocomplete' || !isNullOrUndefined(liCollections[index]) && liCollections[index].classList.contains(dropDownBaseClasses.focus) && this.getModuleName() === 'autocomplete') {\n            count++;\n            isCount = true;\n          }\n        }\n      } else {\n        if (this.updateGroupHeader(index, liCollections, target)) {\n          break;\n        }\n      }\n    }\n  };\n  DropDownBase.prototype.getPageCount = function (returnExactCount) {\n    var liHeight = this.list.classList.contains(dropDownBaseClasses.noData) ? null : getComputedStyle(this.getItems()[0], null).getPropertyValue('height');\n    var pageCount = Math.round(this.list.getBoundingClientRect().height / parseInt(liHeight, 10));\n    return returnExactCount ? pageCount : Math.round(pageCount);\n  };\n  DropDownBase.prototype.updateGroupHeader = function (index, liCollections, target) {\n    if (!isNullOrUndefined(liCollections[index]) && liCollections[index].classList.contains(dropDownBaseClasses.group)) {\n      this.updateGroupFixedHeader(liCollections[index], target);\n      return true;\n    } else {\n      this.fixedHeaderElement.style.display = 'none';\n      this.fixedHeaderElement.style.top = 'none';\n      return false;\n    }\n  };\n  DropDownBase.prototype.updateGroupFixedHeader = function (element, target) {\n    this.fixedHeaderElement.innerHTML = element.innerHTML;\n    this.fixedHeaderElement.style.position = 'fixed';\n    this.fixedHeaderElement.style.top = this.list.parentElement.offsetTop + this.list.offsetTop + 'px';\n    this.fixedHeaderElement.style.display = 'block';\n  };\n  DropDownBase.prototype.getValidLi = function () {\n    return this.liCollections[0];\n  };\n  /**\n   * To render the list items\n   *\n   * @param {object[]} listData - Specifies the list of array of data.\n   * @param {FieldSettingsModel} fields - Maps the columns of the data table and binds the data to the component.\n   * @returns {HTMLElement} Return the list items.\n   */\n  DropDownBase.prototype.renderItems = function (listData, fields) {\n    var ulElement;\n    if (this.itemTemplate && listData) {\n      var dataSource = listData;\n      if (dataSource && fields.groupBy) {\n        if (this.sortOrder !== 'None') {\n          dataSource = this.getSortedDataSource(dataSource);\n        }\n        dataSource = ListBase.groupDataSource(dataSource, fields.properties, this.sortOrder);\n      } else {\n        dataSource = this.getSortedDataSource(dataSource);\n      }\n      this.sortedData = dataSource;\n      var spliceData = dataSource.length > 100 ? new DataManager(dataSource).executeLocal(new Query().take(100)) : dataSource;\n      ulElement = this.templateListItem(this.getModuleName() === 'autocomplete' ? spliceData : dataSource, fields);\n      if (this.isVirtualizationEnabled) {\n        var oldUlElement = this.list.querySelector('.e-list-parent');\n        var virtualUlElement = this.list.querySelector('.e-virtual-ddl-content');\n        if (listData.length >= this.virtualizedItemsCount && oldUlElement && virtualUlElement || oldUlElement && virtualUlElement && this.isAllowFiltering || oldUlElement && virtualUlElement && this.getModuleName() === 'autocomplete') {\n          virtualUlElement.replaceChild(ulElement, oldUlElement);\n          this.updateListElements(listData);\n        } else if (!virtualUlElement) {\n          this.list.innerHTML = '';\n          this.createVirtualContent();\n          this.list.querySelector('.e-virtual-ddl-content').appendChild(ulElement);\n          this.updateListElements(listData);\n        }\n      }\n    } else {\n      ulElement = this.createListItems(listData, fields);\n      if (this.isIncrementalRequest) {\n        this.incrementalLiCollections = ulElement.querySelectorAll('.' + dropDownBaseClasses.li);\n        this.incrementalUlElement = ulElement;\n        this.incrementalListData = listData;\n        return ulElement;\n      }\n      if (this.isVirtualizationEnabled) {\n        var oldUlElement = this.list.querySelector('.e-list-parent');\n        var virtualUlElement = this.list.querySelector('.e-virtual-ddl-content');\n        if (listData.length >= this.virtualizedItemsCount && oldUlElement && virtualUlElement || oldUlElement && virtualUlElement && this.isAllowFiltering || oldUlElement && virtualUlElement && this.getModuleName() === 'autocomplete') {\n          virtualUlElement.replaceChild(ulElement, oldUlElement);\n          this.updateListElements(listData);\n        } else if (!virtualUlElement) {\n          this.list.innerHTML = '';\n          this.createVirtualContent();\n          this.list.querySelector('.e-virtual-ddl-content').appendChild(ulElement);\n          this.updateListElements(listData);\n        }\n      }\n    }\n    return ulElement;\n  };\n  DropDownBase.prototype.createVirtualContent = function () {\n    if (!this.list.querySelector('.e-virtual-ddl-content')) {\n      this.list.appendChild(this.createElement('div', {\n        className: 'e-virtual-ddl-content'\n      }));\n    }\n  };\n  DropDownBase.prototype.updateListElements = function (listData) {\n    this.liCollections = this.list.querySelectorAll('.' + dropDownBaseClasses.li);\n    this.ulElement = this.list.querySelector('ul');\n    this.listData = listData;\n    this.postRender(this.list, listData, this.bindEvent);\n  };\n  DropDownBase.prototype.templateListItem = function (dataSource, fields) {\n    var option = this.listOption(dataSource, fields);\n    option.templateID = this.itemTemplateId;\n    option.isStringTemplate = this.isStringTemplate;\n    var itemcheck = this.templateCompiler(this.itemTemplate);\n    if (typeof this.itemTemplate !== 'function' && itemcheck) {\n      var itemValue = select(this.itemTemplate, document).innerHTML.trim();\n      return ListBase.renderContentTemplate(this.createElement, itemValue, dataSource, fields.properties, option, this);\n    } else {\n      return ListBase.renderContentTemplate(this.createElement, this.itemTemplate, dataSource, fields.properties, option, this);\n    }\n  };\n  DropDownBase.prototype.typeOfData = function (items) {\n    var item = {\n      typeof: null,\n      item: null\n    };\n    for (var i = 0; !isNullOrUndefined(items) && i < items.length; i++) {\n      if (!isNullOrUndefined(items[i])) {\n        var listDataType = typeof items[i] === 'string' || typeof items[i] === 'number' || typeof items[i] === 'boolean';\n        var isNullData = listDataType ? isNullOrUndefined(items[i]) : isNullOrUndefined(getValue(this.fields.value ? this.fields.value : 'value', items[i]));\n        if (!isNullData) {\n          return item = {\n            typeof: typeof items[i],\n            item: items[i]\n          };\n        }\n      }\n    }\n    return item;\n  };\n  DropDownBase.prototype.setFixedHeader = function () {\n    if (!isNullOrUndefined(this.list)) {\n      this.list.parentElement.style.display = 'block';\n    }\n    var borderWidth = 0;\n    if (this.list && this.list.parentElement) {\n      borderWidth = parseInt(document.defaultView.getComputedStyle(this.list.parentElement, null).getPropertyValue('border-width'), 10);\n      /*Shorthand property not working in Firefox for getComputedStyle method.\n      Refer bug report https://bugzilla.mozilla.org/show_bug.cgi?id=137688\n      Refer alternate solution https://stackoverflow.com/a/41696234/9133493*/\n      if (isNaN(borderWidth)) {\n        var borderTopWidth = parseInt(document.defaultView.getComputedStyle(this.list.parentElement, null).getPropertyValue('border-top-width'), 10);\n        var borderBottomWidth = parseInt(document.defaultView.getComputedStyle(this.list.parentElement, null).getPropertyValue('border-bottom-width'), 10);\n        var borderLeftWidth = parseInt(document.defaultView.getComputedStyle(this.list.parentElement, null).getPropertyValue('border-left-width'), 10);\n        var borderRightWidth = parseInt(document.defaultView.getComputedStyle(this.list.parentElement, null).getPropertyValue('border-right-width'), 10);\n        borderWidth = borderTopWidth + borderBottomWidth + borderLeftWidth + borderRightWidth;\n      }\n    }\n    if (!isNullOrUndefined(this.liCollections)) {\n      var liWidth = this.getValidLi().offsetWidth - borderWidth;\n      this.fixedHeaderElement.style.width = liWidth.toString() + 'px';\n    }\n    setStyleAttribute(this.fixedHeaderElement, {\n      zIndex: 10\n    });\n    var firstLi = this.ulElement.querySelector('.' + dropDownBaseClasses.group + ':not(.e-hide-listitem)');\n    this.fixedHeaderElement.innerHTML = firstLi.innerHTML;\n  };\n  DropDownBase.prototype.getSortedDataSource = function (dataSource) {\n    if (dataSource && this.sortOrder !== 'None') {\n      var textField = this.fields.text ? this.fields.text : 'text';\n      if (this.typeOfData(dataSource).typeof === 'string' || this.typeOfData(dataSource).typeof === 'number' || this.typeOfData(dataSource).typeof === 'boolean') {\n        textField = '';\n      }\n      dataSource = ListBase.getDataSource(dataSource, ListBase.addSorting(this.sortOrder, textField));\n    }\n    return dataSource;\n  };\n  /**\n   * Return the index of item which matched with given value in data source\n   *\n   * @param {string | number | boolean} value - Specifies given value.\n   * @returns {number} Returns the index of the item.\n   */\n  DropDownBase.prototype.getIndexByValue = function (value) {\n    var index;\n    var listItems = this.getItems();\n    for (var i = 0; i < listItems.length; i++) {\n      if (!isNullOrUndefined(value) && listItems[i].getAttribute('data-value') === value.toString()) {\n        index = i;\n        break;\n      }\n    }\n    return index;\n  };\n  /**\n   * Return the index of item which matched with given value in data source\n   *\n   * @param {string | number | boolean} value - Specifies given value.\n   * @returns {number} Returns the index of the item.\n   */\n  DropDownBase.prototype.getIndexByValueFilter = function (value) {\n    var index;\n    var listItems = this.renderItems(this.selectData, this.fields);\n    if (listItems && listItems.children) {\n      for (var i = 0; i < listItems.children.length; i++) {\n        if (!isNullOrUndefined(value) && listItems.children[i].getAttribute('data-value') === value.toString()) {\n          index = i;\n          break;\n        }\n      }\n    }\n    return index;\n  };\n  /**\n   * To dispatch the event manually\n   *\n   * @param {HTMLElement} element - Specifies the element to dispatch the event.\n   * @param {string} type - Specifies the name of the event.\n   * @returns {void}\n   */\n  DropDownBase.prototype.dispatchEvent = function (element, type) {\n    var evt = document.createEvent('HTMLEvents');\n    evt.initEvent(type, false, true);\n    if (element) {\n      element.dispatchEvent(evt);\n    }\n  };\n  /**\n   * To set the current fields\n   *\n   * @returns {void}\n   */\n  DropDownBase.prototype.setFields = function () {\n    if (this.fields.value && !this.fields.text) {\n      this.updateFields(this.fields.value, this.fields.value);\n    } else if (!this.fields.value && this.fields.text) {\n      this.updateFields(this.fields.text, this.fields.text);\n    } else if (!this.fields.value && !this.fields.text) {\n      this.updateFields('text', 'text');\n    }\n  };\n  /**\n   * reset the items list.\n   *\n   * @param {Object[] | string[] | number[] | DataManager | boolean[]} dataSource - Specifies the data to generate the list.\n   * @param {FieldSettingsModel} fields - Maps the columns of the data table and binds the data to the component.\n   * @param {Query} query - Accepts the external Query that execute along with data processing.\n   * @returns {void}\n   */\n  DropDownBase.prototype.resetList = function (dataSource, fields, query, e) {\n    if (this.list) {\n      if (this.element.tagName === 'SELECT' && this.element.options.length > 0 || this.element.tagName === 'UL' && this.element.childNodes.length > 0) {\n        var data = dataSource instanceof Array ? dataSource.length > 0 : !isNullOrUndefined(dataSource);\n        if (!data && this.selectData && this.selectData.length > 0) {\n          dataSource = this.selectData;\n        }\n      }\n      dataSource = this.getModuleName() === 'combobox' && this.selectData && dataSource instanceof Array && dataSource.length < this.selectData.length && this.addedNewItem ? this.selectData : dataSource;\n      this.addedNewItem = false;\n      this.setListData(dataSource, fields, query, e);\n    }\n  };\n  DropDownBase.prototype.updateSelectElementData = function (isFiltering) {\n    if ((isFiltering || this.isVirtualizationEnabled) && isNullOrUndefined(this.selectData) && this.listData && this.listData.length > 0) {\n      this.selectData = this.listData;\n    }\n  };\n  DropDownBase.prototype.updateSelection = function () {\n    // This is for after added the item, need to update the selected index values.\n  };\n  DropDownBase.prototype.renderList = function () {\n    // This is for render the list items.\n    this.render();\n  };\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  DropDownBase.prototype.updateDataSource = function (props) {\n    this.resetList(this.dataSource);\n    this.totalItemCount = this.dataSource instanceof DataManager ? this.dataSource.dataSource.json.length : 0;\n  };\n  DropDownBase.prototype.setUpdateInitial = function (props, newProp) {\n    this.isDataFetched = false;\n    var updateData = {};\n    for (var j = 0; props.length > j; j++) {\n      if (newProp[props[j]] && props[j] === 'fields') {\n        this.setFields();\n        updateData[props[j]] = newProp[props[j]];\n      } else if (newProp[props[j]]) {\n        updateData[props[j]] = newProp[props[j]];\n      }\n    }\n    if (Object.keys(updateData).length > 0) {\n      if (Object.keys(updateData).indexOf('dataSource') === -1) {\n        updateData.dataSource = this.dataSource;\n      }\n      this.updateDataSource(updateData);\n    }\n  };\n  /**\n   * When property value changes happened, then onPropertyChanged method will execute the respective changes in this component.\n   *\n   * @param {DropDownBaseModel} newProp - Returns the dynamic property value of the component.\n   * @param {DropDownBaseModel} oldProp - Returns the previous property value of the component.\n   * @private\n   * @returns {void}\n   */\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  DropDownBase.prototype.onPropertyChanged = function (newProp, oldProp) {\n    if (this.getModuleName() === 'dropdownbase') {\n      this.setUpdateInitial(['fields', 'query', 'dataSource'], newProp);\n    }\n    this.setUpdateInitial(['sortOrder', 'itemTemplate'], newProp);\n    for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n      switch (prop) {\n        case 'query':\n        case 'sortOrder':\n        case 'dataSource':\n        case 'itemTemplate':\n          break;\n        case 'enableRtl':\n          this.setEnableRtl();\n          break;\n        case 'groupTemplate':\n          this.renderGroupTemplate(this.list);\n          if (this.ulElement && this.fixedHeaderElement) {\n            var firstLi = this.ulElement.querySelector('.' + dropDownBaseClasses.group);\n            this.fixedHeaderElement.innerHTML = firstLi.innerHTML;\n          }\n          break;\n        case 'locale':\n          if (this.list && !isNullOrUndefined(this.liCollections) && this.liCollections.length === 0) {\n            this.l10nUpdate();\n          }\n          break;\n        case 'zIndex':\n          this.setProperties({\n            zIndex: newProp.zIndex\n          }, true);\n          this.setZIndex();\n          break;\n      }\n    }\n  };\n  /**\n   * Build and render the component\n   *\n   * @param {boolean} isEmptyData - Specifies the component to initialize with list data or not.\n   * @private\n   * @returns {void}\n   */\n  DropDownBase.prototype.render = function (e, isEmptyData) {\n    if (this.getModuleName() === 'listbox') {\n      this.list = this.createElement('div', {\n        className: dropDownBaseClasses.content,\n        attrs: {\n          'tabindex': '0'\n        }\n      });\n    } else {\n      this.list = this.createElement('div', {\n        className: dropDownBaseClasses.content\n      });\n    }\n    this.list.classList.add(dropDownBaseClasses.root);\n    this.setFields();\n    var rippleModel = {\n      duration: 300,\n      selector: '.' + dropDownBaseClasses.li\n    };\n    this.rippleFun = rippleEffect(this.list, rippleModel);\n    var group = this.element.querySelector('select>optgroup');\n    if ((this.fields.groupBy || !isNullOrUndefined(group)) && !this.isGroupChecking) {\n      EventHandler.add(this.list, 'scroll', this.setFloatingHeader, this);\n    }\n    if (this.getModuleName() === 'dropdownbase') {\n      if (this.element.getAttribute('tabindex')) {\n        this.list.setAttribute('tabindex', this.element.getAttribute('tabindex'));\n      }\n      removeClass([this.element], dropDownBaseClasses.root);\n      this.element.style.display = 'none';\n      var wrapperElement = this.createElement('div');\n      this.element.parentElement.insertBefore(wrapperElement, this.element);\n      wrapperElement.appendChild(this.element);\n      wrapperElement.appendChild(this.list);\n    }\n    this.setEnableRtl();\n    if (!isEmptyData) {\n      this.initialize(e);\n    }\n  };\n  DropDownBase.prototype.removeScrollEvent = function () {\n    if (this.list) {\n      EventHandler.remove(this.list, 'scroll', this.setFloatingHeader);\n    }\n  };\n  /**\n   * Return the module name of this component.\n   *\n   * @private\n   * @returns {string} Return the module name of this component.\n   */\n  DropDownBase.prototype.getModuleName = function () {\n    return 'dropdownbase';\n  };\n  /* eslint-disable valid-jsdoc, jsdoc/require-returns-description */\n  /**\n   * Gets all the list items bound on this component.\n   *\n   * @returns {Element[]}\n   */\n  DropDownBase.prototype.getItems = function () {\n    return this.ulElement.querySelectorAll('.' + dropDownBaseClasses.li);\n  };\n  /* eslint-enable valid-jsdoc, jsdoc/require-returns-description */\n  /**\n   * Adds a new item to the popup list. By default, new item appends to the list as the last item,\n   * but you can insert based on the index parameter.\n   *\n   * @param { Object[] } items - Specifies an array of JSON data or a JSON data.\n   * @param { number } itemIndex - Specifies the index to place the newly added item in the popup list.\n   * @returns {void}\n   * @deprecated\n   */\n  DropDownBase.prototype.addItem = function (items, itemIndex) {\n    if (!this.list || this.list.textContent === this.noRecordsTemplate && this.getModuleName() !== 'listbox') {\n      this.renderList();\n    }\n    if (this.sortOrder !== 'None' && isNullOrUndefined(itemIndex)) {\n      var newList = [].slice.call(this.listData);\n      newList.push(items);\n      newList = this.getSortedDataSource(newList);\n      if (this.fields.groupBy) {\n        newList = ListBase.groupDataSource(newList, this.fields.properties, this.sortOrder);\n        itemIndex = newList.indexOf(items);\n      } else {\n        itemIndex = newList.indexOf(items);\n      }\n    }\n    var itemsCount = this.getItems().length;\n    var selectedItemValue = this.list.querySelector('.' + dropDownBaseClasses.selected);\n    items = items instanceof Array ? items : [items];\n    var index;\n    index = isNullOrUndefined(itemIndex) || itemIndex < 0 || itemIndex > itemsCount - 1 ? itemsCount : itemIndex;\n    var fields = this.fields;\n    if (items && fields.groupBy) {\n      items = ListBase.groupDataSource(items, fields.properties);\n    }\n    var liCollections = [];\n    for (var i = 0; i < items.length; i++) {\n      var item = items[i];\n      var isHeader = item.isHeader;\n      var li = this.createElement('li', {\n        className: isHeader ? dropDownBaseClasses.group : dropDownBaseClasses.li,\n        id: 'option-add-' + i\n      });\n      var itemText = item instanceof Object ? getValue(fields.text, item) : item;\n      if (isHeader) {\n        li.innerText = itemText;\n      }\n      if (this.itemTemplate && !isHeader) {\n        var itemCheck = this.templateCompiler(this.itemTemplate);\n        var compiledString = typeof this.itemTemplate !== 'function' && itemCheck ? compile(select(this.itemTemplate, document).innerHTML.trim()) : compile(this.itemTemplate);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var addItemTemplate = compiledString(item, this, 'itemTemplate', this.itemTemplateId, this.isStringTemplate, null, li);\n        if (addItemTemplate) {\n          append(addItemTemplate, li);\n        }\n      } else if (!isHeader) {\n        li.appendChild(document.createTextNode(itemText));\n      }\n      li.setAttribute('data-value', item instanceof Object ? getValue(fields.value, item) : item);\n      li.setAttribute('role', 'option');\n      this.notify('addItem', {\n        module: 'CheckBoxSelection',\n        item: li\n      });\n      liCollections.push(li);\n      this.listData.push(item);\n      if (this.sortOrder === 'None' && isNullOrUndefined(itemIndex) && index === 0) {\n        index = null;\n      }\n      this.updateActionCompleteData(li, item, index);\n      //Listbox event\n      this.trigger('beforeItemRender', {\n        element: li,\n        item: item\n      });\n    }\n    if (itemsCount === 0 && isNullOrUndefined(this.list.querySelector('ul'))) {\n      if (!isNullOrUndefined(this.list)) {\n        this.list.innerHTML = '';\n        this.list.classList.remove(dropDownBaseClasses.noData);\n        this.isAddNewItemTemplate = true;\n        if (!isNullOrUndefined(this.ulElement)) {\n          this.list.appendChild(this.ulElement);\n        }\n      }\n      this.liCollections = liCollections;\n      if (!isNullOrUndefined(liCollections) && !isNullOrUndefined(this.ulElement)) {\n        append(liCollections, this.ulElement);\n      }\n      this.updateAddItemList(this.list, itemsCount);\n    } else {\n      if (this.getModuleName() === 'listbox' && itemsCount === 0) {\n        this.ulElement.innerHTML = '';\n      }\n      var attr = [];\n      for (var i = 0; i < items.length; i++) {\n        var listGroupItem = this.ulElement.querySelectorAll('.e-list-group-item');\n        for (var j = 0; j < listGroupItem.length; j++) {\n          attr[j] = listGroupItem[j].innerText;\n        }\n        if (attr.indexOf(liCollections[i].innerText) > -1 && fields.groupBy) {\n          for (var j = 0; j < listGroupItem.length; j++) {\n            if (attr[j] === liCollections[i].innerText) {\n              if (this.sortOrder === 'None') {\n                this.ulElement.insertBefore(liCollections[i + 1], listGroupItem[j + 1]);\n              } else {\n                this.ulElement.insertBefore(liCollections[i + 1], this.ulElement.childNodes[itemIndex]);\n              }\n              i = i + 1;\n              break;\n            }\n          }\n        } else {\n          if (this.liCollections[index]) {\n            this.liCollections[index].parentNode.insertBefore(liCollections[i], this.liCollections[index]);\n          } else {\n            this.ulElement.appendChild(liCollections[i]);\n          }\n        }\n        var tempLi = [].slice.call(this.liCollections);\n        tempLi.splice(index, 0, liCollections[i]);\n        this.liCollections = tempLi;\n        index += 1;\n        if (this.getModuleName() === 'multiselect') {\n          this.updateDataList();\n        }\n      }\n    }\n    if (this.getModuleName() === 'listbox' && this.isReact) {\n      this.renderReactTemplates();\n    }\n    if (selectedItemValue || itemIndex === 0) {\n      this.updateSelection();\n    }\n    this.addedNewItem = true;\n  };\n  DropDownBase.prototype.validationAttribute = function (target, hidden) {\n    var name = target.getAttribute('name') ? target.getAttribute('name') : target.getAttribute('id');\n    hidden.setAttribute('name', name);\n    target.removeAttribute('name');\n    var attributes$$1 = ['required', 'aria-required', 'form'];\n    for (var i = 0; i < attributes$$1.length; i++) {\n      if (!target.getAttribute(attributes$$1[i])) {\n        continue;\n      }\n      var attr = target.getAttribute(attributes$$1[i]);\n      hidden.setAttribute(attributes$$1[i], attr);\n      target.removeAttribute(attributes$$1[i]);\n    }\n  };\n  DropDownBase.prototype.setZIndex = function () {\n    // this is for component wise\n  };\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  DropDownBase.prototype.updateActionCompleteData = function (li, item, index) {\n    // this is for ComboBox custom value\n  };\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  DropDownBase.prototype.updateAddItemList = function (list, itemCount) {\n    // this is for multiselect add item\n  };\n  DropDownBase.prototype.updateDataList = function () {\n    // this is for multiselect update list items\n  };\n  /* eslint-disable valid-jsdoc, jsdoc/require-returns-description */\n  /**\n   * Gets the data Object that matches the given value.\n   *\n   * @param { string | number } value - Specifies the value of the list item.\n   * @returns {Object}\n   */\n  DropDownBase.prototype.getDataByValue = function (value) {\n    if (!isNullOrUndefined(this.listData)) {\n      var type = this.typeOfData(this.listData).typeof;\n      if (type === 'string' || type === 'number' || type === 'boolean') {\n        for (var _i = 0, _a = this.listData; _i < _a.length; _i++) {\n          var item = _a[_i];\n          if (!isNullOrUndefined(item) && item === value) {\n            return item;\n          }\n        }\n      } else {\n        for (var _b = 0, _c = this.listData; _b < _c.length; _b++) {\n          var item = _c[_b];\n          if (!isNullOrUndefined(item) && getValue(this.fields.value ? this.fields.value : 'value', item) === value) {\n            return item;\n          }\n        }\n      }\n    }\n    return null;\n  };\n  /* eslint-enable valid-jsdoc, jsdoc/require-returns-description */\n  /**\n   * Removes the component from the DOM and detaches all its related event handlers. It also removes the attributes and classes.\n   *\n   * @method destroy\n   * @returns {void}\n   */\n  DropDownBase.prototype.destroy = function () {\n    if (document.body.contains(this.list)) {\n      EventHandler.remove(this.list, 'scroll', this.setFloatingHeader);\n      if (!isNullOrUndefined(this.rippleFun)) {\n        this.rippleFun();\n      }\n      detach(this.list);\n    }\n    this.liCollections = null;\n    this.ulElement = null;\n    this.list = null;\n    this.enableRtlElements = null;\n    this.rippleFun = null;\n    _super.prototype.destroy.call(this);\n  };\n  __decorate([Complex({\n    text: null,\n    value: null,\n    iconCss: null,\n    groupBy: null\n  }, FieldSettings)], DropDownBase.prototype, \"fields\", void 0);\n  __decorate([Property(null)], DropDownBase.prototype, \"itemTemplate\", void 0);\n  __decorate([Property(null)], DropDownBase.prototype, \"groupTemplate\", void 0);\n  __decorate([Property('No records found')], DropDownBase.prototype, \"noRecordsTemplate\", void 0);\n  __decorate([Property('Request failed')], DropDownBase.prototype, \"actionFailureTemplate\", void 0);\n  __decorate([Property('None')], DropDownBase.prototype, \"sortOrder\", void 0);\n  __decorate([Property([])], DropDownBase.prototype, \"dataSource\", void 0);\n  __decorate([Property(null)], DropDownBase.prototype, \"query\", void 0);\n  __decorate([Property('StartsWith')], DropDownBase.prototype, \"filterType\", void 0);\n  __decorate([Property(true)], DropDownBase.prototype, \"ignoreCase\", void 0);\n  __decorate([Property(1000)], DropDownBase.prototype, \"zIndex\", void 0);\n  __decorate([Property(false)], DropDownBase.prototype, \"ignoreAccent\", void 0);\n  __decorate([Property()], DropDownBase.prototype, \"locale\", void 0);\n  __decorate([Event()], DropDownBase.prototype, \"actionBegin\", void 0);\n  __decorate([Event()], DropDownBase.prototype, \"actionComplete\", void 0);\n  __decorate([Event()], DropDownBase.prototype, \"actionFailure\", void 0);\n  __decorate([Event()], DropDownBase.prototype, \"select\", void 0);\n  __decorate([Event()], DropDownBase.prototype, \"dataBound\", void 0);\n  __decorate([Event()], DropDownBase.prototype, \"created\", void 0);\n  __decorate([Event()], DropDownBase.prototype, \"destroyed\", void 0);\n  DropDownBase = __decorate([NotifyPropertyChanges], DropDownBase);\n  return DropDownBase;\n}(Component);\n\n/**\n * export all modules from current location\n */\n\nvar __extends$1 = undefined && undefined.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$1 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n// eslint-disable-next-line @typescript-eslint/triple-slash-reference\n/// <reference path='../drop-down-base/drop-down-base-model.d.ts'/>\n// don't use space in classnames\nvar dropDownListClasses = {\n  root: 'e-dropdownlist',\n  hover: dropDownBaseClasses.hover,\n  selected: dropDownBaseClasses.selected,\n  rtl: dropDownBaseClasses.rtl,\n  li: dropDownBaseClasses.li,\n  disable: dropDownBaseClasses.disabled,\n  base: dropDownBaseClasses.root,\n  focus: dropDownBaseClasses.focus,\n  content: dropDownBaseClasses.content,\n  input: 'e-input-group',\n  inputFocus: 'e-input-focus',\n  icon: 'e-input-group-icon e-ddl-icon',\n  iconAnimation: 'e-icon-anim',\n  value: 'e-input-value',\n  device: 'e-ddl-device',\n  backIcon: 'e-input-group-icon e-back-icon e-icons',\n  filterBarClearIcon: 'e-input-group-icon e-clear-icon e-icons',\n  filterInput: 'e-input-filter',\n  filterParent: 'e-filter-parent',\n  mobileFilter: 'e-ddl-device-filter',\n  footer: 'e-ddl-footer',\n  header: 'e-ddl-header',\n  clearIcon: 'e-clear-icon',\n  clearIconHide: 'e-clear-icon-hide',\n  popupFullScreen: 'e-popup-full-page',\n  disableIcon: 'e-ddl-disable-icon',\n  hiddenElement: 'e-ddl-hidden',\n  virtualList: 'e-list-item e-virtual-list'\n};\nvar inputObject = {\n  container: null,\n  buttons: []\n};\n/**\n * The DropDownList component contains a list of predefined values from which you can\n * choose a single value.\n * ```html\n * <input type=\"text\" tabindex=\"1\" id=\"list\"> </input>\n * ```\n * ```typescript\n *   let dropDownListObj:DropDownList = new DropDownList();\n *   dropDownListObj.appendTo(\"#list\");\n * ```\n */\nvar DropDownList = /** @__PURE__ @class */function (_super) {\n  __extends$1(DropDownList, _super);\n  /**\n   * * Constructor for creating the DropDownList component.\n   *\n   * @param {DropDownListModel} options - Specifies the DropDownList model.\n   * @param {string | HTMLElement} element - Specifies the element to render as component.\n   * @private\n   */\n  function DropDownList(options, element) {\n    var _this = _super.call(this, options, element) || this;\n    _this.skeletonCount = 32;\n    _this.isListSearched = false;\n    _this.preventChange = false;\n    _this.isAngular = false;\n    _this.virtualListHeight = 0;\n    _this.isVirtualScrolling = false;\n    _this.isPreventScrollAction = false;\n    _this.scrollPreStartIndex = 0;\n    _this.isScrollActionTriggered = false;\n    _this.previousStartIndex = 0;\n    _this.isMouseScrollAction = false;\n    _this.isKeyBoardAction = false;\n    _this.isUpwardScrolling = false;\n    _this.startIndex = 0;\n    _this.currentPageNumber = 0;\n    _this.pageCount = 0;\n    _this.isPreventKeyAction = false;\n    _this.generatedDataObject = {};\n    _this.incrementalQueryString = '';\n    _this.incrementalEndIndex = 0;\n    _this.incrementalStartIndex = 0;\n    _this.incrementalPreQueryString = '';\n    _this.isTouched = false;\n    _this.virtualListInfo = {\n      currentPageNumber: null,\n      direction: null,\n      sentinelInfo: {},\n      offsets: {},\n      startIndex: 0,\n      endIndex: 0\n    };\n    _this.viewPortInfo = {\n      currentPageNumber: null,\n      direction: null,\n      sentinelInfo: {},\n      offsets: {},\n      startIndex: 0,\n      endIndex: 0\n    };\n    _this.selectedValueInfo = {\n      currentPageNumber: null,\n      direction: null,\n      sentinelInfo: {},\n      offsets: {},\n      startIndex: 0,\n      endIndex: 0\n    };\n    _this.IsScrollerAtEnd = function () {\n      return this.list && this.list.scrollTop + this.list.clientHeight >= this.list.scrollHeight;\n    };\n    return _this;\n  }\n  /**\n   * Initialize the event handler.\n   *\n   * @private\n   * @returns {void}\n   */\n  DropDownList.prototype.preRender = function () {\n    this.valueTempElement = null;\n    this.element.style.opacity = '0';\n    this.initializeData();\n    _super.prototype.preRender.call(this);\n    this.activeIndex = this.index;\n    this.queryString = '';\n  };\n  DropDownList.prototype.initializeData = function () {\n    this.isPopupOpen = false;\n    this.isDocumentClick = false;\n    this.isInteracted = false;\n    this.isFilterFocus = false;\n    this.beforePopupOpen = false;\n    this.initial = true;\n    this.initRemoteRender = false;\n    this.isNotSearchList = false;\n    this.isTyped = false;\n    this.isSelected = false;\n    this.preventFocus = false;\n    this.preventAutoFill = false;\n    this.isValidKey = false;\n    this.typedString = '';\n    this.isEscapeKey = false;\n    this.isPreventBlur = false;\n    this.isTabKey = false;\n    this.actionCompleteData = {\n      isUpdated: false\n    };\n    this.actionData = {\n      isUpdated: false\n    };\n    this.prevSelectPoints = {};\n    this.isSelectCustom = false;\n    this.isDropDownClick = false;\n    this.preventAltUp = false;\n    this.isCustomFilter = false;\n    this.isSecondClick = false;\n    this.previousValue = null;\n    this.keyConfigure = {\n      tab: 'tab',\n      enter: '13',\n      escape: '27',\n      end: '35',\n      home: '36',\n      down: '40',\n      up: '38',\n      pageUp: '33',\n      pageDown: '34',\n      open: 'alt+40',\n      close: 'shift+tab',\n      hide: 'alt+38',\n      space: '32'\n    };\n    this.viewPortInfo = {\n      currentPageNumber: null,\n      direction: null,\n      sentinelInfo: {},\n      offsets: {},\n      startIndex: 0,\n      endIndex: this.itemCount\n    };\n  };\n  DropDownList.prototype.setZIndex = function () {\n    if (this.popupObj) {\n      this.popupObj.setProperties({\n        'zIndex': this.zIndex\n      });\n    }\n  };\n  DropDownList.prototype.requiredModules = function () {\n    var modules = [];\n    if (this.enableVirtualization) {\n      modules.push({\n        args: [this],\n        member: 'VirtualScroll'\n      });\n    }\n    return modules;\n  };\n  DropDownList.prototype.renderList = function (e, isEmptyData) {\n    _super.prototype.render.call(this, e, isEmptyData);\n    if (!(this.dataSource instanceof DataManager)) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      this.totalItemCount = this.dataSource && this.dataSource.length ? this.dataSource.length : 0;\n    }\n    this.unWireListEvents();\n    this.wireListEvents();\n  };\n  DropDownList.prototype.floatLabelChange = function () {\n    if (this.getModuleName() === 'dropdownlist' && this.floatLabelType === 'Auto') {\n      var floatElement = this.inputWrapper.container.querySelector('.e-float-text');\n      if (this.inputElement.value !== '' || this.isInteracted) {\n        classList(floatElement, ['e-label-top'], ['e-label-bottom']);\n      } else {\n        classList(floatElement, ['e-label-bottom'], ['e-label-top']);\n      }\n    }\n  };\n  DropDownList.prototype.resetHandler = function (e) {\n    e.preventDefault();\n    this.clearAll(e);\n    if (this.enableVirtualization) {\n      this.list.scrollTop = 0;\n      this.virtualListInfo = null;\n      this.previousStartIndex = 0;\n      this.previousEndIndex = 0;\n    }\n  };\n  DropDownList.prototype.resetFocusElement = function () {\n    this.removeHover();\n    this.removeSelection();\n    this.removeFocus();\n    this.list.scrollTop = 0;\n    if (this.getModuleName() !== 'autocomplete' && !isNullOrUndefined(this.ulElement)) {\n      var li = this.ulElement.querySelector('.' + dropDownListClasses.li);\n      if (this.enableVirtualization) {\n        li = this.liCollections[this.skeletonCount];\n      }\n      if (li) {\n        li.classList.add(dropDownListClasses.focus);\n      }\n    }\n  };\n  DropDownList.prototype.clearAll = function (e, properties) {\n    this.previousItemData = !isNullOrUndefined(this.itemData) ? this.itemData : null;\n    if (isNullOrUndefined(properties) || !isNullOrUndefined(properties) && (isNullOrUndefined(properties.dataSource) || !(properties.dataSource instanceof DataManager) && properties.dataSource.length === 0)) {\n      this.isActive = true;\n      this.resetSelection(properties);\n    }\n    var dataItem = this.getItemData();\n    if (this.previousValue === dataItem.value) {\n      return;\n    }\n    this.onChangeEvent(e);\n    this.checkAndResetCache();\n    if (this.enableVirtualization) {\n      this.updateInitialData();\n    }\n  };\n  DropDownList.prototype.resetSelection = function (properties) {\n    if (this.list) {\n      if (!isNullOrUndefined(properties) && (isNullOrUndefined(properties.dataSource) || !(properties.dataSource instanceof DataManager) && properties.dataSource.length === 0)) {\n        this.selectedLI = null;\n        this.actionCompleteData.isUpdated = false;\n        this.actionCompleteData.ulElement = null;\n        this.actionCompleteData.list = null;\n        this.resetList(properties.dataSource);\n      } else {\n        if (this.allowFiltering && this.getModuleName() !== 'autocomplete' && !isNullOrUndefined(this.actionCompleteData.ulElement) && !isNullOrUndefined(this.actionCompleteData.list) && this.actionCompleteData.list.length > 0) {\n          this.onActionComplete(this.actionCompleteData.ulElement.cloneNode(true), this.actionCompleteData.list);\n        }\n        this.resetFocusElement();\n      }\n    }\n    if (!isNullOrUndefined(this.hiddenElement)) {\n      this.hiddenElement.innerHTML = '';\n    }\n    if (!isNullOrUndefined(this.inputElement)) {\n      this.inputElement.value = '';\n    }\n    this.value = null;\n    this.itemData = null;\n    this.text = null;\n    this.index = null;\n    this.activeIndex = null;\n    this.item = null;\n    this.queryString = '';\n    if (this.valueTempElement) {\n      detach(this.valueTempElement);\n      this.inputElement.style.display = 'block';\n      this.valueTempElement = null;\n    }\n    this.setSelection(null, null);\n    this.isSelectCustom = false;\n    this.updateIconState();\n    this.cloneElements();\n  };\n  DropDownList.prototype.setHTMLAttributes = function () {\n    if (Object.keys(this.htmlAttributes).length) {\n      for (var _i = 0, _a = Object.keys(this.htmlAttributes); _i < _a.length; _i++) {\n        var htmlAttr = _a[_i];\n        if (htmlAttr === 'class') {\n          var updatedClassValue = this.htmlAttributes[\"\" + htmlAttr].replace(/\\s+/g, ' ').trim();\n          if (updatedClassValue !== '') {\n            addClass([this.inputWrapper.container], updatedClassValue.split(' '));\n          }\n        } else if (htmlAttr === 'disabled' && this.htmlAttributes[\"\" + htmlAttr] === 'disabled') {\n          this.enabled = false;\n          this.setEnable();\n        } else if (htmlAttr === 'readonly' && !isNullOrUndefined(this.htmlAttributes[\"\" + htmlAttr])) {\n          this.readonly = true;\n          this.dataBind();\n        } else if (htmlAttr === 'style') {\n          this.inputWrapper.container.setAttribute('style', this.htmlAttributes[\"\" + htmlAttr]);\n        } else if (htmlAttr === 'aria-label') {\n          if ((this.getModuleName() === 'autocomplete' || this.getModuleName() === 'combobox') && !this.readonly) {\n            this.inputElement.setAttribute('aria-label', this.htmlAttributes[\"\" + htmlAttr]);\n          } else if (this.getModuleName() === 'dropdownlist') {\n            this.inputWrapper.container.setAttribute('aria-label', this.htmlAttributes[\"\" + htmlAttr]);\n          }\n        } else {\n          var defaultAttr = ['title', 'id', 'placeholder', 'role', 'autocomplete', 'autocapitalize', 'spellcheck', 'minlength', 'maxlength'];\n          var validateAttr = ['name', 'required'];\n          if (this.getModuleName() === 'autocomplete' || this.getModuleName() === 'combobox') {\n            defaultAttr.push('tabindex');\n          }\n          if (validateAttr.indexOf(htmlAttr) > -1 || htmlAttr.indexOf('data') === 0) {\n            this.hiddenElement.setAttribute(htmlAttr, this.htmlAttributes[\"\" + htmlAttr]);\n          } else if (defaultAttr.indexOf(htmlAttr) > -1) {\n            if (htmlAttr === 'placeholder') {\n              Input.setPlaceholder(this.htmlAttributes[\"\" + htmlAttr], this.inputElement);\n            } else {\n              this.inputElement.setAttribute(htmlAttr, this.htmlAttributes[\"\" + htmlAttr]);\n            }\n          } else {\n            this.inputWrapper.container.setAttribute(htmlAttr, this.htmlAttributes[\"\" + htmlAttr]);\n          }\n        }\n      }\n    }\n    if (this.getModuleName() === 'autocomplete' || this.getModuleName() === 'combobox') {\n      this.inputWrapper.container.removeAttribute('tabindex');\n    }\n  };\n  DropDownList.prototype.getAriaAttributes = function () {\n    return {\n      'aria-disabled': 'false',\n      'role': 'combobox',\n      'aria-expanded': 'false',\n      'aria-live': 'polite',\n      'aria-labelledby': this.hiddenElement.id\n    };\n  };\n  DropDownList.prototype.setEnableRtl = function () {\n    Input.setEnableRtl(this.enableRtl, [this.inputElement.parentElement]);\n    if (this.popupObj) {\n      this.popupObj.enableRtl = this.enableRtl;\n      this.popupObj.dataBind();\n    }\n  };\n  DropDownList.prototype.setEnable = function () {\n    Input.setEnabled(this.enabled, this.inputElement);\n    if (this.enabled) {\n      removeClass([this.inputWrapper.container], dropDownListClasses.disable);\n      this.inputElement.setAttribute('aria-disabled', 'false');\n      this.targetElement().setAttribute('tabindex', this.tabIndex);\n    } else {\n      this.hidePopup();\n      addClass([this.inputWrapper.container], dropDownListClasses.disable);\n      this.inputElement.setAttribute('aria-disabled', 'true');\n      this.targetElement().tabIndex = -1;\n    }\n  };\n  /**\n   * Get the properties to be maintained in the persisted state.\n   *\n   * @returns {string} Returns the persisted data of the component.\n   */\n  DropDownList.prototype.getPersistData = function () {\n    return this.addOnPersist(['value']);\n  };\n  DropDownList.prototype.getLocaleName = function () {\n    return 'drop-down-list';\n  };\n  DropDownList.prototype.preventTabIndex = function (element) {\n    if (this.getModuleName() === 'dropdownlist') {\n      element.tabIndex = -1;\n    }\n  };\n  DropDownList.prototype.targetElement = function () {\n    return !isNullOrUndefined(this.inputWrapper) ? this.inputWrapper.container : null;\n  };\n  DropDownList.prototype.getNgDirective = function () {\n    return 'EJS-DROPDOWNLIST';\n  };\n  DropDownList.prototype.getElementByText = function (text) {\n    return this.getElementByValue(this.getValueByText(text));\n  };\n  DropDownList.prototype.getElementByValue = function (value) {\n    var item;\n    var listItems = this.getItems();\n    for (var _i = 0, listItems_1 = listItems; _i < listItems_1.length; _i++) {\n      var liItem = listItems_1[_i];\n      if (this.getFormattedValue(liItem.getAttribute('data-value')) === value) {\n        item = liItem;\n        break;\n      }\n    }\n    return item;\n  };\n  DropDownList.prototype.initValue = function () {\n    this.viewPortInfo.startIndex = this.virtualItemStartIndex = 0;\n    this.viewPortInfo.endIndex = this.virtualItemEndIndex = this.itemCount;\n    this.renderList();\n    if (this.dataSource instanceof DataManager) {\n      this.initRemoteRender = true;\n    } else {\n      this.updateValues();\n    }\n  };\n  DropDownList.prototype.updateValues = function () {\n    this.selectedValueInfo = this.viewPortInfo;\n    if (!isNullOrUndefined(this.value)) {\n      this.setSelection(this.getElementByValue(this.value), null);\n    } else if (this.text && isNullOrUndefined(this.value)) {\n      var element = this.getElementByText(this.text);\n      if (isNullOrUndefined(element)) {\n        this.setProperties({\n          text: null\n        });\n        return;\n      } else {\n        this.setSelection(element, null);\n      }\n    } else {\n      this.setSelection(this.liCollections[this.activeIndex], null);\n    }\n    this.setHiddenValue();\n    Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);\n  };\n  DropDownList.prototype.onBlurHandler = function (e) {\n    if (!this.enabled) {\n      return;\n    }\n    var target = e.relatedTarget;\n    var currentTarget = e.target;\n    var isPreventBlur = this.isPreventBlur;\n    this.isPreventBlur = false;\n    //IE 11 - issue\n    if (isPreventBlur && !this.isDocumentClick && this.isPopupOpen && (!isNullOrUndefined(currentTarget) || !this.isFilterLayout() && isNullOrUndefined(target))) {\n      if (this.getModuleName() === 'dropdownlist' && this.allowFiltering && this.isPopupOpen) {\n        this.filterInput.focus();\n      } else {\n        this.targetElement().focus();\n      }\n      return;\n    }\n    if (this.isDocumentClick || !isNullOrUndefined(this.popupObj) && document.body.contains(this.popupObj.element) && this.popupObj.element.classList.contains(dropDownListClasses.mobileFilter)) {\n      if (!this.beforePopupOpen) {\n        this.isDocumentClick = false;\n      }\n      return;\n    }\n    if (this.getModuleName() === 'dropdownlist' && !this.isFilterFocus && target !== this.inputElement && (document.activeElement !== target || document.activeElement === target && currentTarget.classList.contains(dropDownListClasses.inputFocus)) || isNullOrUndefined(target) && this.getModuleName() === 'dropdownlist' && this.allowFiltering && currentTarget !== this.inputWrapper.container || this.getModuleName() !== 'dropdownlist' && !this.inputWrapper.container.contains(target) || this.isTabKey) {\n      this.isDocumentClick = this.isPopupOpen ? true : false;\n      this.focusOutAction(e);\n      this.isTabKey = false;\n    }\n    if (this.isRequested && !this.isPopupOpen && !this.isPreventBlur) {\n      this.isActive = false;\n      this.beforePopupOpen = false;\n    }\n  };\n  DropDownList.prototype.focusOutAction = function (e) {\n    this.isInteracted = false;\n    this.focusOut(e);\n    this.onFocusOut();\n  };\n  DropDownList.prototype.onFocusOut = function () {\n    if (!this.enabled) {\n      return;\n    }\n    if (this.isSelected) {\n      this.isSelectCustom = false;\n      this.onChangeEvent(null);\n    }\n    this.floatLabelChange();\n    this.dispatchEvent(this.hiddenElement, 'change');\n    if (this.getModuleName() === 'dropdownlist' && this.element.tagName !== 'INPUT') {\n      this.dispatchEvent(this.inputElement, 'blur');\n    }\n    if (this.inputWrapper.clearButton) {\n      addClass([this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);\n    }\n    this.trigger('blur');\n  };\n  DropDownList.prototype.onFocus = function (e) {\n    if (!this.isInteracted) {\n      this.isInteracted = true;\n      var args = {\n        isInteracted: e ? true : false,\n        event: e\n      };\n      this.trigger('focus', args);\n    }\n    this.updateIconState();\n  };\n  DropDownList.prototype.resetValueHandler = function (e) {\n    var formElement = closest(this.inputElement, 'form');\n    if (formElement && e.target === formElement) {\n      var val = this.element.tagName === this.getNgDirective() ? null : this.inputElement.getAttribute('value');\n      this.text = val;\n    }\n  };\n  DropDownList.prototype.wireEvent = function () {\n    EventHandler.add(this.inputWrapper.container, 'mousedown', this.dropDownClick, this);\n    EventHandler.add(this.inputWrapper.container, 'focus', this.focusIn, this);\n    EventHandler.add(this.inputWrapper.container, 'keypress', this.onSearch, this);\n    EventHandler.add(window, 'resize', this.windowResize, this);\n    this.bindCommonEvent();\n  };\n  DropDownList.prototype.bindCommonEvent = function () {\n    EventHandler.add(this.targetElement(), 'blur', this.onBlurHandler, this);\n    var formElement = closest(this.inputElement, 'form');\n    if (formElement) {\n      EventHandler.add(formElement, 'reset', this.resetValueHandler, this);\n    }\n    if (!Browser.isDevice) {\n      this.keyboardModule = new KeyboardEvents(this.targetElement(), {\n        keyAction: this.keyActionHandler.bind(this),\n        keyConfigs: this.keyConfigure,\n        eventName: 'keydown'\n      });\n    } else {\n      this.keyboardModule = new KeyboardEvents(this.targetElement(), {\n        keyAction: this.mobileKeyActionHandler.bind(this),\n        keyConfigs: this.keyConfigure,\n        eventName: 'keydown'\n      });\n    }\n    this.bindClearEvent();\n  };\n  DropDownList.prototype.windowResize = function () {\n    if (this.isPopupOpen) {\n      this.popupObj.refreshPosition(this.inputWrapper.container);\n    }\n  };\n  DropDownList.prototype.bindClearEvent = function () {\n    if (this.showClearButton) {\n      EventHandler.add(this.inputWrapper.clearButton, 'mousedown', this.resetHandler, this);\n    }\n  };\n  DropDownList.prototype.unBindCommonEvent = function () {\n    if (!isNullOrUndefined(this.inputWrapper) && this.targetElement()) {\n      EventHandler.remove(this.targetElement(), 'blur', this.onBlurHandler);\n    }\n    var formElement = this.inputElement && closest(this.inputElement, 'form');\n    if (formElement) {\n      EventHandler.remove(formElement, 'reset', this.resetValueHandler);\n    }\n    if (!Browser.isDevice) {\n      this.keyboardModule.destroy();\n    }\n    if (this.showClearButton) {\n      EventHandler.remove(this.inputWrapper.clearButton, 'mousedown', this.resetHandler);\n    }\n  };\n  DropDownList.prototype.updateIconState = function () {\n    if (this.showClearButton) {\n      if (this.inputElement.value !== '' && !this.readonly) {\n        removeClass([this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);\n      } else {\n        addClass([this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);\n      }\n    }\n  };\n  /**\n   * Event binding for list\n   *\n   * @returns {void}\n   */\n  DropDownList.prototype.wireListEvents = function () {\n    if (!isNullOrUndefined(this.list)) {\n      EventHandler.add(this.list, 'click', this.onMouseClick, this);\n      EventHandler.add(this.list, 'mouseover', this.onMouseOver, this);\n      EventHandler.add(this.list, 'mouseout', this.onMouseLeave, this);\n    }\n  };\n  DropDownList.prototype.onSearch = function (e) {\n    if (e.charCode !== 32 && e.charCode !== 13) {\n      if (this.list === undefined) {\n        this.renderList();\n      }\n      this.searchKeyEvent = e;\n      this.onServerIncrementalSearch(e);\n    }\n  };\n  DropDownList.prototype.onServerIncrementalSearch = function (e) {\n    if (!this.isRequested && !isNullOrUndefined(this.list) && !isNullOrUndefined(this.list.querySelector('li')) && this.enabled && !this.readonly) {\n      this.incrementalSearch(e);\n    }\n  };\n  DropDownList.prototype.onMouseClick = function (e) {\n    var target = e.target;\n    this.keyboardEvent = null;\n    var li = closest(target, '.' + dropDownBaseClasses.li);\n    if (!this.isValidLI(li)) {\n      return;\n    }\n    this.setSelection(li, e);\n    if (Browser.isDevice && this.isFilterLayout()) {\n      history.back();\n    } else {\n      var delay = 100;\n      this.closePopup(delay, e);\n    }\n  };\n  DropDownList.prototype.onMouseOver = function (e) {\n    var currentLi = closest(e.target, '.' + dropDownBaseClasses.li);\n    this.setHover(currentLi);\n  };\n  DropDownList.prototype.setHover = function (li) {\n    if (this.enabled && this.isValidLI(li) && !li.classList.contains(dropDownBaseClasses.hover)) {\n      this.removeHover();\n      addClass([li], dropDownBaseClasses.hover);\n    }\n  };\n  DropDownList.prototype.onMouseLeave = function () {\n    this.removeHover();\n  };\n  DropDownList.prototype.removeHover = function () {\n    if (this.list) {\n      var hoveredItem = this.list.querySelectorAll('.' + dropDownBaseClasses.hover);\n      if (hoveredItem && hoveredItem.length) {\n        removeClass(hoveredItem, dropDownBaseClasses.hover);\n      }\n    }\n  };\n  DropDownList.prototype.isValidLI = function (li) {\n    return li && li.hasAttribute('role') && li.getAttribute('role') === 'option';\n  };\n  DropDownList.prototype.updateIncrementalInfo = function (startIndex, endIndex) {\n    this.viewPortInfo.startIndex = startIndex;\n    this.viewPortInfo.endIndex = endIndex;\n    this.updateVirtualItemIndex();\n    this.isIncrementalRequest = true;\n    this.resetList(this.dataSource, this.fields, this.query);\n    this.isIncrementalRequest = false;\n  };\n  DropDownList.prototype.updateIncrementalView = function (startIndex, endIndex) {\n    this.viewPortInfo.startIndex = startIndex;\n    this.viewPortInfo.endIndex = endIndex;\n    this.updateVirtualItemIndex();\n    this.resetList(this.dataSource, this.fields, this.query);\n    this.UpdateSkeleton();\n    this.liCollections = this.list.querySelectorAll('.' + dropDownBaseClasses.li);\n    this.ulElement = this.list.querySelector('ul');\n  };\n  DropDownList.prototype.updateIncrementalItemIndex = function (startIndex, endIndex) {\n    this.incrementalStartIndex = startIndex;\n    this.incrementalEndIndex = endIndex;\n  };\n  DropDownList.prototype.incrementalSearch = function (e) {\n    if (this.liCollections.length > 0) {\n      if (this.enableVirtualization) {\n        var updatingincrementalindex = false;\n        var queryStringUpdated = false;\n        var activeElement = this.ulElement.getElementsByClassName('e-active')[0];\n        var currentValue = activeElement ? activeElement.textContent : null;\n        if (this.incrementalQueryString == '') {\n          this.incrementalQueryString = String.fromCharCode(e.charCode);\n          this.incrementalPreQueryString = this.incrementalQueryString;\n        } else if (String.fromCharCode(e.charCode).toLocaleLowerCase() == this.incrementalPreQueryString.toLocaleLowerCase()) {\n          queryStringUpdated = true;\n        } else {\n          this.incrementalQueryString = String.fromCharCode(e.charCode);\n        }\n        if (this.viewPortInfo.endIndex >= this.incrementalEndIndex && this.incrementalEndIndex <= this.totalItemCount || this.incrementalEndIndex == 0) {\n          updatingincrementalindex = true;\n          this.incrementalStartIndex = this.incrementalEndIndex;\n          if (this.incrementalEndIndex == 0) {\n            this.incrementalEndIndex = 100 > this.totalItemCount ? this.totalItemCount : 100;\n          } else {\n            this.incrementalEndIndex = this.incrementalEndIndex + 100 > this.totalItemCount ? this.totalItemCount : this.incrementalEndIndex + 100;\n          }\n          this.updateIncrementalInfo(this.incrementalStartIndex, this.incrementalEndIndex);\n          updatingincrementalindex = true;\n        }\n        if (this.viewPortInfo.startIndex !== 0 || updatingincrementalindex) {\n          this.updateIncrementalView(0, this.itemCount);\n        }\n        var li = incrementalSearch(e.charCode, this.incrementalLiCollections, this.activeIndex, true, this.element.id, queryStringUpdated, currentValue, true);\n        while (isNullOrUndefined(li) && this.incrementalEndIndex < this.totalItemCount) {\n          this.updateIncrementalItemIndex(this.incrementalEndIndex, this.incrementalEndIndex + 100 > this.totalItemCount ? this.totalItemCount : this.incrementalEndIndex + 100);\n          this.updateIncrementalInfo(this.incrementalStartIndex, this.incrementalEndIndex);\n          updatingincrementalindex = true;\n          if (this.viewPortInfo.startIndex !== 0 || updatingincrementalindex) {\n            this.updateIncrementalView(0, this.itemCount);\n          }\n          li = incrementalSearch(e.charCode, this.incrementalLiCollections, 0, true, this.element.id, queryStringUpdated, currentValue, true, true);\n          if (!isNullOrUndefined(li)) {\n            break;\n          }\n          if (isNullOrUndefined(li) && this.incrementalEndIndex >= this.totalItemCount) {\n            this.updateIncrementalItemIndex(0, 100 > this.totalItemCount ? this.totalItemCount : 100);\n            break;\n          }\n        }\n        if (isNullOrUndefined(li) && this.incrementalEndIndex >= this.totalItemCount) {\n          this.updateIncrementalItemIndex(0, 100 > this.totalItemCount ? this.totalItemCount : 100);\n          this.updateIncrementalInfo(this.incrementalStartIndex, this.incrementalEndIndex);\n          updatingincrementalindex = true;\n          if (this.viewPortInfo.startIndex !== 0 || updatingincrementalindex) {\n            this.updateIncrementalView(0, this.itemCount);\n          }\n          li = incrementalSearch(e.charCode, this.incrementalLiCollections, 0, true, this.element.id, queryStringUpdated, currentValue, true, true);\n        }\n        var index = li && this.getIndexByValue(li.getAttribute('data-value'));\n        if (!index) {\n          for (var i = 0; i < this.incrementalLiCollections.length; i++) {\n            if (!isNullOrUndefined(li) && !isNullOrUndefined(li.getAttribute('data-value')) && this.incrementalLiCollections[i].getAttribute('data-value') === li.getAttribute('data-value').toString()) {\n              index = i;\n              index = this.incrementalStartIndex + index;\n              break;\n            }\n          }\n        } else {\n          index = index - this.skeletonCount;\n        }\n        if (index) {\n          if (!(this.viewPortInfo.startIndex >= index) || !(index >= this.viewPortInfo.endIndex)) {\n            var startIndex = index - (this.itemCount / 2 - 2) > 0 ? index - (this.itemCount / 2 - 2) : 0;\n            var endIndex = this.viewPortInfo.startIndex + this.itemCount > this.totalItemCount ? this.totalItemCount : this.viewPortInfo.startIndex + this.itemCount;\n            this.updateIncrementalView(startIndex, endIndex);\n          }\n        }\n        if (!isNullOrUndefined(li)) {\n          var index_1 = this.getIndexByValue(li.getAttribute('data-value')) - this.skeletonCount;\n          if (index_1 > this.itemCount / 2) {\n            var startIndex = this.viewPortInfo.startIndex + (this.itemCount / 2 - 2) < this.totalItemCount ? this.viewPortInfo.startIndex + (this.itemCount / 2 - 2) : this.totalItemCount;\n            var endIndex = this.viewPortInfo.startIndex + this.itemCount > this.totalItemCount ? this.totalItemCount : this.viewPortInfo.startIndex + this.itemCount;\n            this.updateIncrementalView(startIndex, endIndex);\n          }\n          li = this.getElementByValue(li.getAttribute('data-value'));\n          this.setSelection(li, e);\n          this.setScrollPosition();\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          this.list.getElementsByClassName('e-virtual-ddl-content')[0].style = this.getTransformValues();\n          if (this.enableVirtualization && !this.fields.groupBy) {\n            var selectedLiOffsetTop = this.virtualListInfo && this.virtualListInfo.startIndex ? this.selectedLI.offsetTop + this.virtualListInfo.startIndex * this.selectedLI.offsetHeight : this.selectedLI.offsetTop;\n            this.list.scrollTop = selectedLiOffsetTop - this.list.querySelectorAll('.e-virtual-list').length * this.selectedLI.offsetHeight;\n          }\n          this.incrementalPreQueryString = this.incrementalQueryString;\n        } else {\n          this.updateIncrementalView(0, this.itemCount);\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          this.list.getElementsByClassName('e-virtual-ddl-content')[0].style = this.getTransformValues();\n          this.list.scrollTop = 0;\n        }\n      } else {\n        var li = incrementalSearch(e.charCode, this.liCollections, this.activeIndex, true, this.element.id);\n        if (!isNullOrUndefined(li)) {\n          this.setSelection(li, e);\n          this.setScrollPosition();\n        }\n      }\n    }\n  };\n  /**\n   * Hides the spinner loader.\n   *\n   * @returns {void}\n   */\n  DropDownList.prototype.hideSpinner = function () {\n    if (!isNullOrUndefined(this.spinnerElement)) {\n      hideSpinner(this.spinnerElement);\n      removeClass([this.spinnerElement], dropDownListClasses.disableIcon);\n      this.spinnerElement.innerHTML = '';\n      this.spinnerElement = null;\n    }\n  };\n  /**\n   * Shows the spinner loader.\n   *\n   * @returns {void}\n   */\n  DropDownList.prototype.showSpinner = function () {\n    if (isNullOrUndefined(this.spinnerElement)) {\n      this.spinnerElement = Browser.isDevice && !isNullOrUndefined(this.filterInputObj) && this.filterInputObj.buttons[1] || !isNullOrUndefined(this.filterInputObj) && this.filterInputObj.buttons[0] || this.inputWrapper.buttons[0];\n      addClass([this.spinnerElement], dropDownListClasses.disableIcon);\n      createSpinner({\n        target: this.spinnerElement,\n        width: Browser.isDevice ? '16px' : '14px'\n      }, this.createElement);\n      showSpinner(this.spinnerElement);\n    }\n  };\n  DropDownList.prototype.keyActionHandler = function (e) {\n    if (!this.enabled) {\n      return;\n    }\n    this.keyboardEvent = e;\n    if (this.isPreventKeyAction && this.enableVirtualization) {\n      e.preventDefault();\n    }\n    var preventAction = e.action === 'pageUp' || e.action === 'pageDown';\n    var preventHomeEnd = this.getModuleName() !== 'dropdownlist' && (e.action === 'home' || e.action === 'end');\n    this.isEscapeKey = e.action === 'escape';\n    this.isTabKey = !this.isPopupOpen && e.action === 'tab';\n    var isNavigation = e.action === 'down' || e.action === 'up' || e.action === 'pageUp' || e.action === 'pageDown' || e.action === 'home' || e.action === 'end';\n    if ((this.isEditTextBox() || preventAction || preventHomeEnd) && !this.isPopupOpen) {\n      return;\n    }\n    if (!this.readonly) {\n      var isTabAction = e.action === 'tab' || e.action === 'close';\n      if (isNullOrUndefined(this.list) && !this.isRequested && !isTabAction && e.action !== 'escape') {\n        this.searchKeyEvent = e;\n        this.renderList(e);\n        this.UpdateSkeleton();\n        this.liCollections = this.list.querySelectorAll('.' + dropDownBaseClasses.li);\n        this.ulElement = this.list.querySelector('ul');\n      }\n      if (isNullOrUndefined(this.list) || !isNullOrUndefined(this.liCollections) && isNavigation && this.liCollections.length === 0 || this.isRequested) {\n        return;\n      }\n      if (isTabAction && this.getModuleName() !== 'autocomplete' && this.isPopupOpen || e.action === 'escape') {\n        e.preventDefault();\n      }\n      this.isSelected = e.action === 'escape' ? false : this.isSelected;\n      this.isTyped = isNavigation || e.action === 'escape' ? false : this.isTyped;\n      switch (e.action) {\n        case 'down':\n        case 'up':\n          this.updateUpDownAction(e);\n          break;\n        case 'pageUp':\n          this.pageUpSelection(this.activeIndex - this.getPageCount(), e);\n          e.preventDefault();\n          break;\n        case 'pageDown':\n          this.pageDownSelection(this.activeIndex + this.getPageCount(), e);\n          e.preventDefault();\n          break;\n        case 'home':\n          this.isMouseScrollAction = true;\n          this.updateHomeEndAction(e);\n          break;\n        case 'end':\n          this.isMouseScrollAction = true;\n          this.updateHomeEndAction(e);\n          break;\n        case 'space':\n          if (this.getModuleName() === 'dropdownlist') {\n            if (!this.beforePopupOpen) {\n              this.showPopup();\n              e.preventDefault();\n            }\n          }\n          break;\n        case 'open':\n          this.showPopup(e);\n          break;\n        case 'hide':\n          this.preventAltUp = this.isPopupOpen;\n          this.hidePopup(e);\n          this.focusDropDown(e);\n          break;\n        case 'enter':\n          this.selectCurrentItem(e);\n          break;\n        case 'tab':\n          this.selectCurrentValueOnTab(e);\n          break;\n        case 'escape':\n        case 'close':\n          if (this.isPopupOpen) {\n            this.hidePopup(e);\n            this.focusDropDown(e);\n          }\n          break;\n      }\n    }\n  };\n  DropDownList.prototype.updateUpDownAction = function (e, isVirtualKeyAction) {\n    if (this.allowFiltering && !this.enableVirtualization && this.getModuleName() !== 'autocomplete') {\n      var value_1 = this.getItemData().value;\n      if (isNullOrUndefined(value_1)) {\n        value_1 = 'null';\n      }\n      var filterIndex = this.getIndexByValue(value_1);\n      if (!isNullOrUndefined(filterIndex)) {\n        this.activeIndex = filterIndex;\n      }\n    }\n    var focusEle = this.list.querySelector('.' + dropDownListClasses.focus);\n    if (this.isSelectFocusItem(focusEle) && !isVirtualKeyAction) {\n      this.setSelection(focusEle, e);\n      if (this.enableVirtualization && !this.fields.groupBy && this.getModuleName() !== 'combobox') {\n        var selectedLiOffsetTop = this.virtualListInfo && this.virtualListInfo.startIndex ? this.selectedLI.offsetTop + this.virtualListInfo.startIndex * this.selectedLI.offsetHeight : this.selectedLI.offsetTop;\n        this.list.scrollTop = selectedLiOffsetTop - this.list.querySelectorAll('.e-virtual-list').length * this.selectedLI.offsetHeight;\n      }\n    } else if (!isNullOrUndefined(this.liCollections)) {\n      var virtualIndex = this.activeIndex;\n      var index = e.action === 'down' ? this.activeIndex + 1 : this.activeIndex - 1;\n      index = isVirtualKeyAction ? virtualIndex : index;\n      var startIndex = 0;\n      if (this.getModuleName() === 'autocomplete') {\n        startIndex = e.action === 'down' && isNullOrUndefined(this.activeIndex) ? 0 : this.liCollections.length - 1;\n        index = index < 0 ? this.liCollections.length - 1 : index === this.liCollections.length ? 0 : index;\n      }\n      var nextItem = void 0;\n      if (this.getModuleName() !== 'autocomplete' || this.getModuleName() === 'autocomplete' && this.isPopupOpen) {\n        if (!this.enableVirtualization) {\n          nextItem = isNullOrUndefined(this.activeIndex) ? this.liCollections[startIndex] : this.liCollections[index];\n        } else {\n          if (!isVirtualKeyAction) {\n            nextItem = isNullOrUndefined(this.activeIndex) ? this.liCollections[this.skeletonCount] : this.liCollections[index];\n            nextItem = !isNullOrUndefined(nextItem) && !nextItem.classList.contains('e-virtual-list') ? nextItem : null;\n          } else {\n            if (this.getModuleName() === 'autocomplete') {\n              var value = this.getFormattedValue(this.selectedLI.getAttribute('data-value'));\n              nextItem = this.getElementByValue(value);\n            } else {\n              nextItem = this.getElementByValue(this.getItemData().value);\n            }\n          }\n        }\n      }\n      if (!isNullOrUndefined(nextItem)) {\n        this.setSelection(nextItem, e);\n      } else if (this.enableVirtualization && !this.isPopupOpen && this.getModuleName() !== 'autocomplete' && (this.viewPortInfo.endIndex !== this.totalItemCount && e.action === 'down' || this.viewPortInfo.startIndex !== 0 && e.action === 'up')) {\n        if (e.action === 'down') {\n          this.viewPortInfo.startIndex = this.viewPortInfo.startIndex + this.itemCount < this.totalItemCount - this.itemCount ? this.viewPortInfo.startIndex + this.itemCount : this.totalItemCount - this.itemCount;\n          this.viewPortInfo.endIndex = this.viewPortInfo.startIndex + this.itemCount;\n          this.updateVirtualItemIndex();\n          this.isCustomFilter = this.getModuleName() === 'combobox' ? true : this.isCustomFilter;\n          this.resetList(this.dataSource, this.fields, this.query);\n          this.isCustomFilter = this.getModuleName() === 'combobox' ? false : this.isCustomFilter;\n          var value_2 = this.liCollections[0].getAttribute('data-value') !== \"null\" ? this.getFormattedValue(this.liCollections[0].getAttribute('data-value')) : null;\n          var selectedData = this.getDataByValue(value_2);\n          if (selectedData) {\n            this.itemData = selectedData;\n          }\n        } else if (e.action === 'up') {\n          this.viewPortInfo.startIndex = this.viewPortInfo.startIndex - this.itemCount > 0 ? this.viewPortInfo.startIndex - this.itemCount : 0;\n          this.viewPortInfo.endIndex = this.viewPortInfo.startIndex + this.itemCount;\n          this.updateVirtualItemIndex();\n          this.isCustomFilter = this.getModuleName() === 'combobox' ? true : this.isCustomFilter;\n          this.resetList(this.dataSource, this.fields, this.query);\n          this.isCustomFilter = this.getModuleName() === 'combobox' ? false : this.isCustomFilter;\n          var value_3 = this.liCollections[this.liCollections.length - 1].getAttribute('data-value') !== \"null\" ? this.getFormattedValue(this.liCollections[this.liCollections.length - 1].getAttribute('data-value')) : null;\n          var selectedData = this.getDataByValue(value_3);\n          if (selectedData) {\n            this.itemData = selectedData;\n          }\n        }\n        this.UpdateSkeleton();\n        this.liCollections = this.list.querySelectorAll('.' + dropDownBaseClasses.li);\n        this.ulElement = this.list.querySelector('ul');\n        this.handleVirtualKeyboardActions(e, this.pageCount);\n      }\n    }\n    if (this.allowFiltering && !this.enableVirtualization && this.getModuleName() !== 'autocomplete') {\n      var value_4 = this.getItemData().value;\n      var filterIndex = this.getIndexByValueFilter(value_4);\n      if (!isNullOrUndefined(filterIndex)) {\n        this.activeIndex = filterIndex;\n      }\n    }\n    if (this.allowFiltering && this.getModuleName() === 'dropdownlist') {\n      if (!isNullOrUndefined(this.ulElement) && !isNullOrUndefined(this.ulElement.getElementsByClassName('e-item-focus')[0])) {\n        attributes(this.filterInput, {\n          'aria-activedescendant': this.ulElement.getElementsByClassName('e-item-focus')[0].id\n        });\n      } else if (!isNullOrUndefined(this.ulElement) && !isNullOrUndefined(this.ulElement.getElementsByClassName('e-active')[0])) {\n        attributes(this.filterInput, {\n          'aria-activedescendant': this.ulElement.getElementsByClassName('e-active')[0].id\n        });\n      }\n    }\n    e.preventDefault();\n  };\n  DropDownList.prototype.updateVirtualItemIndex = function () {\n    this.virtualItemStartIndex = this.viewPortInfo.startIndex;\n    this.virtualItemEndIndex = this.viewPortInfo.endIndex;\n    this.virtualListInfo = this.viewPortInfo;\n  };\n  DropDownList.prototype.updateHomeEndAction = function (e, isVirtualKeyAction) {\n    if (this.getModuleName() === 'dropdownlist') {\n      var findLi = 0;\n      if (e.action === 'home') {\n        findLi = 0;\n        if (this.enableVirtualization && this.isPopupOpen) {\n          findLi = this.skeletonCount;\n        } else if (this.enableVirtualization && !this.isPopupOpen && this.viewPortInfo.startIndex !== 0) {\n          this.viewPortInfo.startIndex = 0;\n          this.viewPortInfo.endIndex = this.itemCount;\n          this.updateVirtualItemIndex();\n          this.resetList(this.dataSource, this.fields, this.query);\n        }\n      } else {\n        if (this.enableVirtualization && !this.isPopupOpen && this.viewPortInfo.endIndex !== this.totalItemCount) {\n          this.viewPortInfo.startIndex = this.totalItemCount - this.itemCount;\n          this.viewPortInfo.endIndex = this.totalItemCount;\n          this.updateVirtualItemIndex();\n          this.resetList(this.dataSource, this.fields, this.query);\n        }\n        findLi = this.getItems().length - 1;\n      }\n      e.preventDefault();\n      if (this.activeIndex === findLi) {\n        if (isVirtualKeyAction) {\n          this.setSelection(this.liCollections[findLi], e);\n        }\n        return;\n      }\n      this.setSelection(this.liCollections[findLi], e);\n    }\n  };\n  DropDownList.prototype.selectCurrentValueOnTab = function (e) {\n    if (this.getModuleName() === 'autocomplete') {\n      this.selectCurrentItem(e);\n    } else {\n      if (this.isPopupOpen) {\n        this.hidePopup(e);\n        this.focusDropDown(e);\n      }\n    }\n  };\n  DropDownList.prototype.mobileKeyActionHandler = function (e) {\n    if (!this.enabled) {\n      return;\n    }\n    if (this.isEditTextBox() && !this.isPopupOpen) {\n      return;\n    }\n    if (!this.readonly) {\n      if (this.list === undefined && !this.isRequested) {\n        this.searchKeyEvent = e;\n        this.renderList();\n      }\n      if (isNullOrUndefined(this.list) || !isNullOrUndefined(this.liCollections) && this.liCollections.length === 0 || this.isRequested) {\n        return;\n      }\n      if (e.action === 'enter') {\n        this.selectCurrentItem(e);\n      }\n    }\n  };\n  DropDownList.prototype.handleVirtualKeyboardActions = function (e, pageCount) {\n    switch (e.action) {\n      case 'down':\n      case 'up':\n        if (this.itemData != null || this.getModuleName() === 'autocomplete') {\n          this.updateUpDownAction(e, true);\n        }\n        break;\n      case 'pageUp':\n        var count = pageCount * 2 - 4;\n        this.activeIndex = Math.round(count);\n        this.pageUpSelection(this.activeIndex - this.getPageCount(), e, true);\n        e.preventDefault();\n        break;\n      case 'pageDown':\n        this.activeIndex = 1;\n        this.pageDownSelection(this.activeIndex + this.getPageCount(), e, true);\n        e.preventDefault();\n        break;\n      case 'home':\n        this.isMouseScrollAction = true;\n        this.updateHomeEndAction(e, true);\n        break;\n      case 'end':\n        this.isMouseScrollAction = true;\n        this.updateHomeEndAction(e, true);\n        break;\n    }\n    this.keyboardEvent = null;\n  };\n  DropDownList.prototype.selectCurrentItem = function (e) {\n    if (this.isPopupOpen) {\n      var li = this.list.querySelector('.' + dropDownListClasses.focus);\n      if (li) {\n        this.setSelection(li, e);\n        this.isTyped = false;\n      }\n      if (this.isSelected) {\n        this.isSelectCustom = false;\n        this.onChangeEvent(e);\n      }\n      this.hidePopup(e);\n      this.focusDropDown(e);\n    } else {\n      this.showPopup();\n    }\n  };\n  DropDownList.prototype.isSelectFocusItem = function (element) {\n    return !isNullOrUndefined(element);\n  };\n  DropDownList.prototype.pageUpSelection = function (steps, event, isVirtualKeyAction) {\n    var previousItem = steps >= 0 ? this.liCollections[steps + 1] : this.liCollections[0];\n    if (this.enableVirtualization && this.activeIndex == null || isVirtualKeyAction) {\n      previousItem = steps >= 0 ? this.liCollections[steps + this.skeletonCount + 1] : this.liCollections[0];\n    }\n    if (!isNullOrUndefined(previousItem) && previousItem.classList.contains('e-virtual-list')) {\n      previousItem = this.liCollections[this.skeletonCount];\n    }\n    this.PageUpDownSelection(previousItem, event);\n    if (this.allowFiltering && this.getModuleName() === 'dropdownlist') {\n      if (!isNullOrUndefined(this.ulElement) && !isNullOrUndefined(this.ulElement.getElementsByClassName('e-item-focus')[0])) {\n        attributes(this.filterInput, {\n          'aria-activedescendant': this.ulElement.getElementsByClassName('e-item-focus')[0].id\n        });\n      } else if (!isNullOrUndefined(this.ulElement) && !isNullOrUndefined(this.ulElement.getElementsByClassName('e-active')[0])) {\n        attributes(this.filterInput, {\n          'aria-activedescendant': this.ulElement.getElementsByClassName('e-active')[0].id\n        });\n      }\n    }\n  };\n  DropDownList.prototype.PageUpDownSelection = function (previousItem, event) {\n    if (this.enableVirtualization) {\n      if (!isNullOrUndefined(previousItem) && (this.getModuleName() !== 'autocomplete' && !previousItem.classList.contains('e-active') || this.getModuleName() === 'autocomplete' && !previousItem.classList.contains('e-item-focus'))) {\n        this.setSelection(previousItem, event);\n      }\n    } else {\n      this.setSelection(previousItem, event);\n    }\n  };\n  DropDownList.prototype.pageDownSelection = function (steps, event, isVirtualKeyAction) {\n    var list = this.getItems();\n    var previousItem = steps <= list.length ? this.liCollections[steps - 1] : this.liCollections[list.length - 1];\n    if (this.enableVirtualization && this.activeIndex == null || isVirtualKeyAction) {\n      previousItem = steps <= list.length ? this.liCollections[steps + this.skeletonCount - 1] : this.liCollections[list.length - 1];\n    }\n    this.PageUpDownSelection(previousItem, event);\n    if (this.allowFiltering && this.getModuleName() === 'dropdownlist') {\n      if (!isNullOrUndefined(this.ulElement) && !isNullOrUndefined(this.ulElement.getElementsByClassName('e-item-focus')[0])) {\n        attributes(this.filterInput, {\n          'aria-activedescendant': this.ulElement.getElementsByClassName('e-item-focus')[0].id\n        });\n      } else if (!isNullOrUndefined(this.ulElement) && !isNullOrUndefined(this.ulElement.getElementsByClassName('e-active')[0])) {\n        attributes(this.filterInput, {\n          'aria-activedescendant': this.ulElement.getElementsByClassName('e-active')[0].id\n        });\n      }\n    }\n  };\n  DropDownList.prototype.unWireEvent = function () {\n    if (!isNullOrUndefined(this.inputWrapper)) {\n      EventHandler.remove(this.inputWrapper.container, 'mousedown', this.dropDownClick);\n      EventHandler.remove(this.inputWrapper.container, 'keypress', this.onSearch);\n      EventHandler.remove(this.inputWrapper.container, 'focus', this.focusIn);\n      EventHandler.remove(window, 'resize', this.windowResize);\n    }\n    this.unBindCommonEvent();\n  };\n  /**\n   * Event un binding for list items.\n   *\n   * @returns {void}\n   */\n  DropDownList.prototype.unWireListEvents = function () {\n    if (this.list) {\n      EventHandler.remove(this.list, 'click', this.onMouseClick);\n      EventHandler.remove(this.list, 'mouseover', this.onMouseOver);\n      EventHandler.remove(this.list, 'mouseout', this.onMouseLeave);\n    }\n  };\n  DropDownList.prototype.checkSelector = function (id) {\n    return '[id=\"' + id.replace(/(:|\\.|\\[|\\]|,|=|@|\\\\|\\/|#)/g, '\\\\$1') + '\"]';\n  };\n  DropDownList.prototype.onDocumentClick = function (e) {\n    var target = e.target;\n    if (!(!isNullOrUndefined(this.popupObj) && closest(target, this.checkSelector(this.popupObj.element.id))) && !isNullOrUndefined(this.inputWrapper) && !this.inputWrapper.container.contains(e.target)) {\n      if (this.inputWrapper.container.classList.contains(dropDownListClasses.inputFocus) || this.isPopupOpen) {\n        this.isDocumentClick = true;\n        var isActive = this.isRequested;\n        this.hidePopup(e);\n        this.isInteracted = false;\n        if (!isActive) {\n          this.onFocusOut();\n          this.inputWrapper.container.classList.remove(dropDownListClasses.inputFocus);\n        }\n      }\n    } else if (target !== this.inputElement && !(this.allowFiltering && target === this.filterInput) && !(this.getModuleName() === 'combobox' && !this.allowFiltering && Browser.isDevice && target === this.inputWrapper.buttons[0])) {\n      this.isPreventBlur = (Browser.isIE || Browser.info.name === 'edge') && (document.activeElement === this.targetElement() || document.activeElement === this.filterInput);\n      e.preventDefault();\n    }\n  };\n  DropDownList.prototype.activeStateChange = function () {\n    if (this.isDocumentClick) {\n      this.hidePopup();\n      this.onFocusOut();\n      this.inputWrapper.container.classList.remove(dropDownListClasses.inputFocus);\n    }\n  };\n  DropDownList.prototype.focusDropDown = function (e) {\n    if (!this.initial && this.isFilterLayout()) {\n      this.focusIn(e);\n    }\n  };\n  DropDownList.prototype.dropDownClick = function (e) {\n    if (e.which === 3 || e.button === 2) {\n      return;\n    }\n    this.keyboardEvent = null;\n    if (this.targetElement().classList.contains(dropDownListClasses.disable) || this.inputWrapper.clearButton === e.target) {\n      return;\n    }\n    var target = e.target;\n    if (target !== this.inputElement && !(this.allowFiltering && target === this.filterInput) && this.getModuleName() !== 'combobox') {\n      e.preventDefault();\n    }\n    if (!this.readonly) {\n      if (this.isPopupOpen) {\n        this.hidePopup(e);\n        if (this.isFilterLayout()) {\n          this.focusDropDown(e);\n        }\n      } else {\n        this.focusIn(e);\n        this.floatLabelChange();\n        this.queryString = this.inputElement.value.trim() === '' ? null : this.inputElement.value;\n        this.isDropDownClick = true;\n        this.showPopup(e);\n      }\n      // eslint-disable-next-line @typescript-eslint/no-this-alias\n      var proxy_1 = this;\n      // eslint-disable-next-line max-len\n      var duration = this.element.tagName === this.getNgDirective() && this.itemTemplate ? 500 : 100;\n      if (!this.isSecondClick) {\n        setTimeout(function () {\n          proxy_1.cloneElements();\n          proxy_1.isSecondClick = true;\n        }, duration);\n      }\n    } else {\n      this.focusIn(e);\n    }\n  };\n  DropDownList.prototype.cloneElements = function () {\n    if (this.list) {\n      var ulElement = this.list.querySelector('ul');\n      if (ulElement) {\n        ulElement = ulElement.cloneNode ? ulElement.cloneNode(true) : ulElement;\n        this.actionCompleteData.ulElement = ulElement;\n      }\n    }\n  };\n  DropDownList.prototype.updateSelectedItem = function (li, e, preventSelect, isSelection) {\n    var _this = this;\n    this.removeSelection();\n    li.classList.add(dropDownBaseClasses.selected);\n    this.removeHover();\n    var value = li.getAttribute('data-value') !== \"null\" ? this.getFormattedValue(li.getAttribute('data-value')) : null;\n    var selectedData = this.getDataByValue(value);\n    if (!this.initial && !preventSelect && !isNullOrUndefined(e)) {\n      var items = this.detachChanges(selectedData);\n      this.isSelected = true;\n      var eventArgs = {\n        e: e,\n        item: li,\n        itemData: items,\n        isInteracted: e ? true : false,\n        cancel: false\n      };\n      this.trigger('select', eventArgs, function (eventArgs) {\n        if (eventArgs.cancel) {\n          li.classList.remove(dropDownBaseClasses.selected);\n        } else {\n          _this.selectEventCallback(li, e, preventSelect, selectedData, value);\n          if (isSelection) {\n            _this.setSelectOptions(li, e);\n          }\n        }\n      });\n    } else {\n      this.selectEventCallback(li, e, preventSelect, selectedData, value);\n      if (isSelection) {\n        this.setSelectOptions(li, e);\n      }\n    }\n  };\n  DropDownList.prototype.selectEventCallback = function (li, e, preventSelect, selectedData, value) {\n    this.previousItemData = !isNullOrUndefined(this.itemData) ? this.itemData : null;\n    if (this.itemData != selectedData) {\n      this.previousValue = !isNullOrUndefined(this.itemData) ? typeof this.itemData == \"object\" ? this.checkFieldValue(this.itemData, this.fields.value.split('.')) : this.itemData : null;\n    }\n    this.item = li;\n    this.itemData = selectedData;\n    var focusedItem = this.list.querySelector('.' + dropDownBaseClasses.focus);\n    if (focusedItem) {\n      removeClass([focusedItem], dropDownBaseClasses.focus);\n    }\n    li.setAttribute('aria-selected', 'true');\n    if (isNullOrUndefined(value)) {\n      value = 'null';\n    }\n    if (this.allowFiltering && !this.enableVirtualization && this.getModuleName() !== 'autocomplete') {\n      var filterIndex = this.getIndexByValueFilter(value);\n      if (!isNullOrUndefined(filterIndex)) {\n        this.activeIndex = filterIndex;\n      } else {\n        this.activeIndex = this.getIndexByValue(value);\n      }\n    } else {\n      this.activeIndex = this.getIndexByValue(value);\n    }\n  };\n  DropDownList.prototype.activeItem = function (li) {\n    if (this.isValidLI(li) && !li.classList.contains(dropDownBaseClasses.selected)) {\n      this.removeSelection();\n      li.classList.add(dropDownBaseClasses.selected);\n      this.removeHover();\n      li.setAttribute('aria-selected', 'true');\n    }\n  };\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  DropDownList.prototype.setValue = function (e) {\n    var dataItem = this.getItemData();\n    if (dataItem.value === null) {\n      Input.setValue(null, this.inputElement, this.floatLabelType, this.showClearButton);\n    } else {\n      Input.setValue(dataItem.text, this.inputElement, this.floatLabelType, this.showClearButton);\n    }\n    if (this.valueTemplate && this.itemData !== null) {\n      this.setValueTemplate();\n    } else if (!isNullOrUndefined(this.valueTempElement) && this.inputElement.previousSibling === this.valueTempElement) {\n      detach(this.valueTempElement);\n      this.inputElement.style.display = 'block';\n    }\n    if (!isNullOrUndefined(dataItem.value) && !this.enableVirtualization && this.allowFiltering) {\n      this.activeIndex = this.getIndexByValueFilter(dataItem.value);\n    }\n    var clearIcon = dropDownListClasses.clearIcon;\n    var isFilterElement = this.isFiltering() && this.filterInput && this.getModuleName() === 'combobox';\n    var clearElement = isFilterElement && this.filterInput.parentElement.querySelector('.' + clearIcon);\n    if (this.isFiltering() && clearElement) {\n      clearElement.style.removeProperty('visibility');\n    }\n    if (this.previousValue === dataItem.value) {\n      this.isSelected = false;\n      return true;\n    } else {\n      this.isSelected = !this.initial ? true : false;\n      this.isSelectCustom = false;\n      if (this.getModuleName() === 'dropdownlist') {\n        this.updateIconState();\n      }\n      return false;\n    }\n  };\n  DropDownList.prototype.setSelection = function (li, e) {\n    var _this = this;\n    if (this.isValidLI(li) && (!li.classList.contains(dropDownBaseClasses.selected) || this.isPopupOpen && this.isSelected && li.classList.contains(dropDownBaseClasses.selected))) {\n      this.updateSelectedItem(li, e, false, true);\n    } else {\n      this.setSelectOptions(li, e);\n      if (this.enableVirtualization) {\n        var fields = this.fields.value ? this.fields.value : '';\n        if (this.dataSource instanceof DataManager) {\n          this.dataSource.executeQuery(new Query().where(new Predicate(fields, 'equal', this.value))).then(function (e) {\n            if (e.result.length > 0) {\n              _this.itemData = e.result[0];\n              var dataItem = _this.getItemData();\n              if (_this.value === dataItem.value && _this.text !== dataItem.text || _this.value !== dataItem.value && _this.text === dataItem.text) {\n                _this.setProperties({\n                  'text': dataItem.text,\n                  'value': dataItem.value\n                });\n              }\n            }\n          });\n        } else {\n          var getItem = new DataManager(this.dataSource).executeLocal(new Query().where(new Predicate(fields, 'equal', this.value)));\n          if (getItem && getItem.length > 0) {\n            this.itemData = getItem[0];\n            var dataItem = this.getItemData();\n            if (this.value === dataItem.value && this.text !== dataItem.text || this.value !== dataItem.value && this.text === dataItem.text) {\n              this.setProperties({\n                'text': dataItem.text,\n                'value': dataItem.value\n              });\n            }\n          }\n        }\n      }\n    }\n  };\n  DropDownList.prototype.setSelectOptions = function (li, e) {\n    if (this.list) {\n      this.removeHover();\n    }\n    this.previousSelectedLI = !isNullOrUndefined(this.selectedLI) ? this.selectedLI : null;\n    this.selectedLI = li;\n    if (this.setValue(e)) {\n      return;\n    }\n    if (!this.isPopupOpen && !isNullOrUndefined(li) || this.isPopupOpen && !isNullOrUndefined(e) && (e.type !== 'keydown' || e.type === 'keydown' && e.action === 'enter')) {\n      this.isSelectCustom = false;\n      this.onChangeEvent(e);\n    }\n    if (this.isPopupOpen && !isNullOrUndefined(this.selectedLI) && this.itemData !== null && (!e || e.type !== 'click')) {\n      this.setScrollPosition(e);\n    }\n    if (Browser.info.name !== 'mozilla') {\n      if (this.targetElement()) {\n        attributes(this.targetElement(), {\n          'aria-describedby': this.inputElement.id !== '' ? this.inputElement.id : this.element.id\n        });\n        this.targetElement().removeAttribute('aria-live');\n      }\n    }\n    if (this.isPopupOpen && !isNullOrUndefined(this.ulElement) && !isNullOrUndefined(this.ulElement.getElementsByClassName('e-item-focus')[0])) {\n      attributes(this.targetElement(), {\n        'aria-activedescendant': this.ulElement.getElementsByClassName('e-item-focus')[0].id\n      });\n    } else if (this.isPopupOpen && !isNullOrUndefined(this.ulElement) && !isNullOrUndefined(this.ulElement.getElementsByClassName('e-active')[0])) {\n      attributes(this.targetElement(), {\n        'aria-activedescendant': this.ulElement.getElementsByClassName('e-active')[0].id\n      });\n    }\n  };\n  DropDownList.prototype.dropdownCompiler = function (dropdownTemplate) {\n    var checkTemplate = false;\n    if (typeof dropdownTemplate !== 'function' && dropdownTemplate) {\n      try {\n        checkTemplate = document.querySelectorAll(dropdownTemplate).length ? true : false;\n      } catch (exception) {\n        checkTemplate = false;\n      }\n    }\n    return checkTemplate;\n  };\n  DropDownList.prototype.setValueTemplate = function () {\n    var compiledString;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    if (this.isReact) {\n      this.clearTemplate(['valueTemplate']);\n      if (this.valueTempElement) {\n        detach(this.valueTempElement);\n        this.inputElement.style.display = 'block';\n        this.valueTempElement = null;\n      }\n    }\n    if (!this.valueTempElement) {\n      this.valueTempElement = this.createElement('span', {\n        className: dropDownListClasses.value\n      });\n      this.inputElement.parentElement.insertBefore(this.valueTempElement, this.inputElement);\n      this.inputElement.style.display = 'none';\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    if (!this.isReact) {\n      this.valueTempElement.innerHTML = '';\n    }\n    var valuecheck = this.dropdownCompiler(this.valueTemplate);\n    if (typeof this.valueTemplate !== 'function' && valuecheck) {\n      compiledString = compile(document.querySelector(this.valueTemplate).innerHTML.trim());\n    } else {\n      compiledString = compile(this.valueTemplate);\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var valueCompTemp = compiledString(this.itemData, this, 'valueTemplate', this.valueTemplateId, this.isStringTemplate, null, this.valueTempElement);\n    if (valueCompTemp && valueCompTemp.length > 0) {\n      append(valueCompTemp, this.valueTempElement);\n    }\n    this.renderReactTemplates();\n  };\n  DropDownList.prototype.removeSelection = function () {\n    if (this.list) {\n      var selectedItems = this.list.querySelectorAll('.' + dropDownBaseClasses.selected);\n      if (selectedItems.length) {\n        removeClass(selectedItems, dropDownBaseClasses.selected);\n        selectedItems[0].removeAttribute('aria-selected');\n      }\n    }\n  };\n  DropDownList.prototype.getItemData = function () {\n    var fields = this.fields;\n    var dataItem = null;\n    dataItem = this.itemData;\n    var dataValue;\n    var dataText;\n    if (!isNullOrUndefined(dataItem)) {\n      dataValue = getValue(fields.value, dataItem);\n      dataText = getValue(fields.text, dataItem);\n    }\n    var value = !isNullOrUndefined(dataItem) && !isUndefined(dataValue) ? dataValue : dataItem;\n    var text = !isNullOrUndefined(dataItem) && !isUndefined(dataValue) ? dataText : dataItem;\n    return {\n      value: value,\n      text: text\n    };\n  };\n  /**\n   * To trigger the change event for list.\n   *\n   * @param {MouseEvent | KeyboardEvent | TouchEvent} eve - Specifies the event arguments.\n   * @returns {void}\n   */\n  DropDownList.prototype.onChangeEvent = function (eve) {\n    var dataItem = this.getItemData();\n    var index = this.isSelectCustom ? null : this.activeIndex;\n    this.setProperties({\n      'index': index,\n      'text': dataItem.text,\n      'value': dataItem.value\n    }, true);\n    this.detachChangeEvent(eve);\n  };\n  DropDownList.prototype.detachChanges = function (value) {\n    var items;\n    if (typeof value === 'string' || typeof value === 'boolean' || typeof value === 'number') {\n      items = Object.defineProperties({}, {\n        value: {\n          value: value,\n          enumerable: true\n        },\n        text: {\n          value: value,\n          enumerable: true\n        }\n      });\n    } else {\n      items = value;\n    }\n    return items;\n  };\n  DropDownList.prototype.detachChangeEvent = function (eve) {\n    this.isSelected = false;\n    this.previousValue = this.value;\n    this.activeIndex = this.index;\n    this.typedString = !isNullOrUndefined(this.text) ? this.text : '';\n    if (!this.initial) {\n      var items = this.detachChanges(this.itemData);\n      var preItems = void 0;\n      if (typeof this.previousItemData === 'string' || typeof this.previousItemData === 'boolean' || typeof this.previousItemData === 'number') {\n        preItems = Object.defineProperties({}, {\n          value: {\n            value: this.previousItemData,\n            enumerable: true\n          },\n          text: {\n            value: this.previousItemData,\n            enumerable: true\n          }\n        });\n      } else {\n        preItems = this.previousItemData;\n      }\n      this.setHiddenValue();\n      var eventArgs = {\n        e: eve,\n        item: this.item,\n        itemData: items,\n        previousItem: this.previousSelectedLI,\n        previousItemData: preItems,\n        isInteracted: eve ? true : false,\n        value: this.value,\n        element: this.element,\n        event: eve\n      };\n      if (this.isAngular && this.preventChange) {\n        this.preventChange = false;\n      } else {\n        this.trigger('change', eventArgs);\n      }\n    }\n    if ((isNullOrUndefined(this.value) || this.value === '') && this.floatLabelType !== 'Always') {\n      removeClass([this.inputWrapper.container], 'e-valid-input');\n    }\n  };\n  DropDownList.prototype.setHiddenValue = function () {\n    if (!isNullOrUndefined(this.value)) {\n      if (this.hiddenElement.querySelector('option')) {\n        var selectedElement = this.hiddenElement.querySelector('option');\n        selectedElement.textContent = this.text;\n        selectedElement.setAttribute('value', this.value.toString());\n      } else {\n        if (!isNullOrUndefined(this.hiddenElement)) {\n          this.hiddenElement.innerHTML = '<option selected>' + this.text + '</option>';\n          var selectedElement = this.hiddenElement.querySelector('option');\n          selectedElement.setAttribute('value', this.value.toString());\n        }\n      }\n    } else {\n      this.hiddenElement.innerHTML = '';\n    }\n  };\n  /**\n   * Filter bar implementation\n   *\n   * @param {KeyboardEventArgs} e - Specifies the event arguments.\n   * @returns {void}\n   */\n  DropDownList.prototype.onFilterUp = function (e) {\n    if (!(e.ctrlKey && e.keyCode === 86) && (this.isValidKey || e.keyCode === 40 || e.keyCode === 38)) {\n      this.isValidKey = false;\n      switch (e.keyCode) {\n        case 38: //up arrow\n        case 40:\n          //down arrow\n          if (this.getModuleName() === 'autocomplete' && !this.isPopupOpen && !this.preventAltUp && !this.isRequested) {\n            this.preventAutoFill = true;\n            this.searchLists(e);\n          } else {\n            this.preventAutoFill = false;\n          }\n          this.preventAltUp = false;\n          if (this.getModuleName() === 'autocomplete' && !isNullOrUndefined(this.ulElement) && !isNullOrUndefined(this.ulElement.getElementsByClassName('e-item-focus')[0])) {\n            attributes(this.targetElement(), {\n              'aria-activedescendant': this.ulElement.getElementsByClassName('e-item-focus')[0].id\n            });\n          }\n          e.preventDefault();\n          break;\n        case 46: //delete\n        case 8:\n          //backspace\n          this.typedString = this.filterInput.value;\n          if (!this.isPopupOpen && this.typedString !== '' || this.isPopupOpen && this.queryString.length > 0) {\n            this.preventAutoFill = true;\n            this.searchLists(e);\n          } else if (this.typedString === '' && this.queryString === '' && this.getModuleName() !== 'autocomplete') {\n            this.preventAutoFill = true;\n            this.searchLists(e);\n          } else if (this.typedString === '') {\n            if (this.list) {\n              this.resetFocusElement();\n            }\n            this.activeIndex = null;\n            if (this.getModuleName() !== 'dropdownlist') {\n              this.preventAutoFill = true;\n              this.searchLists(e);\n              if (this.getModuleName() === 'autocomplete') {\n                this.hidePopup();\n              }\n            }\n          }\n          e.preventDefault();\n          break;\n        default:\n          this.typedString = this.filterInput.value;\n          this.preventAutoFill = false;\n          this.searchLists(e);\n          if (this.enableVirtualization && this.getModuleName() !== 'autocomplete' || this.getModuleName() === 'autocomplete' && !(this.dataSource instanceof DataManager) || this.getModuleName() === 'autocomplete' && this.dataSource instanceof DataManager && this.totalItemCount != 0) {\n            this.getFilteringSkeletonCount();\n          }\n          break;\n      }\n    } else {\n      this.isValidKey = false;\n    }\n  };\n  DropDownList.prototype.getFilteringSkeletonCount = function () {\n    var difference = this.dataCount - this.viewPortInfo.endIndex;\n    var currentSkeletonCount = this.skeletonCount;\n    this.getSkeletonCount(true);\n    this.skeletonCount = this.dataCount > this.itemCount * 2 ? this.skeletonCount : difference > this.skeletonCount ? this.skeletonCount : difference > 0 ? difference : 0;\n    var skeletonUpdated = true;\n    if (this.getModuleName() === 'autocomplete' && this.totalItemCount != 0 && this.totalItemCount < this.itemCount * 2) {\n      this.skeletonCount = 0;\n      skeletonUpdated = false;\n    }\n    if (!this.list.classList.contains(dropDownBaseClasses.noData)) {\n      var isSkeletonCountChange = currentSkeletonCount !== this.skeletonCount;\n      if (currentSkeletonCount !== this.skeletonCount && skeletonUpdated) {\n        this.UpdateSkeleton(true, Math.abs(currentSkeletonCount - this.skeletonCount));\n      } else {\n        this.UpdateSkeleton();\n      }\n      this.liCollections = this.list.querySelectorAll('.e-list-item');\n      if (this.list.getElementsByClassName('e-virtual-ddl').length > 0) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        this.list.getElementsByClassName('e-virtual-ddl')[0].style = this.GetVirtualTrackHeight();\n      }\n      if (this.list.getElementsByClassName('e-virtual-ddl-content').length > 0) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        this.list.getElementsByClassName('e-virtual-ddl-content')[0].style = this.getTransformValues();\n      }\n    }\n  };\n  DropDownList.prototype.getSkeletonCount = function (retainSkeleton) {\n    this.virtualListHeight = this.listHeight != null ? parseInt(this.listHeight, 10) : this.virtualListHeight;\n    var actualCount = this.virtualListHeight > 0 ? Math.floor(this.virtualListHeight / this.listItemHeight) : 0;\n    this.skeletonCount = actualCount * 2 < this.itemCount ? this.itemCount : actualCount * 2;\n    this.itemCount = retainSkeleton ? this.itemCount : this.skeletonCount;\n    this.skeletonCount = Math.floor(this.skeletonCount / 2) + 2;\n  };\n  DropDownList.prototype.onFilterDown = function (e) {\n    switch (e.keyCode) {\n      case 13:\n        //enter\n        break;\n      case 40: //down arrow\n      case 38:\n        //up arrow\n        this.queryString = this.filterInput.value;\n        e.preventDefault();\n        break;\n      case 9:\n        //tab\n        if (this.isPopupOpen && this.getModuleName() !== 'autocomplete') {\n          e.preventDefault();\n        }\n        break;\n      default:\n        this.prevSelectPoints = this.getSelectionPoints();\n        this.queryString = this.filterInput.value;\n        break;\n    }\n  };\n  DropDownList.prototype.removeFillSelection = function () {\n    if (this.isInteracted) {\n      var selection = this.getSelectionPoints();\n      this.inputElement.setSelectionRange(selection.end, selection.end);\n    }\n  };\n  DropDownList.prototype.getQuery = function (query) {\n    var filterQuery;\n    if (!this.isCustomFilter && this.allowFiltering && this.filterInput) {\n      filterQuery = query ? query.clone() : this.query ? this.query.clone() : new Query();\n      var filterType = this.typedString === '' ? 'contains' : this.filterType;\n      var dataType = this.typeOfData(this.dataSource).typeof;\n      if (!(this.dataSource instanceof DataManager) && dataType === 'string' || dataType === 'number') {\n        filterQuery.where('', filterType, this.typedString, this.ignoreCase, this.ignoreAccent);\n      } else {\n        var fields = this.fields.text ? this.fields.text : '';\n        filterQuery.where(fields, filterType, this.typedString, this.ignoreCase, this.ignoreAccent);\n      }\n    } else {\n      filterQuery = query ? query.clone() : this.query ? this.query.clone() : new Query();\n    }\n    if (this.enableVirtualization && this.viewPortInfo.endIndex != 0 && (!(this.dataSource instanceof DataManager) || this.dataSource instanceof DataManager && this.virtualGroupDataSource)) {\n      var takeValue = this.getTakeValue();\n      var alreadySkipAdded = false;\n      if (filterQuery) {\n        for (var queryElements = 0; queryElements < filterQuery.queries.length; queryElements++) {\n          if (filterQuery.queries[queryElements].fn === 'onSkip') {\n            alreadySkipAdded = true;\n            break;\n          }\n        }\n      }\n      if (this.allowFiltering || !this.isPopupOpen || !alreadySkipAdded) {\n        filterQuery.skip(this.virtualItemStartIndex);\n      }\n      if (this.isIncrementalRequest) {\n        filterQuery.take(this.incrementalEndIndex);\n      } else {\n        filterQuery.take(takeValue);\n      }\n      filterQuery.requiresCount();\n    }\n    return filterQuery;\n  };\n  DropDownList.prototype.getSelectionPoints = function () {\n    var input = this.inputElement;\n    return {\n      start: Math.abs(input.selectionStart),\n      end: Math.abs(input.selectionEnd)\n    };\n  };\n  DropDownList.prototype.searchLists = function (e) {\n    var _this = this;\n    this.isTyped = true;\n    this.activeIndex = null;\n    this.isListSearched = true;\n    if (this.filterInput.parentElement.querySelector('.' + dropDownListClasses.clearIcon)) {\n      var clearElement = this.filterInput.parentElement.querySelector('.' + dropDownListClasses.clearIcon);\n      clearElement.style.visibility = this.filterInput.value === '' ? 'hidden' : 'visible';\n    }\n    this.isDataFetched = false;\n    if (this.isFiltering()) {\n      this.checkAndResetCache();\n      var eventArgs_1 = {\n        preventDefaultAction: false,\n        text: this.filterInput.value,\n        updateData: function (dataSource, query, fields) {\n          if (eventArgs_1.cancel) {\n            return;\n          }\n          _this.isCustomFilter = true;\n          _this.filteringAction(dataSource, query, fields);\n        },\n        baseEventArgs: e,\n        cancel: false\n      };\n      this.trigger('filtering', eventArgs_1, function (eventArgs) {\n        if (!eventArgs.cancel && !_this.isCustomFilter && !eventArgs.preventDefaultAction) {\n          _this.filteringAction(_this.dataSource, null, _this.fields);\n        }\n      });\n    }\n  };\n  /**\n   * To filter the data from given data source by using query\n   *\n   * @param {Object[] | DataManager } dataSource - Set the data source to filter.\n   * @param {Query} query - Specify the query to filter the data.\n   * @param {FieldSettingsModel} fields - Specify the fields to map the column in the data table.\n   * @returns {void}\n   * @deprecated\n   */\n  DropDownList.prototype.filter = function (dataSource, query, fields) {\n    this.isCustomFilter = true;\n    this.filteringAction(dataSource, query, fields);\n  };\n  DropDownList.prototype.filteringAction = function (dataSource, query, fields) {\n    if (!isNullOrUndefined(this.filterInput)) {\n      this.beforePopupOpen = !this.isPopupOpen && this.getModuleName() === 'combobox' && this.filterInput.value === '' ? false : true;\n      var isNoData = this.list.classList.contains(dropDownBaseClasses.noData);\n      if (this.filterInput.value.trim() === '' && !this.itemTemplate) {\n        this.actionCompleteData.isUpdated = false;\n        this.isTyped = false;\n        if (!isNullOrUndefined(this.actionCompleteData.ulElement) && !isNullOrUndefined(this.actionCompleteData.list)) {\n          if (this.enableVirtualization) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            this.totalItemCount = this.dataSource && this.dataSource.length ? this.dataSource.length : 0;\n            this.resetList(dataSource, fields, query);\n            if (isNoData && !this.list.classList.contains(dropDownBaseClasses.noData)) {\n              if (!this.list.querySelector('.e-virtual-ddl-content')) {\n                this.list.appendChild(this.createElement('div', {\n                  className: 'e-virtual-ddl-content',\n                  styles: this.getTransformValues()\n                })).appendChild(this.list.querySelector('.e-list-parent'));\n              }\n              if (!this.list.querySelector('.e-virtual-ddl')) {\n                var virualElement = this.createElement('div', {\n                  id: this.element.id + '_popup',\n                  className: 'e-virtual-ddl',\n                  styles: this.GetVirtualTrackHeight()\n                });\n                document.getElementsByClassName('e-popup')[0].querySelector('.e-dropdownbase').appendChild(virualElement);\n              }\n            }\n          }\n          this.onActionComplete(this.actionCompleteData.ulElement, this.actionCompleteData.list);\n        }\n        this.isTyped = true;\n        if (!isNullOrUndefined(this.itemData) && this.getModuleName() === 'dropdownlist') {\n          this.focusIndexItem();\n          this.setScrollPosition();\n        }\n        this.isNotSearchList = true;\n      } else {\n        this.isNotSearchList = false;\n        query = this.filterInput.value.trim() === '' ? null : query;\n        if (this.enableVirtualization && this.isFiltering() && this.isTyped) {\n          this.isPreventScrollAction = true;\n          this.list.scrollTop = 0;\n          this.previousStartIndex = 0;\n          this.virtualListInfo = null;\n        }\n        this.resetList(dataSource, fields, query);\n        if (this.enableVirtualization && isNoData && !this.list.classList.contains(dropDownBaseClasses.noData)) {\n          if (!this.list.querySelector('.e-virtual-ddl-content')) {\n            this.list.appendChild(this.createElement('div', {\n              className: 'e-virtual-ddl-content',\n              styles: this.getTransformValues()\n            })).appendChild(this.list.querySelector('.e-list-parent'));\n          }\n          if (!this.list.querySelector('.e-virtual-ddl')) {\n            var virualElement = this.createElement('div', {\n              id: this.element.id + '_popup',\n              className: 'e-virtual-ddl',\n              styles: this.GetVirtualTrackHeight()\n            });\n            document.getElementsByClassName('e-popup')[0].querySelector('.e-dropdownbase').appendChild(virualElement);\n          }\n        }\n      }\n      if (this.enableVirtualization) {\n        this.getFilteringSkeletonCount();\n      }\n      this.renderReactTemplates();\n    }\n  };\n  DropDownList.prototype.setSearchBox = function (popupElement) {\n    if (this.isFiltering()) {\n      var parentElement = popupElement.querySelector('.' + dropDownListClasses.filterParent) ? popupElement.querySelector('.' + dropDownListClasses.filterParent) : this.createElement('span', {\n        className: dropDownListClasses.filterParent\n      });\n      this.filterInput = this.createElement('input', {\n        attrs: {\n          type: 'text'\n        },\n        className: dropDownListClasses.filterInput\n      });\n      this.element.parentNode.insertBefore(this.filterInput, this.element);\n      var backIcon = false;\n      if (Browser.isDevice) {\n        backIcon = true;\n      }\n      this.filterInputObj = Input.createInput({\n        element: this.filterInput,\n        buttons: backIcon ? [dropDownListClasses.backIcon, dropDownListClasses.filterBarClearIcon] : [dropDownListClasses.filterBarClearIcon],\n        properties: {\n          placeholder: this.filterBarPlaceholder\n        }\n      }, this.createElement);\n      if (!isNullOrUndefined(this.cssClass)) {\n        if (this.cssClass.split(' ').indexOf('e-outline') !== -1) {\n          addClass([this.filterInputObj.container], 'e-outline');\n        } else if (this.cssClass.split(' ').indexOf('e-filled') !== -1) {\n          addClass([this.filterInputObj.container], 'e-filled');\n        }\n      }\n      append([this.filterInputObj.container], parentElement);\n      prepend([parentElement], popupElement);\n      attributes(this.filterInput, {\n        'aria-disabled': 'false',\n        'role': 'combobox',\n        'autocomplete': 'off',\n        'autocapitalize': 'off',\n        'spellcheck': 'false'\n      });\n      this.clearIconElement = this.filterInput.parentElement.querySelector('.' + dropDownListClasses.clearIcon);\n      if (!Browser.isDevice && this.clearIconElement) {\n        EventHandler.add(this.clearIconElement, 'click', this.clearText, this);\n        this.clearIconElement.style.visibility = 'hidden';\n      }\n      if (!Browser.isDevice) {\n        this.searchKeyModule = new KeyboardEvents(this.filterInput, {\n          keyAction: this.keyActionHandler.bind(this),\n          keyConfigs: this.keyConfigure,\n          eventName: 'keydown'\n        });\n      } else {\n        this.searchKeyModule = new KeyboardEvents(this.filterInput, {\n          keyAction: this.mobileKeyActionHandler.bind(this),\n          keyConfigs: this.keyConfigure,\n          eventName: 'keydown'\n        });\n      }\n      EventHandler.add(this.filterInput, 'input', this.onInput, this);\n      EventHandler.add(this.filterInput, 'keyup', this.onFilterUp, this);\n      EventHandler.add(this.filterInput, 'keydown', this.onFilterDown, this);\n      EventHandler.add(this.filterInput, 'blur', this.onBlurHandler, this);\n      EventHandler.add(this.filterInput, 'paste', this.pasteHandler, this);\n      return this.filterInputObj;\n    } else {\n      return inputObject;\n    }\n  };\n  DropDownList.prototype.onInput = function (e) {\n    this.isValidKey = true;\n    if (this.getModuleName() === 'combobox') {\n      this.updateIconState();\n    }\n    // For filtering works in mobile firefox.\n    if (Browser.isDevice && Browser.info.name === 'mozilla') {\n      this.typedString = this.filterInput.value;\n      this.preventAutoFill = true;\n      this.searchLists(e);\n    }\n  };\n  DropDownList.prototype.pasteHandler = function (e) {\n    var _this = this;\n    setTimeout(function () {\n      _this.typedString = _this.filterInput.value;\n      _this.searchLists(e);\n    });\n  };\n  DropDownList.prototype.onActionFailure = function (e) {\n    _super.prototype.onActionFailure.call(this, e);\n    if (this.beforePopupOpen) {\n      this.renderPopup();\n    }\n  };\n  DropDownList.prototype.UpdateSkeleton = function (isSkeletonCountChange, skeletonCount) {\n    var isContainSkeleton = this.list.querySelector('.e-virtual-ddl-content');\n    var isContainVirtualList = this.list.querySelector('.e-virtual-list');\n    if (isContainSkeleton && (!isContainVirtualList || isSkeletonCountChange) && this.enableVirtualization) {\n      var totalSkeletonCount = isSkeletonCountChange ? skeletonCount : this.skeletonCount;\n      for (var i = 0; i < totalSkeletonCount; i++) {\n        var liElement = this.createElement('li', {\n          className: dropDownListClasses.virtualList,\n          styles: 'overflow: inherit'\n        });\n        if (this.enableVirtualization && this.itemTemplate) {\n          liElement.style.height = this.listItemHeight + 'px';\n        }\n        var skeleton = new Skeleton({\n          shape: \"Text\",\n          height: \"10px\",\n          width: \"95%\",\n          cssClass: \"e-skeleton-text\"\n        });\n        skeleton.appendTo(this.createElement('div'));\n        liElement.appendChild(skeleton.element);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        isContainSkeleton.firstChild.insertBefore(liElement, isContainSkeleton.firstChild.children[0]);\n      }\n    }\n  };\n  DropDownList.prototype.getTakeValue = function () {\n    return this.allowFiltering && this.getModuleName() === 'dropdownlist' && Browser.isDevice ? Math.round(window.outerHeight / this.listItemHeight) : this.itemCount;\n  };\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  DropDownList.prototype.onActionComplete = function (ulElement, list, e, isUpdated) {\n    var _this = this;\n    if (this.dataSource instanceof DataManager && !isNullOrUndefined(e) && !this.virtualGroupDataSource) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      this.totalItemCount = e.count;\n    }\n    if (this.isNotSearchList && !this.enableVirtualization) {\n      this.isNotSearchList = false;\n      return;\n    }\n    var tempItemCount = this.itemCount;\n    if (this.isActive || !isNullOrUndefined(ulElement)) {\n      var selectedItem = this.selectedLI ? this.selectedLI.cloneNode(true) : null;\n      _super.prototype.onActionComplete.call(this, ulElement, list, e);\n      this.skeletonCount = this.totalItemCount != 0 && this.totalItemCount < this.itemCount * 2 ? 0 : this.skeletonCount;\n      this.updateSelectElementData(this.allowFiltering);\n      if (this.isRequested && !isNullOrUndefined(this.searchKeyEvent) && this.searchKeyEvent.type === 'keydown') {\n        this.isRequested = false;\n        this.keyActionHandler(this.searchKeyEvent);\n        this.searchKeyEvent = null;\n      }\n      if (this.isRequested && !isNullOrUndefined(this.searchKeyEvent)) {\n        this.incrementalSearch(this.searchKeyEvent);\n        this.searchKeyEvent = null;\n      }\n      if (!this.enableVirtualization) {\n        this.list.scrollTop = 0;\n      }\n      if (!isNullOrUndefined(ulElement)) {\n        attributes(ulElement, {\n          'id': this.element.id + '_options',\n          'role': 'listbox',\n          'aria-hidden': 'false',\n          'aria-label': 'listbox'\n        });\n      }\n      if (this.initRemoteRender) {\n        this.initial = true;\n        this.activeIndex = this.index;\n        this.initRemoteRender = false;\n        if (this.value && this.dataSource instanceof DataManager) {\n          var checkField_1 = isNullOrUndefined(this.fields.value) ? this.fields.text : this.fields.value;\n          var fieldValue_1 = this.fields.value.split('.');\n          var checkVal = list.some(function (x) {\n            return isNullOrUndefined(x[checkField_1]) && fieldValue_1.length > 1 ? _this.checkFieldValue(x, fieldValue_1) === _this.value : x[checkField_1] === _this.value;\n          });\n          if (!checkVal) {\n            this.dataSource.executeQuery(this.getQuery(this.query).where(new Predicate(checkField_1, 'equal', this.value))).then(function (e) {\n              if (e.result.length > 0) {\n                _this.addItem(e.result, list.length);\n                _this.updateValues();\n              } else {\n                _this.updateValues();\n              }\n            });\n          } else {\n            this.updateValues();\n          }\n        } else {\n          this.updateValues();\n        }\n        this.initial = false;\n      } else if (this.getModuleName() === 'autocomplete' && this.value) {\n        this.setInputValue();\n      }\n      if (this.getModuleName() !== 'autocomplete' && this.isFiltering() && !this.isTyped) {\n        if (!this.actionCompleteData.isUpdated || !this.isCustomFilter && !this.isFilterFocus || isNullOrUndefined(this.itemData) && this.allowFiltering && (this.dataSource instanceof DataManager || !isNullOrUndefined(this.dataSource) && !isNullOrUndefined(this.dataSource.length) && this.dataSource.length !== 0)) {\n          if (this.itemTemplate && this.element.tagName === 'EJS-COMBOBOX' && this.allowFiltering) {\n            setTimeout(function () {\n              _this.updateActionCompleteDataValues(ulElement, list);\n            }, 0);\n          } else {\n            this.updateActionCompleteDataValues(ulElement, list);\n          }\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if ((this.allowCustom || this.allowFiltering && !this.isValueInList(list, this.value) && this.dataSource instanceof DataManager) && !this.enableVirtualization) {\n          this.addNewItem(list, selectedItem);\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        else if ((this.allowCustom || this.allowFiltering && this.isValueInList(list, this.value)) && !this.enableVirtualization) {\n          this.addNewItem(list, selectedItem);\n        }\n        if (!isNullOrUndefined(this.itemData) || isNullOrUndefined(this.itemData) && this.enableVirtualization) {\n          this.focusIndexItem();\n        }\n        if (this.enableVirtualization) {\n          this.updateActionCompleteDataValues(ulElement, list);\n        }\n      } else if (this.enableVirtualization && this.getModuleName() !== 'autocomplete' && !this.isFiltering()) {\n        var value = this.getItemData().value;\n        this.activeIndex = this.getIndexByValue(value);\n        var element = this.findListElement(this.list, 'li', 'data-value', value);\n        this.selectedLI = element;\n      } else if (this.enableVirtualization && this.getModuleName() === 'autocomplete') {\n        this.activeIndex = this.skeletonCount;\n      }\n      if (this.beforePopupOpen) {\n        this.renderPopup(e);\n        if (this.enableVirtualization) {\n          if (!this.list.querySelector('.e-virtual-list')) {\n            this.UpdateSkeleton();\n            this.liCollections = this.list.querySelectorAll('.e-list-item');\n          }\n        }\n        if (this.enableVirtualization && tempItemCount != this.itemCount) {\n          this.resetList(this.dataSource, this.fields);\n        }\n      }\n    }\n  };\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  DropDownList.prototype.isValueInList = function (list, valueToFind) {\n    if (Array.isArray(list)) {\n      for (var i = 0; i < list.length; i++) {\n        if (list[i] === valueToFind) {\n          return true;\n        }\n      }\n    } else if (typeof list === 'object' && list !== null) {\n      for (var key in list) {\n        if (Object.prototype.hasOwnProperty.call(list, key) && list[key] === valueToFind) {\n          return true;\n        }\n      }\n    }\n    return false;\n  };\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  DropDownList.prototype.checkFieldValue = function (list, fieldValue) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var checkField = list;\n    fieldValue.forEach(function (value) {\n      checkField = checkField[value];\n    });\n    return checkField;\n  };\n  DropDownList.prototype.updateActionCompleteDataValues = function (ulElement, list) {\n    this.actionCompleteData = {\n      ulElement: ulElement.cloneNode(true),\n      list: list,\n      isUpdated: true\n    };\n    if (this.actionData.list !== this.actionCompleteData.list && this.actionCompleteData.ulElement && this.actionCompleteData.list) {\n      this.actionData = this.actionCompleteData;\n    }\n  };\n  DropDownList.prototype.addNewItem = function (listData, newElement) {\n    var _this = this;\n    if (!isNullOrUndefined(this.itemData) && !isNullOrUndefined(newElement)) {\n      var value_5 = this.getItemData().value;\n      var isExist = listData.some(function (data) {\n        return (typeof data === 'string' || typeof data === 'number') && data === value_5 || getValue(_this.fields.value, data) === value_5;\n      });\n      if (!isExist) {\n        this.addItem(this.itemData);\n      }\n    }\n  };\n  DropDownList.prototype.updateActionCompleteData = function (li, item, index) {\n    var _this = this;\n    if (this.getModuleName() !== 'autocomplete' && this.actionCompleteData.ulElement) {\n      if (this.itemTemplate && this.element.tagName === 'EJS-COMBOBOX' && this.allowFiltering) {\n        setTimeout(function () {\n          _this.actionCompleteDataUpdate(li, item, index);\n        }, 0);\n      } else {\n        this.actionCompleteDataUpdate(li, item, index);\n      }\n    }\n  };\n  DropDownList.prototype.actionCompleteDataUpdate = function (li, item, index) {\n    if (index !== null) {\n      this.actionCompleteData.ulElement.insertBefore(li.cloneNode(true), this.actionCompleteData.ulElement.childNodes[index]);\n    } else {\n      this.actionCompleteData.ulElement.appendChild(li.cloneNode(true));\n    }\n    if (this.isFiltering() && this.actionCompleteData.list.indexOf(item) < 0) {\n      this.actionCompleteData.list.push(item);\n    }\n  };\n  DropDownList.prototype.focusIndexItem = function () {\n    var value = this.getItemData().value;\n    this.activeIndex = this.getIndexByValue(value);\n    var element = this.findListElement(this.list, 'li', 'data-value', value);\n    this.selectedLI = element;\n    this.activeItem(element);\n    if (!(this.enableVirtualization && isNullOrUndefined(element))) {\n      this.removeFocus();\n    }\n  };\n  DropDownList.prototype.updateSelection = function () {\n    var selectedItem = this.list.querySelector('.' + dropDownBaseClasses.selected);\n    if (selectedItem) {\n      this.setProperties({\n        'index': this.getIndexByValue(selectedItem.getAttribute('data-value'))\n      });\n      this.activeIndex = this.index;\n    } else {\n      this.removeFocus();\n      this.list.querySelector('.' + dropDownBaseClasses.li).classList.add(dropDownListClasses.focus);\n    }\n  };\n  DropDownList.prototype.updateSelectionList = function () {\n    var selectedItem = this.list && this.list.querySelector('.' + 'e-active');\n    if (!selectedItem && !isNullOrUndefined(this.value)) {\n      var findEle = this.findListElement(this.list, 'li', 'data-value', this.value);\n      if (findEle) {\n        findEle.classList.add('e-active');\n      }\n    }\n  };\n  DropDownList.prototype.checkAndResetCache = function () {\n    if (this.enableVirtualization) {\n      this.generatedDataObject = {};\n      this.virtualItemStartIndex = this.virtualItemEndIndex = 0;\n      this.viewPortInfo = {\n        currentPageNumber: null,\n        direction: null,\n        sentinelInfo: {},\n        offsets: {},\n        startIndex: 0,\n        endIndex: this.itemCount\n      };\n      this.selectedValueInfo = null;\n    }\n  };\n  DropDownList.prototype.removeFocus = function () {\n    var highlightedItem = this.list.querySelectorAll('.' + dropDownListClasses.focus);\n    if (highlightedItem && highlightedItem.length) {\n      removeClass(highlightedItem, dropDownListClasses.focus);\n    }\n  };\n  DropDownList.prototype.getTransformValues = function () {\n    var translateY = this.viewPortInfo.startIndex * this.listItemHeight;\n    translateY = translateY - this.skeletonCount * this.listItemHeight;\n    translateY = this.viewPortInfo.startIndex === 0 && this.listData && this.listData.length === 0 ? 0 : translateY;\n    var styleText = \"transform: translate(0px, \" + translateY + \"px);\";\n    return styleText;\n  };\n  DropDownList.prototype.GetVirtualTrackHeight = function () {\n    var height = this.totalItemCount === this.viewPortInfo.endIndex ? this.totalItemCount * this.listItemHeight - this.itemCount * this.listItemHeight : this.totalItemCount * this.listItemHeight;\n    var heightDimension = \"height: \" + (height - this.itemCount * this.listItemHeight) + \"px;\";\n    if (this.getModuleName() === 'autocomplete' && this.skeletonCount === 0) {\n      return \"height: 0px;\";\n    }\n    return heightDimension;\n  };\n  DropDownList.prototype.renderPopup = function (e) {\n    var _this = this;\n    if (this.popupObj && document.body.contains(this.popupObj.element)) {\n      this.refreshPopup();\n      return;\n    }\n    var args = {\n      cancel: false\n    };\n    this.trigger('beforeOpen', args, function (args) {\n      if (!args.cancel) {\n        var popupEle = _this.createElement('div', {\n          id: _this.element.id + '_popup',\n          className: 'e-ddl e-popup ' + (_this.cssClass !== null ? _this.cssClass : '')\n        });\n        popupEle.setAttribute('aria-label', _this.element.id);\n        popupEle.setAttribute('role', 'dialog');\n        var searchBox = _this.setSearchBox(popupEle);\n        _this.listHeight = formatUnit(_this.popupHeight);\n        if (_this.headerTemplate) {\n          _this.setHeaderTemplate(popupEle);\n        }\n        append([_this.list], popupEle);\n        if (_this.footerTemplate) {\n          _this.setFooterTemplate(popupEle);\n        }\n        document.body.appendChild(popupEle);\n        popupEle.style.top = '0px';\n        if (_this.enableVirtualization && _this.itemTemplate) {\n          var listitems = popupEle.querySelectorAll('li.e-list-item:not(.e-virtual-list)');\n          _this.listItemHeight = listitems.length > 0 ? Math.ceil(listitems[0].getBoundingClientRect().height) : 0;\n        }\n        if (_this.enableVirtualization && !_this.list.classList.contains(dropDownBaseClasses.noData)) {\n          if (!_this.list.querySelector('.e-virtual-ddl-content')) {\n            _this.list.appendChild(_this.createElement('div', {\n              className: 'e-virtual-ddl-content',\n              styles: _this.getTransformValues()\n            })).appendChild(_this.list.querySelector('.e-list-parent'));\n          } else {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            _this.list.getElementsByClassName('e-virtual-ddl-content')[0].style = _this.getTransformValues();\n          }\n          _this.UpdateSkeleton();\n          _this.liCollections = _this.list.querySelectorAll('.' + dropDownBaseClasses.li);\n          _this.virtualItemCount = _this.itemCount;\n          if (!_this.list.querySelector('.e-virtual-ddl')) {\n            var virualElement = _this.createElement('div', {\n              id: _this.element.id + '_popup',\n              className: 'e-virtual-ddl',\n              styles: _this.GetVirtualTrackHeight()\n            });\n            popupEle.querySelector('.e-dropdownbase').appendChild(virualElement);\n          } else {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            _this.list.getElementsByClassName('e-virtual-ddl')[0].style = _this.GetVirtualTrackHeight();\n          }\n        }\n        popupEle.style.visibility = 'hidden';\n        if (_this.popupHeight !== 'auto') {\n          _this.searchBoxHeight = 0;\n          if (!isNullOrUndefined(searchBox.container) && _this.getModuleName() !== 'combobox' && _this.getModuleName() !== 'autocomplete') {\n            _this.searchBoxHeight = searchBox.container.parentElement.getBoundingClientRect().height;\n            _this.listHeight = (parseInt(_this.listHeight, 10) - _this.searchBoxHeight).toString() + 'px';\n          }\n          if (_this.headerTemplate) {\n            _this.header = _this.header ? _this.header : popupEle.querySelector('.e-ddl-header');\n            var height = Math.round(_this.header.getBoundingClientRect().height);\n            _this.listHeight = (parseInt(_this.listHeight, 10) - (height + _this.searchBoxHeight)).toString() + 'px';\n          }\n          if (_this.footerTemplate) {\n            _this.footer = _this.footer ? _this.footer : popupEle.querySelector('.e-ddl-footer');\n            var height = Math.round(_this.footer.getBoundingClientRect().height);\n            _this.listHeight = (parseInt(_this.listHeight, 10) - (height + _this.searchBoxHeight)).toString() + 'px';\n          }\n          _this.list.style.maxHeight = (parseInt(_this.listHeight, 10) - 2).toString() + 'px'; // due to box-sizing property\n          popupEle.style.maxHeight = formatUnit(_this.popupHeight);\n        } else {\n          popupEle.style.height = 'auto';\n        }\n        var offsetValue = 0;\n        var left = void 0;\n        _this.isPreventScrollAction = true;\n        if (!isNullOrUndefined(_this.selectedLI) && !isNullOrUndefined(_this.activeIndex) && _this.activeIndex >= 0) {\n          _this.setScrollPosition();\n        } else if (_this.enableVirtualization) {\n          _this.setScrollPosition();\n        } else {\n          _this.list.scrollTop = 0;\n        }\n        if (Browser.isDevice && !_this.allowFiltering && (_this.getModuleName() === 'dropdownlist' || _this.isDropDownClick && _this.getModuleName() === 'combobox')) {\n          offsetValue = _this.getOffsetValue(popupEle);\n          var firstItem = _this.isEmptyList() ? _this.list : _this.liCollections[0];\n          if (!isNullOrUndefined(_this.inputElement)) {\n            left = -(parseInt(getComputedStyle(firstItem).textIndent, 10) - parseInt(getComputedStyle(_this.inputElement).paddingLeft, 10) + parseInt(getComputedStyle(_this.inputElement.parentElement).borderLeftWidth, 10));\n          }\n        }\n        _this.createPopup(popupEle, offsetValue, left);\n        _this.popupContentElement = _this.popupObj.element.querySelector('.e-content');\n        _this.getFocusElement();\n        _this.checkCollision(popupEle);\n        if (Browser.isDevice) {\n          _this.popupObj.element.classList.add(dropDownListClasses.device);\n          if (_this.getModuleName() === 'dropdownlist' || _this.getModuleName() === 'combobox' && !_this.allowFiltering && _this.isDropDownClick) {\n            _this.popupObj.collision = {\n              X: 'fit',\n              Y: 'fit'\n            };\n          }\n          if (_this.isFilterLayout()) {\n            _this.popupObj.element.classList.add(dropDownListClasses.mobileFilter);\n            _this.popupObj.position = {\n              X: 0,\n              Y: 0\n            };\n            _this.popupObj.dataBind();\n            attributes(_this.popupObj.element, {\n              style: 'left:0px;right:0px;top:0px;bottom:0px;'\n            });\n            addClass([document.body, _this.popupObj.element], dropDownListClasses.popupFullScreen);\n            _this.setSearchBoxPosition();\n            _this.backIconElement = searchBox.container.querySelector('.e-back-icon');\n            _this.clearIconElement = searchBox.container.querySelector('.' + dropDownListClasses.clearIcon);\n            EventHandler.add(_this.backIconElement, 'click', _this.clickOnBackIcon, _this);\n            EventHandler.add(_this.clearIconElement, 'click', _this.clearText, _this);\n          }\n        }\n        popupEle.style.visibility = 'visible';\n        addClass([popupEle], 'e-popup-close');\n        var scrollParentElements = _this.popupObj.getScrollableParent(_this.inputWrapper.container);\n        for (var _i = 0, scrollParentElements_1 = scrollParentElements; _i < scrollParentElements_1.length; _i++) {\n          var element = scrollParentElements_1[_i];\n          EventHandler.add(element, 'scroll', _this.scrollHandler, _this);\n        }\n        if (!isNullOrUndefined(_this.list)) {\n          _this.unWireListEvents();\n          _this.wireListEvents();\n        }\n        _this.selectedElementID = _this.selectedLI ? _this.selectedLI.id : null;\n        if (_this.enableVirtualization) {\n          _this.notify(\"bindScrollEvent\", {\n            module: \"VirtualScroll\",\n            component: _this.getModuleName(),\n            enable: _this.enableVirtualization\n          });\n          setTimeout(function () {\n            if (_this.value || _this.list.querySelector('.e-active')) {\n              _this.updateSelectionList();\n              if (_this.selectedValueInfo && _this.viewPortInfo && _this.viewPortInfo.offsets.top) {\n                _this.list.scrollTop = _this.viewPortInfo.offsets.top;\n              } else {\n                _this.scrollBottom(true, true);\n              }\n            }\n          }, 5);\n        }\n        attributes(_this.targetElement(), {\n          'aria-expanded': 'true',\n          'aria-owns': _this.element.id + '_popup',\n          'aria-controls': _this.element.id\n        });\n        _this.inputElement.setAttribute('aria-expanded', 'true');\n        _this.inputElement.setAttribute('aria-controls', _this.element.id);\n        var inputParent = _this.isFiltering() ? _this.filterInput.parentElement : _this.inputWrapper.container;\n        addClass([inputParent], [dropDownListClasses.inputFocus]);\n        var animModel = {\n          name: 'FadeIn',\n          duration: 100\n        };\n        _this.beforePopupOpen = true;\n        var popupInstance = _this.popupObj;\n        var eventArgs = {\n          popup: popupInstance,\n          event: e,\n          cancel: false,\n          animation: animModel\n        };\n        _this.trigger('open', eventArgs, function (eventArgs) {\n          if (!eventArgs.cancel) {\n            if (!isNullOrUndefined(_this.inputWrapper)) {\n              addClass([_this.inputWrapper.container], [dropDownListClasses.iconAnimation]);\n            }\n            _this.renderReactTemplates();\n            if (!isNullOrUndefined(_this.popupObj)) {\n              _this.popupObj.show(new Animation(eventArgs.animation), _this.zIndex === 1000 ? _this.element : null);\n            }\n          } else {\n            _this.beforePopupOpen = false;\n            _this.destroyPopup();\n          }\n        });\n      } else {\n        _this.beforePopupOpen = false;\n      }\n    });\n  };\n  DropDownList.prototype.checkCollision = function (popupEle) {\n    if (!Browser.isDevice || Browser.isDevice && !(this.getModuleName() === 'dropdownlist' || this.isDropDownClick)) {\n      var collision = isCollide(popupEle);\n      if (collision.length > 0) {\n        popupEle.style.marginTop = -parseInt(getComputedStyle(popupEle).marginTop, 10) + 'px';\n      }\n      this.popupObj.resolveCollision();\n    }\n  };\n  DropDownList.prototype.getOffsetValue = function (popupEle) {\n    var popupStyles = getComputedStyle(popupEle);\n    var borderTop = parseInt(popupStyles.borderTopWidth, 10);\n    var borderBottom = parseInt(popupStyles.borderBottomWidth, 10);\n    return this.setPopupPosition(borderTop + borderBottom);\n  };\n  DropDownList.prototype.createPopup = function (element, offsetValue, left) {\n    var _this = this;\n    this.popupObj = new Popup(element, {\n      width: this.setWidth(),\n      targetType: 'relative',\n      relateTo: this.inputWrapper.container,\n      collision: this.enableRtl ? {\n        X: 'fit',\n        Y: 'flip'\n      } : {\n        X: 'flip',\n        Y: 'flip'\n      },\n      offsetY: offsetValue,\n      enableRtl: this.enableRtl,\n      offsetX: left,\n      position: this.enableRtl ? {\n        X: 'right',\n        Y: 'bottom'\n      } : {\n        X: 'left',\n        Y: 'bottom'\n      },\n      zIndex: this.zIndex,\n      close: function () {\n        if (!_this.isDocumentClick) {\n          _this.focusDropDown();\n        }\n        // eslint-disable-next-line\n        if (_this.isReact) {\n          _this.clearTemplate(['headerTemplate', 'footerTemplate']);\n        }\n        _this.isNotSearchList = false;\n        _this.isDocumentClick = false;\n        _this.destroyPopup();\n        if (_this.isFiltering() && _this.actionCompleteData.list && _this.actionCompleteData.list[0]) {\n          _this.isActive = true;\n          if (_this.enableVirtualization) {\n            _this.onActionComplete(_this.ulElement, _this.listData, null, true);\n          } else {\n            _this.onActionComplete(_this.actionCompleteData.ulElement, _this.actionCompleteData.list, null, true);\n          }\n        }\n      },\n      open: function () {\n        EventHandler.add(document, 'mousedown', _this.onDocumentClick, _this);\n        _this.isPopupOpen = true;\n        var actionList = _this.actionCompleteData && _this.actionCompleteData.ulElement && _this.actionCompleteData.ulElement.querySelector('li');\n        var ulElement = _this.list.querySelector('ul li');\n        if (!isNullOrUndefined(_this.ulElement) && !isNullOrUndefined(_this.ulElement.getElementsByClassName('e-item-focus')[0])) {\n          attributes(_this.targetElement(), {\n            'aria-activedescendant': _this.ulElement.getElementsByClassName('e-item-focus')[0].id\n          });\n        } else if (!isNullOrUndefined(_this.ulElement) && !isNullOrUndefined(_this.ulElement.getElementsByClassName('e-active')[0])) {\n          attributes(_this.targetElement(), {\n            'aria-activedescendant': _this.ulElement.getElementsByClassName('e-active')[0].id\n          });\n        }\n        if (_this.isFiltering() && _this.itemTemplate && _this.element.tagName === _this.getNgDirective() && actionList && ulElement && actionList.textContent !== ulElement.textContent && _this.element.tagName !== 'EJS-COMBOBOX') {\n          _this.cloneElements();\n        }\n        if (_this.isFilterLayout()) {\n          removeClass([_this.inputWrapper.container], [dropDownListClasses.inputFocus]);\n          _this.isFilterFocus = true;\n          _this.filterInput.focus();\n          if (_this.inputWrapper.clearButton) {\n            addClass([_this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);\n          }\n        }\n        _this.activeStateChange();\n      },\n      targetExitViewport: function () {\n        if (!Browser.isDevice) {\n          _this.hidePopup();\n        }\n      }\n    });\n  };\n  DropDownList.prototype.isEmptyList = function () {\n    return !isNullOrUndefined(this.liCollections) && this.liCollections.length === 0;\n  };\n  DropDownList.prototype.getFocusElement = function () {\n    // combo-box used this method\n  };\n  DropDownList.prototype.isFilterLayout = function () {\n    return this.getModuleName() === 'dropdownlist' && this.allowFiltering;\n  };\n  DropDownList.prototype.scrollHandler = function () {\n    if (Browser.isDevice && (this.getModuleName() === 'dropdownlist' && !this.isFilterLayout() || this.getModuleName() === 'combobox' && !this.allowFiltering && this.isDropDownClick)) {\n      if (this.element && !this.isElementInViewport(this.element)) {\n        this.hidePopup();\n      }\n    }\n  };\n  DropDownList.prototype.isElementInViewport = function (element) {\n    var elementRect = element.getBoundingClientRect();\n    return elementRect.top >= 0 && elementRect.left >= 0 && elementRect.bottom <= window.innerHeight && elementRect.right <= window.innerWidth;\n  };\n  DropDownList.prototype.setSearchBoxPosition = function () {\n    var searchBoxHeight = this.filterInput.parentElement.getBoundingClientRect().height;\n    this.popupObj.element.style.maxHeight = '100%';\n    this.popupObj.element.style.width = '100%';\n    this.list.style.maxHeight = window.innerHeight - searchBoxHeight + 'px';\n    this.list.style.height = window.innerHeight - searchBoxHeight + 'px';\n    var clearElement = this.filterInput.parentElement.querySelector('.' + dropDownListClasses.clearIcon);\n    detach(this.filterInput);\n    clearElement.parentElement.insertBefore(this.filterInput, clearElement);\n  };\n  DropDownList.prototype.setPopupPosition = function (border) {\n    var offsetValue;\n    var popupOffset = border;\n    var selectedLI = this.list.querySelector('.' + dropDownListClasses.focus) || this.selectedLI;\n    var firstItem = this.isEmptyList() ? this.list : this.liCollections[0];\n    var lastItem = this.isEmptyList() ? this.list : this.liCollections[this.getItems().length - 1];\n    var liHeight = firstItem.getBoundingClientRect().height;\n    this.listItemHeight = liHeight;\n    var listHeight = this.list.offsetHeight / 2;\n    var height = isNullOrUndefined(selectedLI) ? firstItem.offsetTop : selectedLI.offsetTop;\n    var lastItemOffsetValue = lastItem.offsetTop;\n    if (lastItemOffsetValue - listHeight < height && !isNullOrUndefined(this.liCollections) && this.liCollections.length > 0 && !isNullOrUndefined(selectedLI)) {\n      var count = this.list.offsetHeight / liHeight;\n      var paddingBottom = parseInt(getComputedStyle(this.list).paddingBottom, 10);\n      offsetValue = (count - (this.liCollections.length - this.activeIndex)) * liHeight - popupOffset + paddingBottom;\n      this.list.scrollTop = selectedLI.offsetTop;\n    } else if (height > listHeight && !this.enableVirtualization) {\n      offsetValue = listHeight - liHeight / 2;\n      this.list.scrollTop = height - listHeight + liHeight / 2;\n    } else {\n      offsetValue = height;\n    }\n    var inputHeight = this.inputWrapper.container.offsetHeight;\n    offsetValue = offsetValue + liHeight + popupOffset - (liHeight - inputHeight) / 2;\n    return -offsetValue;\n  };\n  DropDownList.prototype.setWidth = function () {\n    var width = formatUnit(this.popupWidth);\n    if (width.indexOf('%') > -1) {\n      var inputWidth = this.inputWrapper.container.offsetWidth * parseFloat(width) / 100;\n      width = inputWidth.toString() + 'px';\n    }\n    if (Browser.isDevice && !this.allowFiltering && (this.getModuleName() === 'dropdownlist' || this.isDropDownClick && this.getModuleName() === 'combobox')) {\n      var firstItem = this.isEmptyList() ? this.list : this.liCollections[0];\n      width = parseInt(width, 10) + (parseInt(getComputedStyle(firstItem).textIndent, 10) - parseInt(getComputedStyle(this.inputElement).paddingLeft, 10) + parseInt(getComputedStyle(this.inputElement.parentElement).borderLeftWidth, 10)) * 2 + 'px';\n    }\n    return width;\n  };\n  DropDownList.prototype.scrollBottom = function (isInitial, isInitialSelection, keyAction) {\n    var _this = this;\n    if (isInitialSelection === void 0) {\n      isInitialSelection = false;\n    }\n    if (keyAction === void 0) {\n      keyAction = null;\n    }\n    if (isNullOrUndefined(this.selectedLI) && this.enableVirtualization) {\n      this.selectedLI = this.list.querySelector('.' + dropDownBaseClasses.li);\n      if (!isNullOrUndefined(this.selectedLI) && this.selectedLI.classList.contains('e-virtual-list')) {\n        this.selectedLI = this.liCollections[this.skeletonCount];\n      }\n    }\n    if (!isNullOrUndefined(this.selectedLI)) {\n      this.isUpwardScrolling = false;\n      var virtualListCount = this.list.querySelectorAll('.e-virtual-list').length;\n      var lastElementValue = this.list.querySelector('li:last-of-type') ? this.list.querySelector('li:last-of-type').getAttribute('data-value') : null;\n      var selectedLiOffsetTop = this.virtualListInfo && this.virtualListInfo.startIndex ? this.selectedLI.offsetTop + this.virtualListInfo.startIndex * this.selectedLI.offsetHeight : this.selectedLI.offsetTop;\n      var currentOffset = this.list.offsetHeight;\n      var nextBottom = selectedLiOffsetTop - virtualListCount * this.selectedLI.offsetHeight + this.selectedLI.offsetHeight - this.list.scrollTop;\n      var nextOffset = this.list.scrollTop + nextBottom - currentOffset;\n      var isScrollerCHanged = false;\n      nextOffset = isInitial ? nextOffset + parseInt(getComputedStyle(this.list).paddingTop, 10) * 2 : nextOffset + parseInt(getComputedStyle(this.list).paddingTop, 10);\n      var boxRange = selectedLiOffsetTop - virtualListCount * this.selectedLI.offsetHeight + this.selectedLI.offsetHeight - this.list.scrollTop;\n      boxRange = this.fields.groupBy && !isNullOrUndefined(this.fixedHeaderElement) ? boxRange - this.fixedHeaderElement.offsetHeight : boxRange;\n      if (this.activeIndex === 0 && !this.enableVirtualization) {\n        this.list.scrollTop = 0;\n        isScrollerCHanged = this.isKeyBoardAction;\n      } else if (nextBottom > currentOffset || !(boxRange > 0 && this.list.offsetHeight > boxRange)) {\n        var currentElementValue = this.selectedLI ? this.selectedLI.getAttribute('data-value') : null;\n        var liCount = keyAction == \"pageDown\" ? this.getPageCount() - 2 : 1;\n        if (!this.enableVirtualization || this.isKeyBoardAction || isInitialSelection) {\n          if (this.isKeyBoardAction && this.enableVirtualization && lastElementValue && currentElementValue === lastElementValue && keyAction != \"end\" && !this.isVirtualScrolling) {\n            this.isPreventKeyAction = true;\n            if (this.enableVirtualization && this.itemTemplate) {\n              this.list.scrollTop += nextOffset;\n            } else {\n              this.list.scrollTop += this.selectedLI.offsetHeight * liCount;\n            }\n            this.isPreventKeyAction = this.IsScrollerAtEnd() ? false : this.isPreventKeyAction;\n            this.isKeyBoardAction = false;\n            this.isPreventScrollAction = false;\n          } else if (this.enableVirtualization && keyAction == \"end\") {\n            this.isPreventKeyAction = false;\n            this.isKeyBoardAction = false;\n            this.isPreventScrollAction = false;\n            this.list.scrollTop = this.list.scrollHeight;\n          } else {\n            if (keyAction == \"pageDown\" && this.enableVirtualization && !this.isVirtualScrolling) {\n              this.isPreventKeyAction = false;\n              this.isKeyBoardAction = false;\n              this.isPreventScrollAction = false;\n              nextOffset = nextOffset + this.selectedLI.offsetHeight * liCount;\n            }\n            this.list.scrollTop = nextOffset;\n          }\n        } else {\n          this.list.scrollTop = this.virtualListInfo && this.virtualListInfo.startIndex ? this.virtualListInfo.startIndex * this.listItemHeight : 0;\n        }\n        isScrollerCHanged = this.isKeyBoardAction;\n      }\n      this.isKeyBoardAction = isScrollerCHanged;\n      if (this.enableVirtualization && this.fields.groupBy && this.fixedHeaderElement && keyAction == \"down\") {\n        setTimeout(function () {\n          _this.scrollStop(null, true);\n        }, 100);\n      }\n    }\n  };\n  DropDownList.prototype.scrollTop = function (keyAction) {\n    if (keyAction === void 0) {\n      keyAction = null;\n    }\n    if (!isNullOrUndefined(this.selectedLI)) {\n      var virtualListCount = this.list.querySelectorAll('.e-virtual-list').length;\n      var selectedLiOffsetTop = this.virtualListInfo && this.virtualListInfo.startIndex ? this.selectedLI.offsetTop + this.virtualListInfo.startIndex * this.selectedLI.offsetHeight : this.selectedLI.offsetTop;\n      var nextOffset = selectedLiOffsetTop - virtualListCount * this.selectedLI.offsetHeight - this.list.scrollTop;\n      var firstElementValue = this.list.querySelector('li.e-list-item:not(.e-virtual-list)') ? this.list.querySelector('li.e-list-item:not(.e-virtual-list)').getAttribute('data-value') : null;\n      nextOffset = this.fields.groupBy && !isNullOrUndefined(this.fixedHeaderElement) ? nextOffset - this.fixedHeaderElement.offsetHeight : nextOffset;\n      var boxRange = selectedLiOffsetTop - virtualListCount * this.selectedLI.offsetHeight + this.selectedLI.offsetHeight - this.list.scrollTop;\n      var isPageUpKeyAction = this.enableVirtualization && this.getModuleName() === 'autocomplete' && nextOffset <= 0;\n      if (this.activeIndex === 0 && !this.enableVirtualization) {\n        this.list.scrollTop = 0;\n      } else if (nextOffset < 0 || isPageUpKeyAction) {\n        var currentElementValue = this.selectedLI ? this.selectedLI.getAttribute('data-value') : null;\n        var liCount = keyAction == \"pageUp\" ? this.getPageCount() - 2 : 1;\n        if (this.enableVirtualization && this.isKeyBoardAction && firstElementValue && currentElementValue === firstElementValue && keyAction != \"home\" && !this.isVirtualScrolling) {\n          this.isUpwardScrolling = true;\n          this.isPreventKeyAction = true;\n          this.list.scrollTop -= this.selectedLI.offsetHeight * liCount;\n          this.isPreventKeyAction = this.list.scrollTop != 0 ? this.isPreventKeyAction : false;\n          this.isKeyBoardAction = false;\n          this.isPreventScrollAction = false;\n        } else if (this.enableVirtualization && keyAction == \"home\") {\n          this.isPreventScrollAction = false;\n          this.isPreventKeyAction = true;\n          this.isKeyBoardAction = false;\n          this.list.scrollTo(0, 0);\n        } else {\n          if (keyAction == \"pageUp\" && this.enableVirtualization && !this.isVirtualScrolling) {\n            this.isPreventKeyAction = false;\n            this.isKeyBoardAction = false;\n            this.isPreventScrollAction = false;\n            nextOffset = nextOffset - this.selectedLI.offsetHeight * liCount;\n          }\n          this.list.scrollTop = this.list.scrollTop + nextOffset;\n        }\n      } else if (!(boxRange > 0 && this.list.offsetHeight > boxRange)) {\n        this.list.scrollTop = this.selectedLI.offsetTop - (this.fields.groupBy && !isNullOrUndefined(this.fixedHeaderElement) ? this.fixedHeaderElement.offsetHeight : 0);\n      }\n    }\n  };\n  DropDownList.prototype.isEditTextBox = function () {\n    return false;\n  };\n  DropDownList.prototype.isFiltering = function () {\n    return this.allowFiltering;\n  };\n  DropDownList.prototype.isPopupButton = function () {\n    return true;\n  };\n  DropDownList.prototype.setScrollPosition = function (e) {\n    this.isPreventScrollAction = true;\n    if (!isNullOrUndefined(e)) {\n      switch (e.action) {\n        case 'pageDown':\n        case 'down':\n        case 'end':\n          this.isKeyBoardAction = true;\n          this.scrollBottom(false, false, e.action);\n          break;\n        default:\n          this.isKeyBoardAction = e.action == 'up' || e.action == 'pageUp' || e.action == 'open';\n          this.scrollTop(e.action);\n          break;\n      }\n    } else {\n      this.scrollBottom(true);\n    }\n    this.isKeyBoardAction = false;\n  };\n  DropDownList.prototype.clearText = function () {\n    this.filterInput.value = this.typedString = '';\n    this.searchLists(null);\n    if (this.enableVirtualization) {\n      this.list.scrollTop = 0;\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      this.totalItemCount = this.dataCount = this.dataSource && this.dataSource.length ? this.dataSource.length : 0;\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      if (this.list.getElementsByClassName('e-virtual-ddl')[0]) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        this.list.getElementsByClassName('e-virtual-ddl')[0].style = this.GetVirtualTrackHeight();\n      }\n      this.getSkeletonCount();\n      this.UpdateSkeleton();\n      this.liCollections = this.list.querySelectorAll('.e-list-item');\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      if (this.list.getElementsByClassName('e-virtual-ddl-content')[0]) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        this.list.getElementsByClassName('e-virtual-ddl-content')[0].style = this.getTransformValues();\n      }\n    }\n  };\n  DropDownList.prototype.setEleWidth = function (width) {\n    if (!isNullOrUndefined(width)) {\n      if (typeof width === 'number') {\n        this.inputWrapper.container.style.width = formatUnit(width);\n      } else if (typeof width === 'string') {\n        this.inputWrapper.container.style.width = width.match(/px|%|em/) ? width : formatUnit(width);\n      }\n    }\n  };\n  DropDownList.prototype.closePopup = function (delay, e) {\n    var _this = this;\n    var isFilterValue = !isNullOrUndefined(this.filterInput) && !isNullOrUndefined(this.filterInput.value) && this.filterInput.value !== '';\n    var typedString = this.getModuleName() === 'combobox' ? this.typedString : null;\n    this.isTyped = false;\n    if (!(this.popupObj && document.body.contains(this.popupObj.element) && this.beforePopupOpen)) {\n      return;\n    }\n    this.keyboardEvent = null;\n    EventHandler.remove(document, 'mousedown', this.onDocumentClick);\n    this.isActive = false;\n    this.filterInputObj = null;\n    this.isDropDownClick = false;\n    this.preventAutoFill = false;\n    var scrollableParentElements = this.popupObj.getScrollableParent(this.inputWrapper.container);\n    for (var _i = 0, scrollableParentElements_1 = scrollableParentElements; _i < scrollableParentElements_1.length; _i++) {\n      var element = scrollableParentElements_1[_i];\n      EventHandler.remove(element, 'scroll', this.scrollHandler);\n    }\n    if (Browser.isDevice && this.isFilterLayout()) {\n      removeClass([document.body, this.popupObj.element], dropDownListClasses.popupFullScreen);\n    }\n    if (this.isFilterLayout()) {\n      if (!Browser.isDevice) {\n        this.searchKeyModule.destroy();\n        if (this.clearIconElement) {\n          EventHandler.remove(this.clearIconElement, 'click', this.clearText);\n        }\n      }\n      if (this.backIconElement) {\n        EventHandler.remove(this.backIconElement, 'click', this.clickOnBackIcon);\n        EventHandler.remove(this.clearIconElement, 'click', this.clearText);\n      }\n      if (!isNullOrUndefined(this.filterInput)) {\n        EventHandler.remove(this.filterInput, 'input', this.onInput);\n        EventHandler.remove(this.filterInput, 'keyup', this.onFilterUp);\n        EventHandler.remove(this.filterInput, 'keydown', this.onFilterDown);\n        EventHandler.remove(this.filterInput, 'blur', this.onBlurHandler);\n        EventHandler.remove(this.filterInput, 'paste', this.pasteHandler);\n      }\n      if (this.allowFiltering && this.getModuleName() === 'dropdownlist') {\n        this.filterInput.removeAttribute('aria-activedescendant');\n      }\n      this.filterInput = null;\n    }\n    attributes(this.targetElement(), {\n      'aria-expanded': 'false'\n    });\n    this.inputElement.setAttribute('aria-expanded', 'false');\n    this.targetElement().removeAttribute('aria-owns');\n    this.targetElement().removeAttribute('aria-activedescendant');\n    this.inputWrapper.container.classList.remove(dropDownListClasses.iconAnimation);\n    if (this.isFiltering()) {\n      this.actionCompleteData.isUpdated = false;\n    }\n    if (this.enableVirtualization) {\n      if (this.value == null || this.isTyped) {\n        this.viewPortInfo.endIndex = this.viewPortInfo && this.viewPortInfo.endIndex > 0 ? this.viewPortInfo.endIndex : this.itemCount;\n        if (this.getModuleName() === 'autocomplete' || this.getModuleName() === 'dropdownlist' && !isNullOrUndefined(this.typedString) && this.typedString != \"\" || this.getModuleName() === 'combobox' && this.allowFiltering && !isNullOrUndefined(this.typedString) && this.typedString != \"\") {\n          this.checkAndResetCache();\n        }\n      } else if (this.getModuleName() === 'autocomplete') {\n        this.checkAndResetCache();\n      }\n      if ((this.getModuleName() === 'dropdownlist' || this.getModuleName() === 'combobox') && !(this.skeletonCount == 0)) {\n        this.getSkeletonCount(true);\n      }\n    }\n    this.beforePopupOpen = false;\n    var animModel = {\n      name: 'FadeOut',\n      duration: 100,\n      delay: delay ? delay : 0\n    };\n    var popupInstance = this.popupObj;\n    var eventArgs = {\n      popup: popupInstance,\n      cancel: false,\n      animation: animModel,\n      event: e || null\n    };\n    this.trigger('close', eventArgs, function (eventArgs) {\n      if (!isNullOrUndefined(_this.popupObj) && !isNullOrUndefined(_this.popupObj.element.querySelector('.e-fixed-head'))) {\n        var fixedHeader = _this.popupObj.element.querySelector('.e-fixed-head');\n        fixedHeader.parentNode.removeChild(fixedHeader);\n        _this.fixedHeaderElement = null;\n      }\n      if (!eventArgs.cancel) {\n        if (_this.getModuleName() === 'autocomplete') {\n          _this.rippleFun();\n        }\n        if (_this.isPopupOpen) {\n          _this.popupObj.hide(new Animation(eventArgs.animation));\n        } else {\n          _this.destroyPopup();\n        }\n      }\n    });\n    if (this.isReact && this.isFiltering() && this.itemTemplate != null) {\n      this.actionCompleteData.ulElement = this.ulElement.cloneNode(true);\n    }\n    var dataSourceCount;\n    if (this.dataSource instanceof DataManager) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      dataSourceCount = this.virtualGroupDataSource && this.virtualGroupDataSource.length ? this.virtualGroupDataSource.length : 0;\n    } else {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      dataSourceCount = this.dataSource && this.dataSource.length ? this.dataSource.length : 0;\n    }\n    if (this.enableVirtualization && this.isFiltering() && this.value != null && isFilterValue && this.totalItemCount !== dataSourceCount) {\n      this.updateInitialData();\n      this.checkAndResetCache();\n    }\n  };\n  DropDownList.prototype.updateInitialData = function () {\n    var currentData = this.selectData;\n    var ulElement = this.renderItems(currentData, this.fields);\n    this.list.scrollTop = 0;\n    this.virtualListInfo = {\n      currentPageNumber: null,\n      direction: null,\n      sentinelInfo: {},\n      offsets: {},\n      startIndex: 0,\n      endIndex: 0\n    };\n    if (this.getModuleName() === 'combobox') {\n      this.typedString = \"\";\n    }\n    this.previousStartIndex = 0;\n    this.previousEndIndex = 0;\n    if (this.dataSource instanceof DataManager) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      this.totalItemCount = this.dataCount = this.virtualGroupDataSource && this.virtualGroupDataSource.length ? this.virtualGroupDataSource.length : 0;\n    } else {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      this.totalItemCount = this.dataCount = this.dataSource && this.dataSource.length ? this.dataSource.length : 0;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    if (this.list.getElementsByClassName('e-virtual-ddl')[0]) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      this.list.getElementsByClassName('e-virtual-ddl')[0].style = this.GetVirtualTrackHeight();\n    }\n    if (this.getModuleName() !== 'autocomplete' && this.totalItemCount != 0 && this.totalItemCount > this.itemCount * 2) {\n      this.getSkeletonCount();\n    }\n    this.UpdateSkeleton();\n    this.listData = currentData;\n    this.updateActionCompleteDataValues(ulElement, currentData);\n    this.liCollections = this.list.querySelectorAll('.e-list-item');\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    if (this.list.getElementsByClassName('e-virtual-ddl-content')[0]) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      this.list.getElementsByClassName('e-virtual-ddl-content')[0].style = this.getTransformValues();\n    }\n  };\n  DropDownList.prototype.destroyPopup = function () {\n    this.isPopupOpen = false;\n    this.isFilterFocus = false;\n    if (this.popupObj) {\n      this.popupObj.destroy();\n      detach(this.popupObj.element);\n    }\n  };\n  DropDownList.prototype.clickOnBackIcon = function () {\n    this.hidePopup();\n    this.focusIn();\n  };\n  /**\n   * To Initialize the control rendering\n   *\n   * @private\n   * @returns {void}\n   */\n  DropDownList.prototype.render = function () {\n    this.preselectedIndex = !isNullOrUndefined(this.index) ? this.index : null;\n    if (this.element.tagName === 'INPUT') {\n      this.inputElement = this.element;\n      if (isNullOrUndefined(this.inputElement.getAttribute('role'))) {\n        this.inputElement.setAttribute('role', 'combobox');\n      }\n      if (isNullOrUndefined(this.inputElement.getAttribute('type'))) {\n        this.inputElement.setAttribute('type', 'text');\n      }\n      this.inputElement.setAttribute('aria-expanded', 'false');\n    } else {\n      this.inputElement = this.createElement('input', {\n        attrs: {\n          role: 'combobox',\n          type: 'text'\n        }\n      });\n      if (this.element.tagName !== this.getNgDirective()) {\n        this.element.style.display = 'none';\n      }\n      this.element.parentElement.insertBefore(this.inputElement, this.element);\n      this.preventTabIndex(this.inputElement);\n    }\n    var updatedCssClassValues = this.cssClass;\n    if (!isNullOrUndefined(this.cssClass) && this.cssClass !== '') {\n      updatedCssClassValues = this.cssClass.replace(/\\s+/g, ' ').trim();\n    }\n    if (!isNullOrUndefined(closest(this.element, 'fieldset')) && closest(this.element, 'fieldset').disabled) {\n      this.enabled = false;\n    }\n    this.inputWrapper = Input.createInput({\n      element: this.inputElement,\n      buttons: this.isPopupButton() ? [dropDownListClasses.icon] : null,\n      floatLabelType: this.floatLabelType,\n      properties: {\n        readonly: this.getModuleName() === 'dropdownlist' ? true : this.readonly,\n        placeholder: this.placeholder,\n        cssClass: updatedCssClassValues,\n        enabled: this.enabled,\n        enableRtl: this.enableRtl,\n        showClearButton: this.showClearButton\n      }\n    }, this.createElement);\n    if (this.element.tagName === this.getNgDirective()) {\n      this.element.appendChild(this.inputWrapper.container);\n    } else {\n      this.inputElement.parentElement.insertBefore(this.element, this.inputElement);\n    }\n    this.hiddenElement = this.createElement('select', {\n      attrs: {\n        'aria-hidden': 'true',\n        'aria-label': this.getModuleName(),\n        'tabindex': '-1',\n        'class': dropDownListClasses.hiddenElement\n      }\n    });\n    prepend([this.hiddenElement], this.inputWrapper.container);\n    this.validationAttribute(this.element, this.hiddenElement);\n    this.setReadOnly();\n    this.setFields();\n    this.inputWrapper.container.style.width = formatUnit(this.width);\n    this.inputWrapper.container.classList.add('e-ddl');\n    if (this.floatLabelType === 'Auto') {\n      Input.calculateWidth(this.inputElement, this.inputWrapper.container);\n    }\n    if (!isNullOrUndefined(this.inputWrapper.buttons[0]) && this.inputWrapper.container.getElementsByClassName('e-float-text-content')[0] && this.floatLabelType !== 'Never') {\n      this.inputWrapper.container.getElementsByClassName('e-float-text-content')[0].classList.add('e-icon');\n    }\n    this.wireEvent();\n    this.tabIndex = this.element.hasAttribute('tabindex') ? this.element.getAttribute('tabindex') : '0';\n    this.element.removeAttribute('tabindex');\n    var id = this.element.getAttribute('id') ? this.element.getAttribute('id') : getUniqueID('ej2_dropdownlist');\n    this.element.id = id;\n    this.hiddenElement.id = id + '_hidden';\n    this.targetElement().setAttribute('tabindex', this.tabIndex);\n    if ((this.getModuleName() === 'autocomplete' || this.getModuleName() === 'combobox') && !this.readonly) {\n      this.inputElement.setAttribute('aria-label', this.getModuleName());\n    } else if (this.getModuleName() === 'dropdownlist') {\n      attributes(this.targetElement(), {\n        'aria-label': this.getModuleName()\n      });\n      this.inputElement.setAttribute('aria-label', this.getModuleName());\n      this.inputElement.setAttribute('aria-expanded', 'false');\n      this.inputElement.setAttribute('aria-controls', this.element.id + '_popups');\n    }\n    attributes(this.targetElement(), this.getAriaAttributes());\n    this.updateDataAttribute(this.htmlAttributes);\n    this.setHTMLAttributes();\n    if (this.targetElement() === this.inputElement) {\n      this.inputElement.removeAttribute('aria-labelledby');\n    }\n    if (this.value !== null || this.activeIndex !== null || this.text !== null) {\n      if (this.enableVirtualization) {\n        this.listItemHeight = this.getListHeight();\n        this.getSkeletonCount();\n        this.updateVirtualizationProperties(this.itemCount, this.allowFiltering);\n      }\n      this.initValue();\n      this.selectedValueInfo = this.viewPortInfo;\n      if (this.enableVirtualization) {\n        this.activeIndex = this.activeIndex + this.skeletonCount;\n      }\n    } else if (this.element.tagName === 'SELECT' && this.element.options[0]) {\n      var selectElement = this.element;\n      this.value = selectElement.options[selectElement.selectedIndex].value;\n      this.text = isNullOrUndefined(this.value) ? null : selectElement.options[selectElement.selectedIndex].textContent;\n      this.initValue();\n    }\n    this.setEnabled();\n    this.preventTabIndex(this.element);\n    if (!this.enabled) {\n      this.targetElement().tabIndex = -1;\n    }\n    this.initial = false;\n    this.element.style.opacity = '';\n    this.inputElement.onselect = function (e) {\n      e.stopImmediatePropagation();\n    };\n    this.inputElement.onchange = function (e) {\n      e.stopImmediatePropagation();\n    };\n    if (this.element.hasAttribute('autofocus')) {\n      this.focusIn();\n    }\n    if (!isNullOrUndefined(this.text)) {\n      this.inputElement.setAttribute('value', this.text);\n    }\n    if (this.element.hasAttribute('data-val')) {\n      this.element.setAttribute('data-val', 'false');\n    }\n    var floatLabelElement = this.inputWrapper.container.getElementsByClassName('e-float-text')[0];\n    if (!isNullOrUndefined(this.element.id) && this.element.id !== '' && !isNullOrUndefined(floatLabelElement)) {\n      floatLabelElement.id = 'label_' + this.element.id.replace(/ /g, '_');\n      attributes(this.inputElement, {\n        'aria-labelledby': floatLabelElement.id\n      });\n    }\n    this.renderComplete();\n    this.listItemHeight = this.getListHeight();\n    this.getSkeletonCount();\n    if (this.enableVirtualization) {\n      this.updateVirtualizationProperties(this.itemCount, this.allowFiltering);\n    }\n    this.viewPortInfo.startIndex = this.virtualItemStartIndex = 0;\n    this.viewPortInfo.endIndex = this.virtualItemEndIndex = this.viewPortInfo.startIndex > 0 ? this.viewPortInfo.endIndex : this.itemCount;\n  };\n  DropDownList.prototype.getListHeight = function () {\n    var listParent = this.createElement('div', {\n      className: 'e-dropdownbase'\n    });\n    var item = this.createElement('li', {\n      className: 'e-list-item'\n    });\n    var listParentHeight = formatUnit(this.popupHeight);\n    listParent.style.height = parseInt(listParentHeight, 10).toString() + 'px';\n    listParent.appendChild(item);\n    document.body.appendChild(listParent);\n    this.virtualListHeight = listParent.getBoundingClientRect().height;\n    var listItemHeight = Math.ceil(item.getBoundingClientRect().height);\n    listParent.remove();\n    return listItemHeight;\n  };\n  DropDownList.prototype.setFooterTemplate = function (popupEle) {\n    var compiledString;\n    if (this.footer) {\n      if (this.isReact && typeof this.footerTemplate === 'function') {\n        this.clearTemplate(['footerTemplate']);\n      } else {\n        this.footer.innerHTML = '';\n      }\n    } else {\n      this.footer = this.createElement('div');\n      addClass([this.footer], dropDownListClasses.footer);\n    }\n    var footercheck = this.dropdownCompiler(this.footerTemplate);\n    if (typeof this.footerTemplate !== 'function' && footercheck) {\n      compiledString = compile(select(this.footerTemplate, document).innerHTML.trim());\n    } else {\n      compiledString = compile(this.footerTemplate);\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var footerCompTemp = compiledString({}, this, 'footerTemplate', this.footerTemplateId, this.isStringTemplate, null, this.footer);\n    if (footerCompTemp && footerCompTemp.length > 0) {\n      append(footerCompTemp, this.footer);\n    }\n    append([this.footer], popupEle);\n  };\n  DropDownList.prototype.setHeaderTemplate = function (popupEle) {\n    var compiledString;\n    if (this.header) {\n      this.header.innerHTML = '';\n    } else {\n      this.header = this.createElement('div');\n      addClass([this.header], dropDownListClasses.header);\n    }\n    var headercheck = this.dropdownCompiler(this.headerTemplate);\n    if (typeof this.headerTemplate !== 'function' && headercheck) {\n      compiledString = compile(select(this.headerTemplate, document).innerHTML.trim());\n    } else {\n      compiledString = compile(this.headerTemplate);\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var headerCompTemp = compiledString({}, this, 'headerTemplate', this.headerTemplateId, this.isStringTemplate, null, this.header);\n    if (headerCompTemp && headerCompTemp.length) {\n      append(headerCompTemp, this.header);\n    }\n    var contentEle = popupEle.querySelector('div.e-content');\n    popupEle.insertBefore(this.header, contentEle);\n  };\n  /**\n   * Sets the enabled state to DropDownBase.\n   *\n   * @returns {void}\n   */\n  DropDownList.prototype.setEnabled = function () {\n    this.element.setAttribute('aria-disabled', this.enabled ? 'false' : 'true');\n  };\n  DropDownList.prototype.setOldText = function (text) {\n    this.text = text;\n  };\n  DropDownList.prototype.setOldValue = function (value) {\n    this.value = value;\n  };\n  DropDownList.prototype.refreshPopup = function () {\n    if (!isNullOrUndefined(this.popupObj) && document.body.contains(this.popupObj.element) && (this.allowFiltering && !(Browser.isDevice && this.isFilterLayout()) || this.getModuleName() === 'autocomplete')) {\n      removeClass([this.popupObj.element], 'e-popup-close');\n      this.popupObj.refreshPosition(this.inputWrapper.container);\n      this.popupObj.resolveCollision();\n    }\n  };\n  DropDownList.prototype.checkData = function (newProp) {\n    if (newProp.dataSource && !isNullOrUndefined(Object.keys(newProp.dataSource)) && this.itemTemplate && this.allowFiltering && !(this.isListSearched && newProp.dataSource instanceof DataManager)) {\n      this.list = null;\n      this.actionCompleteData = {\n        ulElement: null,\n        list: null,\n        isUpdated: false\n      };\n    }\n    this.isListSearched = false;\n    var isChangeValue = Object.keys(newProp).indexOf('value') !== -1 && isNullOrUndefined(newProp.value);\n    var isChangeText = Object.keys(newProp).indexOf('text') !== -1 && isNullOrUndefined(newProp.text);\n    if (this.getModuleName() !== 'autocomplete' && this.allowFiltering && (isChangeValue || isChangeText)) {\n      this.itemData = null;\n    }\n    if (this.allowFiltering && newProp.dataSource && !isNullOrUndefined(Object.keys(newProp.dataSource))) {\n      this.actionCompleteData = {\n        ulElement: null,\n        list: null,\n        isUpdated: false\n      };\n      this.actionData = this.actionCompleteData;\n    } else if (this.allowFiltering && newProp.query && !isNullOrUndefined(Object.keys(newProp.query))) {\n      this.actionCompleteData = this.getModuleName() === 'combobox' ? {\n        ulElement: null,\n        list: null,\n        isUpdated: false\n      } : this.actionCompleteData;\n      this.actionData = this.actionCompleteData;\n    }\n  };\n  DropDownList.prototype.updateDataSource = function (props) {\n    if (this.inputElement.value !== '' || !isNullOrUndefined(props) && (isNullOrUndefined(props.dataSource) || !(props.dataSource instanceof DataManager) && props.dataSource.length === 0)) {\n      this.clearAll(null, props);\n    }\n    if (this.fields.groupBy && props.fields && !this.isGroupChecking && this.list) {\n      EventHandler.remove(this.list, 'scroll', this.setFloatingHeader);\n      EventHandler.add(this.list, 'scroll', this.setFloatingHeader, this);\n    }\n    if (!(!isNullOrUndefined(props) && (isNullOrUndefined(props.dataSource) || !(props.dataSource instanceof DataManager) && props.dataSource.length === 0)) || !(Array.isArray(props.dataSource) && props.dataSource.length === 0)) {\n      this.typedString = '';\n      this.resetList(this.dataSource);\n    }\n    if (!this.isCustomFilter && !this.isFilterFocus && document.activeElement !== this.filterInput) {\n      this.checkCustomValue();\n    }\n  };\n  DropDownList.prototype.checkCustomValue = function () {\n    this.itemData = this.getDataByValue(this.value);\n    var dataItem = this.getItemData();\n    this.setProperties({\n      'text': dataItem.text,\n      'value': dataItem.value\n    });\n  };\n  DropDownList.prototype.updateInputFields = function () {\n    if (this.getModuleName() === 'dropdownlist') {\n      Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);\n    }\n  };\n  /**\n   * Dynamically change the value of properties.\n   *\n   * @private\n   * @param {DropDownListModel} newProp - Returns the dynamic property value of the component.\n   * @param {DropDownListModel} oldProp - Returns the previous previous value of the component.\n   * @returns {void}\n   */\n  DropDownList.prototype.onPropertyChanged = function (newProp, oldProp) {\n    var _this = this;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    if (!isNullOrUndefined(newProp.dataSource) && !this.isTouched && isNullOrUndefined(newProp.value) && isNullOrUndefined(newProp.index) && !isNullOrUndefined(this.preselectedIndex)) {\n      newProp.index = this.preselectedIndex;\n    }\n    if (!isNullOrUndefined(newProp.value) || !isNullOrUndefined(newProp.index)) {\n      this.isTouched = true;\n    }\n    if (this.getModuleName() === 'dropdownlist') {\n      this.checkData(newProp);\n      this.setUpdateInitial(['fields', 'query', 'dataSource'], newProp);\n    }\n    var _loop_1 = function (prop) {\n      switch (prop) {\n        case 'query':\n        case 'dataSource':\n          this_1.getSkeletonCount();\n          this_1.checkAndResetCache();\n          break;\n        case 'htmlAttributes':\n          this_1.setHTMLAttributes();\n          break;\n        case 'width':\n          this_1.setEleWidth(newProp.width);\n          Input.calculateWidth(this_1.inputElement, this_1.inputWrapper.container);\n          break;\n        case 'placeholder':\n          Input.setPlaceholder(newProp.placeholder, this_1.inputElement);\n          break;\n        case 'filterBarPlaceholder':\n          if (this_1.filterInput) {\n            Input.setPlaceholder(newProp.filterBarPlaceholder, this_1.filterInput);\n          }\n          break;\n        case 'readonly':\n          if (this_1.getModuleName() !== 'dropdownlist') {\n            Input.setReadonly(newProp.readonly, this_1.inputElement);\n          }\n          this_1.setReadOnly();\n          break;\n        case 'cssClass':\n          this_1.setCssClass(newProp.cssClass, oldProp.cssClass);\n          Input.calculateWidth(this_1.inputElement, this_1.inputWrapper.container);\n          break;\n        case 'enableRtl':\n          this_1.setEnableRtl();\n          break;\n        case 'enabled':\n          this_1.setEnable();\n          break;\n        case 'text':\n          if (newProp.text === null) {\n            this_1.clearAll();\n            break;\n          }\n          if (this_1.enableVirtualization) {\n            this_1.updateValues();\n            this_1.updateInputFields();\n            this_1.notify(\"setCurrentViewDataAsync\", {\n              module: \"VirtualScroll\"\n            });\n            break;\n          }\n          if (!this_1.list) {\n            if (this_1.dataSource instanceof DataManager) {\n              this_1.initRemoteRender = true;\n            }\n            this_1.renderList();\n          }\n          if (!this_1.initRemoteRender) {\n            var li = this_1.getElementByText(newProp.text);\n            if (!this_1.checkValidLi(li)) {\n              if (this_1.liCollections && this_1.liCollections.length === 100 && this_1.getModuleName() === 'autocomplete' && this_1.listData.length > 100) {\n                this_1.setSelectionData(newProp.text, oldProp.text, 'text');\n              } else if (newProp.text && this_1.dataSource instanceof DataManager) {\n                var listLength_1 = this_1.getItems().length;\n                var checkField = isNullOrUndefined(this_1.fields.text) ? this_1.fields.value : this_1.fields.text;\n                this_1.typedString = '';\n                this_1.dataSource.executeQuery(this_1.getQuery(this_1.query).where(new Predicate(checkField, 'equal', newProp.text))).then(function (e) {\n                  if (e.result.length > 0) {\n                    _this.addItem(e.result, listLength_1);\n                    _this.updateValues();\n                  } else {\n                    _this.setOldText(oldProp.text);\n                  }\n                });\n              } else if (this_1.getModuleName() === 'autocomplete') {\n                this_1.setInputValue(newProp, oldProp);\n              } else {\n                this_1.setOldText(oldProp.text);\n              }\n            }\n            this_1.updateInputFields();\n          }\n          break;\n        case 'value':\n          if (newProp.value === null) {\n            this_1.clearAll();\n            break;\n          }\n          if (this_1.enableVirtualization) {\n            this_1.updateValues();\n            this_1.updateInputFields();\n            this_1.notify(\"setCurrentViewDataAsync\", {\n              module: \"VirtualScroll\"\n            });\n            this_1.preventChange = this_1.isAngular && this_1.preventChange ? !this_1.preventChange : this_1.preventChange;\n            break;\n          }\n          this_1.notify('beforeValueChange', {\n            newProp: newProp\n          }); // gird component value type change\n          if (!this_1.list) {\n            if (this_1.dataSource instanceof DataManager) {\n              this_1.initRemoteRender = true;\n            }\n            this_1.renderList();\n          }\n          if (!this_1.initRemoteRender) {\n            var item = this_1.getElementByValue(newProp.value);\n            if (!this_1.checkValidLi(item)) {\n              if (this_1.liCollections && this_1.liCollections.length === 100 && this_1.getModuleName() === 'autocomplete' && this_1.listData.length > 100) {\n                this_1.setSelectionData(newProp.value, oldProp.value, 'value');\n              } else if (newProp.value && this_1.dataSource instanceof DataManager) {\n                var listLength_2 = this_1.getItems().length;\n                var checkField = isNullOrUndefined(this_1.fields.value) ? this_1.fields.text : this_1.fields.value;\n                this_1.typedString = '';\n                this_1.dataSource.executeQuery(this_1.getQuery(this_1.query).where(new Predicate(checkField, 'equal', newProp.value))).then(function (e) {\n                  if (e.result.length > 0) {\n                    _this.addItem(e.result, listLength_2);\n                    _this.updateValues();\n                  } else {\n                    _this.setOldValue(oldProp.value);\n                  }\n                });\n              } else if (this_1.getModuleName() === 'autocomplete') {\n                this_1.setInputValue(newProp, oldProp);\n              } else {\n                this_1.setOldValue(oldProp.value);\n              }\n            }\n            this_1.updateInputFields();\n            this_1.preventChange = this_1.isAngular && this_1.preventChange ? !this_1.preventChange : this_1.preventChange;\n          }\n          break;\n        case 'index':\n          if (newProp.index === null) {\n            this_1.clearAll();\n            break;\n          }\n          if (!this_1.list) {\n            if (this_1.dataSource instanceof DataManager) {\n              this_1.initRemoteRender = true;\n            }\n            this_1.renderList();\n          }\n          if (!this_1.initRemoteRender && this_1.liCollections) {\n            var element = this_1.liCollections[newProp.index];\n            if (!this_1.checkValidLi(element)) {\n              if (this_1.liCollections && this_1.liCollections.length === 100 && this_1.getModuleName() === 'autocomplete' && this_1.listData.length > 100) {\n                this_1.setSelectionData(newProp.index, oldProp.index, 'index');\n              } else {\n                this_1.index = oldProp.index;\n              }\n            }\n            this_1.updateInputFields();\n          }\n          break;\n        case 'footerTemplate':\n          if (this_1.popupObj) {\n            this_1.setFooterTemplate(this_1.popupObj.element);\n          }\n          break;\n        case 'headerTemplate':\n          if (this_1.popupObj) {\n            this_1.setHeaderTemplate(this_1.popupObj.element);\n          }\n          break;\n        case 'valueTemplate':\n          if (!isNullOrUndefined(this_1.itemData) && this_1.valueTemplate !== null) {\n            this_1.setValueTemplate();\n          }\n          break;\n        case 'allowFiltering':\n          if (this_1.allowFiltering) {\n            this_1.actionCompleteData = {\n              ulElement: this_1.ulElement,\n              list: this_1.listData,\n              isUpdated: true\n            };\n            this_1.actionData = this_1.actionCompleteData;\n            this_1.updateSelectElementData(this_1.allowFiltering);\n          }\n          break;\n        case 'floatLabelType':\n          Input.removeFloating(this_1.inputWrapper);\n          Input.addFloating(this_1.inputElement, newProp.floatLabelType, this_1.placeholder, this_1.createElement);\n          if (!isNullOrUndefined(this_1.inputWrapper.buttons[0]) && this_1.inputWrapper.container.getElementsByClassName('e-float-text-overflow')[0] && this_1.floatLabelType !== 'Never') {\n            this_1.inputWrapper.container.getElementsByClassName('e-float-text-overflow')[0].classList.add('e-icon');\n          }\n          break;\n        case 'showClearButton':\n          if (!this_1.inputWrapper.clearButton) {\n            Input.setClearButton(newProp.showClearButton, this_1.inputElement, this_1.inputWrapper, null, this_1.createElement);\n            this_1.bindClearEvent();\n          }\n          break;\n        default:\n          {\n            // eslint-disable-next-line max-len\n            var ddlProps = this_1.getPropObject(prop, newProp, oldProp);\n            _super.prototype.onPropertyChanged.call(this_1, ddlProps.newProperty, ddlProps.oldProperty);\n          }\n          break;\n      }\n    };\n    var this_1 = this;\n    for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n      _loop_1(prop);\n    }\n  };\n  DropDownList.prototype.checkValidLi = function (element) {\n    if (this.isValidLI(element)) {\n      this.setSelection(element, null);\n      return true;\n    }\n    return false;\n  };\n  DropDownList.prototype.setSelectionData = function (newProp, oldProp, prop) {\n    var _this = this;\n    var li;\n    this.updateListValues = function () {\n      if (prop === 'text') {\n        li = _this.getElementByText(newProp);\n        if (!_this.checkValidLi(li)) {\n          _this.setOldText(oldProp);\n        }\n      } else if (prop === 'value') {\n        li = _this.getElementByValue(newProp);\n        if (!_this.checkValidLi(li)) {\n          _this.setOldValue(oldProp);\n        }\n      } else if (prop === 'index') {\n        li = _this.liCollections[newProp];\n        if (!_this.checkValidLi(li)) {\n          _this.index = oldProp;\n        }\n      }\n    };\n  };\n  DropDownList.prototype.updatePopupState = function () {\n    if (this.beforePopupOpen) {\n      this.beforePopupOpen = false;\n      this.showPopup();\n    }\n  };\n  DropDownList.prototype.setReadOnly = function () {\n    if (this.readonly) {\n      addClass([this.inputWrapper.container], ['e-readonly']);\n    } else {\n      removeClass([this.inputWrapper.container], ['e-readonly']);\n    }\n  };\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  DropDownList.prototype.setInputValue = function (newProp, oldProp) {};\n  DropDownList.prototype.setCssClass = function (newClass, oldClass) {\n    if (!isNullOrUndefined(oldClass)) {\n      oldClass = oldClass.replace(/\\s+/g, ' ').trim();\n    }\n    if (!isNullOrUndefined(newClass)) {\n      newClass = newClass.replace(/\\s+/g, ' ').trim();\n    }\n    Input.setCssClass(newClass, [this.inputWrapper.container], oldClass);\n    if (this.popupObj) {\n      Input.setCssClass(newClass, [this.popupObj.element], oldClass);\n    }\n  };\n  /**\n   * Return the module name of this component.\n   *\n   * @private\n   * @returns {string} Return the module name of this component.\n   */\n  DropDownList.prototype.getModuleName = function () {\n    return 'dropdownlist';\n  };\n  /* eslint-disable valid-jsdoc, jsdoc/require-param */\n  /**\n   * Opens the popup that displays the list of items.\n   *\n   * @returns {void}\n   */\n  DropDownList.prototype.showPopup = function (e) {\n    /* eslint-enable valid-jsdoc, jsdoc/require-param */\n    if (!this.enabled) {\n      return;\n    }\n    if (this.isReact && this.getModuleName() === 'combobox' && this.itemTemplate && this.isCustomFilter && this.isAddNewItemTemplate) {\n      this.renderList();\n      this.isAddNewItemTemplate = false;\n    }\n    if (this.isFiltering() && this.dataSource instanceof DataManager && this.actionData.list !== this.actionCompleteData.list && this.actionData.list && this.actionData.ulElement) {\n      this.actionCompleteData = this.actionData;\n      this.onActionComplete(this.actionCompleteData.ulElement, this.actionCompleteData.list, null, true);\n    }\n    if (this.beforePopupOpen) {\n      this.refreshPopup();\n      return;\n    }\n    this.beforePopupOpen = true;\n    if (this.isFiltering() && !this.isActive && this.actionCompleteData.list && this.actionCompleteData.list[0]) {\n      this.isActive = true;\n      this.onActionComplete(this.actionCompleteData.ulElement, this.actionCompleteData.list, null, true);\n    } else if (isNullOrUndefined(this.list) || !isUndefined(this.list) && (this.list.classList.contains(dropDownBaseClasses.noData) || this.list.querySelectorAll('.' + dropDownBaseClasses.li).length <= 0)) {\n      this.renderList(e);\n    }\n    if (this.enableVirtualization && this.listData && this.listData.length) {\n      if (!isNullOrUndefined(this.value) && (this.getModuleName() === 'dropdownlist' || this.getModuleName() === 'combobox')) {\n        this.removeHover();\n      }\n      if (!this.beforePopupOpen) {\n        this.notify(\"setCurrentViewDataAsync\", {\n          module: \"VirtualScroll\"\n        });\n      }\n    }\n    if (this.beforePopupOpen) {\n      this.invokeRenderPopup(e);\n    }\n    if (this.enableVirtualization && !this.allowFiltering && this.selectedValueInfo != null && this.selectedValueInfo.startIndex > 0 && this.value != null) {\n      this.notify(\"dataProcessAsync\", {\n        module: \"VirtualScroll\",\n        isOpen: true\n      });\n    }\n  };\n  DropDownList.prototype.invokeRenderPopup = function (e) {\n    if (Browser.isDevice && this.isFilterLayout()) {\n      // eslint-disable-next-line @typescript-eslint/no-this-alias\n      var proxy_2 = this;\n      window.onpopstate = function () {\n        proxy_2.hidePopup();\n      };\n      history.pushState({}, '');\n    }\n    if (!isNullOrUndefined(this.list) && (!isNullOrUndefined(this.list.children[0]) || this.list.classList.contains(dropDownBaseClasses.noData))) {\n      this.renderPopup(e);\n    }\n  };\n  DropDownList.prototype.renderHightSearch = function () {\n    // update high light search\n  };\n  /* eslint-disable valid-jsdoc, jsdoc/require-param */\n  /**\n   * Hides the popup if it is in an open state.\n   *\n   * @returns {void}\n   */\n  DropDownList.prototype.hidePopup = function (e) {\n    /* eslint-enable valid-jsdoc, jsdoc/require-param */\n    if (this.isEscapeKey && this.getModuleName() === 'dropdownlist') {\n      if (!isNullOrUndefined(this.inputElement)) {\n        Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);\n      }\n      this.isEscapeKey = false;\n      if (!isNullOrUndefined(this.index)) {\n        var element = this.findListElement(this.ulElement, 'li', 'data-value', this.value);\n        this.selectedLI = this.liCollections[this.index] || element;\n        if (this.selectedLI) {\n          this.updateSelectedItem(this.selectedLI, null, true);\n          if (this.valueTemplate && this.itemData !== null) {\n            this.setValueTemplate();\n          }\n        }\n      } else {\n        this.resetSelection();\n      }\n    }\n    this.closePopup(0, e);\n    var dataItem = this.getItemData();\n    var isSelectVal = !isNullOrUndefined(this.selectedLI);\n    if (isSelectVal && this.enableVirtualization && this.selectedLI.classList) {\n      isSelectVal = this.selectedLI.classList.contains('e-active');\n    }\n    if (this.inputElement && this.inputElement.value.trim() === '' && !this.isInteracted && (this.isSelectCustom || isSelectVal && this.inputElement.value !== dataItem.text)) {\n      this.isSelectCustom = false;\n      this.clearAll(e);\n    }\n  };\n  /* eslint-disable valid-jsdoc, jsdoc/require-param */\n  /**\n   * Sets the focus on the component for interaction.\n   *\n   * @returns {void}\n   */\n  DropDownList.prototype.focusIn = function (e) {\n    if (!this.enabled) {\n      return;\n    }\n    if (this.targetElement().classList.contains(dropDownListClasses.disable)) {\n      return;\n    }\n    var isFocused = false;\n    if (this.preventFocus && Browser.isDevice) {\n      this.inputWrapper.container.tabIndex = 1;\n      this.inputWrapper.container.focus();\n      this.preventFocus = false;\n      isFocused = true;\n    }\n    if (!isFocused) {\n      this.targetElement().focus();\n    }\n    addClass([this.inputWrapper.container], [dropDownListClasses.inputFocus]);\n    this.onFocus(e);\n    if (this.floatLabelType === 'Auto') {\n      Input.calculateWidth(this.inputElement, this.inputWrapper.container);\n    }\n  };\n  /**\n   * Moves the focus from the component if the component is already focused.\n   *\n   * @returns {void}\n   */\n  DropDownList.prototype.focusOut = function (e) {\n    /* eslint-enable valid-jsdoc, jsdoc/require-param */\n    if (!this.enabled) {\n      return;\n    }\n    if (!this.enableVirtualization && (this.getModuleName() === 'combobox' || this.getModuleName() === 'autocomplete')) {\n      this.isTyped = true;\n    }\n    this.hidePopup(e);\n    if (this.targetElement()) {\n      this.targetElement().blur();\n    }\n    removeClass([this.inputWrapper.container], [dropDownListClasses.inputFocus]);\n    if (this.floatLabelType === 'Auto' && this.inputElement.value === '') {\n      Input.calculateWidth(this.inputElement, this.inputWrapper.container);\n    }\n  };\n  /**\n   * Removes the component from the DOM and detaches all its related event handlers. Also it removes the attributes and classes.\n   *\n   * @method destroy\n   * @returns {void}\n   */\n  DropDownList.prototype.destroy = function () {\n    this.isActive = false;\n    resetIncrementalSearchValues(this.element.id);\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    if (this.isReact) {\n      this.clearTemplate();\n    }\n    this.hidePopup();\n    this.unWireEvent();\n    if (this.list) {\n      this.unWireListEvents();\n    }\n    if (this.element && !this.element.classList.contains('e-' + this.getModuleName())) {\n      return;\n    }\n    if (this.inputElement) {\n      var attrArray = ['readonly', 'aria-disabled', 'placeholder', 'aria-labelledby', 'aria-expanded', 'autocomplete', 'aria-readonly', 'autocapitalize', 'spellcheck', 'aria-autocomplete', 'aria-live', 'aria-describedby', 'aria-label'];\n      for (var i = 0; i < attrArray.length; i++) {\n        this.inputElement.removeAttribute(attrArray[i]);\n      }\n      this.inputElement.setAttribute('tabindex', this.tabIndex);\n      this.inputElement.classList.remove('e-input');\n      Input.setValue('', this.inputElement, this.floatLabelType, this.showClearButton);\n    }\n    this.element.style.display = 'block';\n    if (this.inputWrapper.container.parentElement.tagName === this.getNgDirective()) {\n      detach(this.inputWrapper.container);\n    } else {\n      this.inputWrapper.container.parentElement.insertBefore(this.element, this.inputWrapper.container);\n      detach(this.inputWrapper.container);\n    }\n    this.hiddenElement = null;\n    this.inputWrapper = null;\n    this.keyboardModule = null;\n    this.ulElement = null;\n    this.list = null;\n    this.popupObj = null;\n    this.popupContentElement = null;\n    this.rippleFun = null;\n    this.selectedLI = null;\n    this.liCollections = null;\n    this.item = null;\n    this.inputWrapper = null;\n    this.footer = null;\n    this.header = null;\n    this.previousSelectedLI = null;\n    this.valueTempElement = null;\n    this.actionData.ulElement = null;\n    if (this.inputElement && !isNullOrUndefined(this.inputElement.onchange)) {\n      this.inputElement.onchange = null;\n    }\n    if (this.isAngular) {\n      this.inputElement = null;\n    }\n    _super.prototype.destroy.call(this);\n  };\n  /* eslint-disable valid-jsdoc, jsdoc/require-returns-description */\n  /**\n   * Gets all the list items bound on this component.\n   *\n   * @returns {Element[]}\n   */\n  DropDownList.prototype.getItems = function () {\n    if (!this.list) {\n      if (this.dataSource instanceof DataManager) {\n        this.initRemoteRender = true;\n      }\n      this.renderList();\n    }\n    return this.ulElement ? _super.prototype.getItems.call(this) : [];\n  };\n  /**\n   * Gets the data Object that matches the given value.\n   *\n   * @param { string | number } value - Specifies the value of the list item.\n   * @returns {Object}\n   */\n  DropDownList.prototype.getDataByValue = function (value) {\n    return _super.prototype.getDataByValue.call(this, value);\n  };\n  /* eslint-enable valid-jsdoc, jsdoc/require-returns-description */\n  /**\n   * Allows you to clear the selected values from the component.\n   *\n   * @returns {void}\n   */\n  DropDownList.prototype.clear = function () {\n    this.value = null;\n  };\n  __decorate$1([Property(null)], DropDownList.prototype, \"cssClass\", void 0);\n  __decorate$1([Property('100%')], DropDownList.prototype, \"width\", void 0);\n  __decorate$1([Property(true)], DropDownList.prototype, \"enabled\", void 0);\n  __decorate$1([Property(false)], DropDownList.prototype, \"enablePersistence\", void 0);\n  __decorate$1([Property('300px')], DropDownList.prototype, \"popupHeight\", void 0);\n  __decorate$1([Property('100%')], DropDownList.prototype, \"popupWidth\", void 0);\n  __decorate$1([Property(null)], DropDownList.prototype, \"placeholder\", void 0);\n  __decorate$1([Property(null)], DropDownList.prototype, \"filterBarPlaceholder\", void 0);\n  __decorate$1([Property({})], DropDownList.prototype, \"htmlAttributes\", void 0);\n  __decorate$1([Property(null)], DropDownList.prototype, \"query\", void 0);\n  __decorate$1([Property(null)], DropDownList.prototype, \"valueTemplate\", void 0);\n  __decorate$1([Property(null)], DropDownList.prototype, \"headerTemplate\", void 0);\n  __decorate$1([Property(null)], DropDownList.prototype, \"footerTemplate\", void 0);\n  __decorate$1([Property(false)], DropDownList.prototype, \"allowFiltering\", void 0);\n  __decorate$1([Property(false)], DropDownList.prototype, \"readonly\", void 0);\n  __decorate$1([Property(false)], DropDownList.prototype, \"enableVirtualization\", void 0);\n  __decorate$1([Property(null)], DropDownList.prototype, \"text\", void 0);\n  __decorate$1([Property(null)], DropDownList.prototype, \"value\", void 0);\n  __decorate$1([Property(null)], DropDownList.prototype, \"index\", void 0);\n  __decorate$1([Property('Never')], DropDownList.prototype, \"floatLabelType\", void 0);\n  __decorate$1([Property(false)], DropDownList.prototype, \"showClearButton\", void 0);\n  __decorate$1([Event()], DropDownList.prototype, \"filtering\", void 0);\n  __decorate$1([Event()], DropDownList.prototype, \"change\", void 0);\n  __decorate$1([Event()], DropDownList.prototype, \"beforeOpen\", void 0);\n  __decorate$1([Event()], DropDownList.prototype, \"open\", void 0);\n  __decorate$1([Event()], DropDownList.prototype, \"close\", void 0);\n  __decorate$1([Event()], DropDownList.prototype, \"blur\", void 0);\n  __decorate$1([Event()], DropDownList.prototype, \"focus\", void 0);\n  DropDownList = __decorate$1([NotifyPropertyChanges], DropDownList);\n  return DropDownList;\n}(DropDownBase);\n\n/**\n * export all modules from current location\n */\n\nvar __extends$2 = undefined && undefined.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$2 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar RTL = 'e-rtl';\nvar DROPDOWNTREE = 'e-ddt';\nvar HIDDENELEMENT = 'e-ddt-hidden';\nvar DROPDOWNICON = 'e-input-group-icon e-ddt-icon e-icons';\nvar SHOW_CHIP = 'e-show-chip';\nvar SHOW_CLEAR = 'e-show-clear';\nvar SHOW_DD_ICON = 'e-show-dd-icon';\nvar CHIP_INPUT = 'e-chip-input';\nvar INPUTFOCUS = 'e-input-focus';\nvar INPUTGROUP = 'e-input-group';\nvar ICONANIMATION = 'e-icon-anim';\nvar CLOSEICON_CLASS = 'e-clear-icon e-icons';\nvar CHIP_WRAPPER = 'e-chips-wrapper';\nvar CHIP_COLLECTION = 'e-chips-collection';\nvar CHIP = 'e-chips';\nvar CHIP_CONTENT = 'e-chipcontent';\nvar CHIP_CLOSE = 'e-chips-close';\nvar HIDEICON = 'e-icon-hide';\nvar DDTHIDEICON = 'e-ddt-icon-hide';\nvar POPUP_CLASS = 'e-ddt e-popup';\nvar PARENTITEM = 'e-list-parent';\nvar CONTENT = 'e-popup-content';\nvar DROPDOWN = 'e-dropdown';\nvar DISABLED = 'e-disabled';\nvar ICONS = 'e-icons';\nvar CHECKALLPARENT = 'e-selectall-parent';\nvar CHECKALLHIDE = 'e-hide-selectall';\nvar BIGGER = 'e-bigger';\nvar SMALL = 'e-small';\nvar ALLTEXT = 'e-all-text';\nvar CHECKBOXFRAME = 'e-frame';\nvar CHECK = 'e-check';\nvar CHECKBOXWRAP = 'e-checkbox-wrapper';\nvar FILTERWRAP = 'e-filter-wrap';\nvar DDTICON = 'e-ddt-icon';\nvar FOOTER = 'e-ddt-footer';\nvar HEADER = 'e-ddt-header';\nvar NODATACONTAINER = 'e-ddt-nodata';\nvar NODATA = 'e-no-data';\nvar HEADERTEMPLATE = 'HeaderTemplate';\nvar FOOTERTEMPLATE = 'FooterTemplate';\nvar NORECORDSTEMPLATE = 'NoRecordsTemplate';\nvar ACTIONFAILURETEMPLATE = 'ActionFailureTemplate';\nvar CUSTOMTEMPLATE = 'CustomTemplate';\nvar REMAIN_WRAPPER = 'e-remain';\nvar OVERFLOW_VIEW = 'e-overflow';\nvar SHOW_TEXT = 'e-show-text';\nvar TOTAL_COUNT_WRAPPER = 'e-total-count';\nvar REMAIN_COUNT = 'e-wrap-count';\nvar Fields = /** @__PURE__ @class */function (_super) {\n  __extends$2(Fields, _super);\n  function Fields() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  __decorate$2([Property('child')], Fields.prototype, \"child\", void 0);\n  __decorate$2([Property([])], Fields.prototype, \"dataSource\", void 0);\n  __decorate$2([Property('expanded')], Fields.prototype, \"expanded\", void 0);\n  __decorate$2([Property('hasChildren')], Fields.prototype, \"hasChildren\", void 0);\n  __decorate$2([Property('htmlAttributes')], Fields.prototype, \"htmlAttributes\", void 0);\n  __decorate$2([Property('iconCss')], Fields.prototype, \"iconCss\", void 0);\n  __decorate$2([Property('imageUrl')], Fields.prototype, \"imageUrl\", void 0);\n  __decorate$2([Property('parentValue')], Fields.prototype, \"parentValue\", void 0);\n  __decorate$2([Property(null)], Fields.prototype, \"query\", void 0);\n  __decorate$2([Property('selectable')], Fields.prototype, \"selectable\", void 0);\n  __decorate$2([Property('selected')], Fields.prototype, \"selected\", void 0);\n  __decorate$2([Property(null)], Fields.prototype, \"tableName\", void 0);\n  __decorate$2([Property('text')], Fields.prototype, \"text\", void 0);\n  __decorate$2([Property('tooltip')], Fields.prototype, \"tooltip\", void 0);\n  __decorate$2([Property('value')], Fields.prototype, \"value\", void 0);\n  return Fields;\n}(ChildProperty);\nvar TreeSettings = /** @__PURE__ @class */function (_super) {\n  __extends$2(TreeSettings, _super);\n  function TreeSettings() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  __decorate$2([Property(false)], TreeSettings.prototype, \"autoCheck\", void 0);\n  __decorate$2([Property('Auto')], TreeSettings.prototype, \"expandOn\", void 0);\n  __decorate$2([Property(false)], TreeSettings.prototype, \"loadOnDemand\", void 0);\n  return TreeSettings;\n}(ChildProperty);\n/**\n * The Dropdown Tree control allows you to select single or multiple values from hierarchical data in a tree-like structure.\n * It has several out-of-the-box features, such as data binding, check boxes, templates, filter,\n * UI customization, accessibility, and preselected values.\n * ```html\n *  <input type=\"text\" id=\"tree\"></input>\n * ```\n * ```typescript\n *  let ddtObj: DropDownTree = new DropDownTree();\n *  ddtObj.appendTo(\"#tree\");\n * ```\n */\nvar DropDownTree = /** @__PURE__ @class */function (_super) {\n  __extends$2(DropDownTree, _super);\n  function DropDownTree(options, element) {\n    var _this = _super.call(this, options, element) || this;\n    _this.filterTimer = null;\n    _this.isFilteredData = false;\n    _this.isFilterRestore = false;\n    // eslint-disable-next-line\n    _this.selectedData = [];\n    _this.filterDelayTime = 300;\n    _this.isClicked = false;\n    // Specifies if the checkAll method has been called\n    _this.isCheckAllCalled = false;\n    _this.isFromFilterChange = false;\n    return _this;\n  }\n  /**\n   * Get the properties to be maintained in the persisted state.\n   *\n   * @returns {string}\n   * @hidden\n   */\n  DropDownTree.prototype.getPersistData = function () {\n    var keyEntity = ['value'];\n    return this.addOnPersist(keyEntity);\n  };\n  DropDownTree.prototype.getLocaleName = function () {\n    return 'drop-down-tree';\n  };\n  /**\n   * Initialize the event handler.\n   *\n   * @returns {void}\n   * @private\n   */\n  DropDownTree.prototype.preRender = function () {\n    this.inputFocus = false;\n    this.isPopupOpen = false;\n    this.isFirstRender = true;\n    this.isInitialized = false;\n    this.currentText = null;\n    this.currentValue = null;\n    this.oldValue = null;\n    this.removeValue = false;\n    this.selectedText = [];\n    this.treeItems = [];\n    this.dataValue = null;\n    this.isNodeSelected = false;\n    this.isDynamicChange = false;\n    this.clearIconWidth = 0;\n    this.headerTemplateId = \"\" + this.element.id + HEADERTEMPLATE;\n    this.footerTemplateId = \"\" + this.element.id + FOOTERTEMPLATE;\n    this.actionFailureTemplateId = \"\" + this.element.id + ACTIONFAILURETEMPLATE;\n    this.noRecordsTemplateId = \"\" + this.element.id + NORECORDSTEMPLATE;\n    this.customTemplateId = \"\" + this.element.id + CUSTOMTEMPLATE;\n    this.keyConfigs = {\n      escape: 'escape',\n      altUp: 'alt+uparrow',\n      altDown: 'alt+downarrow',\n      tab: 'tab',\n      shiftTab: 'shift+tab',\n      end: 'end',\n      enter: 'enter',\n      home: 'home',\n      moveDown: 'downarrow',\n      moveLeft: 'leftarrow',\n      moveRight: 'rightarrow',\n      moveUp: 'uparrow',\n      ctrlDown: 'ctrl+downarrow',\n      ctrlUp: 'ctrl+uparrow',\n      ctrlEnter: 'ctrl+enter',\n      ctrlHome: 'ctrl+home',\n      ctrlEnd: 'ctrl+end',\n      shiftDown: 'shift+downarrow',\n      shiftUp: 'shift+uparrow',\n      shiftEnter: 'shift+enter',\n      shiftHome: 'shift+home',\n      shiftEnd: 'shift+end',\n      csDown: 'ctrl+shift+downarrow',\n      csUp: 'ctrl+shift+uparrow',\n      csEnter: 'ctrl+shift+enter',\n      csHome: 'ctrl+shift+home',\n      csEnd: 'ctrl+shift+end',\n      space: 'space',\n      ctrlA: 'ctrl+A'\n    };\n  };\n  /**\n   * To Initialize the control rendering\n   *\n   * @private\n   * @returns {void}\n   */\n  DropDownTree.prototype.render = function () {\n    var isTree = select('#' + this.element.id + '_tree', document);\n    if (isTree) {\n      var popupDiv = select('#' + this.element.id + '_options', document);\n      detach(popupDiv ? popupDiv : isTree.parentElement);\n    }\n    if (this.element.tagName === 'INPUT') {\n      this.inputEle = this.element;\n      if (isNullOrUndefined(this.inputEle.getAttribute('role'))) {\n        this.inputEle.setAttribute('aria-expanded', 'false');\n        this.inputEle.setAttribute('role', 'combobox');\n        this.inputEle.setAttribute('aria-haspopup', 'tree');\n        this.inputEle.setAttribute('aria-controls', this.element.id + \"_options\");\n      }\n      if (isNullOrUndefined(this.inputEle.getAttribute('type'))) {\n        this.inputEle.setAttribute('type', 'text');\n      }\n    } else {\n      this.inputEle = this.createElement('input', {\n        attrs: {\n          role: 'textbox',\n          type: 'text'\n        }\n      });\n      this.element.parentElement.insertBefore(this.inputEle, this.element);\n    }\n    this.inputObj = Input.createInput({\n      element: this.inputEle,\n      floatLabelType: this.floatLabelType,\n      buttons: this.showDropDownIcon ? [DROPDOWNICON] : null,\n      properties: {\n        readonly: true,\n        placeholder: this.placeholder,\n        enabled: this.enabled,\n        cssClass: this.cssClass,\n        enableRtl: this.enableRtl\n      }\n    }, this.createElement);\n    this.inputWrapper = this.inputObj.container;\n    if (!this.inputWrapper.classList.contains(INPUTGROUP)) {\n      this.inputWrapper.classList.add(INPUTGROUP);\n    }\n    if (this.showDropDownIcon) {\n      this.inputWrapper.classList.add(SHOW_DD_ICON);\n    }\n    if (this.element.tagName === this.getDirective()) {\n      this.element.appendChild(this.inputWrapper);\n    }\n    this.createHiddenElement();\n    this.createClearIcon();\n    this.inputWrapper.classList.add(DROPDOWNTREE);\n    this.setElementWidth(this.width);\n    this.updateDataAttribute();\n    this.setHTMLAttributes();\n    this.setAttributes();\n    this.popupDiv = this.createElement('div', {\n      className: CONTENT\n    });\n    this.popupDiv.classList.add(DROPDOWN);\n    this.tree = this.createElement('div', {\n      id: this.element.id + '_tree'\n    });\n    this.popupDiv.appendChild(this.tree);\n    document.body.appendChild(this.popupDiv);\n    this.wireTreeEvents();\n    addClass([this.popupDiv], DDTHIDEICON);\n    this.renderTree();\n    this.isRemoteData = this.fields.dataSource instanceof DataManager;\n    if (this.allowMultiSelection || this.showCheckBox) {\n      if (this.mode !== 'Delimiter') {\n        this.createChip();\n      }\n      if (!this.wrapText && this.mode !== 'Custom') {\n        this.overFlowWrapper = this.createElement('span', {\n          className: OVERFLOW_VIEW + ' ' + HIDEICON\n        });\n        this.inputWrapper.insertBefore(this.overFlowWrapper, this.hiddenElement);\n        if (this.mode !== 'Box') {\n          addClass([this.overFlowWrapper], SHOW_TEXT);\n        }\n      }\n    }\n    if (!this.isRemoteData) {\n      this.setTreeValue();\n      this.setTreeText();\n      this.updateHiddenValue();\n      this.setSelectedValue();\n      if (!this.wrapText) {\n        this.updateView();\n      }\n    }\n    this.wireEvents();\n    var firstUl = select('.' + PARENTITEM, this.treeObj.element);\n    if (firstUl && firstUl.getAttribute('aria-multiselectable')) {\n      firstUl.removeAttribute('aria-multiselectable');\n    }\n    this.oldValue = this.value;\n    this.isInitialized = true;\n    this.hasTemplate = this.itemTemplate || this.headerTemplate || this.footerTemplate || this.actionFailureTemplate || this.noRecordsTemplate || this.customTemplate;\n    this.renderComplete();\n  };\n  DropDownTree.prototype.hideCheckAll = function (flag) {\n    var checkAllEle = !isNullOrUndefined(this.popupEle) ? this.popupEle.querySelector('.' + CHECKALLPARENT) : null;\n    if (!isNullOrUndefined(checkAllEle)) {\n      if (flag && !checkAllEle.classList.contains(CHECKALLHIDE)) {\n        addClass([checkAllEle], CHECKALLHIDE);\n      } else if (!flag && checkAllEle.classList.contains(CHECKALLHIDE)) {\n        removeClass([checkAllEle], CHECKALLHIDE);\n      }\n    }\n  };\n  DropDownTree.prototype.renderFilter = function () {\n    this.filterContainer = this.createElement('div', {\n      id: this.element.id + '_filter_wrap',\n      className: FILTERWRAP\n    });\n    var filterInput = this.createElement('input', {\n      id: this.element.id + '_filter',\n      attrs: {\n        autocomplete: 'off',\n        'aria-label': this.filterBarPlaceholder\n      }\n    });\n    this.filterContainer.appendChild(filterInput);\n    prepend([this.filterContainer], this.popupEle);\n    this.filterObj = new TextBox({\n      value: '',\n      showClearButton: true,\n      placeholder: this.filterBarPlaceholder,\n      input: this.filterChangeHandler.bind(this)\n    });\n    this.filterObj.appendTo('#' + this.element.id + '_filter');\n  };\n  DropDownTree.prototype.filterChangeHandler = function (args) {\n    var _this = this;\n    if (!isNullOrUndefined(args.value)) {\n      window.clearTimeout(this.filterTimer);\n      this.filterTimer = window.setTimeout(function () {\n        _this.filterHandler(args.value, args.event);\n      }, this.filterDelayTime);\n    }\n  };\n  DropDownTree.prototype.isChildObject = function () {\n    if (typeof this.treeObj.fields.child === 'object') {\n      return true;\n    } else {\n      return false;\n    }\n  };\n  DropDownTree.prototype.filterHandler = function (value, event) {\n    var _this = this;\n    this.isFromFilterChange = true;\n    if (!this.isFilteredData) {\n      if (this.isRemoteData) {\n        this.treeObj.expandedNodes = [];\n      }\n      this.treeData = this.treeObj.getTreeData();\n    }\n    var filterFields = this.cloneFields(this.fields);\n    var args = {\n      cancel: false,\n      preventDefaultAction: false,\n      event: event,\n      text: value,\n      fields: filterFields\n    };\n    this.trigger('filtering', args, function (args) {\n      if (!args.cancel) {\n        var flag = false;\n        var fields = void 0;\n        _this.isFilteredData = true;\n        if (value === '') {\n          _this.isFilteredData = false;\n          _this.isFilterRestore = true;\n          fields = _this.cloneFields(_this.fields);\n        } else if (args.preventDefaultAction) {\n          fields = args.fields;\n        } else {\n          if (_this.treeDataType === 1) {\n            fields = _this.selfReferencefilter(value, args.fields);\n          } else {\n            if (_this.fields.dataSource instanceof DataManager) {\n              fields = _this.remoteDataFilter(value, args.fields);\n              fields.child = _this.fields.child;\n              _this.treeObj.fields = _this.getTreeFields(args.fields);\n              _this.treeObj.dataBind();\n              flag = true;\n            } else {\n              fields = _this.nestedFilter(value, args.fields);\n            }\n          }\n        }\n        _this.hideCheckAll(_this.isFilteredData);\n        if (flag) {\n          return;\n        }\n        if (_this.isRemoteData) {\n          if (_this.isChildObject()) {\n            fields.child = _this.fields.child;\n          } else {\n            fields = args.fields;\n          }\n        }\n        _this.treeObj.fields = _this.getTreeFields(fields);\n        _this.treeObj.dataBind();\n        if (_this.hasTemplate && _this.portals && _this.treeObj.portals) {\n          for (var i = 0; i < _this.treeObj.portals.length; i++) {\n            if (_this.portals.indexOf(_this.treeObj.portals[i]) == -1) {\n              _this.portals.push(_this.treeObj.portals[i]);\n            }\n          }\n          if (_this.isReact) {\n            _this.renderReactTemplates();\n          }\n        }\n      }\n    });\n  };\n  DropDownTree.prototype.remoteDataFilter = function (value, filteredFields) {\n    var _this = this;\n    filteredFields.dataSource = this.treeData.map(function (item) {\n      return _this.remoteChildFilter(value, item);\n    }).filter(function (filteredChild) {\n      return !isNullOrUndefined(filteredChild);\n    });\n    return filteredFields;\n  };\n  DropDownTree.prototype.remoteChildFilter = function (value, node, isChild, isChildFiltering) {\n    var children = this.isChildObject() ? node['child'] : node[this.fields.child];\n    if (isNullOrUndefined(children)) {\n      return this.isMatchedNode(value, node, isChild, isChildFiltering) ? node : null;\n    }\n    var matchedChildren = [];\n    for (var i = 0; i < children.length; i++) {\n      var filteredChild = this.remoteChildFilter(value, children[i], true, true);\n      if (!isNullOrUndefined(filteredChild)) {\n        matchedChildren.push(filteredChild);\n      }\n    }\n    var filteredItems = Object.assign({}, node);\n    isChildFiltering = false;\n    if (matchedChildren.length !== 0) {\n      filteredItems.child = matchedChildren;\n    } else {\n      filteredItems.child = null;\n      filteredItems = this.isMatchedNode(value, filteredItems) ? filteredItems : null;\n    }\n    return filteredItems;\n  };\n  DropDownTree.prototype.nestedFilter = function (value, filteredFields) {\n    // eslint-disable-next-line\n    var matchedDataSource = [];\n    for (var i = 0; i < this.treeData.length; i++) {\n      // eslint-disable-next-line\n      var filteredChild = this.nestedChildFilter(value, this.treeData[i]);\n      if (!isNullOrUndefined(filteredChild)) {\n        matchedDataSource.push(filteredChild);\n      }\n    }\n    filteredFields.dataSource = matchedDataSource;\n    return filteredFields;\n  };\n  // eslint-disable-next-line\n  DropDownTree.prototype.nestedChildFilter = function (value, node) {\n    // eslint-disable-next-line\n    var children = node[this.fields.child];\n    if (isNullOrUndefined(children)) {\n      return this.isMatchedNode(value, node) ? node : null;\n    } else {\n      // eslint-disable-next-line\n      var matchedChildren = [];\n      for (var i = 0; i < children.length; i++) {\n        // eslint-disable-next-line\n        var filteredChild = this.nestedChildFilter(value, children[i]);\n        if (!isNullOrUndefined(filteredChild)) {\n          matchedChildren.push(filteredChild);\n        }\n      }\n      var filteredItems = Object.assign({}, node);\n      if (matchedChildren.length !== 0) {\n        filteredItems[this.fields.child] = matchedChildren;\n        return filteredItems;\n      } else {\n        filteredItems[this.fields.child] = null;\n        return this.isMatchedNode(value, filteredItems) ? filteredItems : null;\n      }\n    }\n  };\n  DropDownTree.prototype.selfReferencefilter = function (value, filteredFields) {\n    // eslint-disable-next-line\n    var matchedData = [];\n    // eslint-disable-next-line\n    var matchedDataSource = [];\n    for (var i = 0; i < this.treeData.length; i++) {\n      if (this.isMatchedNode(value, this.treeData[i])) {\n        matchedData.push(this.treeData[i]);\n      }\n    }\n    for (var i = 0; i < matchedData.length; i++) {\n      if (matchedDataSource.indexOf(matchedData[i]) === -1) {\n        matchedDataSource.push(matchedData[i]);\n        // eslint-disable-next-line\n        var parentId = matchedData[i][this.fields.parentValue];\n        while (!isNullOrUndefined(parentId)) {\n          // eslint-disable-next-line\n          var parent_1 = null;\n          for (var j = 0; j < this.treeData.length; j++) {\n            // eslint-disable-next-line\n            var value_1 = this.treeData[j][this.fields.value];\n            if (!isNullOrUndefined(value_1) && value_1 === parentId) {\n              parent_1 = this.treeData[j];\n              break;\n            }\n          }\n          if (!isNullOrUndefined(parent_1) && matchedDataSource.indexOf(parent_1) === -1) {\n            matchedDataSource.push(parent_1);\n            parentId = parent_1[this.fields.parentValue];\n          } else {\n            break;\n          }\n        }\n      }\n    }\n    filteredFields.dataSource = matchedDataSource;\n    return filteredFields;\n  };\n  // eslint-disable-next-line\n  DropDownTree.prototype.isMatchedNode = function (value, node, isChild, isChildFiltering) {\n    var checkValue;\n    var isObjectValue = isChild && isChildFiltering && this.isChildObject();\n    checkValue = isObjectValue ? node[this.fields.child.text] : node[this.fields.text];\n    if (!checkValue) {\n      var tempChild = this.fields.child;\n      while (!node[tempChild.text]) {\n        tempChild = tempChild.child;\n      }\n      checkValue = node[tempChild.text];\n    }\n    if (this.ignoreCase) {\n      checkValue = checkValue.toLowerCase();\n      value = value.toLowerCase();\n    }\n    if (this.ignoreAccent) {\n      checkValue = DataUtil.ignoreDiacritics(checkValue);\n      value = DataUtil.ignoreDiacritics(value);\n    }\n    if (this.filterType === 'StartsWith') {\n      return checkValue.slice(0, value.length) === value;\n    } else if (this.filterType === 'EndsWith') {\n      return checkValue.slice(-value.length) === value;\n    } else {\n      return checkValue.indexOf(value) !== -1;\n    }\n  };\n  /* To wire events for the dropdown tree */\n  DropDownTree.prototype.wireEvents = function () {\n    EventHandler.add(this.inputWrapper, 'mouseup', this.dropDownClick, this);\n    EventHandler.add(this.inputWrapper, 'focus', this.focusIn, this);\n    EventHandler.add(this.inputWrapper, 'blur', this.focusOut, this);\n    EventHandler.add(this.inputWrapper, 'mousemove', this.mouseIn, this);\n    EventHandler.add(this.inputWrapper, 'mouseout', this.onMouseLeave, this);\n    EventHandler.add(this.overAllClear, 'mousedown', this.clearAll, this);\n    EventHandler.add(window, 'resize', this.windowResize, this);\n    var formElement = closest(this.inputWrapper, 'form');\n    if (formElement) {\n      EventHandler.add(formElement, 'reset', this.resetValueHandler, this);\n    }\n    this.keyboardModule = new KeyboardEvents(this.inputWrapper, {\n      keyAction: this.keyActionHandler.bind(this),\n      keyConfigs: this.keyConfigs,\n      eventName: 'keydown'\n    });\n  };\n  DropDownTree.prototype.wireTreeEvents = function () {\n    this.keyboardModule = new KeyboardEvents(this.tree, {\n      keyAction: this.treeAction.bind(this),\n      keyConfigs: this.keyConfigs,\n      eventName: 'keydown'\n    });\n  };\n  DropDownTree.prototype.wireCheckAllWrapperEvents = function () {\n    this.keyboardModule = new KeyboardEvents(this.checkAllParent, {\n      keyAction: this.checkAllAction.bind(this),\n      keyConfigs: this.keyConfigs,\n      eventName: 'keydown'\n    });\n  };\n  /* To unwire events for the dropdown tree */\n  DropDownTree.prototype.unWireEvents = function () {\n    EventHandler.remove(this.inputWrapper, 'mouseup', this.dropDownClick);\n    EventHandler.remove(this.inputWrapper, 'focus', this.focusIn);\n    EventHandler.remove(this.inputWrapper, 'blur', this.focusOut);\n    EventHandler.remove(this.inputWrapper, 'mousemove', this.mouseIn);\n    EventHandler.remove(this.inputWrapper, 'mouseout', this.onMouseLeave);\n    EventHandler.remove(this.overAllClear, 'mousedown', this.clearAll);\n    EventHandler.remove(window, 'resize', this.windowResize);\n    var formElement = closest(this.inputWrapper, 'form');\n    if (formElement) {\n      EventHandler.remove(formElement, 'reset', this.resetValueHandler);\n    }\n  };\n  /* Trigger when the dropdown is clicked */\n  DropDownTree.prototype.dropDownClick = function (e) {\n    if (!this.enabled || this.readonly) {\n      return;\n    }\n    if (this.isClearButtonClick) {\n      this.isClearButtonClick = false;\n      return;\n    }\n    if (this.isPopupOpen) {\n      this.hidePopup();\n    } else {\n      this.focusIn(e);\n      this.renderPopup();\n    }\n    this.showOverAllClear();\n  };\n  DropDownTree.prototype.mouseIn = function () {\n    if (this.enabled || !this.readonly) {\n      this.showOverAllClear();\n    }\n  };\n  DropDownTree.prototype.onMouseLeave = function () {\n    if (!this.inputFocus) {\n      addClass([this.overAllClear], HIDEICON);\n      removeClass([this.inputWrapper], SHOW_CLEAR);\n    }\n  };\n  DropDownTree.prototype.getDirective = function () {\n    return 'EJS-DROPDOWNTREE';\n  };\n  DropDownTree.prototype.focusOut = function (e) {\n    if (!this.enabled || this.readonly || !this.inputFocus) {\n      return;\n    }\n    if ((Browser.isIE || Browser.info.name === 'edge') && e.target === this.inputWrapper) {\n      return;\n    }\n    var target = e.relatedTarget;\n    if (target !== this.inputEle && isNullOrUndefined(target) && (e.target !== this.inputWrapper || !this.isPopupOpen)) {\n      this.onFocusOut(e);\n    }\n  };\n  DropDownTree.prototype.onFocusOut = function (event) {\n    this.inputFocus = false;\n    if (this.isPopupOpen) {\n      this.hidePopup();\n    }\n    if (this.isClearButtonClick) {\n      this.isClearButtonClick = false;\n    }\n    if (this.showClearButton) {\n      this.clearIconWidth = select('.e-clear-icon', this.inputWrapper).offsetWidth;\n      addClass([this.overAllClear], HIDEICON);\n      removeClass([this.inputWrapper], SHOW_CLEAR);\n    }\n    removeClass([this.inputWrapper], [INPUTFOCUS]);\n    if (this.allowMultiSelection || this.showCheckBox) {\n      var isValue = this.value ? this.value.length ? true : false : false;\n      if (this.mode !== 'Delimiter' && this.mode !== 'Custom') {\n        if (this.chipWrapper && this.mode === 'Default') {\n          addClass([this.chipWrapper], HIDEICON);\n          removeClass([this.inputWrapper], SHOW_CHIP);\n          removeClass([this.inputEle], CHIP_INPUT);\n        }\n      }\n      if (!this.wrapText && isValue) {\n        this.updateView();\n      }\n    }\n    if (this.changeOnBlur) {\n      this.triggerChangeEvent(event);\n    }\n    this.removeValue = false;\n    this.oldValue = this.value;\n    this.trigger('blur');\n  };\n  DropDownTree.prototype.updateView = function () {\n    if (!this.showCheckBox && !this.allowMultiSelection || this.mode === 'Custom' || this.inputFocus) {\n      return;\n    }\n    if (this.mode !== 'Box') {\n      addClass([this.inputWrapper, this.overFlowWrapper], SHOW_TEXT);\n    } else {\n      addClass([this.inputWrapper], SHOW_CHIP);\n    }\n    if (this.value && this.value.length !== 0) {\n      if (this.inputWrapper.contains(this.chipWrapper)) {\n        addClass([this.chipWrapper], HIDEICON);\n      }\n      addClass([this.inputEle], CHIP_INPUT);\n      this.updateOverFlowView();\n      this.ensurePlaceHolder();\n    }\n  };\n  DropDownTree.prototype.triggerChangeEvent = function (event) {\n    var isEqual = this.ddtCompareValues(this.oldValue, this.value);\n    if ((!isEqual || this.isChipDelete) && !this.removeValue) {\n      var eventArgs = {\n        e: event,\n        oldValue: this.oldValue,\n        value: this.value,\n        isInteracted: event ? true : false,\n        element: this.element\n      };\n      this.trigger('change', eventArgs);\n      this.oldValue = this.value;\n    }\n  };\n  DropDownTree.prototype.ddtCompareValues = function (oldValue, newValue) {\n    if (oldValue === null || newValue === null) {\n      var isValid = oldValue === null ? newValue === oldValue ? true : false : oldValue.length === 0 ? newValue === oldValue : false;\n      return isValid;\n    } else if (oldValue.length !== newValue.length) {\n      return false;\n    }\n    for (var i = 0; i < oldValue.length; i++) {\n      if (oldValue[i] !== newValue[i]) {\n        return false;\n      }\n    }\n    return true;\n  };\n  DropDownTree.prototype.focusIn = function (e) {\n    if (!this.enabled || this.readonly || this.inputFocus) {\n      return;\n    }\n    this.showOverAllClear();\n    this.inputFocus = true;\n    addClass([this.inputWrapper], [INPUTFOCUS]);\n    if (this.allowMultiSelection || this.showCheckBox) {\n      if (this.mode !== 'Delimiter' && this.inputFocus) {\n        if (this.chipWrapper && this.value && this.value.length !== 0) {\n          removeClass([this.chipWrapper], HIDEICON);\n          addClass([this.inputEle], CHIP_INPUT);\n        }\n        addClass([this.inputWrapper], SHOW_CHIP);\n        if (this.popupObj) {\n          this.popupObj.refreshPosition();\n        }\n      }\n      if (!this.wrapText && this.mode !== 'Custom') {\n        if (this.inputWrapper.contains(this.overFlowWrapper)) {\n          addClass([this.overFlowWrapper], HIDEICON);\n        }\n        if (this.mode === 'Delimiter') {\n          removeClass([this.inputWrapper], SHOW_CHIP);\n          removeClass([this.inputEle], CHIP_INPUT);\n        } else {\n          addClass([this.inputWrapper], SHOW_CHIP);\n        }\n        removeClass([this.inputWrapper], SHOW_TEXT);\n        this.ensurePlaceHolder();\n      }\n    }\n    var args = {\n      isInteracted: e ? true : false,\n      event: e\n    };\n    this.trigger('focus', args);\n  };\n  DropDownTree.prototype.treeAction = function (e) {\n    var _this = this;\n    var eventArgs = {\n      cancel: false,\n      event: e\n    };\n    this.trigger('keyPress', eventArgs, function (observedArgs) {\n      if (!observedArgs.cancel) {\n        switch (e.action) {\n          case 'escape':\n          case 'altUp':\n            _this.inputWrapper.focus();\n            e.preventDefault();\n            if (_this.isPopupOpen) {\n              _this.hidePopup();\n            }\n            break;\n          case 'tab':\n          case 'shiftTab':\n            if (_this.isPopupOpen) {\n              _this.hidePopup();\n            }\n            break;\n          case 'enter':\n          case 'ctrlEnter':\n          case 'shiftEnter':\n          case 'csEnter':\n            if (!_this.showCheckBox) {\n              _this.isValueChange = true;\n              _this.keyEventArgs = e;\n            }\n            break;\n          case 'space':\n            _this.isValueChange = true;\n            _this.keyEventArgs = e;\n            break;\n          case 'ctrlA':\n            if (_this.allowMultiSelection) {\n              _this.selectAll(true);\n            }\n            break;\n          case 'moveRight':\n          case 'moveLeft':\n          case 'shiftDown':\n          case 'moveDown':\n          case 'ctrlDown':\n          case 'csDown':\n          case 'shiftUp':\n          case 'moveUp':\n          case 'ctrlUp':\n          case 'csUp':\n          case 'home':\n          case 'shiftHome':\n          case 'ctrlHome':\n          case 'csHome':\n          case 'end':\n          case 'shiftEnd':\n          case 'ctrlEnd':\n          case 'csEnd':\n        }\n      } else {\n        e.stopImmediatePropagation();\n      }\n    });\n  };\n  DropDownTree.prototype.keyActionHandler = function (e) {\n    var _this = this;\n    var eventArgs = {\n      cancel: false,\n      event: e\n    };\n    this.trigger('keyPress', eventArgs, function (observedArgs) {\n      if (!observedArgs.cancel) {\n        switch (e.action) {\n          case 'escape':\n          case 'altUp':\n            if (_this.isPopupOpen) {\n              _this.hidePopup();\n            }\n            break;\n          case 'shiftTab':\n          case 'tab':\n            if (_this.isPopupOpen) {\n              _this.hidePopup();\n            }\n            if (_this.inputFocus) {\n              _this.onFocusOut();\n            }\n            break;\n          case 'altDown':\n            if (!_this.isPopupOpen) {\n              _this.showPopup();\n              e.preventDefault();\n            }\n            break;\n          case 'moveDown':\n            if (_this.showSelectAll && _this.showCheckBox) {\n              _this.checkAllParent.focus();\n            }\n            break;\n        }\n      }\n    });\n  };\n  DropDownTree.prototype.checkAllAction = function (e) {\n    var _this = this;\n    var eventArgs = {\n      cancel: false,\n      event: e\n    };\n    this.trigger('keyPress', eventArgs, function (observedArgs) {\n      if (!observedArgs.cancel) {\n        switch (e.action) {\n          case 'space':\n            _this.clickHandler(e);\n            break;\n          case 'moveDown':\n            var focusedElement = _this.treeObj.element.querySelector('li');\n            focusedElement.focus();\n            addClass([focusedElement], ['e-node-focus']);\n        }\n      }\n    });\n  };\n  DropDownTree.prototype.windowResize = function () {\n    if (this.popupObj) {\n      this.popupObj.setProperties({\n        width: this.setWidth()\n      });\n      this.popupObj.refreshPosition();\n    }\n  };\n  DropDownTree.prototype.resetValueHandler = function (e) {\n    var formElement = closest(this.inputWrapper, 'form');\n    if (formElement && e.target === formElement) {\n      this.isDynamicChange = true;\n      this.setProperties({\n        value: null\n      }, true);\n      this.resetValue(true);\n      this.isDynamicChange = false;\n    }\n  };\n  DropDownTree.prototype.getAriaAttributes = function () {\n    return {};\n  };\n  DropDownTree.prototype.updateOverFlowView = function () {\n    this.overFlowWrapper.classList.remove(TOTAL_COUNT_WRAPPER);\n    removeClass([this.overFlowWrapper], HIDEICON);\n    if (this.value && this.value.length) {\n      var data = '';\n      var overAllContainer = void 0;\n      var temp = void 0;\n      var tempData = void 0;\n      var tempIndex = 1;\n      var wrapperleng = void 0;\n      var remaining = void 0;\n      var downIconWidth = 0;\n      this.overFlowWrapper.innerHTML = '';\n      // eslint-disable-next-line\n      var l10nLocale = {\n        overflowCountTemplate: '+${count} more..',\n        totalCountTemplate: '${count} selected'\n      };\n      this.l10n = new L10n(this.getLocaleName(), l10nLocale, this.locale);\n      var remainContent = this.l10n.getConstant('overflowCountTemplate');\n      var totalContent = this.l10n.getConstant('totalCountTemplate');\n      var remainElement = this.createElement('span', {\n        className: REMAIN_WRAPPER\n      });\n      this.overFlowWrapper.appendChild(remainElement);\n      remainElement.innerText = remainContent.replace('${count}', this.value.length.toString());\n      var remainSize = remainElement.offsetWidth;\n      remove(remainElement);\n      if (this.showDropDownIcon) {\n        downIconWidth = select('.' + DDTICON, this.inputWrapper).offsetWidth;\n      }\n      if (!isNullOrUndefined(this.value)) {\n        if (this.mode !== 'Box') {\n          for (var index = 0; !isNullOrUndefined(this.value[index]); index++) {\n            data += index === 0 ? '' : this.delimiterChar + ' ';\n            temp = this.getOverflowVal(index);\n            data += temp;\n            temp = this.overFlowWrapper.innerHTML;\n            if (this.enableHtmlSanitizer) {\n              this.overFlowWrapper.innerText = SanitizeHtmlHelper.sanitize(data);\n            } else {\n              this.overFlowWrapper.innerHTML = data;\n            }\n            wrapperleng = this.overFlowWrapper.offsetWidth;\n            overAllContainer = this.inputWrapper.offsetWidth;\n            if (wrapperleng + downIconWidth + this.clearIconWidth > overAllContainer) {\n              if (tempData !== undefined && tempData !== '') {\n                temp = tempData;\n                index = tempIndex + 1;\n              }\n              this.overFlowWrapper.innerHTML = temp;\n              remaining = this.value.length - index;\n              wrapperleng = this.overFlowWrapper.offsetWidth;\n              while (wrapperleng + remainSize + downIconWidth + this.clearIconWidth >= overAllContainer && wrapperleng !== 0 && this.overFlowWrapper.innerHTML !== '') {\n                var textArr = this.overFlowWrapper.innerHTML.split(this.delimiterChar);\n                textArr.pop();\n                this.overFlowWrapper.innerHTML = textArr.join(this.delimiterChar);\n                remaining++;\n                wrapperleng = this.overFlowWrapper.offsetWidth;\n              }\n              break;\n            } else if (wrapperleng + remainSize + downIconWidth + this.clearIconWidth <= overAllContainer) {\n              tempData = data;\n              tempIndex = index;\n            } else if (index === 0) {\n              tempData = '';\n              tempIndex = -1;\n            }\n          }\n        } else {\n          addClass([this.chipWrapper], HIDEICON);\n          var ele = this.chipWrapper.cloneNode(true);\n          var chips = selectAll('.' + CHIP, ele);\n          for (var i = 0; i < chips.length; i++) {\n            temp = this.overFlowWrapper.innerHTML;\n            this.overFlowWrapper.appendChild(chips[i]);\n            data = this.overFlowWrapper.innerHTML;\n            wrapperleng = this.overFlowWrapper.offsetWidth;\n            overAllContainer = this.inputWrapper.offsetWidth;\n            if (wrapperleng + downIconWidth + this.clearIconWidth > overAllContainer) {\n              if (tempData !== undefined && tempData !== '') {\n                temp = tempData;\n                i = tempIndex + 1;\n              }\n              this.overFlowWrapper.innerHTML = temp;\n              remaining = this.value.length - i;\n              wrapperleng = this.overFlowWrapper.offsetWidth;\n              while (wrapperleng + remainSize + downIconWidth + this.clearIconWidth >= overAllContainer && wrapperleng !== 0 && this.overFlowWrapper.innerHTML !== '') {\n                this.overFlowWrapper.removeChild(this.overFlowWrapper.lastChild);\n                remaining++;\n                wrapperleng = this.overFlowWrapper.offsetWidth;\n              }\n              break;\n            } else if (wrapperleng + remainSize + downIconWidth + this.clearIconWidth <= overAllContainer) {\n              tempData = data;\n              tempIndex = i;\n            } else if (i === 0) {\n              tempData = '';\n              tempIndex = -1;\n            }\n          }\n        }\n      }\n      if (remaining > 0) {\n        this.overFlowWrapper.appendChild(this.updateRemainTemplate(remainElement, remaining, remainContent, totalContent));\n      }\n      if (this.mode === 'Box' && !this.overFlowWrapper.classList.contains(TOTAL_COUNT_WRAPPER)) {\n        addClass([remainElement], REMAIN_COUNT);\n      }\n    } else {\n      this.overFlowWrapper.innerHTML = '';\n      addClass([this.overFlowWrapper], HIDEICON);\n    }\n    this.updateDelimMode();\n  };\n  DropDownTree.prototype.updateRemainTemplate = function (remainElement, remaining, remainContent, totalContent) {\n    if (this.overFlowWrapper.firstChild && this.overFlowWrapper.firstChild.nodeType === 3 && this.overFlowWrapper.firstChild.nodeValue === '') {\n      this.overFlowWrapper.removeChild(this.overFlowWrapper.firstChild);\n    }\n    remainElement.innerHTML = '';\n    remainElement.innerText = this.overFlowWrapper.firstChild && (this.overFlowWrapper.firstChild.nodeType === 3 || this.mode === 'Box') ? remainContent.replace('${count}', remaining.toString()) : totalContent.replace('${count}', remaining.toString());\n    if (this.overFlowWrapper.firstChild && (this.overFlowWrapper.firstChild.nodeType === 3 || this.mode === 'Box')) {\n      removeClass([this.overFlowWrapper], TOTAL_COUNT_WRAPPER);\n    } else {\n      addClass([this.overFlowWrapper], TOTAL_COUNT_WRAPPER);\n      removeClass([this.overFlowWrapper], REMAIN_COUNT);\n    }\n    return remainElement;\n  };\n  DropDownTree.prototype.getOverflowVal = function (index) {\n    // eslint-disable-next-line\n    var selectedData = this.getSelectedData(this.value[index]);\n    return getValue(this.treeSettings.loadOnDemand ? this.fields.text : 'text', selectedData);\n  };\n  DropDownTree.prototype.updateDelimMode = function () {\n    if (this.mode !== 'Box') {\n      if (select('.' + REMAIN_WRAPPER, this.overFlowWrapper) && !this.overFlowWrapper.classList.contains(TOTAL_COUNT_WRAPPER)) {\n        addClass([this.overFlowWrapper], REMAIN_COUNT);\n        addClass([this.overFlowWrapper], SHOW_TEXT);\n      } else {\n        this.overFlowWrapper.classList.remove(REMAIN_COUNT);\n        removeClass([this.overFlowWrapper], REMAIN_COUNT);\n      }\n    } else if (select('.' + REMAIN_WRAPPER, this.overFlowWrapper)) {\n      this.overFlowWrapper.classList.remove(REMAIN_COUNT);\n    }\n  };\n  DropDownTree.prototype.createHiddenElement = function () {\n    if (this.allowMultiSelection || this.showCheckBox) {\n      this.hiddenElement = this.createElement('select', {\n        attrs: {\n          'aria-hidden': 'true',\n          'class': HIDDENELEMENT,\n          'tabindex': '-1',\n          'multiple': ''\n        }\n      });\n    } else {\n      this.hiddenElement = this.createElement('select', {\n        attrs: {\n          'aria-hidden': 'true',\n          'tabindex': '-1',\n          'class': HIDDENELEMENT\n        }\n      });\n    }\n    prepend([this.hiddenElement], this.inputWrapper);\n    this.validationAttribute();\n  };\n  DropDownTree.prototype.createClearIcon = function () {\n    this.overAllClear = this.createElement('span', {\n      className: CLOSEICON_CLASS\n    });\n    addClass([this.overAllClear], HIDEICON);\n    removeClass([this.inputWrapper], SHOW_CLEAR);\n    if (this.showClearButton) {\n      this.inputWrapper.insertBefore(this.overAllClear, this.inputObj.buttons[0]);\n    }\n  };\n  DropDownTree.prototype.validationAttribute = function () {\n    var name = this.inputEle.getAttribute('name') ? this.inputEle.getAttribute('name') : this.inputEle.getAttribute('id');\n    this.hiddenElement.setAttribute('name', name);\n    this.inputEle.removeAttribute('name');\n    var attributes$$1 = ['required', 'aria-required', 'form'];\n    for (var i = 0; i < attributes$$1.length; i++) {\n      var attr = this.inputEle.getAttribute(attributes$$1[i]);\n      if (attr) {\n        this.hiddenElement.setAttribute(attributes$$1[i], attr);\n        this.inputEle.removeAttribute(attributes$$1[i]);\n      }\n    }\n  };\n  DropDownTree.prototype.createChip = function () {\n    if (!this.inputWrapper.contains(this.chipWrapper)) {\n      this.chipWrapper = this.createElement('span', {\n        className: CHIP_WRAPPER\n      });\n      this.chipCollection = this.createElement('span', {\n        className: CHIP_COLLECTION\n      });\n      this.chipWrapper.appendChild(this.chipCollection);\n      this.inputWrapper.insertBefore(this.chipWrapper, this.hiddenElement);\n      addClass([this.inputWrapper], SHOW_CHIP);\n      var isValid = this.getValidMode();\n      if (isValid && this.value !== null && this.value && this.value.length !== 0) {\n        addClass([this.inputEle], CHIP_INPUT);\n      } else if (this.value === null || this.value && this.value.length === 0 || this.checkWrapper) {\n        addClass([this.chipWrapper], HIDEICON);\n      }\n    }\n  };\n  DropDownTree.prototype.getValidMode = function () {\n    if (this.allowMultiSelection || this.showCheckBox) {\n      return this.mode === 'Box' ? true : this.mode === 'Default' && this.inputFocus ? true : false;\n    } else {\n      return false;\n    }\n  };\n  DropDownTree.prototype.createSelectAllWrapper = function () {\n    this.checkAllParent = this.createElement('div', {\n      className: CHECKALLPARENT,\n      attrs: {\n        'tabindex': '0'\n      }\n    });\n    this.selectAllSpan = this.createElement('span', {\n      className: ALLTEXT\n    });\n    this.selectAllSpan.textContent = '';\n    var ele = closest(this.element, '.' + BIGGER);\n    var touchClass = isNullOrUndefined(ele) ? '' : SMALL;\n    this.checkBoxElement = createCheckBox(this.createElement, true, {\n      cssClass: touchClass\n    });\n    this.checkBoxElement.setAttribute('role', 'checkbox');\n    this.checkAllParent.appendChild(this.checkBoxElement);\n    this.checkAllParent.appendChild(this.selectAllSpan);\n    this.setLocale();\n    EventHandler.add(this.checkAllParent, 'mouseup', this.clickHandler, this);\n    this.wireCheckAllWrapperEvents();\n  };\n  DropDownTree.prototype.clickHandler = function (e) {\n    var target;\n    if (e.currentTarget && e.currentTarget.classList.contains(CHECKALLPARENT)) {\n      target = e.currentTarget.firstElementChild.lastElementChild;\n    } else {\n      target = e.target;\n    }\n    this.checkWrapper = closest(target, '.' + CHECKBOXWRAP);\n    if (!isNullOrUndefined(this.checkWrapper)) {\n      this.isClicked = true;\n      var checkElement = select('.' + CHECKBOXFRAME, this.checkWrapper);\n      this.changeState(this.checkWrapper, checkElement.classList.contains(CHECK) ? 'uncheck' : 'check', e);\n      this.isClicked = false;\n    }\n    e.preventDefault();\n  };\n  DropDownTree.prototype.changeState = function (wrapper, state, e) {\n    var ariaState;\n    var frameSpan = wrapper.getElementsByClassName(CHECKBOXFRAME)[0];\n    if (state === 'check' && !frameSpan.classList.contains(CHECK)) {\n      frameSpan.classList.add(CHECK);\n      ariaState = 'true';\n      if (!this.isReverseUpdate) {\n        this.isCheckAllCalled = true;\n        this.treeObj.checkAll();\n        if (!this.changeOnBlur) {\n          this.triggerChangeEvent(e);\n        }\n      }\n      this.setLocale(true);\n    } else if (state === 'uncheck' && frameSpan.classList.contains(CHECK)) {\n      frameSpan.classList.remove(CHECK);\n      ariaState = 'false';\n      if (!this.isReverseUpdate) {\n        this.treeObj.uncheckAll();\n        if (!this.changeOnBlur) {\n          this.triggerChangeEvent(e);\n        }\n      }\n      this.setLocale(false);\n    }\n    this.setMultiSelect();\n    this.ensurePlaceHolder();\n    ariaState = state === 'check' ? 'true' : 'false';\n    if (!isNullOrUndefined(ariaState)) {\n      wrapper.setAttribute('aria-checked', ariaState);\n    }\n  };\n  DropDownTree.prototype.setLocale = function (unSelect) {\n    if (!this.selectAllSpan) {\n      return;\n    }\n    if (this.selectAllText !== 'Select All' || this.unSelectAllText !== 'Unselect All') {\n      var template = unSelect ? this.unSelectAllText : this.selectAllText;\n      this.selectAllSpan.textContent = '';\n      // eslint-disable-next-line\n      var compiledString = compile(template);\n      var templateName = unSelect ? 'unSelectAllText' : 'selectAllText';\n      for (var _i = 0, _a = compiledString({}, this, templateName, null, !this.isStringTemplate); _i < _a.length; _i++) {\n        var item = _a[_i];\n        this.selectAllSpan.textContent = item.textContent;\n      }\n    } else {\n      this.selectAllSpan.textContent = unSelect ? this.unSelectAllText : this.selectAllText;\n    }\n  };\n  DropDownTree.prototype.setAttributes = function () {\n    this.inputEle.setAttribute('tabindex', '-1');\n    var id = this.element.getAttribute('id');\n    this.hiddenElement.id = id + '_hidden';\n    this.inputWrapper.setAttribute('tabindex', '0');\n    attributes(this.inputWrapper, this.getAriaAttributes());\n  };\n  DropDownTree.prototype.setHTMLAttributes = function () {\n    if (Object.keys(this.htmlAttributes).length) {\n      for (var _i = 0, _a = Object.keys(this.htmlAttributes); _i < _a.length; _i++) {\n        var htmlAttr = _a[_i];\n        if (htmlAttr === 'class') {\n          this.inputWrapper.classList.add(this.htmlAttributes[\"\" + htmlAttr]);\n        } else if (htmlAttr === 'disabled' && this.htmlAttributes[\"\" + htmlAttr] === 'disabled') {\n          this.setProperties({\n            enabled: false\n          }, true);\n          this.setEnable();\n        } else if (htmlAttr === 'readonly' && !isNullOrUndefined(this.htmlAttributes[\"\" + htmlAttr])) {\n          this.setProperties({\n            readonly: true\n          }, true);\n          this.dataBind();\n        } else if (htmlAttr === 'style') {\n          this.inputWrapper.setAttribute('style', this.htmlAttributes[\"\" + htmlAttr]);\n        } else {\n          var defaultAttr = ['title', 'id', 'placeholder', 'aria-placeholder', 'role', 'autocorrect', 'autocomplete', 'autocapitalize', 'spellcheck', 'minlength', 'maxlength'];\n          var validateAttr = ['name', 'required'];\n          if (htmlAttr.indexOf('data') === 0 || validateAttr.indexOf(htmlAttr) > -1) {\n            this.hiddenElement.setAttribute(htmlAttr, this.htmlAttributes[\"\" + htmlAttr]);\n          } else if (defaultAttr.indexOf(htmlAttr) > -1) {\n            if (htmlAttr === 'placeholder') {\n              Input.setPlaceholder(this.htmlAttributes[\"\" + htmlAttr], this.inputEle);\n            } else {\n              this.inputEle.setAttribute(htmlAttr, this.htmlAttributes[\"\" + htmlAttr]);\n            }\n          } else {\n            this.inputEle.setAttribute(htmlAttr, this.htmlAttributes[\"\" + htmlAttr]);\n          }\n        }\n      }\n    }\n  };\n  DropDownTree.prototype.updateDataAttribute = function () {\n    var value = this.htmlAttributes;\n    var invalidAttr = ['class', 'style', 'id', 'type'];\n    var attr = {};\n    for (var a = 0; a < this.element.attributes.length; a++) {\n      if (invalidAttr.indexOf(this.element.attributes[a].name) === -1 && !(this.element.attributes[a].name === 'readonly')) {\n        attr[this.element.attributes[a].name] = this.element.getAttribute(this.element.attributes[a].name);\n      }\n    }\n    extend(attr, value, attr);\n    this.setProperties({\n      htmlAttributes: attr\n    }, true);\n  };\n  DropDownTree.prototype.showOverAllClear = function () {\n    if (!this.enabled || this.readonly) {\n      return;\n    }\n    if (this.overAllClear) {\n      var isValue = this.value ? this.value.length ? true : false : false;\n      if (isValue && this.showClearButton) {\n        removeClass([this.overAllClear], HIDEICON);\n        addClass([this.inputWrapper], SHOW_CLEAR);\n      } else {\n        addClass([this.overAllClear], HIDEICON);\n        removeClass([this.inputWrapper], SHOW_CLEAR);\n      }\n    }\n  };\n  DropDownTree.prototype.setTreeValue = function () {\n    if (this.value !== null && this.value.length !== 0) {\n      // eslint-disable-next-line\n      var data = void 0;\n      if (this.showCheckBox || this.allowMultiSelection) {\n        for (var i = 0; i < this.value.length; i++) {\n          data = this.treeObj.getTreeData(this.value[i])[0];\n          if (isNullOrUndefined(data)) {\n            this.value.splice(this.value.indexOf(this.value[i]), 1);\n          }\n        }\n        if (this.value.length !== 0) {\n          this.setValidValue();\n        }\n      } else {\n        data = this.treeObj.getTreeData(this.value[0])[0];\n        if (!isNullOrUndefined(data)) {\n          this.setProperties({\n            text: data[this.fields.text]\n          }, true);\n          this.setValidValue();\n        } else {\n          this.setProperties({\n            value: this.currentValue\n          }, true);\n        }\n      }\n    }\n  };\n  DropDownTree.prototype.setTreeText = function () {\n    if (this.value !== null && !this.isInitialized) {\n      return;\n    }\n    if (this.text !== null) {\n      // eslint-disable-next-line\n      var data = void 0;\n      var valArr = [];\n      if (this.showCheckBox || this.allowMultiSelection) {\n        var textArr = this.text.split(this.delimiterChar);\n        for (var i = 0; i < textArr.length; i++) {\n          data = this.getItems(textArr[i]);\n          if (!isNullOrUndefined(data)) {\n            valArr.push(data[this.fields.value].toString());\n          }\n        }\n        if (valArr.length !== 0) {\n          this.oldValue = this.value;\n          this.setProperties({\n            value: valArr\n          }, true);\n          this.setValidValue();\n        } else {\n          this.setProperties({\n            text: this.currentText\n          }, true);\n        }\n      } else {\n        data = this.getItems(this.text);\n        if (!isNullOrUndefined(data)) {\n          this.oldValue = this.value;\n          this.setProperties({\n            value: [data[this.fields.value].toString()]\n          }, true);\n          this.setValidValue();\n        } else {\n          this.setProperties({\n            text: this.currentText\n          }, true);\n        }\n      }\n    }\n  };\n  DropDownTree.prototype.setSelectedValue = function () {\n    if (this.value != null) {\n      return;\n    }\n    if (!this.isInitialized) {\n      this.oldValue = this.value;\n      if (this.treeObj.selectedNodes.length > 0 && !this.showCheckBox) {\n        this.setProperties({\n          value: this.treeObj.selectedNodes\n        }, true);\n        if (this.allowMultiSelection) {\n          this.updateMode();\n        }\n      } else if (this.showCheckBox && this.treeObj.checkedNodes) {\n        if (this.treeObj.checkedNodes.length > 0) {\n          this.setProperties({\n            value: this.treeObj.checkedNodes\n          }, true);\n          setValue('selectedNodes', [], this.treeObj);\n          this.treeObj.dataBind();\n          this.updateMode();\n        }\n      }\n      this.updateSelectedValues();\n      this.currentText = this.text;\n      this.currentValue = this.value;\n    }\n  };\n  DropDownTree.prototype.setValidValue = function () {\n    var _this = this;\n    if (!this.showCheckBox && !this.allowMultiSelection) {\n      Input.setValue(this.text, this.inputEle, this.floatLabelType);\n      var id = this.value[0].toString();\n      if (this.treeObj.selectedNodes[0] !== id) {\n        setValue('selectedNodes', [id], this.treeObj);\n      }\n    } else {\n      if (this.showCheckBox) {\n        var difference = this.value.filter(function (e) {\n          return _this.treeObj.checkedNodes.indexOf(e) === -1;\n        });\n        if (difference.length > 0 || this.treeSettings.autoCheck) {\n          this.treeObj.checkedNodes = this.value.slice();\n          this.treeObj.dataBind();\n          this.setMultiSelect();\n        }\n      } else {\n        this.treeObj.selectedNodes = this.value.slice();\n        this.selectedText = [];\n        this.updateSelectedValues();\n      }\n      this.treeObj.dataBind();\n    }\n    this.currentText = this.text;\n    this.currentValue = this.value;\n    if (this.isInitialized) {\n      this.triggerChangeEvent();\n    }\n  };\n  // eslint-disable-next-line\n  DropDownTree.prototype.getItems = function (givenText) {\n    // eslint-disable-next-line\n    var data;\n    if (this.treeDataType === 1) {\n      for (var i = 0; i < this.treeItems.length; i++) {\n        // eslint-disable-next-line\n        var text = getValue(this.fields.text, this.treeItems[i]);\n        if (!isNullOrUndefined(this.treeItems[i]) && !isNullOrUndefined(text) && text === givenText) {\n          data = this.treeItems[i];\n          break;\n        }\n      }\n    } else {\n      data = this.getNestedItems(this.treeItems, this.fields, givenText);\n    }\n    return data;\n  };\n  // eslint-disable-next-line\n  DropDownTree.prototype.getNestedItems = function (data, field, givenText) {\n    // eslint-disable-next-line\n    var newData;\n    for (var i = 0, objlen = data.length; i < objlen; i++) {\n      // eslint-disable-next-line\n      var dataId = getValue(this.fields.text, data[i]);\n      if (data[i] && dataId && dataId.toString() === givenText) {\n        return data[i];\n      } else if (typeof field.child === 'string' && !isNullOrUndefined(getValue(field.child, data[i]))) {\n        // eslint-disable-next-line\n        var childData = getValue(field.child, data[i]);\n        // eslint-disable-next-line\n        newData = this.getNestedItems(childData, this.getChildType(field), givenText);\n        if (newData !== undefined) {\n          break;\n        }\n      } else if (this.fields.dataSource instanceof DataManager && !isNullOrUndefined(getValue('child', data[i]))) {\n        var child = 'child';\n        // eslint-disable-next-line\n        newData = this.getNestedItems(getValue(child, data[i]), this.getChildType(field), givenText);\n        if (newData !== undefined) {\n          break;\n        }\n      }\n    }\n    return newData;\n  };\n  DropDownTree.prototype.getChildType = function (mapper) {\n    return typeof mapper.child === 'string' || isNullOrUndefined(mapper.child) ? mapper : mapper.child;\n  };\n  /* To render the treeview */\n  DropDownTree.prototype.renderTree = function () {\n    this.treeObj = new TreeView({\n      fields: this.getTreeFields(this.fields),\n      enableRtl: this.enableRtl,\n      nodeSelected: this.onNodeSelected.bind(this),\n      nodeChecked: this.onNodeChecked.bind(this),\n      nodeChecking: this.beforeCheck.bind(this),\n      nodeExpanded: this.onNodeExpanded.bind(this),\n      actionFailure: this.onActionFailure.bind(this),\n      nodeClicked: this.onNodeClicked.bind(this),\n      dataBound: this.OnDataBound.bind(this),\n      allowMultiSelection: this.allowMultiSelection,\n      enableHtmlSanitizer: this.enableHtmlSanitizer,\n      showCheckBox: this.showCheckBox,\n      autoCheck: this.treeSettings.autoCheck,\n      sortOrder: this.sortOrder,\n      expandOn: this.treeSettings.expandOn,\n      loadOnDemand: this.treeSettings.loadOnDemand,\n      nodeSelecting: this.onBeforeSelect.bind(this),\n      nodeTemplate: this.itemTemplate\n    });\n    this.treeObj.root = this.root ? this.root : this;\n    this.treeObj.appendTo('#' + this.tree.id);\n  };\n  /* To render the popup element */\n  DropDownTree.prototype.renderPopup = function () {\n    var _this = this;\n    if (this.isFilteredData) {\n      this.filterObj.value = '';\n      this.treeObj.fields = this.getTreeFields(this.fields);\n      this.isFilterRestore = true;\n      this.isFilteredData = false;\n      this.hideCheckAll(false);\n    }\n    var isCancelled = false;\n    var args = {\n      cancel: false\n    };\n    this.trigger('beforeOpen', args, function (args) {\n      if (!args.cancel) {\n        addClass([_this.inputWrapper], [ICONANIMATION]);\n        if (_this.isFirstRender) {\n          _this.popupEle = _this.createElement('div', {\n            id: _this.element.id + '_options',\n            className: POPUP_CLASS + ' ' + (_this.cssClass != null ? _this.cssClass : '')\n          });\n          _this.popupEle.setAttribute('role', 'region');\n          _this.popupEle.setAttribute('aria-label', _this.element.id);\n          document.body.appendChild(_this.popupEle);\n          _this.createPopup(_this.popupEle);\n        } else {\n          _this.popupEle = _this.popupObj.element;\n          if (_this.isReact && _this.isFilterRestore) {\n            _this.treeObj.refresh();\n            _this.isFilteredData = true;\n            _this.popupEle.removeChild(_this.filterContainer);\n          }\n        }\n      } else {\n        isCancelled = true;\n      }\n      if (_this.isFirstRender && !isCancelled || _this.isFilteredData) {\n        _this.isFilteredData = false;\n        prepend([_this.popupDiv], _this.popupEle);\n        removeClass([_this.popupDiv], DDTHIDEICON);\n        if (_this.allowFiltering) {\n          _this.renderFilter();\n        }\n        if (_this.showCheckBox && _this.showSelectAll && !_this.popupDiv.classList.contains(NODATA)) {\n          _this.createSelectAllWrapper();\n          _this.popupEle.insertBefore(_this.checkAllParent, _this.popupDiv);\n        }\n        if (_this.headerTemplate) {\n          _this.setHeaderTemplate();\n        }\n        if (_this.footerTemplate) {\n          _this.setFooterTemplate();\n        }\n        _this.isFirstRender = false;\n        /* eslint-disable */\n        if (_this.hasTemplate && _this.portals) {\n          _this.portals = _this.portals.concat(_this.treeObj.portals);\n          /* eslint-enable */\n          _this.renderReactTemplates();\n        }\n      }\n      if (!isCancelled) {\n        attributes(_this.inputEle, {\n          'aria-expanded': 'true'\n        });\n        _this.popupObj.show(null, _this.zIndex === 1000 ? _this.inputEle : null);\n        removeClass([_this.popupEle], DDTHIDEICON);\n        _this.updatePopupHeight();\n        _this.popupObj.refreshPosition();\n        if (!(_this.showCheckBox && _this.showSelectAll) && !_this.popupDiv.classList.contains(NODATA) && _this.treeItems.length > 0) {\n          var focusedElement = _this.treeObj.element.querySelector('li');\n          focusedElement.focus();\n          addClass([focusedElement], ['e-node-focus']);\n        }\n        if (_this.checkSelectAll && _this.checkBoxElement) {\n          var wrap = closest(_this.checkBoxElement, '.' + CHECKBOXWRAP);\n          _this.changeState(wrap, 'check');\n          _this.checkSelectAll = false;\n        }\n        if (_this.allowFiltering) {\n          removeClass([_this.inputWrapper], [INPUTFOCUS]);\n          _this.filterObj.element.focus();\n        }\n        var eventArgs = {\n          popup: _this.popupObj\n        };\n        _this.trigger('open', eventArgs);\n      }\n    });\n  };\n  DropDownTree.prototype.updatePopupHeight = function () {\n    if (this.isFirstRender) {\n      return;\n    }\n    var popupHeight = this.getHeight();\n    this.popupEle.style.maxHeight = popupHeight;\n    if (this.allowFiltering) {\n      var height = Math.round(this.filterContainer.getBoundingClientRect().height);\n      popupHeight = formatUnit(parseInt(popupHeight, 10) - height + 'px');\n    }\n    if (this.headerTemplate) {\n      var height = Math.round(this.header.getBoundingClientRect().height);\n      popupHeight = formatUnit(parseInt(popupHeight, 10) - height + 'px');\n    }\n    if (this.showCheckBox && this.showSelectAll && !this.popupDiv.classList.contains(NODATA)) {\n      var height = Math.round(this.checkAllParent.getBoundingClientRect().height);\n      popupHeight = formatUnit(parseInt(popupHeight, 10) - height + 'px');\n    }\n    if (this.footerTemplate) {\n      var height = Math.round(this.footer.getBoundingClientRect().height);\n      popupHeight = formatUnit(parseInt(popupHeight, 10) - height + 'px');\n    }\n    var border = parseInt(window.getComputedStyle(this.popupEle).borderTopWidth, 10);\n    border = border + parseInt(window.getComputedStyle(this.popupEle).borderBottomWidth, 10);\n    popupHeight = formatUnit(parseInt(popupHeight, 10) - border + 'px');\n    this.popupDiv.style.maxHeight = popupHeight;\n  };\n  DropDownTree.prototype.createPopup = function (element) {\n    var _this = this;\n    if (this.isFirstRender) {\n      this.popupObj = new Popup(element, {\n        width: this.setWidth(),\n        targetType: 'relative',\n        collision: {\n          X: 'flip',\n          Y: 'flip'\n        },\n        relateTo: this.inputWrapper,\n        zIndex: this.zIndex,\n        enableRtl: this.enableRtl,\n        position: {\n          X: 'left',\n          Y: 'bottom'\n        },\n        close: function () {\n          _this.isPopupOpen = false;\n        },\n        open: function () {\n          EventHandler.add(document, 'mousedown', _this.onDocumentClick, _this);\n          _this.isPopupOpen = true;\n        },\n        targetExitViewport: function () {\n          if (!Browser.isDevice) {\n            _this.hidePopup();\n          }\n        }\n      });\n    }\n  };\n  /* To calculate the width when change via set model */\n  DropDownTree.prototype.setElementWidth = function (inputWidth) {\n    var ddElement = this.inputWrapper;\n    if (!isNullOrUndefined(inputWidth)) {\n      if (typeof inputWidth === 'number') {\n        ddElement.style.width = formatUnit(inputWidth);\n      } else if (typeof inputWidth === 'string') {\n        ddElement.style.width = inputWidth.match(/px|%|em/) ? inputWidth : formatUnit(inputWidth);\n      }\n    }\n  };\n  /* To calculate the width of the popup */\n  DropDownTree.prototype.setWidth = function () {\n    var width = formatUnit(this.popupWidth);\n    if (width.indexOf('%') > -1) {\n      width = (this.inputWrapper.offsetWidth * parseFloat(width) / 100).toString() + 'px';\n    } else if (typeof this.popupWidth === 'string') {\n      width = this.popupWidth.match(/px|em/) ? this.popupWidth : width;\n    }\n    return width;\n  };\n  /* To calculate the height of the popup */\n  DropDownTree.prototype.getHeight = function () {\n    var height = formatUnit(this.popupHeight);\n    if (height.indexOf('%') > -1) {\n      // Will set the height of the popup according to the view port height\n      height = (document.documentElement.clientHeight * parseFloat(height) / 100).toString() + 'px';\n    } else if (typeof this.popupHeight === 'string') {\n      height = this.popupHeight.match(/px|em/) ? this.popupHeight : height;\n    }\n    return height;\n  };\n  DropDownTree.prototype.onDocumentClick = function (e) {\n    var target = e.target;\n    var isTree = closest(target, '.' + PARENTITEM);\n    var isFilter = closest(target, '.' + FILTERWRAP);\n    var isHeader = closest(target, '.' + HEADER);\n    var isFooter = closest(target, '.' + FOOTER);\n    var isScroller = target.classList.contains(DROPDOWN) ? true : matches(target, '.e-ddt .e-popup') || matches(target, '.e-ddt .e-treeview');\n    if (this.isPopupOpen && (!isNullOrUndefined(this.inputWrapper) && this.inputWrapper.contains(target) || isTree || isScroller || isHeader || isFooter) || (this.allowMultiSelection || this.showCheckBox) && (this.isPopupOpen && target.classList.contains(CHIP_CLOSE) || this.isPopupOpen && (target.classList.contains(CHECKALLPARENT) || target.classList.contains(ALLTEXT) || target.classList.contains(CHECKBOXFRAME)))) {\n      this.isDocumentClick = false;\n      e.preventDefault();\n    } else if (!isNullOrUndefined(this.inputWrapper) && !this.inputWrapper.contains(target) && this.inputFocus && !isFilter) {\n      this.focusOut(e);\n    }\n  };\n  DropDownTree.prototype.onActionFailure = function (e) {\n    this.trigger('actionFailure', e);\n    this.l10nUpdate(true);\n    addClass([this.popupDiv], NODATA);\n  };\n  DropDownTree.prototype.OnDataBound = function (args) {\n    this.treeItems = args.data;\n    if (this.treeItems.length <= 0) {\n      this.l10nUpdate();\n      addClass([this.popupDiv], NODATA);\n      this.hideCheckAll(true);\n    } else if (this.popupDiv.classList.contains(NODATA) && this.treeItems.length >= 1) {\n      removeClass([this.popupDiv], NODATA);\n      this.hideCheckAll(false);\n    }\n    this.treeDataType = this.getTreeDataType(this.treeItems, this.fields);\n    if (this.isFirstRender && this.isRemoteData) {\n      this.setTreeValue();\n      this.setTreeText();\n      this.updateHiddenValue();\n      this.setSelectedValue();\n      if (!this.wrapText) {\n        this.updateView();\n      }\n      this.treeObj.element.focus();\n    }\n    var eventArgs = {\n      data: args.data\n    };\n    this.trigger('dataBound', eventArgs);\n    if (this.filterObj === null) {\n      this.isFilteredData = false;\n    }\n    if (this.isFilteredData) {\n      this.treeObj.expandAll();\n    }\n    if (this.isFilterRestore) {\n      this.restoreFilterSelection();\n      this.isFilterRestore = false;\n    }\n  };\n  DropDownTree.prototype.restoreFilterSelection = function () {\n    if (this.showCheckBox) {\n      this.treeObj.checkedNodes = this.value ? this.value : [];\n    } else {\n      this.treeObj.selectedNodes = this.value ? this.value : [];\n    }\n  };\n  /* To set cssclass for the dropdowntree */\n  DropDownTree.prototype.setCssClass = function (newClass, oldClass) {\n    var elements = this.popupObj ? [this.inputWrapper, this.popupObj.element] : [this.inputWrapper];\n    if (!isNullOrUndefined(oldClass) && oldClass !== '') {\n      removeClass(elements, oldClass.split(' '));\n    }\n    if (!isNullOrUndefined(newClass) && newClass !== '') {\n      addClass(elements, newClass.split(' '));\n    }\n  };\n  DropDownTree.prototype.setEnableRTL = function (state) {\n    if (state) {\n      this.inputWrapper.classList.add(RTL);\n    } else {\n      this.inputWrapper.classList.remove(RTL);\n    }\n    if (this.popupObj) {\n      this.popupObj.enableRtl = state;\n      this.popupObj.dataBind();\n    }\n    if (this.treeObj) {\n      this.treeObj.enableRtl = state;\n      this.treeObj.dataBind();\n    }\n  };\n  /* To set enable property */\n  DropDownTree.prototype.setEnable = function () {\n    Input.setEnabled(this.enabled, this.inputEle);\n    if (this.enabled) {\n      removeClass([this.inputWrapper], DISABLED);\n      this.inputEle.setAttribute('aria-disabled', 'false');\n      this.inputWrapper.setAttribute('aria-disabled', 'false');\n    } else {\n      if (this.isPopupOpen) {\n        this.hidePopup();\n      }\n      addClass([this.inputWrapper], DISABLED);\n      if (this.inputWrapper && this.inputWrapper.classList.contains(INPUTFOCUS)) {\n        removeClass([this.inputWrapper], [INPUTFOCUS]);\n      }\n      this.inputEle.setAttribute('aria-disabled', 'true');\n      this.inputWrapper.setAttribute('aria-disabled', 'true');\n    }\n  };\n  DropDownTree.prototype.cloneFields = function (fields) {\n    var clonedField = {\n      dataSource: fields.dataSource,\n      value: fields.value,\n      text: fields.text,\n      parentValue: fields.parentValue,\n      child: this.cloneChildField(fields.child),\n      hasChildren: fields.hasChildren,\n      expanded: fields.expanded,\n      iconCss: fields.iconCss,\n      imageUrl: fields.imageUrl,\n      htmlAttributes: fields.htmlAttributes,\n      query: fields.query,\n      selected: fields.selected,\n      selectable: fields.selectable,\n      tableName: fields.tableName,\n      tooltip: fields.tooltip\n    };\n    return clonedField;\n  };\n  DropDownTree.prototype.cloneChildField = function (fields) {\n    if (typeof fields === 'string') {\n      return fields;\n    } else {\n      var clonedField = {\n        dataSource: fields.dataSource,\n        value: fields.value,\n        text: fields.text,\n        parentValue: fields.parentValue,\n        child: fields.child ? this.cloneChildField(fields.child) : null,\n        hasChildren: fields.hasChildren,\n        expanded: fields.expanded,\n        iconCss: fields.iconCss,\n        imageUrl: fields.imageUrl,\n        htmlAttributes: fields.htmlAttributes,\n        query: fields.query,\n        selected: fields.selected,\n        selectable: fields.selectable,\n        tableName: fields.tableName,\n        tooltip: fields.tooltip\n      };\n      return clonedField;\n    }\n  };\n  DropDownTree.prototype.getTreeFields = function (fields) {\n    var treeFields = {\n      dataSource: fields.dataSource,\n      id: fields.value,\n      text: fields.text,\n      parentID: fields.parentValue,\n      child: this.getTreeChildren(fields.child),\n      hasChildren: fields.hasChildren,\n      expanded: fields.expanded,\n      iconCss: fields.iconCss,\n      imageUrl: fields.imageUrl,\n      isChecked: fields.selected,\n      htmlAttributes: fields.htmlAttributes,\n      query: fields.query,\n      selectable: fields.selectable,\n      selected: fields.selected,\n      tableName: fields.tableName,\n      tooltip: fields.tooltip\n    };\n    return treeFields;\n  };\n  DropDownTree.prototype.getTreeChildren = function (mapper) {\n    if (typeof mapper === 'string') {\n      return mapper;\n    } else if (!isNullOrUndefined(mapper)) {\n      mapper = this.getActualProperties(mapper);\n      var childFields = mapper;\n      if (mapper.value) {\n        childFields.id = mapper.value;\n      }\n      if (mapper.parentValue) {\n        childFields.parentID = mapper.parentValue;\n      }\n      if (mapper.child) {\n        childFields.child = this.getTreeChildren(mapper.child);\n      }\n      if (mapper.selected && this.showCheckBox) {\n        childFields.isChecked = mapper.selected;\n      }\n      return childFields;\n    }\n    return null;\n  };\n  // eslint-disable-next-line\n  DropDownTree.prototype.getTreeDataType = function (ds, field) {\n    if (this.fields.dataSource instanceof DataManager) {\n      for (var i = 0; i < ds.length; i++) {\n        if (typeof field.child === 'string' && isNullOrUndefined(getValue(field.child, ds[i]))) {\n          return 1;\n        }\n      }\n      return 2;\n    }\n    if (isNullOrUndefined(this.fields.dataSource)) this.fields.dataSource = [];\n    for (var i = 0, len = this.fields.dataSource.length; i < len; i++) {\n      if (typeof field.child === 'string' && !isNullOrUndefined(getValue(field.child, this.fields.dataSource[i]))) {\n        return 2;\n      }\n      if (!isNullOrUndefined(getValue(field.parentValue, this.fields.dataSource[i])) || !isNullOrUndefined(getValue(field.hasChildren, this.fields.dataSource[i]))) {\n        return 1;\n      }\n    }\n    return 1;\n  };\n  /* Triggers when the tree fields is changed dynamically */\n  DropDownTree.prototype.setFields = function () {\n    this.resetValue();\n    if (this.hasTemplate) {\n      this.updateTemplate();\n    }\n    this.treeObj.fields = this.getTreeFields(this.fields);\n    this.treeObj.dataBind();\n  };\n  DropDownTree.prototype.getEventArgs = function (args) {\n    // eslint-disable-next-line\n    var checkData = args.data;\n    // eslint-disable-next-line\n    var selectData = args.nodeData;\n    var state;\n    if (this.showCheckBox) {\n      if (args.action === 'check') {\n        state = 'select';\n      } else if (args.action === 'uncheck') {\n        state = 'un-select';\n      }\n    }\n    var eventArgs = {\n      action: this.showCheckBox ? state : args.action,\n      isInteracted: this.isClicked ? true : args.isInteracted,\n      item: args.node,\n      itemData: this.showCheckBox ? checkData[0] : selectData\n    };\n    return eventArgs;\n  };\n  DropDownTree.prototype.onBeforeSelect = function (args) {\n    if (args.isInteracted) {\n      this.oldValue = this.value ? this.value.slice() : this.value;\n      if (this.value === null) {\n        this.setProperties({\n          value: []\n        }, true);\n      }\n      if (args.node.classList.contains(\"e-active\")) {\n        this.hidePopup();\n      }\n    }\n  };\n  DropDownTree.prototype.updateHiddenValue = function () {\n    if (this.allowMultiSelection || this.showCheckBox) {\n      return;\n    }\n    if (this.value && this.value.length) {\n      this.hiddenElement.innerHTML = '<option selected value =\"' + this.value[0] + '\">' + this.text + '</option>';\n    } else {\n      this.hiddenElement.innerHTML = '';\n    }\n  };\n  /* Triggers when the tree node is selected */\n  DropDownTree.prototype.onNodeSelected = function (args) {\n    if (this.showCheckBox) {\n      return;\n    }\n    var selectedText;\n    if (args.isInteracted) {\n      var id = getValue('id', args.nodeData).toString();\n      if (!this.allowMultiSelection) {\n        this.hiddenElement.innerHTML = '';\n        this.setProperties({\n          value: [id]\n        }, true);\n        if (this.itemTemplate) {\n          selectedText = getValue('text', this.treeObj.getNode(id));\n        } else {\n          selectedText = getValue('text', args.nodeData).toString();\n        }\n        Input.setValue(selectedText, this.inputEle, this.floatLabelType);\n        this.setProperties({\n          text: selectedText\n        }, true);\n        this.currentText = this.text;\n        this.currentValue = this.value;\n        attributes(this.inputWrapper, {\n          'aria-describedby': this.element.id\n        });\n        attributes(this.inputWrapper, {\n          'aria-activedescendant': id.toString()\n        });\n        this.updateHiddenValue();\n        this.showOverAllClear();\n        this.hidePopup();\n        this.isNodeSelected = true;\n      } else if (this.allowMultiSelection) {\n        this.setMultiSelect();\n      }\n    }\n    var eventArgs = this.getEventArgs(args);\n    this.trigger('select', eventArgs);\n    if (this.isValueChange && !this.changeOnBlur) {\n      this.triggerChangeEvent(this.keyEventArgs);\n      this.isValueChange = false;\n    }\n  };\n  DropDownTree.prototype.onNodeClicked = function (args) {\n    if (!this.changeOnBlur && this.isNodeSelected) {\n      this.triggerChangeEvent(args.event);\n      this.isNodeSelected = false;\n    }\n    var target = args.event.target;\n    if ((target.classList.contains('e-fullrow') || target.classList.contains('e-list-text')) && this.showCheckBox) {\n      this.isClicked = true;\n      // eslint-disable-next-line\n      var getNodeDetails = this.treeObj.getNode(args.node);\n      if (getNodeDetails.isChecked === 'true') {\n        this.treeObj.uncheckAll([args.node]);\n      } else {\n        this.treeObj.checkAll([args.node]);\n      }\n      this.isClicked = false;\n      this.setMultiSelect();\n      this.ensurePlaceHolder();\n    }\n    if (!this.changeOnBlur && (this.allowMultiSelection || this.showCheckBox)) {\n      this.triggerChangeEvent(args.event);\n    }\n  };\n  DropDownTree.prototype.onNodeChecked = function (args) {\n    var eventArgs = this.getEventArgs(args);\n    this.trigger('select', eventArgs);\n    if (this.isFilteredData && args.action === 'uncheck') {\n      var id = getValue('id', args.data[0]).toString();\n      this.removeSelectedData(id, true);\n    }\n    if (!this.isChipDelete && args.isInteracted) {\n      this.setMultiSelect();\n      this.ensurePlaceHolder();\n    }\n    if (this.showSelectAll && this.checkBoxElement) {\n      var nodes = this.treeObj.element.querySelectorAll('li');\n      var checkedNodes = this.treeObj.element.querySelectorAll('li .e-checkbox-wrapper[aria-checked=true]');\n      var wrap = closest(this.checkBoxElement, '.' + CHECKBOXWRAP);\n      if (wrap && args.action === 'uncheck' && (args.isInteracted || checkedNodes.length === 0 || !isNullOrUndefined(args.data[0]) && args.data[0].isChecked === 'false')) {\n        this.isReverseUpdate = true;\n        this.changeState(wrap, 'uncheck');\n        this.isReverseUpdate = false;\n      } else if (wrap && args.action === 'check' && checkedNodes.length === nodes.length && (args.isInteracted || this.isCheckAllCalled || !isNullOrUndefined(args.data[0]) && args.data[0].isChecked === 'true')) {\n        this.isReverseUpdate = true;\n        this.isCheckAllCalled = false;\n        this.changeState(wrap, 'check');\n        this.isReverseUpdate = false;\n      }\n    }\n  };\n  DropDownTree.prototype.beforeCheck = function (args) {\n    if (args.isInteracted) {\n      this.oldValue = this.value ? this.value.slice() : this.value;\n    }\n  };\n  DropDownTree.prototype.onNodeExpanded = function (args) {\n    if (this.hasTemplate && this.portals && this.treeObj.portals) {\n      for (var i = 0; i < this.treeObj.portals.length; i++) {\n        if (this.portals.indexOf(this.treeObj.portals[i]) == -1) {\n          this.portals.push(this.treeObj.portals[i]);\n        }\n      }\n      /* eslint-enable */\n      this.renderReactTemplates();\n    }\n  };\n  DropDownTree.prototype.updateClearButton = function (state) {\n    if (state) {\n      if (!this.inputWrapper.contains(this.overAllClear)) {\n        this.inputEle.parentElement.insertBefore(this.overAllClear, this.inputEle.nextSibling);\n      } else {\n        removeClass([this.overAllClear], HIDEICON);\n        addClass([this.inputWrapper], SHOW_CLEAR);\n      }\n    } else {\n      addClass([this.overAllClear], HIDEICON);\n      removeClass([this.inputWrapper], SHOW_CLEAR);\n    }\n    if ((this.allowMultiSelection || this.showCheckBox) && this.chipWrapper) {\n      var chipClose = selectAll('.' + CHIP_CLOSE, this.chipWrapper);\n      for (var i = 0; i < chipClose.length; i++) {\n        if (!state) {\n          addClass([chipClose[i]], HIDEICON);\n        } else {\n          removeClass([chipClose[i]], HIDEICON);\n        }\n      }\n    }\n  };\n  DropDownTree.prototype.updateDropDownIconState = function (state) {\n    var spinIcon = select('.' + DDTICON, this.inputWrapper);\n    if (state) {\n      if (!spinIcon) {\n        Input.appendSpan(DROPDOWNICON, this.inputWrapper, this.createElement);\n      } else {\n        removeClass([spinIcon], HIDEICON);\n      }\n      addClass([this.inputWrapper], SHOW_DD_ICON);\n    } else {\n      addClass([spinIcon], HIDEICON);\n      removeClass([this.inputWrapper], SHOW_DD_ICON);\n    }\n  };\n  DropDownTree.prototype.updateMode = function () {\n    if (this.mode === 'Custom') {\n      return;\n    }\n    if (this.mode !== 'Delimiter') {\n      if (!this.inputWrapper.contains(this.chipWrapper)) {\n        this.createChip();\n      }\n      var isValid = this.getValidMode();\n      if (this.chipWrapper.classList.contains(HIDEICON) && isValid) {\n        removeClass([this.chipWrapper], HIDEICON);\n        addClass([this.inputWrapper], SHOW_CHIP);\n      } else if (!isValid) {\n        addClass([this.chipWrapper], HIDEICON);\n        removeClass([this.inputWrapper], SHOW_CHIP);\n      }\n      var isValue = this.value !== null ? this.value.length !== 0 ? true : false : false;\n      if (isValid && isValue) {\n        addClass([this.inputEle], CHIP_INPUT);\n      } else {\n        removeClass([this.inputEle], CHIP_INPUT);\n      }\n    } else if (this.inputEle.classList.contains(CHIP_INPUT)) {\n      removeClass([this.inputEle], CHIP_INPUT);\n      if (this.chipWrapper) {\n        addClass([this.chipWrapper], HIDEICON);\n        removeClass([this.inputWrapper], SHOW_CHIP);\n      }\n    }\n  };\n  DropDownTree.prototype.ensurePlaceHolder = function () {\n    if (isNullOrUndefined(this.value) || this.value && this.value.length === 0) {\n      removeClass([this.inputEle], CHIP_INPUT);\n      if (this.chipWrapper) {\n        addClass([this.chipWrapper], HIDEICON);\n      }\n    }\n  };\n  DropDownTree.prototype.ensureClearIconPosition = function (floatLabelType) {\n    if (floatLabelType !== 'Never') {\n      this.inputWrapper.insertBefore(this.overAllClear, this.inputObj.buttons[0]);\n    }\n  };\n  DropDownTree.prototype.setMultiSelectValue = function (newValues) {\n    if (!this.isFilteredData) {\n      this.setProperties({\n        value: this.isFromFilterChange && newValues && newValues.length == 0 ? this.value : newValues\n      }, true);\n      this.isFromFilterChange = false;\n      if (newValues && newValues.length !== 0 && !this.showCheckBox) {\n        this.treeObj.selectedNodes = this.value.slice();\n        this.treeObj.dataBind();\n      }\n    } else {\n      var selectedValues = isNullOrUndefined(this.value) ? [] : this.value;\n      for (var i = 0; i < newValues.length; i++) {\n        if (isNullOrUndefined(this.value) || this.value.indexOf(newValues[i]) === -1) {\n          selectedValues.push(newValues[i]);\n        }\n      }\n      this.setProperties({\n        value: selectedValues\n      }, true);\n    }\n  };\n  DropDownTree.prototype.setMultiSelect = function () {\n    if (this.showCheckBox && !this.isDynamicChange) {\n      this.setMultiSelectValue(this.treeObj.checkedNodes.slice());\n    } else {\n      var ddtValue = this.allowMultiSelection ? this.showCheckBox ? this.treeObj.checkedNodes : this.treeObj.selectedNodes : this.value ? this.showCheckBox ? this.value : [this.value[0]] : null;\n      this.setMultiSelectValue(ddtValue);\n      if (this.showCheckBox && this.value !== null) {\n        this.treeObj.checkedNodes = this.value;\n        this.treeObj.dataBind();\n      }\n    }\n    this.selectedText = [];\n    var checkSelection = this.allowMultiSelection ? true : this.showCheckBox ? true : false;\n    if (this.inputWrapper.contains(this.chipWrapper) && !checkSelection) {\n      removeClass([this.inputEle], CHIP_INPUT);\n      detach(this.chipWrapper);\n    }\n    var isValid = this.getValidMode();\n    if (isValid && this.value !== null) {\n      addClass([this.inputEle], CHIP_INPUT);\n      if (this.chipWrapper) {\n        removeClass([this.chipWrapper], HIDEICON);\n      }\n    }\n    var isValue = this.value ? this.value.length ? true : false : false;\n    if (this.chipWrapper && this.mode === 'Box' && !isValue) {\n      addClass([this.chipWrapper], HIDEICON);\n      removeClass([this.inputEle], CHIP_INPUT);\n    }\n    this.updateSelectedValues();\n  };\n  // eslint-disable-next-line\n  DropDownTree.prototype.getSelectedData = function (value) {\n    // eslint-disable-next-line\n    var data = null;\n    if (this.isFilteredData) {\n      for (var i = 0; i < this.selectedData.length; i++) {\n        if (getValue(this.treeSettings.loadOnDemand ? this.fields.value : 'id', this.selectedData[i]).toString() === value) {\n          data = this.selectedData[i];\n          break;\n        }\n      }\n    }\n    if (isNullOrUndefined(data)) {\n      if (this.treeSettings.loadOnDemand) {\n        data = this.getNodeData(value);\n      } else {\n        data = this.treeObj.getNode(value);\n      }\n      if (!isNullOrUndefined(data)) {\n        this.selectedData.push(data);\n      }\n    }\n    return data;\n  };\n  DropDownTree.prototype.getNodeData = function (id) {\n    var childItems;\n    if (isNullOrUndefined(id)) {\n      return childItems;\n    } else if (this.treeDataType === 1) {\n      for (var i = 0, objlen = this.treeItems.length; i < objlen; i++) {\n        var dataId = getValue(this.fields.value, this.treeItems[i]);\n        if (!isNullOrUndefined(this.treeItems[i]) && !isNullOrUndefined(dataId) && dataId.toString() === id) {\n          return this.treeItems[i];\n        }\n      }\n    } else {\n      return this.getChildNodeData(this.treeItems, this.fields, id);\n    }\n    return childItems;\n  };\n  DropDownTree.prototype.getChildNodeData = function (obj, mapper, id) {\n    var newChildItems;\n    if (isNullOrUndefined(obj)) {\n      return newChildItems;\n    }\n    for (var i = 0, objlen = obj.length; i < objlen; i++) {\n      var dataValue = getValue(mapper.value, obj[i]);\n      if (obj[i] && dataValue && dataValue.toString() === id) {\n        return obj[i];\n      } else if (typeof mapper.child === 'string' && !isNullOrUndefined(getValue(mapper.child, obj[i]))) {\n        var childNodeData = getValue(mapper.child, obj[i]);\n        newChildItems = this.getChildNodeData(childNodeData, this.getChildMapperFields(mapper), id);\n        if (newChildItems !== undefined) {\n          break;\n        }\n      } else if (this.fields.dataSource instanceof DataManager && !isNullOrUndefined(getValue('child', obj[i]))) {\n        var child = 'child';\n        newChildItems = this.getChildNodeData(getValue(child, obj[i]), this.getChildMapperFields(mapper), id);\n        if (newChildItems !== undefined) {\n          break;\n        }\n      }\n    }\n    return newChildItems;\n  };\n  DropDownTree.prototype.getChildMapperFields = function (mapper) {\n    return typeof mapper.child === 'string' || isNullOrUndefined(mapper.child) ? mapper : mapper.child;\n  };\n  DropDownTree.prototype.removeSelectedData = function (value, muteOnChange) {\n    var selectedValues = isNullOrUndefined(this.value) ? [] : this.value.slice();\n    selectedValues.splice(selectedValues.indexOf(value), 1);\n    this.setProperties({\n      value: selectedValues\n    }, muteOnChange);\n    for (var i = 0; i < this.selectedData.length; i++) {\n      if (getValue(this.treeSettings.loadOnDemand ? this.fields.value : 'id', this.selectedData[i]).toString() === value) {\n        this.selectedData.splice(i, 1);\n        break;\n      }\n    }\n  };\n  DropDownTree.prototype.updateSelectedValues = function () {\n    this.dataValue = '';\n    var temp;\n    var text;\n    var textValue = '';\n    // eslint-disable-next-line\n    var selectedData;\n    this.hiddenElement.innerHTML = '';\n    var hiddenInputValue = '';\n    if ((!this.isChipDelete || this.treeSettings.autoCheck) && this.inputWrapper.contains(this.chipWrapper)) {\n      this.chipCollection.innerHTML = '';\n    }\n    if (!this.isFilteredData) {\n      this.selectedData = [];\n    }\n    if (!isNullOrUndefined(this.value)) {\n      for (var i = 0, len = this.value.length; i < len; i++) {\n        selectedData = this.getSelectedData(this.value[i]);\n        text = getValue(this.treeSettings.loadOnDemand ? this.fields.text : 'text', selectedData);\n        this.selectedText.push(text);\n        temp = this.selectedText[this.selectedText.length - 1];\n        if (this.selectedText.length > 1) {\n          this.dataValue += this.delimiterChar + ' ' + temp;\n          textValue += ',' + temp;\n        } else {\n          this.dataValue += temp;\n          textValue += temp;\n        }\n        if (this.mode !== 'Custom' && this.mode !== 'Delimiter' && (!this.isChipDelete || this.treeSettings.autoCheck) && (this.allowMultiSelection || this.showCheckBox)) {\n          this.setChipValues(temp, this.value[i]);\n        }\n        hiddenInputValue += '<option selected value =\"' + this.value[i] + '\">' + this.selectedText[this.selectedText.length - 1] + '</option>';\n      }\n      if (this.selectedText.length >= 1) {\n        this.setProperties({\n          text: textValue\n        }, true);\n      }\n      this.hiddenElement.innerHTML = hiddenInputValue;\n      if (this.mode === 'Custom' && (this.allowMultiSelection || this.showCheckBox)) {\n        this.setTagValues();\n      }\n    }\n    var isValid = this.getValidMode();\n    if (this.mode !== 'Custom' && this.mode !== 'Box' && (this.allowMultiSelection || this.showCheckBox) && !isValid) {\n      if (this.chipWrapper) {\n        addClass([this.chipWrapper], HIDEICON);\n        removeClass([this.inputWrapper], SHOW_CHIP);\n      }\n    }\n    Input.setValue(this.dataValue, this.inputEle, this.floatLabelType);\n    if (textValue === '') {\n      this.setProperties({\n        text: null\n      }, true);\n    } else {\n      this.setProperties({\n        text: textValue\n      }, true);\n    }\n    if (this.showClearButton && this.inputFocus) {\n      this.showOverAllClear();\n    }\n    if ((this.allowMultiSelection || this.showCheckBox) && this.popupObj) {\n      this.popupObj.refreshPosition();\n    }\n    this.currentText = this.text;\n    this.currentValue = this.value;\n  };\n  DropDownTree.prototype.setChipValues = function (text, value) {\n    if (!this.inputWrapper.contains(this.chipWrapper)) {\n      this.createChip();\n    }\n    var chip = this.createElement('span', {\n      className: CHIP,\n      attrs: {\n        'data-value': value\n      }\n    });\n    var chipContent = this.createElement('span', {\n      className: CHIP_CONTENT\n    });\n    var chipClose = this.createElement('span', {\n      className: CHIP_CLOSE + ' ' + ICONS\n    });\n    if (this.enableHtmlSanitizer) {\n      chipContent.innerText = SanitizeHtmlHelper.sanitize(text);\n    } else {\n      chipContent.innerHTML = text;\n    }\n    chip.appendChild(chipContent);\n    this.chipCollection.appendChild(chip);\n    if (this.showClearButton) {\n      chip.appendChild(chipClose);\n      EventHandler.add(chipClose, 'mousedown', this.removeChip, this);\n    }\n  };\n  DropDownTree.prototype.setTagValues = function () {\n    if (this.value === null || this.text == null) {\n      return;\n    }\n    if (!this.inputWrapper.contains(this.chipWrapper)) {\n      this.createChip();\n    }\n    if (!this.inputWrapper.classList.contains(SHOW_CHIP)) {\n      addClass([this.inputWrapper], SHOW_CHIP);\n    }\n    var chip = this.createElement('span', {\n      className: CHIP\n    });\n    if (!this.inputEle.classList.contains(CHIP_INPUT)) {\n      addClass([this.inputEle], CHIP_INPUT);\n    }\n    if (this.chipWrapper.classList.contains(HIDEICON)) {\n      removeClass([this.chipWrapper], HIDEICON);\n    }\n    var chipContent = this.createElement('span', {\n      className: CHIP_CONTENT\n    });\n    var template = this.customTemplate;\n    var templateId = this.customTemplateId;\n    var templatestring = 'customTemplate';\n    var compiledString = this.templateComplier(template);\n    var tempArr = compiledString({\n      'value': this.value,\n      'text': this.text\n    }, this, templatestring, templateId, this.isStringTemplate, undefined, chipContent);\n    if (tempArr) {\n      tempArr = Array.prototype.slice.call(tempArr);\n      append(tempArr, chipContent);\n    }\n    chip.appendChild(chipContent);\n    this.chipCollection.appendChild(chip);\n  };\n  DropDownTree.prototype.setSelectAllWrapper = function (state) {\n    if (this.isFirstRender) {\n      return;\n    }\n    if (state && !this.popupEle.contains(this.checkAllParent) && this.showCheckBox) {\n      this.createSelectAllWrapper();\n      this.popupEle.insertBefore(this.checkAllParent, this.popupDiv);\n    } else if (this.popupEle.contains(this.checkAllParent)) {\n      detach(this.checkAllParent);\n      this.checkAllParent = null;\n    }\n  };\n  DropDownTree.prototype.setHeaderTemplate = function () {\n    if (this.header) {\n      this.header.innerHTML = '';\n    } else {\n      this.header = this.createElement('div');\n      addClass([this.header], HEADER);\n    }\n    // eslint-disable-next-line\n    var compiledString = this.templateComplier(this.headerTemplate);\n    var tempArr = compiledString({}, this, 'headerTemplate', this.headerTemplateId, this.isStringTemplate, undefined, this.header);\n    if (tempArr) {\n      tempArr = Array.prototype.slice.call(tempArr);\n      append(tempArr, this.header);\n    }\n    this.popupEle.insertBefore(this.header, this.checkAllParent ? this.checkAllParent : this.popupDiv);\n  };\n  // eslint-disable-next-line\n  DropDownTree.prototype.templateComplier = function (template) {\n    if (template) {\n      // eslint-disable-next-line\n      try {\n        if (typeof template !== 'function' && document.querySelectorAll(template).length) {\n          return compile(document.querySelector(template).innerHTML.trim());\n        } else {\n          return compile(template);\n        }\n      } catch (e) {\n        return compile(template);\n      }\n    }\n    return compile(template);\n  };\n  DropDownTree.prototype.setFooterTemplate = function () {\n    if (this.footer) {\n      this.footer.innerHTML = '';\n    } else {\n      this.footer = this.createElement('div');\n      addClass([this.footer], FOOTER);\n    }\n    // eslint-disable-next-line\n    var compiledString = this.templateComplier(this.footerTemplate);\n    var tempArr = compiledString({}, this, 'footerTemplate', this.footerTemplateId, this.isStringTemplate, undefined, this.footer);\n    if (tempArr) {\n      tempArr = Array.prototype.slice.call(tempArr);\n      append(tempArr, this.footer);\n    }\n    append([this.footer], this.popupEle);\n  };\n  DropDownTree.prototype.clearAll = function (e) {\n    if (!this.enabled || this.readonly) {\n      return;\n    }\n    this.resetValue();\n    this.showOverAllClear();\n    if (this.allowMultiSelection || this.showCheckBox) {\n      if (this.popupObj) {\n        this.popupObj.refreshPosition();\n      }\n      if (!this.wrapText) {\n        this.updateOverflowWrapper(true);\n      }\n    }\n    if (e) {\n      this.isClearButtonClick = true;\n    }\n    if (!this.changeOnBlur) {\n      this.triggerChangeEvent(e);\n    }\n  };\n  DropDownTree.prototype.removeChip = function (e) {\n    if (!this.enabled || this.readonly) {\n      return;\n    }\n    var element = e.target.parentElement;\n    var value = element.getAttribute('data-value');\n    if (this.chipCollection) {\n      if (element) {\n        remove(element);\n      }\n    }\n    this.isChipDelete = true;\n    this.isClearButtonClick = true;\n    this.removeSelectedData(value, true);\n    this.selectedText = [];\n    if (this.allowMultiSelection) {\n      this.treeObj.selectedNodes = this.value.slice();\n      this.updateSelectedValues();\n    }\n    if (this.showCheckBox) {\n      this.treeObj.uncheckAll([value]);\n      this.clearCheckAll();\n      this.setMultiSelect();\n    }\n    this.triggerChangeEvent(e);\n    this.isChipDelete = false;\n    this.ensurePlaceHolder();\n  };\n  DropDownTree.prototype.resetValue = function (isDynamicChange) {\n    if (this.value == [] && this.text == null) {\n      return;\n    }\n    Input.setValue(null, this.inputEle, this.floatLabelType);\n    if (!isDynamicChange) {\n      this.oldValue = this.value;\n      this.setProperties({\n        value: []\n      }, true);\n    }\n    this.dataValue = null;\n    this.setProperties({\n      text: null\n    }, true);\n    this.selectedData = [];\n    setValue('selectedNodes', [], this.treeObj);\n    this.hiddenElement.innerHTML = '';\n    if (this.showCheckBox) {\n      this.treeObj.uncheckAll();\n      this.setMultiSelect();\n      this.clearCheckAll();\n    }\n    if (this.oldValue === null && !isDynamicChange) {\n      this.removeValue = true;\n    } else if (isDynamicChange) {\n      this.triggerChangeEvent();\n    }\n    if ((this.allowMultiSelection || this.showCheckBox) && this.chipWrapper) {\n      this.chipCollection.innerHTML = '';\n      if (!this.wrapText) {\n        this.updateOverflowWrapper(true);\n      }\n      this.ensurePlaceHolder();\n    }\n  };\n  DropDownTree.prototype.clearCheckAll = function () {\n    if (this.showSelectAll && this.value && this.value.length === 0) {\n      this.setLocale(false);\n    }\n  };\n  DropDownTree.prototype.selectAllItems = function (state) {\n    if (this.showCheckBox) {\n      if (state) {\n        this.isCheckAllCalled = true;\n        this.treeObj.checkAll();\n      } else {\n        this.treeObj.uncheckAll();\n      }\n      this.checkSelectAll = state;\n    } else if (this.allowMultiSelection) {\n      if (!state) {\n        this.treeObj.selectedNodes = [];\n      } else {\n        var li = selectAll('li', this.treeObj.element);\n        var id = void 0;\n        var arr = [];\n        for (var i = 0; i < li.length; i++) {\n          id = li[i].getAttribute('data-uid').toString();\n          arr.push(id);\n        }\n        this.treeObj.selectedNodes = arr;\n      }\n    }\n    this.updateMode();\n    this.setMultiSelect();\n    if (!this.wrapText) {\n      if (state) {\n        this.updateView();\n      } else {\n        this.updateOverflowWrapper(true);\n      }\n    }\n  };\n  DropDownTree.prototype.updateTreeSettings = function (prop) {\n    var value = Object.keys(prop.treeSettings)[0];\n    if (value === 'autoCheck') {\n      this.treeObj.autoCheck = this.treeSettings.autoCheck;\n    } else if (value === 'loadOnDemand') {\n      this.treeObj.loadOnDemand = this.treeSettings.loadOnDemand;\n    } else if (value === 'expandOn') {\n      this.treeObj.expandOn = this.treeSettings.expandOn;\n      this.treeObj.dataBind();\n      return;\n    }\n    this.treeObj.dataBind();\n    this.setMultiSelect();\n    this.updateValue(this.value);\n  };\n  DropDownTree.prototype.updateCheckBoxState = function (checkBox) {\n    if (this.hasTemplate) {\n      this.updateTemplate();\n    }\n    if (!this.wrapText) {\n      this.updateOverflowWrapper(false);\n    }\n    this.treeObj.showCheckBox = checkBox;\n    this.treeObj.dataBind();\n    this.isDynamicChange = true;\n    this.setSelectAllWrapper(this.showSelectAll);\n    if (this.showSelectAll) {\n      this.setLocale();\n    }\n    if (this.showCheckBox) {\n      this.updateMode();\n    }\n    this.setMultiSelect();\n    this.isDynamicChange = false;\n  };\n  DropDownTree.prototype.updateTemplate = function () {\n    if (this.popupObj) {\n      this.clearTemplate();\n      /* eslint-disable */\n      this.portals = [];\n      /* eslint-enable */\n      this.popupObj.destroy();\n      if (this.isPopupOpen) {\n        this.hidePopup();\n        this.isFirstRender = true;\n        this.renderPopup();\n      } else {\n        this.isFirstRender = true;\n      }\n    }\n  };\n  DropDownTree.prototype.l10nUpdate = function (actionFailure) {\n    if (this.noRecord) {\n      this.noRecord.innerHTML = '';\n    } else {\n      this.noRecord = this.createElement('div');\n    }\n    if (this.noRecordsTemplate !== 'No Records Found' || this.actionFailureTemplate !== 'The Request Failed') {\n      var template = actionFailure ? this.actionFailureTemplate : this.noRecordsTemplate;\n      var templateId = actionFailure ? this.actionFailureTemplateId : this.noRecordsTemplateId;\n      var templatestring = actionFailure ? 'actionFailureTemplate' : 'noRecordsTemplate';\n      // eslint-disable-next-line\n      var compiledString = this.templateComplier(template);\n      var tempArr = compiledString({}, this, templatestring, templateId, this.isStringTemplate, undefined, this.noRecord);\n      if (tempArr) {\n        tempArr = Array.prototype.slice.call(tempArr);\n        append(tempArr, this.noRecord);\n      }\n    } else {\n      // eslint-disable-next-line\n      var l10nLocale = {\n        noRecordsTemplate: 'No Records Found',\n        actionFailureTemplate: 'The Request Failed'\n      };\n      this.l10n = new L10n(this.getLocaleName(), l10nLocale, this.locale);\n      this.noRecord.innerHTML = actionFailure ? this.l10n.getConstant('actionFailureTemplate') : this.l10n.getConstant('noRecordsTemplate');\n    }\n    addClass([this.noRecord], NODATACONTAINER);\n    prepend([this.noRecord], this.popupDiv);\n  };\n  DropDownTree.prototype.updateRecordTemplate = function (action) {\n    if (this.treeItems && this.treeItems.length <= 0) {\n      this.l10nUpdate(action);\n      if (this.hasTemplate) {\n        this.updateTemplate();\n      }\n    }\n  };\n  DropDownTree.prototype.updateOverflowWrapper = function (state) {\n    if (!state) {\n      if (!this.inputWrapper.contains(this.overFlowWrapper)) {\n        this.overFlowWrapper = this.createElement('span', {\n          className: OVERFLOW_VIEW + ' ' + HIDEICON\n        });\n        this.inputWrapper.insertBefore(this.overFlowWrapper, this.hiddenElement);\n      }\n    } else if (this.inputWrapper.contains(this.overFlowWrapper) && state) {\n      this.overFlowWrapper.innerHTML = '';\n    }\n  };\n  DropDownTree.prototype.updateMultiSelection = function (state) {\n    if (!this.wrapText) {\n      this.updateOverflowWrapper(false);\n    }\n    this.treeObj.allowMultiSelection = state;\n    this.treeObj.dataBind();\n    this.updateOption();\n    if (this.allowMultiSelection) {\n      this.updateMode();\n    }\n    this.setMultiSelect();\n  };\n  DropDownTree.prototype.updateAllowFiltering = function (state) {\n    if (!this.isFirstRender) {\n      if (state) {\n        this.renderFilter();\n      } else {\n        this.destroyFilter();\n      }\n    }\n  };\n  DropDownTree.prototype.updateFilterPlaceHolder = function () {\n    if (this.filterObj) {\n      this.filterObj.placeholder = this.filterBarPlaceholder;\n      this.filterObj.element.setAttribute('aria-label', this.filterBarPlaceholder);\n    }\n  };\n  DropDownTree.prototype.updateValue = function (value) {\n    this.isDynamicChange = true;\n    if (isNullOrUndefined(value) || value.length === 0) {\n      this.resetValue(true);\n    } else {\n      this.setTreeValue();\n      if ((this.allowMultiSelection || this.showCheckBox) && !this.wrapText) {\n        this.updateOverflowWrapper(false);\n        this.updateView();\n      }\n    }\n    this.updateHiddenValue();\n    this.isDynamicChange = false;\n  };\n  DropDownTree.prototype.updateText = function (text) {\n    if (isNullOrUndefined(text)) {\n      this.resetValue();\n    } else {\n      this.setTreeText();\n      if ((this.allowMultiSelection || this.showCheckBox) && !this.wrapText) {\n        this.updateOverflowWrapper(false);\n        this.updateView();\n      }\n    }\n    this.updateHiddenValue();\n  };\n  DropDownTree.prototype.updateModelMode = function () {\n    var validMode = this.allowMultiSelection ? true : this.showCheckBox ? true : false;\n    if (!validMode) {\n      return;\n    }\n    if (!this.wrapText) {\n      var overFlow = select('.' + OVERFLOW_VIEW, this.inputWrapper);\n      if (overFlow) {\n        overFlow.innerHTML = '';\n      }\n    }\n    this.updateMode();\n    this.setMultiSelect();\n    if (!this.wrapText && this.value && this.value.length !== 0) {\n      this.updateOverFlowView();\n      addClass([this.inputEle], CHIP_INPUT);\n      if (this.mode === 'Box') {\n        removeClass([this.overFlowWrapper, this.inputWrapper], SHOW_TEXT);\n      } else {\n        addClass([this.overFlowWrapper, this.inputWrapper], SHOW_TEXT);\n      }\n    }\n  };\n  DropDownTree.prototype.updateOption = function () {\n    if (!this.hiddenElement.hasAttribute('multiple') && (this.allowMultiSelection || this.showCheckBox)) {\n      this.hiddenElement.setAttribute('multiple', '');\n    } else if (this.hiddenElement.hasAttribute('multiple') && !this.allowMultiSelection && !this.showCheckBox) {\n      this.hiddenElement.removeAttribute('multiple');\n    }\n  };\n  /**\n   * Dynamically change the value of properties.\n   *\n   * @param {DropDownTreeModel} newProp - specifies the newProp value.\n   * @param {DropDownTreeModel} oldProp - specifies the newProp value.\n   * @returns {void}\n   * @private\n   */\n  DropDownTree.prototype.onPropertyChanged = function (newProp, oldProp) {\n    for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n      switch (prop) {\n        case 'width':\n          this.setElementWidth(newProp.width);\n          if (this.popupObj) {\n            this.popupObj.element.style.width = this.setWidth();\n          }\n          break;\n        case 'placeholder':\n          Input.setPlaceholder(newProp.placeholder, this.inputEle);\n          break;\n        case 'cssClass':\n          this.setCssClass(newProp.cssClass, oldProp.cssClass);\n          break;\n        case 'enableRtl':\n          this.setEnableRTL(this.enableRtl);\n          break;\n        case 'fields':\n          this.setFields();\n          break;\n        case 'readonly':\n          Input.setReadonly(newProp.readonly, this.inputEle);\n          break;\n        case 'enabled':\n          this.setEnable();\n          break;\n        case 'floatLabelType':\n          Input.removeFloating(this.inputObj);\n          Input.addFloating(this.inputEle, newProp.floatLabelType, this.placeholder, this.createElement);\n          this.ensureClearIconPosition(newProp.floatLabelType);\n          break;\n        case 'showClearButton':\n          this.updateClearButton(newProp.showClearButton);\n          break;\n        case 'allowFiltering':\n          this.updateAllowFiltering(newProp.allowFiltering);\n          break;\n        case 'filterBarPlaceholder':\n          this.updateFilterPlaceHolder();\n          break;\n        case 'value':\n          this.oldValue = oldProp.value;\n          this.updateValue(newProp.value);\n          break;\n        case 'text':\n          this.updateText(newProp.text);\n          break;\n        case 'allowMultiSelection':\n          this.updateMultiSelection(newProp.allowMultiSelection);\n          break;\n        case 'mode':\n          if (!this.showCheckBox && !this.allowMultiSelection) {\n            return;\n          }\n          if (this.mode === 'Custom') {\n            if (this.overFlowWrapper) {\n              detach(this.overFlowWrapper);\n            }\n            if (this.chipWrapper) {\n              detach(this.chipWrapper);\n            }\n            this.setTagValues();\n          } else {\n            if (oldProp.mode === 'Custom') {\n              this.updateOverflowWrapper(this.wrapText);\n            }\n            this.updateModelMode();\n          }\n          break;\n        case 'delimiterChar':\n          if (this.mode === 'Box') {\n            return;\n          }\n          if (this.showCheckBox || this.allowMultiSelection) {\n            this.setMultiSelect();\n          }\n          break;\n        case 'selectAllText':\n          if (this.showCheckBox && this.showSelectAll) {\n            this.setLocale();\n          }\n          break;\n        case 'unSelectAllText':\n          if (this.showCheckBox && this.showSelectAll) {\n            this.setLocale(false);\n          }\n          break;\n        case 'showSelectAll':\n          if (this.showCheckBox) {\n            this.setSelectAllWrapper(newProp.showSelectAll);\n            this.updatePopupHeight();\n          }\n          break;\n        case 'showCheckBox':\n          this.updateCheckBoxState(newProp.showCheckBox);\n          if (!this.wrapText) {\n            this.updateOverflowWrapper(true);\n          }\n          this.updatePopupHeight();\n          this.updateOption();\n          break;\n        case 'treeSettings':\n          this.updateTreeSettings(newProp);\n          break;\n        case 'customTemplate':\n          if (this.mode !== \"Custom\") {\n            return;\n          }\n          this.chipCollection.innerHTML = \"\";\n          this.setTagValues();\n          break;\n        case 'sortOrder':\n          if (this.hasTemplate) {\n            this.updateTemplate();\n          }\n          this.treeObj.sortOrder = newProp.sortOrder;\n          this.treeObj.dataBind();\n          this.updateValue(this.value);\n          break;\n        case 'showDropDownIcon':\n          this.updateDropDownIconState(newProp.showDropDownIcon);\n          break;\n        case 'popupWidth':\n          if (this.popupObj) {\n            this.popupObj.element.style.width = this.setWidth();\n          }\n          break;\n        case 'popupHeight':\n          if (this.popupObj) {\n            this.updatePopupHeight();\n          }\n          break;\n        case 'zIndex':\n          if (this.popupObj) {\n            this.popupObj.zIndex = newProp.zIndex;\n            this.popupObj.dataBind();\n          }\n          break;\n        case 'headerTemplate':\n          this.updateTemplate();\n          break;\n        case 'footerTemplate':\n          this.updateTemplate();\n          break;\n        case 'itemTemplate':\n          this.updateTemplate();\n          this.treeObj.nodeTemplate = newProp.itemTemplate;\n          this.treeObj.dataBind();\n          break;\n        case 'noRecordsTemplate':\n          this.updateRecordTemplate();\n          break;\n        case 'actionFailureTemplate':\n          this.updateRecordTemplate(true);\n          break;\n        case 'htmlAttributes':\n          this.setHTMLAttributes();\n          break;\n        case 'wrapText':\n          this.updateOverflowWrapper(this.wrapText);\n          if ((this.allowMultiSelection || this.showCheckBox) && !this.wrapText) {\n            this.updateView();\n          } else {\n            addClass([this.overFlowWrapper], HIDEICON);\n            if (this.chipWrapper && this.mode === 'Box') {\n              removeClass([this.chipWrapper], HIDEICON);\n            } else {\n              removeClass([this.inputWrapper], SHOW_CHIP);\n              removeClass([this.inputEle], CHIP_INPUT);\n            }\n            this.ensurePlaceHolder();\n          }\n          break;\n      }\n    }\n  };\n  /**\n   * Allows you to clear the selected values from the Dropdown Tree component.\n   *\n   * @method clear\n   * @returns {void}\n   */\n  DropDownTree.prototype.clear = function () {\n    this.clearAll();\n    if (this.inputFocus) {\n      this.onFocusOut();\n    } else {\n      if (this.changeOnBlur) {\n        this.triggerChangeEvent();\n      }\n      this.removeValue = false;\n    }\n  };\n  /**\n   * Removes the component from the DOM and detaches all its related event handlers. Also, it removes the attributes and classes.\n   *\n   * @method destroy\n   * @returns {void}\n   */\n  DropDownTree.prototype.destroy = function () {\n    this.clearTemplate();\n    this.unWireEvents();\n    this.setCssClass(null, this.cssClass);\n    this.setProperties({\n      text: null\n    }, true);\n    this.treeObj.destroy();\n    this.destroyFilter();\n    if (this.popupObj) {\n      this.popupObj.destroy();\n      detach(this.popupObj.element);\n    }\n    if (this.element.tagName !== this.getDirective()) {\n      this.inputWrapper.parentElement.insertBefore(this.element, this.inputWrapper);\n    }\n    Input.setValue(null, this.inputEle, this.floatLabelType);\n    detach(this.inputWrapper);\n    detach(this.popupDiv);\n    detach(this.hiddenElement);\n    this.element.classList.remove('e-input');\n    if (this.showCheckBox || this.allowMultiSelection) {\n      this.element.classList.remove(CHIP_INPUT);\n    }\n    this.inputObj = null;\n    while (this.hiddenElement.options.length > 0) {\n      this.hiddenElement.remove(0);\n    }\n    this.hiddenElement.innerHTML = '';\n    this.hiddenElement = null;\n    this.inputWrapper = null;\n    this.popupDiv = null;\n    this.tree = null;\n    this.popupObj = null;\n    this.treeObj = null;\n    this.overAllClear = null;\n    this.chipWrapper = null;\n    this.chipCollection = null;\n    this.checkAllParent = null;\n    this.selectAllSpan = null;\n    this.checkBoxElement = null;\n    this.checkWrapper = null;\n    this.popupEle = null;\n    this.header = null;\n    this.footer = null;\n    this.overFlowWrapper = null;\n    this.keyboardModule = null;\n    _super.prototype.destroy.call(this);\n    this.setProperties({\n      value: []\n    }, true);\n  };\n  DropDownTree.prototype.destroyFilter = function () {\n    if (this.filterObj) {\n      this.filterObj.destroy();\n      detach(this.filterObj.element);\n      detach(this.filterContainer);\n      this.filterObj = null;\n    }\n  };\n  /**\n   * Ensures visibility of the Dropdown Tree item by using item value or item element.\n   * If many Dropdown Tree items are present, and we are in need to find a particular item, then the `ensureVisible` property\n   * helps you to bring the item to visibility by expanding the Dropdown Tree and scrolling to the specific item.\n   *\n   * @param  {string | Element} item - Specifies the value of Dropdown Tree item/ Dropdown Tree item element.\n   * @returns {void}\n   */\n  DropDownTree.prototype.ensureVisible = function (item) {\n    this.treeObj.ensureVisible(item);\n  };\n  /**\n   * To get the updated data source of the Dropdown Tree.\n   *\n   * @param  {string | Element} item - Specifies the value of Dropdown Tree item/ Dropdown Tree item element\n   * @returns {'{[key: string]: Object }[]'} - returns the updated data source of the Dropdown Tree.\n   */\n  // eslint-disable-next-line\n  DropDownTree.prototype.getData = function (item) {\n    return this.treeObj.getTreeData(item);\n  };\n  /**\n   * Close the Dropdown tree pop-up.\n   *\n   * @returns {void}\n   */\n  DropDownTree.prototype.hidePopup = function () {\n    var eventArgs = {\n      popup: this.popupObj\n    };\n    this.inputWrapper.classList.remove(ICONANIMATION);\n    if (this.popupEle) {\n      addClass([this.popupEle], DDTHIDEICON);\n    }\n    attributes(this.inputEle, {\n      'aria-expanded': 'false'\n    });\n    if (this.popupObj && this.isPopupOpen) {\n      this.popupObj.hide();\n      if (this.inputFocus) {\n        this.inputWrapper.focus();\n        if (this.allowFiltering) {\n          addClass([this.inputWrapper], [INPUTFOCUS]);\n        }\n      }\n      this.trigger('close', eventArgs);\n    }\n  };\n  /**\n   * Based on the state parameter, entire list item will be selected or deselected.\n   *\n   * @param {boolean} state - Unselects/Selects entire Dropdown Tree items.\n   * @returns {void}\n   *\n   */\n  DropDownTree.prototype.selectAll = function (state) {\n    this.selectAllItems(state);\n  };\n  /**\n   * Opens the popup that displays the Dropdown Tree items.\n   *\n   * @returns {void}\n   */\n  DropDownTree.prototype.showPopup = function () {\n    if (!this.enabled || this.readonly || this.isPopupOpen) {\n      return;\n    }\n    this.renderPopup();\n    this.focusIn();\n  };\n  /**\n   * Return the module name.\n   *\n   * @private\n   * @returns {string} - returns the module name.\n   */\n  DropDownTree.prototype.getModuleName = function () {\n    return 'dropdowntree';\n  };\n  __decorate$2([Property('The Request Failed')], DropDownTree.prototype, \"actionFailureTemplate\", void 0);\n  __decorate$2([Property(false)], DropDownTree.prototype, \"allowFiltering\", void 0);\n  __decorate$2([Property(false)], DropDownTree.prototype, \"allowMultiSelection\", void 0);\n  __decorate$2([Property(true)], DropDownTree.prototype, \"changeOnBlur\", void 0);\n  __decorate$2([Property('')], DropDownTree.prototype, \"cssClass\", void 0);\n  __decorate$2([Property(\"${value.length} item(s) selected\")], DropDownTree.prototype, \"customTemplate\", void 0);\n  __decorate$2([Property(',')], DropDownTree.prototype, \"delimiterChar\", void 0);\n  __decorate$2([Property(true)], DropDownTree.prototype, \"enabled\", void 0);\n  __decorate$2([Complex({}, Fields)], DropDownTree.prototype, \"fields\", void 0);\n  __decorate$2([Property(null)], DropDownTree.prototype, \"filterBarPlaceholder\", void 0);\n  __decorate$2([Property('StartsWith')], DropDownTree.prototype, \"filterType\", void 0);\n  __decorate$2([Property('Never')], DropDownTree.prototype, \"floatLabelType\", void 0);\n  __decorate$2([Property(null)], DropDownTree.prototype, \"footerTemplate\", void 0);\n  __decorate$2([Property(false)], DropDownTree.prototype, \"ignoreAccent\", void 0);\n  __decorate$2([Property(true)], DropDownTree.prototype, \"ignoreCase\", void 0);\n  __decorate$2([Property(null)], DropDownTree.prototype, \"headerTemplate\", void 0);\n  __decorate$2([Property({})], DropDownTree.prototype, \"htmlAttributes\", void 0);\n  __decorate$2([Property(null)], DropDownTree.prototype, \"itemTemplate\", void 0);\n  __decorate$2([Property('Default')], DropDownTree.prototype, \"mode\", void 0);\n  __decorate$2([Property('No Records Found')], DropDownTree.prototype, \"noRecordsTemplate\", void 0);\n  __decorate$2([Property(null)], DropDownTree.prototype, \"placeholder\", void 0);\n  __decorate$2([Property('300px')], DropDownTree.prototype, \"popupHeight\", void 0);\n  __decorate$2([Property('100%')], DropDownTree.prototype, \"popupWidth\", void 0);\n  __decorate$2([Property(false)], DropDownTree.prototype, \"readonly\", void 0);\n  __decorate$2([Property(false)], DropDownTree.prototype, \"showSelectAll\", void 0);\n  __decorate$2([Property('Select All')], DropDownTree.prototype, \"selectAllText\", void 0);\n  __decorate$2([Property(false)], DropDownTree.prototype, \"showCheckBox\", void 0);\n  __decorate$2([Property(false)], DropDownTree.prototype, \"enableHtmlSanitizer\", void 0);\n  __decorate$2([Property(true)], DropDownTree.prototype, \"showClearButton\", void 0);\n  __decorate$2([Property(true)], DropDownTree.prototype, \"showDropDownIcon\", void 0);\n  __decorate$2([Property('None')], DropDownTree.prototype, \"sortOrder\", void 0);\n  __decorate$2([Property(null)], DropDownTree.prototype, \"text\", void 0);\n  __decorate$2([Complex({}, TreeSettings)], DropDownTree.prototype, \"treeSettings\", void 0);\n  __decorate$2([Property('Unselect All')], DropDownTree.prototype, \"unSelectAllText\", void 0);\n  __decorate$2([Property(null)], DropDownTree.prototype, \"value\", void 0);\n  __decorate$2([Property('100%')], DropDownTree.prototype, \"width\", void 0);\n  __decorate$2([Property(1000)], DropDownTree.prototype, \"zIndex\", void 0);\n  __decorate$2([Property(false)], DropDownTree.prototype, \"wrapText\", void 0);\n  __decorate$2([Event()], DropDownTree.prototype, \"actionFailure\", void 0);\n  __decorate$2([Event()], DropDownTree.prototype, \"beforeOpen\", void 0);\n  __decorate$2([Event()], DropDownTree.prototype, \"change\", void 0);\n  __decorate$2([Event()], DropDownTree.prototype, \"close\", void 0);\n  __decorate$2([Event()], DropDownTree.prototype, \"blur\", void 0);\n  __decorate$2([Event()], DropDownTree.prototype, \"created\", void 0);\n  __decorate$2([Event()], DropDownTree.prototype, \"dataBound\", void 0);\n  __decorate$2([Event()], DropDownTree.prototype, \"destroyed\", void 0);\n  __decorate$2([Event()], DropDownTree.prototype, \"filtering\", void 0);\n  __decorate$2([Event()], DropDownTree.prototype, \"focus\", void 0);\n  __decorate$2([Event()], DropDownTree.prototype, \"keyPress\", void 0);\n  __decorate$2([Event()], DropDownTree.prototype, \"open\", void 0);\n  __decorate$2([Event()], DropDownTree.prototype, \"select\", void 0);\n  DropDownTree = __decorate$2([NotifyPropertyChanges], DropDownTree);\n  return DropDownTree;\n}(Component);\n\n/**\n * export all modules from current location\n */\n\nvar __extends$3 = undefined && undefined.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$3 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n// eslint-disable-next-line @typescript-eslint/triple-slash-reference\n/// <reference path='../drop-down-list/drop-down-list-model.d.ts'/>\nvar SPINNER_CLASS = 'e-atc-spinner-icon';\ndropDownListClasses.root = 'e-combobox';\nvar inputObject$1 = {\n  container: null,\n  buttons: []\n};\n/**\n * The ComboBox component allows the user to type a value or choose an option from the list of predefined options.\n * ```html\n * <select id=\"list\">\n *      <option value='1'>Badminton</option>\n *      <option value='2'>Basketball</option>\n *      <option value='3'>Cricket</option>\n *      <option value='4'>Football</option>\n *      <option value='5'>Tennis</option>\n * </select>\n * ```\n * ```typescript\n *   let games:ComboBox = new ComboBox();\n *   games.appendTo(\"#list\");\n * ```\n */\nvar ComboBox = /** @__PURE__ @class */function (_super) {\n  __extends$3(ComboBox, _super);\n  /**\n   * *Constructor for creating the component\n   *\n   * @param {ComboBoxModel} options - Specifies the ComboBox model.\n   * @param {string | HTMLElement} element - Specifies the element to render as component.\n   * @private\n   */\n  function ComboBox(options, element) {\n    return _super.call(this, options, element) || this;\n  }\n  /**\n   * Initialize the event handler\n   *\n   * @private\n   * @returns {void}\n   */\n  ComboBox.prototype.preRender = function () {\n    _super.prototype.preRender.call(this);\n  };\n  ComboBox.prototype.getLocaleName = function () {\n    return 'combo-box';\n  };\n  ComboBox.prototype.wireEvent = function () {\n    if (this.getModuleName() === 'combobox') {\n      EventHandler.add(this.inputWrapper.buttons[0], 'mousedown', this.preventBlur, this);\n      EventHandler.add(this.inputWrapper.container, 'blur', this.onBlurHandler, this);\n    }\n    if (!isNullOrUndefined(this.inputWrapper.buttons[0])) {\n      EventHandler.add(this.inputWrapper.buttons[0], 'mousedown', this.dropDownClick, this);\n    }\n    EventHandler.add(this.inputElement, 'focus', this.targetFocus, this);\n    if (!this.readonly) {\n      EventHandler.add(this.inputElement, 'input', this.onInput, this);\n      EventHandler.add(this.inputElement, 'keyup', this.onFilterUp, this);\n      EventHandler.add(this.inputElement, 'keydown', this.onFilterDown, this);\n      EventHandler.add(this.inputElement, 'paste', this.pasteHandler, this);\n      EventHandler.add(window, 'resize', this.windowResize, this);\n    }\n    this.bindCommonEvent();\n  };\n  ComboBox.prototype.preventBlur = function (e) {\n    if (!this.allowFiltering && document.activeElement !== this.inputElement && !document.activeElement.classList.contains(dropDownListClasses.input) && Browser.isDevice || !Browser.isDevice) {\n      e.preventDefault();\n    }\n  };\n  ComboBox.prototype.onBlurHandler = function (e) {\n    var inputValue = this.inputElement && this.inputElement.value === '' ? null : this.inputElement && this.inputElement.value;\n    if (!isNullOrUndefined(this.listData) && !isNullOrUndefined(inputValue) && inputValue !== this.text) {\n      this.customValue(e);\n    }\n    _super.prototype.onBlurHandler.call(this, e);\n  };\n  ComboBox.prototype.targetElement = function () {\n    return this.inputElement;\n  };\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  ComboBox.prototype.setOldText = function (text) {\n    Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);\n    this.customValue();\n    this.removeSelection();\n  };\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  ComboBox.prototype.setOldValue = function (value) {\n    if (this.allowCustom) {\n      this.valueMuteChange(this.value);\n    } else {\n      this.valueMuteChange(null);\n    }\n    this.removeSelection();\n    this.setHiddenValue();\n  };\n  ComboBox.prototype.valueMuteChange = function (value) {\n    var inputValue = isNullOrUndefined(value) ? null : value.toString();\n    Input.setValue(inputValue, this.inputElement, this.floatLabelType, this.showClearButton);\n    this.setProperties({\n      value: value,\n      text: value,\n      index: null\n    }, true);\n    this.activeIndex = this.index;\n    var fields = this.fields;\n    var dataItem = {};\n    dataItem[fields.text] = isNullOrUndefined(value) ? null : value.toString();\n    dataItem[fields.value] = isNullOrUndefined(value) ? null : value.toString();\n    this.itemData = dataItem;\n    this.item = null;\n    if (this.previousValue !== this.value) {\n      this.detachChangeEvent(null);\n    }\n  };\n  ComboBox.prototype.updateValues = function () {\n    if (!isNullOrUndefined(this.value)) {\n      var li = this.getElementByValue(this.value);\n      if (li) {\n        this.setSelection(li, null);\n      } else if (this.allowCustom) {\n        this.valueMuteChange(this.value);\n      } else {\n        this.valueMuteChange(null);\n      }\n    } else if (this.text && isNullOrUndefined(this.value)) {\n      var li = this.getElementByText(this.text);\n      if (li) {\n        this.setSelection(li, null);\n      } else {\n        Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);\n        this.customValue();\n      }\n    } else {\n      this.setSelection(this.liCollections[this.activeIndex], null);\n    }\n    this.setHiddenValue();\n    Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);\n  };\n  ComboBox.prototype.updateIconState = function () {\n    if (this.showClearButton) {\n      if (this.inputElement && this.inputElement.value !== '' && !this.readonly) {\n        removeClass([this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);\n      } else {\n        addClass([this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);\n      }\n    }\n  };\n  ComboBox.prototype.getAriaAttributes = function () {\n    var ariaAttributes = {\n      'role': 'combobox',\n      'aria-autocomplete': 'both',\n      'aria-labelledby': this.hiddenElement.id,\n      'aria-expanded': 'false',\n      'aria-readonly': this.readonly.toString(),\n      'autocomplete': 'off',\n      'autocapitalize': 'off',\n      'spellcheck': 'false'\n    };\n    return ariaAttributes;\n  };\n  ComboBox.prototype.searchLists = function (e) {\n    this.isTyped = true;\n    if (this.isFiltering()) {\n      _super.prototype.searchLists.call(this, e);\n      if (this.ulElement && this.filterInput.value.trim() === '') {\n        this.setHoverList(this.ulElement.querySelector('.' + dropDownListClasses.li));\n      }\n    } else {\n      if (this.ulElement && this.inputElement.value === '' && this.preventAutoFill) {\n        this.setHoverList(this.ulElement.querySelector('.' + dropDownListClasses.li));\n      }\n      this.incrementalSearch(e);\n    }\n  };\n  ComboBox.prototype.getNgDirective = function () {\n    return 'EJS-COMBOBOX';\n  };\n  ComboBox.prototype.setSearchBox = function () {\n    this.filterInput = this.inputElement;\n    var searchBoxContainer = this.isFiltering() || this.isReact && this.getModuleName() === 'combobox' ? this.inputWrapper : inputObject$1;\n    return searchBoxContainer;\n  };\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  ComboBox.prototype.onActionComplete = function (ulElement, list, e, isUpdated) {\n    var _this = this;\n    _super.prototype.onActionComplete.call(this, ulElement, list, e);\n    if (this.isSelectCustom) {\n      this.removeSelection();\n    }\n    if (!this.preventAutoFill && this.getModuleName() === 'combobox' && this.isTyped && !this.enableVirtualization) {\n      setTimeout(function () {\n        _this.inlineSearch();\n      });\n    }\n  };\n  ComboBox.prototype.getFocusElement = function () {\n    var dataItem = this.isSelectCustom ? {\n      text: ''\n    } : this.getItemData();\n    var selected = !isNullOrUndefined(this.list) ? this.list.querySelector('.' + dropDownListClasses.selected) : this.list;\n    var isSelected = dataItem.text && dataItem.text.toString() === this.inputElement.value && !isNullOrUndefined(selected);\n    if (isSelected) {\n      return selected;\n    }\n    if ((Browser.isDevice && !this.isDropDownClick || !Browser.isDevice) && !isNullOrUndefined(this.liCollections) && this.liCollections.length > 0) {\n      var inputValue = this.inputElement.value;\n      var dataSource = this.sortedData;\n      var type = this.typeOfData(dataSource).typeof;\n      var activeItem = Search(inputValue, this.liCollections, this.filterType, true, dataSource, this.fields, type);\n      if (this.enableVirtualization && inputValue !== '' && this.getModuleName() !== 'autocomplete' && this.isTyped && !this.allowFiltering) {\n        var updatingincrementalindex = false;\n        if (this.viewPortInfo.endIndex >= this.incrementalEndIndex && this.incrementalEndIndex <= this.totalItemCount || this.incrementalEndIndex == 0) {\n          updatingincrementalindex = true;\n          this.incrementalStartIndex = this.incrementalEndIndex;\n          if (this.incrementalEndIndex == 0) {\n            this.incrementalEndIndex = 100 > this.totalItemCount ? this.totalItemCount : 100;\n          } else {\n            this.incrementalEndIndex = this.incrementalEndIndex + 100 > this.totalItemCount ? this.totalItemCount : this.incrementalEndIndex + 100;\n          }\n          this.updateIncrementalInfo(this.incrementalStartIndex, this.incrementalEndIndex);\n          updatingincrementalindex = true;\n        }\n        if (this.viewPortInfo.startIndex !== 0 || updatingincrementalindex) {\n          this.updateIncrementalView(0, this.itemCount);\n        }\n        activeItem = Search(inputValue, this.incrementalLiCollections, this.filterType, true, dataSource, this.fields, type);\n        while (isNullOrUndefined(activeItem) && this.incrementalEndIndex < this.totalItemCount) {\n          this.incrementalStartIndex = this.incrementalEndIndex;\n          this.incrementalEndIndex = this.incrementalEndIndex + 100 > this.totalItemCount ? this.totalItemCount : this.incrementalEndIndex + 100;\n          this.updateIncrementalInfo(this.incrementalStartIndex, this.incrementalEndIndex);\n          updatingincrementalindex = true;\n          if (this.viewPortInfo.startIndex !== 0 || updatingincrementalindex) {\n            this.updateIncrementalView(0, this.itemCount);\n          }\n          activeItem = Search(inputValue, this.incrementalLiCollections, this.filterType, true, dataSource, this.fields, type);\n          if (!isNullOrUndefined(activeItem)) {\n            break;\n          }\n          if (isNullOrUndefined(activeItem) && this.incrementalEndIndex >= this.totalItemCount) {\n            this.incrementalStartIndex = 0;\n            this.incrementalEndIndex = 100 > this.totalItemCount ? this.totalItemCount : 100;\n            break;\n          }\n        }\n        if (activeItem.index) {\n          if (!(this.viewPortInfo.startIndex >= activeItem.index) || !(activeItem.index >= this.viewPortInfo.endIndex)) {\n            var startIndex = activeItem.index - (this.itemCount / 2 - 2) > 0 ? activeItem.index - (this.itemCount / 2 - 2) : 0;\n            var endIndex = this.viewPortInfo.startIndex + this.itemCount > this.totalItemCount ? this.totalItemCount : this.viewPortInfo.startIndex + this.itemCount;\n            if (startIndex != this.viewPortInfo.startIndex) {\n              this.updateIncrementalView(startIndex, endIndex);\n            }\n          }\n        }\n        if (!isNullOrUndefined(activeItem.item)) {\n          var index_1 = this.getIndexByValue(activeItem.item.getAttribute('data-value')) - this.skeletonCount;\n          if (index_1 > this.itemCount / 2) {\n            var startIndex = this.viewPortInfo.startIndex + (this.itemCount / 2 - 2) < this.totalItemCount ? this.viewPortInfo.startIndex + (this.itemCount / 2 - 2) : this.totalItemCount;\n            var endIndex = this.viewPortInfo.startIndex + this.itemCount > this.totalItemCount ? this.totalItemCount : this.viewPortInfo.startIndex + this.itemCount;\n            this.updateIncrementalView(startIndex, endIndex);\n          }\n          activeItem.item = this.getElementByValue(activeItem.item.getAttribute('data-value'));\n        } else {\n          this.updateIncrementalView(0, this.itemCount);\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          this.list.getElementsByClassName('e-virtual-ddl-content')[0].style = this.getTransformValues();\n          this.list.scrollTop = 0;\n        }\n        if (activeItem && activeItem.item) {\n          activeItem.item = this.getElementByValue(activeItem.item.getAttribute('data-value'));\n        }\n      }\n      var activeElement = activeItem.item;\n      if (!isNullOrUndefined(activeElement)) {\n        var count = this.getIndexByValue(activeElement.getAttribute('data-value')) - 1;\n        var height = parseInt(getComputedStyle(this.liCollections[0], null).getPropertyValue('height'), 10);\n        if (!isNaN(height) && this.getModuleName() !== 'autocomplete') {\n          this.removeFocus();\n          var fixedHead = this.fields.groupBy ? this.liCollections[0].offsetHeight : 0;\n          if (!this.enableVirtualization) {\n            this.list.scrollTop = count * height + fixedHead;\n          } else {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            this.list.getElementsByClassName('e-virtual-ddl-content')[0].style = this.getTransformValues();\n            if (this.enableVirtualization && !this.fields.groupBy) {\n              var selectedLiOffsetTop = this.virtualListInfo && this.virtualListInfo.startIndex ? activeElement.offsetTop + this.virtualListInfo.startIndex * activeElement.offsetHeight : activeElement.offsetTop;\n              this.list.scrollTop = selectedLiOffsetTop - this.list.querySelectorAll('.e-virtual-list').length * activeElement.offsetHeight;\n            }\n          }\n          addClass([activeElement], dropDownListClasses.focus);\n        }\n      } else {\n        if (this.isSelectCustom && this.inputElement.value.trim() !== '') {\n          this.removeFocus();\n          if (!this.enableVirtualization) {\n            this.list.scrollTop = 0;\n          }\n        }\n      }\n      return activeElement;\n    } else {\n      return null;\n    }\n  };\n  ComboBox.prototype.setValue = function (e) {\n    if (e && e.type === 'keydown' && e.action === 'enter') {\n      this.removeFillSelection();\n    }\n    if (this.autofill && this.getModuleName() === 'combobox' && e && e.type === 'keydown' && e.action !== 'enter') {\n      this.preventAutoFill = false;\n      this.inlineSearch(e);\n      return false;\n    } else {\n      return _super.prototype.setValue.call(this, e);\n    }\n  };\n  ComboBox.prototype.checkCustomValue = function () {\n    this.itemData = this.getDataByValue(this.value);\n    var dataItem = this.getItemData();\n    if (!(this.allowCustom && isNullOrUndefined(dataItem.value) && isNullOrUndefined(dataItem.text))) {\n      this.setProperties({\n        'value': dataItem.value\n      }, !this.allowCustom);\n    }\n  };\n  /**\n   * Shows the spinner loader.\n   *\n   * @returns {void}\n   * @deprecated\n   */\n  ComboBox.prototype.showSpinner = function () {\n    if (isNullOrUndefined(this.spinnerElement)) {\n      this.spinnerElement = this.getModuleName() === 'autocomplete' ? this.inputWrapper.buttons[0] || this.inputWrapper.clearButton || Input.appendSpan('e-input-group-icon ' + SPINNER_CLASS, this.inputWrapper.container, this.createElement) : this.inputWrapper.buttons[0] || this.inputWrapper.clearButton;\n      addClass([this.spinnerElement], dropDownListClasses.disableIcon);\n      createSpinner({\n        target: this.spinnerElement,\n        width: Browser.isDevice ? '16px' : '14px'\n      }, this.createElement);\n      showSpinner(this.spinnerElement);\n    }\n  };\n  /**\n   * Hides the spinner loader.\n   *\n   * @returns {void}\n   * @deprecated\n   */\n  ComboBox.prototype.hideSpinner = function () {\n    if (!isNullOrUndefined(this.spinnerElement)) {\n      hideSpinner(this.spinnerElement);\n      removeClass([this.spinnerElement], dropDownListClasses.disableIcon);\n      if (this.spinnerElement.classList.contains(SPINNER_CLASS)) {\n        detach(this.spinnerElement);\n      } else {\n        this.spinnerElement.innerHTML = '';\n      }\n      this.spinnerElement = null;\n    }\n  };\n  ComboBox.prototype.setAutoFill = function (activeElement, isHover) {\n    if (!isHover) {\n      this.setHoverList(activeElement);\n    }\n    if (this.autofill && !this.preventAutoFill) {\n      var currentValue = this.getTextByValue(activeElement.getAttribute('data-value')).toString();\n      var currentFillValue = this.getFormattedValue(activeElement.getAttribute('data-value'));\n      if (this.getModuleName() === 'combobox') {\n        if (!this.isSelected && this.previousValue !== currentFillValue) {\n          this.updateSelectedItem(activeElement, null);\n          this.isSelected = true;\n          this.previousValue = this.getFormattedValue(activeElement.getAttribute('data-value'));\n        } else {\n          this.updateSelectedItem(activeElement, null, true);\n        }\n      }\n      if (!this.isAndroidAutoFill(currentValue)) {\n        this.setAutoFillSelection(currentValue, isHover);\n      }\n    }\n  };\n  ComboBox.prototype.isAndroidAutoFill = function (value) {\n    if (Browser.isAndroid) {\n      var currentPoints = this.getSelectionPoints();\n      var prevEnd = this.prevSelectPoints.end;\n      var curEnd = currentPoints.end;\n      var prevStart = this.prevSelectPoints.start;\n      var curStart = currentPoints.start;\n      if (prevEnd !== 0 && (prevEnd === value.length && prevStart === value.length || prevStart > curStart && prevEnd > curEnd || prevEnd === curEnd && prevStart === curStart)) {\n        return true;\n      } else {\n        return false;\n      }\n    } else {\n      return false;\n    }\n  };\n  ComboBox.prototype.clearAll = function (e, property) {\n    if (isNullOrUndefined(property) || !isNullOrUndefined(property) && isNullOrUndefined(property.dataSource)) {\n      _super.prototype.clearAll.call(this, e);\n    }\n    if (this.isFiltering() && !isNullOrUndefined(e) && e.target === this.inputWrapper.clearButton) {\n      this.searchLists(e);\n    }\n  };\n  ComboBox.prototype.isSelectFocusItem = function (element) {\n    return !isNullOrUndefined(element);\n  };\n  ComboBox.prototype.inlineSearch = function (e) {\n    var isKeyNavigate = e && (e.action === 'down' || e.action === 'up' || e.action === 'home' || e.action === 'end' || e.action === 'pageUp' || e.action === 'pageDown');\n    var activeElement = isKeyNavigate ? this.liCollections[this.activeIndex] : this.getFocusElement();\n    if (!isNullOrUndefined(activeElement)) {\n      if (!isKeyNavigate) {\n        var value = this.getFormattedValue(activeElement.getAttribute('data-value'));\n        this.activeIndex = this.getIndexByValue(value);\n        this.activeIndex = !isNullOrUndefined(this.activeIndex) ? this.activeIndex : null;\n      }\n      this.preventAutoFill = this.inputElement.value === '' ? false : this.preventAutoFill;\n      this.setAutoFill(activeElement, isKeyNavigate);\n    } else if (this.inputElement.value === '') {\n      this.activeIndex = null;\n      if (!isNullOrUndefined(this.list)) {\n        if (!this.enableVirtualization) {\n          this.list.scrollTop = 0;\n        }\n        var focusItem = this.list.querySelector('.' + dropDownListClasses.li);\n        this.setHoverList(focusItem);\n      }\n    } else {\n      this.activeIndex = null;\n      this.removeSelection();\n      if (this.liCollections && this.liCollections.length > 0 && !this.isCustomFilter) {\n        this.removeFocus();\n      }\n    }\n  };\n  ComboBox.prototype.incrementalSearch = function (e) {\n    this.showPopup(e);\n    if (!isNullOrUndefined(this.listData)) {\n      this.inlineSearch(e);\n      e.preventDefault();\n    }\n  };\n  ComboBox.prototype.setAutoFillSelection = function (currentValue, isKeyNavigate) {\n    if (isKeyNavigate === void 0) {\n      isKeyNavigate = false;\n    }\n    var selection = this.getSelectionPoints();\n    var value = this.inputElement.value.substr(0, selection.start);\n    if (value && value.toLowerCase() === currentValue.substr(0, selection.start).toLowerCase()) {\n      var inputValue = value + currentValue.substr(value.length, currentValue.length);\n      Input.setValue(inputValue, this.inputElement, this.floatLabelType, this.showClearButton);\n      this.inputElement.setSelectionRange(selection.start, this.inputElement.value.length);\n    } else if (isKeyNavigate) {\n      Input.setValue(currentValue, this.inputElement, this.floatLabelType, this.showClearButton);\n      this.inputElement.setSelectionRange(0, this.inputElement.value.length);\n    }\n  };\n  ComboBox.prototype.getValueByText = function (text) {\n    return _super.prototype.getValueByText.call(this, text, true, this.ignoreAccent);\n  };\n  ComboBox.prototype.unWireEvent = function () {\n    if (this.getModuleName() === 'combobox') {\n      EventHandler.remove(this.inputWrapper.buttons[0], 'mousedown', this.preventBlur);\n      EventHandler.remove(this.inputWrapper.container, 'blur', this.onBlurHandler);\n    }\n    if (!isNullOrUndefined(this.inputWrapper.buttons[0])) {\n      EventHandler.remove(this.inputWrapper.buttons[0], 'mousedown', this.dropDownClick);\n    }\n    if (this.inputElement) {\n      EventHandler.remove(this.inputElement, 'focus', this.targetFocus);\n      if (!this.readonly) {\n        EventHandler.remove(this.inputElement, 'input', this.onInput);\n        EventHandler.remove(this.inputElement, 'keyup', this.onFilterUp);\n        EventHandler.remove(this.inputElement, 'keydown', this.onFilterDown);\n        EventHandler.remove(this.inputElement, 'paste', this.pasteHandler);\n        EventHandler.remove(window, 'resize', this.windowResize);\n      }\n    }\n    this.unBindCommonEvent();\n  };\n  ComboBox.prototype.setSelection = function (li, e) {\n    _super.prototype.setSelection.call(this, li, e);\n    if (!isNullOrUndefined(li) && !this.autofill && !this.isDropDownClick) {\n      this.removeFocus();\n    }\n  };\n  ComboBox.prototype.selectCurrentItem = function (e) {\n    var li;\n    if (this.isPopupOpen) {\n      if (this.isSelected) {\n        li = this.list.querySelector('.' + dropDownListClasses.selected);\n      } else {\n        li = this.list.querySelector('.' + dropDownListClasses.focus);\n      }\n      if (li) {\n        this.setSelection(li, e);\n        this.isTyped = false;\n      }\n      if (this.isSelected) {\n        this.isSelectCustom = false;\n        this.onChangeEvent(e);\n      }\n    }\n    if (e.action === 'enter' && this.inputElement.value.trim() === '') {\n      this.clearAll(e);\n    } else if (this.isTyped && !this.isSelected && isNullOrUndefined(li)) {\n      this.customValue(e);\n    }\n    this.hidePopup(e);\n  };\n  ComboBox.prototype.setHoverList = function (li) {\n    this.removeSelection();\n    if (this.isValidLI(li) && !li.classList.contains(dropDownListClasses.selected)) {\n      this.removeFocus();\n      li.classList.add(dropDownListClasses.focus);\n    }\n  };\n  ComboBox.prototype.targetFocus = function (e) {\n    if (Browser.isDevice && !this.allowFiltering) {\n      this.preventFocus = false;\n    }\n    this.onFocus(e);\n    Input.calculateWidth(this.inputElement, this.inputWrapper.container);\n  };\n  ComboBox.prototype.dropDownClick = function (e) {\n    e.preventDefault();\n    if (Browser.isDevice && !this.isFiltering()) {\n      this.preventFocus = true;\n    }\n    _super.prototype.dropDownClick.call(this, e);\n  };\n  ComboBox.prototype.customValue = function (e) {\n    var _this = this;\n    var value = this.getValueByText(this.inputElement.value);\n    if (!this.allowCustom && this.inputElement.value !== '') {\n      var previousValue = this.previousValue;\n      var currentValue = this.value;\n      this.setProperties({\n        value: value\n      });\n      if (isNullOrUndefined(this.value)) {\n        Input.setValue('', this.inputElement, this.floatLabelType, this.showClearButton);\n      }\n      if (this.autofill && previousValue === this.value && currentValue !== this.value) {\n        this.onChangeEvent(null);\n      }\n    } else if (this.inputElement.value.trim() !== '') {\n      var previousValue_1 = this.value;\n      if (isNullOrUndefined(value)) {\n        var value_1 = this.inputElement.value === '' ? null : this.inputElement.value;\n        // eslint-disable-next-line max-len\n        var eventArgs = {\n          text: value_1,\n          item: {}\n        };\n        if (!this.initial) {\n          this.trigger('customValueSpecifier', eventArgs, function (eventArgs) {\n            _this.updateCustomValueCallback(value_1, eventArgs, previousValue_1, e);\n          });\n        } else {\n          this.updateCustomValueCallback(value_1, eventArgs, previousValue_1);\n        }\n      } else {\n        this.isSelectCustom = false;\n        this.setProperties({\n          value: value\n        });\n        if (previousValue_1 !== this.value) {\n          this.onChangeEvent(e);\n        }\n      }\n    } else if (this.allowCustom) {\n      this.isSelectCustom = true;\n    }\n  };\n  ComboBox.prototype.updateCustomValueCallback = function (value, eventArgs, previousValue, e) {\n    var fields = this.fields;\n    var item = eventArgs.item;\n    var dataItem = {};\n    if (item && getValue(fields.text, item) && getValue(fields.value, item)) {\n      dataItem = item;\n    } else {\n      setValue(fields.text, value, dataItem);\n      setValue(fields.value, value, dataItem);\n    }\n    this.itemData = dataItem;\n    var changeData = {\n      text: getValue(fields.text, this.itemData),\n      value: getValue(fields.value, this.itemData),\n      index: null\n    };\n    this.setProperties(changeData, true);\n    this.setSelection(null, null);\n    this.isSelectCustom = true;\n    if (previousValue !== this.value) {\n      this.onChangeEvent(e);\n    }\n  };\n  /**\n   * Dynamically change the value of properties.\n   *\n   * @param {ComboBoxModel} newProp - Returns the dynamic property value of the component.\n   * @param {ComboBoxModel} oldProp - Returns the previous property value of the component.\n   * @private\n   * @returns {void}\n   */\n  ComboBox.prototype.onPropertyChanged = function (newProp, oldProp) {\n    if (this.getModuleName() === 'combobox') {\n      this.checkData(newProp);\n      this.setUpdateInitial(['fields', 'query', 'dataSource'], newProp);\n    }\n    for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n      switch (prop) {\n        case 'readonly':\n          Input.setReadonly(this.readonly, this.inputElement);\n          if (this.readonly) {\n            EventHandler.remove(this.inputElement, 'input', this.onInput);\n            EventHandler.remove(this.inputElement, 'keyup', this.onFilterUp);\n            EventHandler.remove(this.inputElement, 'keydown', this.onFilterDown);\n          } else {\n            EventHandler.add(this.inputElement, 'input', this.onInput, this);\n            EventHandler.add(this.inputElement, 'keyup', this.onFilterUp, this);\n            EventHandler.add(this.inputElement, 'keydown', this.onFilterDown, this);\n          }\n          this.setReadOnly();\n          break;\n        case 'allowFiltering':\n          this.setSearchBox();\n          if (this.isFiltering() && this.getModuleName() === 'combobox' && isNullOrUndefined(this.list)) {\n            _super.prototype.renderList.call(this);\n          }\n          break;\n        case 'allowCustom':\n          break;\n        default:\n          {\n            // eslint-disable-next-line max-len\n            var comboProps = this.getPropObject(prop, newProp, oldProp);\n            _super.prototype.onPropertyChanged.call(this, comboProps.newProperty, comboProps.oldProperty);\n            if (this.isFiltering() && prop === 'dataSource' && isNullOrUndefined(this.list) && this.itemTemplate && this.getModuleName() === 'combobox') {\n              _super.prototype.renderList.call(this);\n            }\n            break;\n          }\n      }\n    }\n  };\n  /**\n   * To initialize the control rendering.\n   *\n   * @private\n   * @returns {void}\n   */\n  ComboBox.prototype.render = function () {\n    _super.prototype.render.call(this);\n    this.setSearchBox();\n    if (this.isFiltering() && this.getModuleName() === 'combobox' && isNullOrUndefined(this.list)) {\n      _super.prototype.renderList.call(this);\n    }\n    this.renderComplete();\n  };\n  /**\n   * Return the module name of this component.\n   *\n   * @private\n   * @returns {string} Return the module name of this component.\n   */\n  ComboBox.prototype.getModuleName = function () {\n    return 'combobox';\n  };\n  /**\n   * Adds a new item to the combobox popup list. By default, new item appends to the list as the last item,\n   * but you can insert based on the index parameter.\n   *\n   * @param { Object[] } items - Specifies an array of JSON data or a JSON data.\n   * @param { number } itemIndex - Specifies the index to place the newly added item in the popup list.\n   * @returns {void}\n   * @deprecated\n   */\n  ComboBox.prototype.addItem = function (items, itemIndex) {\n    _super.prototype.addItem.call(this, items, itemIndex);\n  };\n  /**\n   * To filter the data from given data source by using query\n   *\n   * @param {Object[] | DataManager } dataSource - Set the data source to filter.\n   * @param {Query} query - Specify the query to filter the data.\n   * @param {FieldSettingsModel} fields - Specify the fields to map the column in the data table.\n   * @returns {void}\n   * @deprecated\n   */\n  ComboBox.prototype.filter = function (dataSource, query, fields) {\n    _super.prototype.filter.call(this, dataSource, query, fields);\n  };\n  /* eslint-disable valid-jsdoc, jsdoc/require-param */\n  /**\n   * Opens the popup that displays the list of items.\n   *\n   * @returns {void}\n   * @deprecated\n   */\n  ComboBox.prototype.showPopup = function (e) {\n    /* eslint-enable valid-jsdoc, jsdoc/require-param */\n    _super.prototype.showPopup.call(this, e);\n  };\n  /* eslint-disable valid-jsdoc, jsdoc/require-param */\n  /**\n   * Hides the popup if it is in open state.\n   *\n   * @returns {void}\n   * @deprecated\n   */\n  ComboBox.prototype.hidePopup = function (e) {\n    /* eslint-enable valid-jsdoc, jsdoc/require-param */\n    var inputValue = this.inputElement && this.inputElement.value === '' ? null : this.inputElement && this.inputElement.value;\n    if (!isNullOrUndefined(this.listData)) {\n      var isEscape = this.isEscapeKey;\n      if (this.isEscapeKey) {\n        Input.setValue(this.typedString, this.inputElement, this.floatLabelType, this.showClearButton);\n        this.isEscapeKey = false;\n      }\n      if (this.autofill) {\n        this.removeFillSelection();\n      }\n      var dataItem = this.isSelectCustom ? {\n        text: ''\n      } : this.getItemData();\n      var selected = !isNullOrUndefined(this.list) ? this.list.querySelector('.' + dropDownListClasses.selected) : null;\n      if (this.inputElement && dataItem.text === this.inputElement.value && !isNullOrUndefined(selected)) {\n        if (this.isSelected) {\n          this.onChangeEvent(e);\n          this.isSelectCustom = false;\n        }\n        _super.prototype.hidePopup.call(this, e);\n        return;\n      }\n      if (this.getModuleName() === 'combobox' && this.inputElement.value.trim() !== '') {\n        var dataSource = this.sortedData;\n        var type = this.typeOfData(dataSource).typeof;\n        var searchItem = Search(this.inputElement.value, this.liCollections, 'Equal', true, dataSource, this.fields, type);\n        this.selectedLI = searchItem.item;\n        if (isNullOrUndefined(searchItem.index)) {\n          searchItem.index = Search(this.inputElement.value, this.liCollections, 'StartsWith', true, dataSource, this.fields, type).index;\n        }\n        this.activeIndex = searchItem.index;\n        if (!isNullOrUndefined(this.selectedLI)) {\n          this.updateSelectedItem(this.selectedLI, null, true);\n        } else if (isEscape) {\n          this.isSelectCustom = true;\n          this.removeSelection();\n        }\n      }\n      if (!this.isEscapeKey && this.isTyped && !this.isInteracted) {\n        this.customValue(e);\n      }\n    }\n    if (isNullOrUndefined(this.listData) && this.allowCustom && !isNullOrUndefined(inputValue) && inputValue !== this.value) {\n      this.customValue();\n    }\n    _super.prototype.hidePopup.call(this, e);\n  };\n  /**\n   * Sets the focus to the component for interaction.\n   *\n   * @returns {void}\n   */\n  ComboBox.prototype.focusIn = function () {\n    if (!this.enabled) {\n      return;\n    }\n    if (Browser.isDevice && !this.isFiltering()) {\n      this.preventFocus = true;\n    }\n    _super.prototype.focusIn.call(this);\n  };\n  /**\n   * Allows you to clear the selected values from the component.\n   *\n   * @returns {void}\n   * @deprecated\n   */\n  ComboBox.prototype.clear = function () {\n    this.value = null;\n  };\n  /* eslint-disable valid-jsdoc, jsdoc/require-param */\n  /**\n   * Moves the focus from the component if the component is already focused.\n   *\n   * @returns {void}\n   * @deprecated\n   */\n  ComboBox.prototype.focusOut = function (e) {\n    /* eslint-enable valid-jsdoc, jsdoc/require-param */\n    _super.prototype.focusOut.call(this, e);\n  };\n  /* eslint-disable valid-jsdoc, jsdoc/require-returns-description */\n  /**\n   * Gets all the list items bound on this component.\n   *\n   * @returns {Element[]}\n   * @deprecated\n   */\n  ComboBox.prototype.getItems = function () {\n    return _super.prototype.getItems.call(this);\n  };\n  /**\n   * Gets the data Object that matches the given value.\n   *\n   * @param { string | number } value - Specifies the value of the list item.\n   * @returns {Object}\n   * @deprecated\n   */\n  ComboBox.prototype.getDataByValue = function (value) {\n    return _super.prototype.getDataByValue.call(this, value);\n  };\n  /* eslint-enable valid-jsdoc, jsdoc/require-returns-description */\n  ComboBox.prototype.renderHightSearch = function () {\n    // update high light search\n  };\n  __decorate$3([Property(false)], ComboBox.prototype, \"autofill\", void 0);\n  __decorate$3([Property(true)], ComboBox.prototype, \"allowCustom\", void 0);\n  __decorate$3([Property({})], ComboBox.prototype, \"htmlAttributes\", void 0);\n  __decorate$3([Property(false)], ComboBox.prototype, \"allowFiltering\", void 0);\n  __decorate$3([Property(null)], ComboBox.prototype, \"query\", void 0);\n  __decorate$3([Property(null)], ComboBox.prototype, \"index\", void 0);\n  __decorate$3([Property(true)], ComboBox.prototype, \"showClearButton\", void 0);\n  __decorate$3([Property(false)], ComboBox.prototype, \"enableRtl\", void 0);\n  __decorate$3([Event()], ComboBox.prototype, \"customValueSpecifier\", void 0);\n  __decorate$3([Event()], ComboBox.prototype, \"filtering\", void 0);\n  __decorate$3([Property(null)], ComboBox.prototype, \"valueTemplate\", void 0);\n  __decorate$3([Property('Never')], ComboBox.prototype, \"floatLabelType\", void 0);\n  __decorate$3([Property(null)], ComboBox.prototype, \"filterBarPlaceholder\", void 0);\n  __decorate$3([Property(null)], ComboBox.prototype, \"cssClass\", void 0);\n  __decorate$3([Property(null)], ComboBox.prototype, \"headerTemplate\", void 0);\n  __decorate$3([Property(null)], ComboBox.prototype, \"footerTemplate\", void 0);\n  __decorate$3([Property(null)], ComboBox.prototype, \"placeholder\", void 0);\n  __decorate$3([Property('100%')], ComboBox.prototype, \"width\", void 0);\n  __decorate$3([Property('300px')], ComboBox.prototype, \"popupHeight\", void 0);\n  __decorate$3([Property('100%')], ComboBox.prototype, \"popupWidth\", void 0);\n  __decorate$3([Property(false)], ComboBox.prototype, \"readonly\", void 0);\n  __decorate$3([Property(null)], ComboBox.prototype, \"text\", void 0);\n  __decorate$3([Property(null)], ComboBox.prototype, \"value\", void 0);\n  ComboBox = __decorate$3([NotifyPropertyChanges], ComboBox);\n  return ComboBox;\n}(DropDownList);\n\n/**\n * export all modules from current location\n */\n\nvar __extends$4 = undefined && undefined.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$4 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n// eslint-disable-next-line @typescript-eslint/triple-slash-reference\n/// <reference path='../combo-box/combo-box-model.d.ts'/>\ndropDownListClasses.root = 'e-autocomplete';\ndropDownListClasses.icon = 'e-input-group-icon e-ddl-icon e-search-icon';\n/**\n * The AutoComplete component provides the matched suggestion list when type into the input,\n * from which the user can select one.\n * ```html\n * <input id=\"list\" type=\"text\"/>\n * ```\n * ```typescript\n *   let atcObj:AutoComplete = new AutoComplete();\n *   atcObj.appendTo(\"#list\");\n * ```\n */\nvar AutoComplete = /** @__PURE__ @class */function (_super) {\n  __extends$4(AutoComplete, _super);\n  /**\n   * * Constructor for creating the widget\n   *\n   * @param {AutoCompleteModel} options - Specifies the AutoComplete model.\n   * @param {string | HTMLElement} element - Specifies the element to render as component.\n   * @private\n   */\n  function AutoComplete(options, element) {\n    var _this_1 = _super.call(this, options, element) || this;\n    _this_1.isFiltered = false;\n    _this_1.searchList = false;\n    return _this_1;\n  }\n  /**\n   * Initialize the event handler\n   *\n   * @private\n   * @returns {void}\n   */\n  AutoComplete.prototype.preRender = function () {\n    _super.prototype.preRender.call(this);\n  };\n  AutoComplete.prototype.getLocaleName = function () {\n    return 'auto-complete';\n  };\n  AutoComplete.prototype.getNgDirective = function () {\n    return 'EJS-AUTOCOMPLETE';\n  };\n  AutoComplete.prototype.getQuery = function (query) {\n    var filterQuery = query ? query.clone() : this.query ? this.query.clone() : new Query();\n    var filterType = this.queryString === '' && !isNullOrUndefined(this.value) ? 'equal' : this.filterType;\n    var queryString = this.queryString === '' && !isNullOrUndefined(this.value) ? this.value : this.queryString;\n    if (this.isFiltered) {\n      return filterQuery;\n    }\n    if (this.queryString !== null && this.queryString !== '') {\n      var dataType = this.typeOfData(this.dataSource).typeof;\n      if (!(this.dataSource instanceof DataManager) && dataType === 'string' || dataType === 'number') {\n        filterQuery.where('', filterType, queryString, this.ignoreCase, this.ignoreAccent);\n      } else if (!this.enableVirtualization || this.enableVirtualization && (!(this.dataSource instanceof DataManager) || this.dataSource instanceof DataManager && this.virtualGroupDataSource)) {\n        var mapping = !isNullOrUndefined(this.fields.value) ? this.fields.value : '';\n        filterQuery.where(mapping, filterType, queryString, this.ignoreCase, this.ignoreAccent);\n      }\n    }\n    if (!isNullOrUndefined(this.suggestionCount) && !this.enableVirtualization) {\n      // Since defualt value of suggestioncount is 20, checked the condition\n      if (this.suggestionCount !== 20) {\n        for (var queryElements = 0; queryElements < filterQuery.queries.length; queryElements++) {\n          if (filterQuery.queries[queryElements].fn === 'onTake') {\n            filterQuery.queries.splice(queryElements, 1);\n          }\n        }\n      }\n      filterQuery.take(this.suggestionCount);\n    }\n    if (this.enableVirtualization && (!(this.dataSource instanceof DataManager) || this.dataSource instanceof DataManager && this.virtualGroupDataSource)) {\n      var takeValue = this.getTakeValue();\n      filterQuery.skip(this.virtualItemStartIndex);\n      filterQuery.take(takeValue);\n      filterQuery.requiresCount();\n    }\n    return filterQuery;\n  };\n  AutoComplete.prototype.searchLists = function (e) {\n    var _this_1 = this;\n    this.isTyped = true;\n    this.isDataFetched = this.isSelectCustom = false;\n    this.checkAndResetCache();\n    if (isNullOrUndefined(this.list)) {\n      _super.prototype.renderList.call(this, e, true);\n    }\n    this.queryString = this.filterInput.value;\n    if (e.type !== 'mousedown' && (e.keyCode === 40 || e.keyCode === 38)) {\n      this.queryString = this.queryString === '' ? null : this.queryString;\n      this.beforePopupOpen = true;\n      this.resetList(this.dataSource, this.fields, null, e);\n      return;\n    }\n    this.isSelected = false;\n    this.activeIndex = null;\n    var eventArgs = {\n      preventDefaultAction: false,\n      text: this.filterInput.value,\n      updateData: function (dataSource, query, fields) {\n        if (eventArgs.cancel) {\n          return;\n        }\n        _this_1.isFiltered = true;\n        _this_1.filterAction(dataSource, query, fields);\n      },\n      cancel: false\n    };\n    this.trigger('filtering', eventArgs, function (eventArgs) {\n      if (!eventArgs.cancel && !_this_1.isFiltered && !eventArgs.preventDefaultAction) {\n        _this_1.searchList = true;\n        _this_1.filterAction(_this_1.dataSource, null, _this_1.fields, e);\n      }\n    });\n  };\n  /**\n   * To filter the data from given data source by using query\n   *\n   * @param {Object[] | DataManager } dataSource - Set the data source to filter.\n   * @param {Query} query - Specify the query to filter the data.\n   * @param {FieldSettingsModel} fields - Specify the fields to map the column in the data table.\n   * @returns {void}\n   * @deprecated\n   */\n  AutoComplete.prototype.filter = function (dataSource, query, fields) {\n    this.isFiltered = true;\n    this.filterAction(dataSource, query, fields);\n  };\n  AutoComplete.prototype.filterAction = function (dataSource, query, fields, e) {\n    this.beforePopupOpen = true;\n    var isNoDataElement = this.list.classList.contains('e-nodata');\n    if (this.queryString !== '' && this.queryString.length >= this.minLength) {\n      if (this.enableVirtualization && this.isFiltering() && this.isTyped) {\n        this.isPreventScrollAction = true;\n        this.list.scrollTop = 0;\n        this.previousStartIndex = 0;\n        this.virtualListInfo = null;\n      }\n      this.resetList(dataSource, fields, query, e);\n      if (this.enableVirtualization && isNoDataElement && !this.list.classList.contains('e-nodata')) {\n        if (!this.list.querySelector('.e-virtual-ddl-content')) {\n          this.list.appendChild(this.createElement('div', {\n            className: 'e-virtual-ddl-content',\n            styles: this.getTransformValues()\n          })).appendChild(this.list.querySelector('.e-list-parent'));\n        }\n        if (!this.list.querySelector('.e-virtual-ddl')) {\n          var virualElement = this.createElement('div', {\n            id: this.element.id + '_popup',\n            className: 'e-virtual-ddl',\n            styles: this.GetVirtualTrackHeight()\n          });\n          document.getElementsByClassName('e-popup')[0].querySelector('.e-dropdownbase').appendChild(virualElement);\n        }\n      }\n      if (this.getModuleName() === 'autocomplete' && !(this.dataSource instanceof DataManager) || this.getModuleName() === 'autocomplete' && this.dataSource instanceof DataManager && this.totalItemCount != 0) {\n        this.getFilteringSkeletonCount();\n      }\n    } else {\n      this.hidePopup(e);\n      this.beforePopupOpen = false;\n    }\n    this.renderReactTemplates();\n  };\n  AutoComplete.prototype.clearAll = function (e, property) {\n    if (isNullOrUndefined(property) || !isNullOrUndefined(property) && isNullOrUndefined(property.dataSource)) {\n      _super.prototype.clearAll.call(this, e);\n      this.checkAndResetCache();\n    }\n    if (this.beforePopupOpen) {\n      this.hidePopup();\n    }\n  };\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  AutoComplete.prototype.onActionComplete = function (ulElement, list, e, isUpdated) {\n    if (!this.enableVirtualization) {\n      this.fixedHeaderElement = null;\n    }\n    if (this.getModuleName() === 'autocomplete' && !(this.dataSource instanceof DataManager) || this.getModuleName() === 'autocomplete' && this.dataSource instanceof DataManager && this.totalItemCount != 0) {\n      this.getFilteringSkeletonCount();\n    }\n    _super.prototype.onActionComplete.call(this, ulElement, list, e);\n    var item = this.list.querySelector('.' + dropDownListClasses.li);\n    if (!isNullOrUndefined(item)) {\n      removeClass([item], dropDownListClasses.focus);\n    }\n    this.postBackAction();\n  };\n  AutoComplete.prototype.postBackAction = function () {\n    if (this.autofill && !isNullOrUndefined(this.liCollections[0]) && this.searchList) {\n      var items = [this.liCollections[0]];\n      var dataSource = this.listData;\n      var type = this.typeOfData(dataSource).typeof;\n      var searchItem = Search(this.inputElement.value, items, 'StartsWith', this.ignoreCase, dataSource, this.fields, type);\n      this.searchList = false;\n      if (!isNullOrUndefined(searchItem.item)) {\n        _super.prototype.setAutoFill.call(this, this.liCollections[0], true);\n      }\n    }\n  };\n  AutoComplete.prototype.setSelection = function (li, e) {\n    if (!this.isValidLI(li)) {\n      this.selectedLI = li;\n      return;\n    }\n    if (!isNullOrUndefined(e) && e.type === 'keydown' && e.action !== 'enter' && e.action !== 'tab' && this.isValidLI(li)) {\n      var value = this.getFormattedValue(li.getAttribute('data-value'));\n      this.activeIndex = this.getIndexByValue(value);\n      this.setHoverList(li);\n      this.selectedLI = li;\n      this.setScrollPosition(e);\n      if (this.autofill && this.isPopupOpen) {\n        this.preventAutoFill = false;\n        var isKeyNavigate = e && e.action === 'down' || e.action === 'up' || e.action === 'home' || e.action === 'end' || e.action === 'pageUp' || e.action === 'pageDown';\n        _super.prototype.setAutoFill.call(this, li, isKeyNavigate);\n      }\n    } else {\n      _super.prototype.setSelection.call(this, li, e);\n    }\n  };\n  AutoComplete.prototype.listOption = function (dataSource, fieldsSettings) {\n    var _this_1 = this;\n    var fields = _super.prototype.listOption.call(this, dataSource, fieldsSettings);\n    if (isNullOrUndefined(fields.itemCreated)) {\n      fields.itemCreated = function (e) {\n        if (_this_1.highlight) {\n          if (_this_1.element.tagName === _this_1.getNgDirective() && _this_1.itemTemplate) {\n            setTimeout(function () {\n              highlightSearch(e.item, _this_1.queryString, _this_1.ignoreCase, _this_1.filterType);\n            }, 0);\n          } else {\n            var isHtmlElement = /<[^>]*>/g.test(e.item.innerText);\n            if (isHtmlElement) {\n              e.item.innerText = e.item.innerText.replace(/[\\u00A0-\\u9999<>&]/g, function (match) {\n                return \"&#\" + match.charCodeAt(0) + \";\";\n              });\n            }\n            highlightSearch(e.item, _this_1.queryString, _this_1.ignoreCase, _this_1.filterType);\n          }\n        }\n      };\n    } else {\n      var itemCreated_1 = fields.itemCreated;\n      fields.itemCreated = function (e) {\n        if (_this_1.highlight) {\n          highlightSearch(e.item, _this_1.queryString, _this_1.ignoreCase, _this_1.filterType);\n        }\n        itemCreated_1.apply(_this_1, [e]);\n      };\n    }\n    return fields;\n  };\n  AutoComplete.prototype.isFiltering = function () {\n    return true;\n  };\n  AutoComplete.prototype.renderPopup = function (e) {\n    if (!this.enableVirtualization) {\n      this.list.scrollTop = 0;\n    }\n    _super.prototype.renderPopup.call(this, e);\n  };\n  AutoComplete.prototype.isEditTextBox = function () {\n    return false;\n  };\n  AutoComplete.prototype.isPopupButton = function () {\n    return this.showPopupButton;\n  };\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  AutoComplete.prototype.isSelectFocusItem = function (element) {\n    return false;\n  };\n  AutoComplete.prototype.setInputValue = function (newProp, oldProp) {\n    var oldValue = oldProp && oldProp.text ? oldProp.text : oldProp ? oldProp.value : oldProp;\n    var value = newProp && newProp.text ? newProp.text : newProp && newProp.value ? newProp.value : this.value;\n    if (value && this.typedString === '' && !this.allowCustom && !(this.dataSource instanceof DataManager)) {\n      var checkFields_1_1 = this.typeOfData(this.dataSource).typeof === 'string' ? '' : this.fields.value;\n      var listLength_1 = this.getItems().length;\n      var query = new Query();\n      var _this_2 = this;\n      new DataManager(this.dataSource).executeQuery(query.where(new Predicate(checkFields_1_1, 'equal', value))).then(function (e) {\n        if (e.result.length > 0) {\n          _this_2.value = checkFields_1_1 !== '' ? e.result[0][_this_2.fields.value].toString() : e.result[0].toString();\n          _this_2.addItem(e.result, listLength_1);\n          _this_2.updateValues();\n        } else {\n          newProp && newProp.text ? _this_2.setOldText(oldValue) : newProp && newProp.value ? _this_2.setOldValue(oldValue) : _this_2.updateValues();\n        }\n      });\n    } else if (newProp) {\n      newProp.text ? this.setOldText(oldValue) : this.setOldValue(oldValue);\n    }\n  };\n  /**\n   * Search the entered text and show it in the suggestion list if available.\n   *\n   * @returns {void}\n   * @deprecated\n   */\n  AutoComplete.prototype.showPopup = function (e) {\n    if (!this.enabled) {\n      return;\n    }\n    if (this.beforePopupOpen) {\n      this.refreshPopup();\n      return;\n    }\n    this.beforePopupOpen = true;\n    this.preventAutoFill = true;\n    if (isNullOrUndefined(this.list)) {\n      this.renderList(e);\n    } else {\n      this.resetList(this.dataSource, this.fields, null, e);\n    }\n  };\n  /**\n   * Hides the popup if it is in open state.\n   *\n   * @returns {void}\n   */\n  AutoComplete.prototype.hidePopup = function (e) {\n    _super.prototype.hidePopup.call(this, e);\n    this.activeIndex = null;\n    this.virtualListInfo = this.viewPortInfo;\n    this.previousStartIndex = this.viewPortInfo.startIndex;\n    this.startIndex = this.viewPortInfo.startIndex;\n    this.previousEndIndex = this.viewPortInfo.endIndex;\n  };\n  /**\n   * Dynamically change the value of properties.\n   *\n   * @param {AutoCompleteModel} newProp - Returns the dynamic property value of the component.\n   * @param {AutoCompleteModel} oldProp - Returns the previous property value of the component.\n   * @private\n   * @returns {void}\n   */\n  AutoComplete.prototype.onPropertyChanged = function (newProp, oldProp) {\n    if (this.getModuleName() === 'autocomplete') {\n      this.setUpdateInitial(['fields', 'query', 'dataSource'], newProp);\n    }\n    for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n      switch (prop) {\n        case 'showPopupButton':\n          if (this.showPopupButton) {\n            var button = Input.appendSpan(dropDownListClasses.icon, this.inputWrapper.container, this.createElement);\n            this.inputWrapper.buttons[0] = button;\n            Input.calculateWidth(this.inputElement, this.inputWrapper.container);\n            if (!isNullOrUndefined(this.inputWrapper.buttons[0]) && !isNullOrUndefined(this.inputWrapper.container.getElementsByClassName('e-float-text-overflow')[0]) && this.floatLabelType !== 'Never') {\n              this.inputWrapper.container.getElementsByClassName('e-float-text-overflow')[0].classList.add('e-icon');\n            }\n            if (this.inputWrapper && this.inputWrapper.buttons && this.inputWrapper.buttons[0]) {\n              EventHandler.add(this.inputWrapper.buttons[0], 'click', this.dropDownClick, this);\n            }\n          } else {\n            detach(this.inputWrapper.buttons[0]);\n            this.inputWrapper.buttons[0] = null;\n          }\n          break;\n        default:\n          {\n            // eslint-disable-next-line max-len\n            var atcProps = this.getPropObject(prop, newProp, oldProp);\n            _super.prototype.onPropertyChanged.call(this, atcProps.newProperty, atcProps.oldProperty);\n            break;\n          }\n      }\n    }\n  };\n  AutoComplete.prototype.renderHightSearch = function () {\n    if (this.highlight) {\n      for (var i = 0; i < this.liCollections.length; i++) {\n        var isHighlight = this.ulElement.querySelector('.e-active');\n        if (!isHighlight) {\n          revertHighlightSearch(this.liCollections[i]);\n          highlightSearch(this.liCollections[i], this.queryString, this.ignoreCase, this.filterType);\n        }\n      }\n    }\n  };\n  /**\n   * Return the module name of this component.\n   *\n   * @private\n   * @returns {string} Return the module name of this component.\n   */\n  AutoComplete.prototype.getModuleName = function () {\n    return 'autocomplete';\n  };\n  /**\n   * To initialize the control rendering\n   *\n   * @private\n   * @returns {void}\n   */\n  AutoComplete.prototype.render = function () {\n    _super.prototype.render.call(this);\n  };\n  __decorate$4([Complex({\n    value: null,\n    iconCss: null,\n    groupBy: null\n  }, FieldSettings)], AutoComplete.prototype, \"fields\", void 0);\n  __decorate$4([Property(true)], AutoComplete.prototype, \"ignoreCase\", void 0);\n  __decorate$4([Property(false)], AutoComplete.prototype, \"showPopupButton\", void 0);\n  __decorate$4([Property(false)], AutoComplete.prototype, \"highlight\", void 0);\n  __decorate$4([Property(20)], AutoComplete.prototype, \"suggestionCount\", void 0);\n  __decorate$4([Property({})], AutoComplete.prototype, \"htmlAttributes\", void 0);\n  __decorate$4([Property(null)], AutoComplete.prototype, \"query\", void 0);\n  __decorate$4([Property(1)], AutoComplete.prototype, \"minLength\", void 0);\n  __decorate$4([Property('Contains')], AutoComplete.prototype, \"filterType\", void 0);\n  __decorate$4([Event()], AutoComplete.prototype, \"filtering\", void 0);\n  __decorate$4([Property(null)], AutoComplete.prototype, \"index\", void 0);\n  __decorate$4([Property('Never')], AutoComplete.prototype, \"floatLabelType\", void 0);\n  __decorate$4([Property(null)], AutoComplete.prototype, \"valueTemplate\", void 0);\n  __decorate$4([Property(null)], AutoComplete.prototype, \"filterBarPlaceholder\", void 0);\n  __decorate$4([Property(false)], AutoComplete.prototype, \"allowFiltering\", void 0);\n  __decorate$4([Property(null)], AutoComplete.prototype, \"text\", void 0);\n  AutoComplete = __decorate$4([NotifyPropertyChanges], AutoComplete);\n  return AutoComplete;\n}(ComboBox);\n\n/**\n * export all modules from current location\n */\n\n/**\n * FloatLable Moduel\n * Specifies whether to display the floating label above the input element.\n */\nvar FLOATLINE = 'e-float-line';\nvar FLOATTEXT = 'e-float-text';\nvar LABELTOP = 'e-label-top';\nvar LABELBOTTOM = 'e-label-bottom';\n/* eslint-disable valid-jsdoc */\n/**\n * Function to create Float Label element.\n *\n * @param {HTMLDivElement} overAllWrapper - Overall wrapper of multiselect.\n * @param {HTMLElement} searchWrapper - Search wrapper of multiselect.\n * @param {HTMLElement} element - The given html element.\n * @param {HTMLInputElement} inputElement - Specify the input wrapper.\n * @param {number[] | string[] | boolean[]} value - Value of the MultiSelect.\n * @param {FloatLabelType} floatLabelType - Specify the FloatLabel Type.\n * @param {string} placeholder - Specify the PlaceHolder text.\n */\nfunction createFloatLabel(overAllWrapper, searchWrapper, element, inputElement, value, floatLabelType, placeholder) {\n  var floatLinelement = createElement('span', {\n    className: FLOATLINE\n  });\n  var floatLabelElement = createElement('label', {\n    className: FLOATTEXT\n  });\n  var id = element.getAttribute('id') ? element.getAttribute('id') : getUniqueID('ej2_multiselect');\n  element.id = id;\n  if (!isNullOrUndefined(element.id) && element.id !== '') {\n    floatLabelElement.id = 'label_' + element.id.replace(/ /g, '_');\n    attributes(inputElement, {\n      'aria-labelledby': floatLabelElement.id\n    });\n  }\n  if (!isNullOrUndefined(inputElement.placeholder) && inputElement.placeholder !== '') {\n    floatLabelElement.innerText = encodePlaceholder(inputElement.placeholder);\n    inputElement.removeAttribute('placeholder');\n  }\n  floatLabelElement.innerText = encodePlaceholder(placeholder);\n  searchWrapper.appendChild(floatLinelement);\n  searchWrapper.appendChild(floatLabelElement);\n  overAllWrapper.classList.add('e-float-input');\n  updateFloatLabelState(value, floatLabelElement);\n  if (floatLabelType === 'Always') {\n    if (floatLabelElement.classList.contains(LABELBOTTOM)) {\n      removeClass([floatLabelElement], LABELBOTTOM);\n    }\n    addClass([floatLabelElement], LABELTOP);\n  }\n}\n/**\n * Function to update status of the Float Label element.\n *\n * @param {string[] | number[] | boolean[]} value - Value of the MultiSelect.\n * @param {HTMLElement} label - Float label element.\n */\nfunction updateFloatLabelState(value, label) {\n  if (value && value.length > 0) {\n    addClass([label], LABELTOP);\n    removeClass([label], LABELBOTTOM);\n  } else {\n    removeClass([label], LABELTOP);\n    addClass([label], LABELBOTTOM);\n  }\n}\n/**\n * Function to remove Float Label element.\n *\n * @param {HTMLDivElement} overAllWrapper - Overall wrapper of multiselect.\n * @param {HTMLDivElement} componentWrapper - Wrapper element of multiselect.\n * @param {HTMLElement} searchWrapper - Search wrapper of multiselect.\n * @param {HTMLInputElement} inputElement - Specify the input wrapper.\n * @param {number[] | string[] | boolean[]} value - Value of the MultiSelect.\n * @param {FloatLabelType} floatLabelType - Specify the FloatLabel Type.\n * @param {string} placeholder - Specify the PlaceHolder text.\n */\nfunction removeFloating(overAllWrapper, componentWrapper, searchWrapper, inputElement, value, floatLabelType, placeholder) {\n  var placeholderElement = componentWrapper.querySelector('.' + FLOATTEXT);\n  var floatLine = componentWrapper.querySelector('.' + FLOATLINE);\n  var placeholderText;\n  if (!isNullOrUndefined(placeholderElement)) {\n    placeholderText = placeholderElement.innerText;\n    detach(searchWrapper.querySelector('.' + FLOATTEXT));\n    setPlaceHolder(value, inputElement, placeholderText);\n    if (!isNullOrUndefined(floatLine)) {\n      detach(searchWrapper.querySelector('.' + FLOATLINE));\n    }\n  } else {\n    placeholderText = placeholder !== null ? placeholder : '';\n    setPlaceHolder(value, inputElement, placeholderText);\n  }\n  overAllWrapper.classList.remove('e-float-input');\n}\n/**\n * Function to set the placeholder to the element.\n *\n * @param {number[] | string[] | boolean[]} value - Value of the MultiSelect.\n * @param {HTMLInputElement} inputElement - Specify the input wrapper.\n * @param {string} placeholder - Specify the PlaceHolder text.\n */\nfunction setPlaceHolder(value, inputElement, placeholder) {\n  if (value && value.length) {\n    inputElement.placeholder = '';\n  } else {\n    inputElement.placeholder = placeholder;\n  }\n}\n/**\n * Function for focusing the Float Element.\n *\n * @param {HTMLDivElement} overAllWrapper - Overall wrapper of multiselect.\n * @param {HTMLDivElement} componentWrapper - Wrapper element of multiselect.\n */\nfunction floatLabelFocus(overAllWrapper, componentWrapper) {\n  overAllWrapper.classList.add('e-input-focus');\n  var label = componentWrapper.querySelector('.' + FLOATTEXT);\n  if (!isNullOrUndefined(label)) {\n    addClass([label], LABELTOP);\n    if (label.classList.contains(LABELBOTTOM)) {\n      removeClass([label], LABELBOTTOM);\n    }\n  }\n}\n/* eslint-disable @typescript-eslint/no-unused-vars */\n/**\n * Function to focus the Float Label element.\n *\n * @param {HTMLDivElement} overAllWrapper - Overall wrapper of multiselect.\n * @param {HTMLDivElement} componentWrapper - Wrapper element of multiselect.\n * @param {number[] | string[] | boolean[]} value - Value of the MultiSelect.\n * @param {FloatLabelType} floatLabelType - Specify the FloatLabel Type.\n * @param {string} placeholder - Specify the PlaceHolder text.\n */\nfunction floatLabelBlur(overAllWrapper, componentWrapper, value, floatLabelType, placeholder) {\n  /* eslint-enable @typescript-eslint/no-unused-vars */\n  overAllWrapper.classList.remove('e-input-focus');\n  var label = componentWrapper.querySelector('.' + FLOATTEXT);\n  if (value && value.length <= 0 && floatLabelType === 'Auto' && !isNullOrUndefined(label)) {\n    if (label.classList.contains(LABELTOP)) {\n      removeClass([label], LABELTOP);\n    }\n    addClass([label], LABELBOTTOM);\n  }\n}\nfunction encodePlaceholder(placeholder) {\n  var result = '';\n  if (!isNullOrUndefined(placeholder) && placeholder !== '') {\n    var spanElement = document.createElement('span');\n    spanElement.innerHTML = '<input  placeholder=\"' + placeholder + '\"/>';\n    var hiddenInput = spanElement.children[0];\n    result = hiddenInput.placeholder;\n  }\n  return result;\n}\n/* eslint-enable valid-jsdoc */\n\nvar __extends$5 = undefined && undefined.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$5 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n// eslint-disable-next-line @typescript-eslint/triple-slash-reference\n/// <reference path='../drop-down-base/drop-down-base-model.d.ts'/>\nvar FOCUS = 'e-input-focus';\nvar DISABLED$1 = 'e-disabled';\nvar OVER_ALL_WRAPPER = 'e-multiselect e-input-group e-control-wrapper';\nvar ELEMENT_WRAPPER = 'e-multi-select-wrapper';\nvar ELEMENT_MOBILE_WRAPPER = 'e-mob-wrapper';\nvar HIDE_LIST = 'e-hide-listitem';\nvar DELIMITER_VIEW = 'e-delim-view';\nvar CHIP_WRAPPER$1 = 'e-chips-collection';\nvar CHIP$1 = 'e-chips';\nvar CHIP_CONTENT$1 = 'e-chipcontent';\nvar CHIP_CLOSE$1 = 'e-chips-close';\nvar CHIP_SELECTED = 'e-chip-selected';\nvar SEARCHBOX_WRAPPER = 'e-searcher';\nvar DELIMITER_VIEW_WRAPPER = 'e-delimiter';\nvar ZERO_SIZE = 'e-zero-size';\nvar REMAIN_WRAPPER$1 = 'e-remain';\nvar CLOSEICON_CLASS$1 = 'e-chips-close e-close-hooker';\nvar DELIMITER_WRAPPER = 'e-delim-values';\nvar POPUP_WRAPPER = 'e-ddl e-popup e-multi-select-list-wrapper';\nvar INPUT_ELEMENT = 'e-dropdownbase';\nvar RTL_CLASS = 'e-rtl';\nvar CLOSE_ICON_HIDE = 'e-close-icon-hide';\nvar MOBILE_CHIP = 'e-mob-chip';\nvar FOOTER$1 = 'e-ddl-footer';\nvar HEADER$1 = 'e-ddl-header';\nvar DISABLE_ICON = 'e-ddl-disable-icon';\nvar SPINNER_CLASS$1 = 'e-ms-spinner-icon';\nvar HIDDEN_ELEMENT = 'e-multi-hidden';\nvar destroy = 'destroy';\nvar dropdownIcon = 'e-input-group-icon e-ddl-icon';\nvar iconAnimation = 'e-icon-anim';\nvar TOTAL_COUNT_WRAPPER$1 = 'e-delim-total';\nvar BOX_ELEMENT = 'e-multiselect-box';\nvar FILTERPARENT = 'e-filter-parent';\nvar CUSTOM_WIDTH = 'e-search-custom-width';\nvar FILTERINPUT = 'e-input-filter';\n/**\n * The Multiselect allows the user to pick a more than one value from list of predefined values.\n * ```html\n * <select id=\"list\">\n *      <option value='1'>Badminton</option>\n *      <option value='2'>Basketball</option>\n *      <option value='3'>Cricket</option>\n *      <option value='4'>Football</option>\n *      <option value='5'>Tennis</option>\n * </select>\n * ```\n * ```typescript\n * <script>\n *   var multiselectObj = new Multiselect();\n *   multiselectObj.appendTo(\"#list\");\n * </script>\n * ```\n */\nvar MultiSelect = /** @__PURE__ @class */function (_super) {\n  __extends$5(MultiSelect, _super);\n  /**\n   * Constructor for creating the DropDownList widget.\n   *\n   * @param {MultiSelectModel} option - Specifies the MultiSelect model.\n   * @param {string | HTMLElement} element - Specifies the element to render as component.\n   * @private\n   */\n  function MultiSelect(option, element) {\n    var _this = _super.call(this, option, element) || this;\n    _this.clearIconWidth = 0;\n    _this.previousFilterText = '';\n    _this.isValidKey = false;\n    _this.selectAllEventData = [];\n    _this.selectAllEventEle = [];\n    _this.resetMainList = null;\n    _this.resetFilteredData = false;\n    _this.scrollFocusStatus = false;\n    _this.keyDownStatus = false;\n    return _this;\n  }\n  MultiSelect.prototype.enableRTL = function (state) {\n    if (state) {\n      this.overAllWrapper.classList.add(RTL_CLASS);\n    } else {\n      this.overAllWrapper.classList.remove(RTL_CLASS);\n    }\n    if (this.popupObj) {\n      this.popupObj.enableRtl = state;\n      this.popupObj.dataBind();\n    }\n  };\n  MultiSelect.prototype.requiredModules = function () {\n    var modules = [];\n    if (this.mode === 'CheckBox') {\n      this.isGroupChecking = this.enableGroupCheckBox;\n      if (this.enableGroupCheckBox) {\n        var prevOnChange = this.isProtectedOnChange;\n        this.isProtectedOnChange = true;\n        this.enableSelectionOrder = false;\n        this.isProtectedOnChange = prevOnChange;\n      }\n      this.allowCustomValue = false;\n      this.hideSelectedItem = false;\n      this.closePopupOnSelect = false;\n      modules.push({\n        member: 'CheckBoxSelection',\n        args: [this]\n      });\n    }\n    return modules;\n  };\n  MultiSelect.prototype.updateHTMLAttribute = function () {\n    if (Object.keys(this.htmlAttributes).length) {\n      for (var _i = 0, _a = Object.keys(this.htmlAttributes); _i < _a.length; _i++) {\n        var htmlAttr = _a[_i];\n        switch (htmlAttr) {\n          case 'class':\n            {\n              var updatedClassValue = this.htmlAttributes[\"\" + htmlAttr].replace(/\\s+/g, ' ').trim();\n              if (updatedClassValue !== '') {\n                addClass([this.overAllWrapper], updatedClassValue.split(' '));\n                addClass([this.popupWrapper], updatedClassValue.split(' '));\n              }\n              break;\n            }\n          case 'disabled':\n            this.enable(false);\n            break;\n          case 'placeholder':\n            if (!this.placeholder) {\n              this.inputElement.setAttribute(htmlAttr, this.htmlAttributes[\"\" + htmlAttr]);\n              this.setProperties({\n                placeholder: this.inputElement.placeholder\n              }, true);\n              this.refreshPlaceHolder();\n            }\n            break;\n          default:\n            {\n              var defaultAttr = ['id'];\n              var validateAttr = ['name', 'required', 'aria-required', 'form'];\n              var containerAttr = ['title', 'role', 'style', 'class'];\n              if (defaultAttr.indexOf(htmlAttr) > -1) {\n                this.element.setAttribute(htmlAttr, this.htmlAttributes[\"\" + htmlAttr]);\n              } else if (htmlAttr.indexOf('data') === 0 || validateAttr.indexOf(htmlAttr) > -1) {\n                this.hiddenElement.setAttribute(htmlAttr, this.htmlAttributes[\"\" + htmlAttr]);\n              } else if (containerAttr.indexOf(htmlAttr) > -1) {\n                this.overAllWrapper.setAttribute(htmlAttr, this.htmlAttributes[\"\" + htmlAttr]);\n              } else if (htmlAttr !== 'size' && !isNullOrUndefined(this.inputElement)) {\n                this.inputElement.setAttribute(htmlAttr, this.htmlAttributes[\"\" + htmlAttr]);\n              }\n              break;\n            }\n        }\n      }\n    }\n  };\n  MultiSelect.prototype.updateReadonly = function (state) {\n    if (!isNullOrUndefined(this.inputElement)) {\n      if (state || this.mode === 'CheckBox') {\n        this.inputElement.setAttribute('readonly', 'true');\n      } else {\n        this.inputElement.removeAttribute('readonly');\n      }\n    }\n  };\n  MultiSelect.prototype.updateClearButton = function (state) {\n    if (state) {\n      if (this.overAllClear.parentNode) {\n        this.overAllClear.style.display = '';\n      } else {\n        this.componentWrapper.appendChild(this.overAllClear);\n      }\n      this.componentWrapper.classList.remove(CLOSE_ICON_HIDE);\n    } else {\n      this.overAllClear.style.display = 'none';\n      this.componentWrapper.classList.add(CLOSE_ICON_HIDE);\n    }\n  };\n  MultiSelect.prototype.updateCssClass = function () {\n    if (!isNullOrUndefined(this.cssClass) && this.cssClass !== '') {\n      var updatedCssClassValues = this.cssClass;\n      updatedCssClassValues = this.cssClass.replace(/\\s+/g, ' ').trim();\n      if (updatedCssClassValues !== '') {\n        addClass([this.overAllWrapper], updatedCssClassValues.split(' '));\n        addClass([this.popupWrapper], updatedCssClassValues.split(' '));\n      }\n    }\n  };\n  MultiSelect.prototype.updateOldPropCssClass = function (oldClass) {\n    if (!isNullOrUndefined(oldClass) && oldClass !== '') {\n      oldClass = oldClass.replace(/\\s+/g, ' ').trim();\n      if (oldClass !== '') {\n        removeClass([this.overAllWrapper], oldClass.split(' '));\n        removeClass([this.popupWrapper], oldClass.split(' '));\n      }\n    }\n  };\n  MultiSelect.prototype.onPopupShown = function (e) {\n    var _this = this;\n    if (Browser.isDevice && this.mode === 'CheckBox' && this.allowFiltering) {\n      // eslint-disable-next-line @typescript-eslint/no-this-alias\n      var proxy_1 = this;\n      window.onpopstate = function () {\n        proxy_1.hidePopup();\n        proxy_1.inputElement.focus();\n      };\n      history.pushState({}, '');\n    }\n    var animModel = {\n      name: 'FadeIn',\n      duration: 100\n    };\n    var eventArgs = {\n      popup: this.popupObj,\n      event: e,\n      cancel: false,\n      animation: animModel\n    };\n    this.trigger('open', eventArgs, function (eventArgs) {\n      if (!eventArgs.cancel) {\n        _this.focusAtFirstListItem();\n        if (_this.popupObj) {\n          document.body.appendChild(_this.popupObj.element);\n        }\n        if (_this.mode === 'CheckBox' && _this.enableGroupCheckBox && !isNullOrUndefined(_this.fields.groupBy)) {\n          _this.updateListItems(_this.list.querySelectorAll('li.e-list-item'), _this.mainList.querySelectorAll('li.e-list-item'));\n        }\n        if (_this.mode === 'CheckBox' || _this.showDropDownIcon) {\n          addClass([_this.overAllWrapper], [iconAnimation]);\n        }\n        _this.refreshPopup();\n        _this.renderReactTemplates();\n        if (_this.popupObj) {\n          _this.popupObj.show(eventArgs.animation, _this.zIndex === 1000 ? _this.element : null);\n        }\n        attributes(_this.inputElement, {\n          'aria-expanded': 'true',\n          'aria-owns': _this.element.id + '_popup',\n          'aria-controls': _this.element.id\n        });\n        _this.updateAriaActiveDescendant();\n        if (_this.isFirstClick) {\n          _this.loadTemplate();\n        }\n        if (_this.mode === 'CheckBox' && _this.showSelectAll) {\n          EventHandler.add(_this.popupObj.element, 'click', _this.clickHandler, _this);\n        }\n      }\n    });\n  };\n  MultiSelect.prototype.updateListItems = function (listItems, mainListItems) {\n    for (var i = 0; i < listItems.length; i++) {\n      this.findGroupStart(listItems[i]);\n      this.findGroupStart(mainListItems[i]);\n    }\n    this.deselectHeader();\n  };\n  MultiSelect.prototype.loadTemplate = function () {\n    this.refreshListItems(null);\n    if (this.mode === 'CheckBox') {\n      this.removeFocus();\n    }\n    this.notify('reOrder', {\n      module: 'CheckBoxSelection',\n      enable: this.mode === 'CheckBox',\n      e: this\n    });\n  };\n  MultiSelect.prototype.setScrollPosition = function () {\n    if ((!this.hideSelectedItem && this.mode !== 'CheckBox' || this.mode === 'CheckBox' && !this.enableSelectionOrder) && !isNullOrUndefined(this.value) && this.value.length > 0) {\n      var valueEle = this.findListElement(this.hideSelectedItem ? this.ulElement : this.list, 'li', 'data-value', this.value[this.value.length - 1]);\n      if (!isNullOrUndefined(valueEle)) {\n        this.scrollBottom(valueEle);\n      }\n    }\n  };\n  MultiSelect.prototype.focusAtFirstListItem = function () {\n    if (this.ulElement && this.ulElement.querySelector('li.' + dropDownBaseClasses.li)) {\n      var element = void 0;\n      if (this.mode === 'CheckBox') {\n        this.removeFocus();\n        return;\n      } else {\n        element = this.ulElement.querySelector('li.' + dropDownBaseClasses.li + ':not(.' + HIDE_LIST + ')');\n      }\n      if (element !== null) {\n        this.removeFocus();\n        this.addListFocus(element);\n      }\n    }\n  };\n  MultiSelect.prototype.focusAtLastListItem = function (data) {\n    var activeElement;\n    if (data) {\n      activeElement = Search(data, this.liCollections, 'StartsWith', this.ignoreCase);\n    } else {\n      if (this.value && this.value.length) {\n        Search(this.value[this.value.length - 1], this.liCollections, 'StartsWith', this.ignoreCase);\n      } else {\n        activeElement = null;\n      }\n    }\n    if (activeElement && activeElement.item !== null) {\n      this.addListFocus(activeElement.item);\n      if ((this.allowCustomValue || this.allowFiltering) && this.isPopupOpen() && this.closePopupOnSelect || this.closePopupOnSelect) {\n        this.scrollBottom(activeElement.item, activeElement.index);\n      }\n    }\n  };\n  MultiSelect.prototype.getAriaAttributes = function () {\n    var ariaAttributes = {\n      'aria-disabled': 'false',\n      'role': 'combobox',\n      'aria-expanded': 'false'\n    };\n    return ariaAttributes;\n  };\n  MultiSelect.prototype.updateListARIA = function () {\n    if (!isNullOrUndefined(this.ulElement)) {\n      attributes(this.ulElement, {\n        'id': this.element.id + '_options',\n        'role': 'listbox',\n        'aria-hidden': 'false',\n        'aria-label': 'list'\n      });\n    }\n    var disableStatus = !isNullOrUndefined(this.inputElement) && this.inputElement.disabled ? true : false;\n    if (!this.isPopupOpen() && !isNullOrUndefined(this.inputElement)) {\n      attributes(this.inputElement, this.getAriaAttributes());\n    }\n    if (disableStatus) {\n      attributes(this.inputElement, {\n        'aria-disabled': 'true'\n      });\n    }\n    this.ensureAriaDisabled(disableStatus ? 'true' : 'false');\n  };\n  MultiSelect.prototype.ensureAriaDisabled = function (status) {\n    if (this.htmlAttributes && this.htmlAttributes['aria-disabled']) {\n      var attr = this.htmlAttributes;\n      extend(attr, {\n        'aria-disabled': status\n      }, attr);\n      this.setProperties({\n        htmlAttributes: attr\n      }, true);\n    }\n  };\n  MultiSelect.prototype.removelastSelection = function (e) {\n    var elements = this.chipCollectionWrapper.querySelectorAll('span.' + CHIP$1);\n    var value = elements[elements.length - 1].getAttribute('data-value');\n    if (!isNullOrUndefined(this.value)) {\n      this.tempValues = this.value.slice();\n    }\n    var customValue = this.getFormattedValue(value);\n    if (this.allowCustomValue && (value !== 'false' && customValue === false || !isNullOrUndefined(customValue) && customValue.toString() === 'NaN')) {\n      customValue = value;\n    }\n    this.removeValue(customValue, e);\n    this.removeChipSelection();\n    this.updateDelimeter(this.delimiterChar, e);\n    this.makeTextBoxEmpty();\n    if (this.mainList && this.listData) {\n      this.refreshSelection();\n    }\n    this.checkPlaceholderSize();\n  };\n  MultiSelect.prototype.onActionFailure = function (e) {\n    _super.prototype.onActionFailure.call(this, e);\n    this.renderPopup();\n    this.onPopupShown();\n  };\n  MultiSelect.prototype.targetElement = function () {\n    this.targetInputElement = this.inputElement;\n    if (this.mode === 'CheckBox' && this.allowFiltering) {\n      this.notify('targetElement', {\n        module: 'CheckBoxSelection',\n        enable: this.mode === 'CheckBox'\n      });\n    }\n    return this.targetInputElement.value;\n  };\n  MultiSelect.prototype.getForQuery = function (valuecheck) {\n    var predicate;\n    var field = isNullOrUndefined(this.fields.value) ? this.fields.text : this.fields.value;\n    for (var i = 0; i < valuecheck.length; i++) {\n      if (i === 0) {\n        predicate = new Predicate(field, 'equal', valuecheck[i]);\n      } else {\n        predicate = predicate.or(field, 'equal', valuecheck[i]);\n      }\n    }\n    if (this.dataSource instanceof DataManager && this.dataSource.adaptor instanceof JsonAdaptor) {\n      return new Query().where(predicate);\n    } else {\n      return this.getQuery(this.query).clone().where(predicate);\n    }\n  };\n  /* eslint-disable @typescript-eslint/no-unused-vars */\n  MultiSelect.prototype.onActionComplete = function (ulElement, list, e, isUpdated) {\n    /* eslint-enable @typescript-eslint/no-unused-vars */\n    _super.prototype.onActionComplete.call(this, ulElement, list, e);\n    this.updateSelectElementData(this.allowFiltering);\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    var proxy = this;\n    if (!isNullOrUndefined(this.value) && !this.allowCustomValue) {\n      for (var i = 0; i < this.value.length; i++) {\n        var checkEle = this.findListElement(this.allowFiltering && !isNullOrUndefined(this.mainList) ? this.mainList : ulElement, 'li', 'data-value', proxy.value[i]);\n        if (!checkEle && !(this.dataSource instanceof DataManager)) {\n          this.value.splice(i, 1);\n          i -= 1;\n        }\n      }\n    }\n    var valuecheck = [];\n    if (!isNullOrUndefined(this.value)) {\n      valuecheck = this.presentItemValue(this.ulElement);\n    }\n    if (valuecheck.length > 0 && this.dataSource instanceof DataManager && !isNullOrUndefined(this.value) && this.listData != null) {\n      this.addNonPresentItems(valuecheck, this.ulElement, this.listData);\n    } else {\n      this.updateActionList(ulElement, list, e);\n    }\n    if (this.dataSource instanceof DataManager && this.mode === 'CheckBox' && this.allowFiltering) {\n      this.removeFocus();\n    }\n  };\n  /* eslint-disable @typescript-eslint/no-unused-vars */\n  MultiSelect.prototype.updateActionList = function (ulElement, list, e, isUpdated) {\n    /* eslint-enable @typescript-eslint/no-unused-vars */\n    if (this.mode === 'CheckBox' && this.showSelectAll) {\n      this.notify('selectAll', {\n        module: 'CheckBoxSelection',\n        enable: this.mode === 'CheckBox'\n      });\n    }\n    if (!this.mainList && !this.mainData) {\n      this.mainList = ulElement.cloneNode ? ulElement.cloneNode(true) : ulElement;\n      this.mainData = list;\n      this.mainListCollection = this.liCollections;\n    } else if (isNullOrUndefined(this.mainData) || this.mainData.length === 0) {\n      this.mainData = list;\n    }\n    if ((this.remoteCustomValue || list.length <= 0) && this.allowCustomValue && this.inputFocus && this.allowFiltering && this.inputElement.value && this.inputElement.value !== '') {\n      this.checkForCustomValue(this.tempQuery, this.fields);\n      return;\n    }\n    if (this.value && this.value.length && (this.mode !== 'CheckBox' && !isNullOrUndefined(this.inputElement) && this.inputElement.value.trim() !== '' || this.mode === 'CheckBox' || (this.keyCode === 8 || this.keyCode === 46) && this.allowFiltering && this.allowCustomValue && this.dataSource instanceof DataManager && this.inputElement.value === '')) {\n      this.refreshSelection();\n    }\n    this.updateListARIA();\n    this.unwireListEvents();\n    this.wireListEvents();\n    if (!isNullOrUndefined(this.setInitialValue)) {\n      this.setInitialValue();\n    }\n    if (!isNullOrUndefined(this.selectAllAction)) {\n      this.selectAllAction();\n    }\n    if (this.setDynValue) {\n      if (!isNullOrUndefined(this.text) && (isNullOrUndefined(this.value) || this.value.length === 0)) {\n        this.initialTextUpdate();\n      }\n      this.initialValueUpdate();\n      this.initialUpdate();\n      this.refreshPlaceHolder();\n      if (this.mode !== 'CheckBox' && this.changeOnBlur) {\n        this.updateValueState(null, this.value, null);\n      }\n    }\n    this.renderPopup();\n    if (this.beforePopupOpen) {\n      this.beforePopupOpen = false;\n      this.onPopupShown(e);\n    }\n  };\n  MultiSelect.prototype.refreshSelection = function () {\n    var value;\n    var element;\n    var className = this.hideSelectedItem ? HIDE_LIST : dropDownBaseClasses.selected;\n    if (!isNullOrUndefined(this.value)) {\n      for (var index = 0; !isNullOrUndefined(this.value[index]); index++) {\n        value = this.value[index];\n        element = this.findListElement(this.list, 'li', 'data-value', value);\n        if (element) {\n          addClass([element], className);\n          if (this.hideSelectedItem && element.previousSibling && element.previousElementSibling.classList.contains(dropDownBaseClasses.group) && (!element.nextElementSibling || element.nextElementSibling.classList.contains(dropDownBaseClasses.group))) {\n            addClass([element.previousElementSibling], className);\n          }\n          if (this.hideSelectedItem && this.fields.groupBy && !element.previousElementSibling.classList.contains(HIDE_LIST)) {\n            this.hideGroupItem(value);\n          }\n          if (this.hideSelectedItem && element.classList.contains(dropDownBaseClasses.focus)) {\n            removeClass([element], dropDownBaseClasses.focus);\n            var listEle = element.parentElement.querySelectorAll('.' + dropDownBaseClasses.li + ':not(.' + HIDE_LIST + ')');\n            if (listEle.length > 0) {\n              addClass([listEle[0]], dropDownBaseClasses.focus);\n              this.updateAriaActiveDescendant();\n            } else {\n              //EJ2-57588 - for this task, we prevent the ul element cloning ( this.ulElement = this.ulElement.cloneNode ? <HTMLElement>this.ulElement.cloneNode(true) : this.ulElement;)\n              if (!(this.list && this.list.querySelectorAll('.' + dropDownBaseClasses.li).length > 0)) {\n                this.l10nUpdate();\n                addClass([this.list], dropDownBaseClasses.noData);\n              }\n            }\n          }\n          element.setAttribute('aria-selected', 'true');\n          if (this.mode === 'CheckBox' && element.classList.contains('e-active')) {\n            var ariaValue = element.getElementsByClassName('e-check').length;\n            if (ariaValue === 0) {\n              var args = {\n                module: 'CheckBoxSelection',\n                enable: this.mode === 'CheckBox',\n                li: element,\n                e: null\n              };\n              this.notify('updatelist', args);\n            }\n          }\n        }\n      }\n    }\n    this.checkSelectAll();\n    this.checkMaxSelection();\n  };\n  MultiSelect.prototype.hideGroupItem = function (value) {\n    var element;\n    var element1;\n    var className = this.hideSelectedItem ? HIDE_LIST : dropDownBaseClasses.selected;\n    element1 = element = this.findListElement(this.ulElement, 'li', 'data-value', value);\n    var i = 0;\n    var j = 0;\n    var temp = true;\n    var temp1 = true;\n    do {\n      if (element && element.previousElementSibling && !element.previousElementSibling.classList.contains(HIDE_LIST) && element.previousElementSibling.classList.contains(dropDownBaseClasses.li)) {\n        temp = false;\n      }\n      if (!temp || !element || element.previousElementSibling && element.previousElementSibling.classList.contains(dropDownBaseClasses.group)) {\n        i = 10;\n      } else {\n        element = element.previousElementSibling;\n      }\n      if (element1 && element1.nextElementSibling && !element1.nextElementSibling.classList.contains(HIDE_LIST) && element1.nextElementSibling.classList.contains(dropDownBaseClasses.li)) {\n        temp1 = false;\n      }\n      if (!temp1 || !element1 || element1.nextElementSibling && element1.nextElementSibling.classList.contains(dropDownBaseClasses.group)) {\n        j = 10;\n      } else {\n        element1 = element1.nextElementSibling;\n      }\n    } while (i < 10 || j < 10);\n    if (temp && temp1 && !element.previousElementSibling.classList.contains(HIDE_LIST)) {\n      addClass([element.previousElementSibling], className);\n    } else if (temp && temp1 && element.previousElementSibling.classList.contains(HIDE_LIST)) {\n      removeClass([element.previousElementSibling], className);\n    }\n  };\n  MultiSelect.prototype.getValidLi = function () {\n    var liElement = this.ulElement.querySelector('li.' + dropDownBaseClasses.li + ':not(.' + HIDE_LIST + ')');\n    return !isNullOrUndefined(liElement) ? liElement : this.liCollections[0];\n  };\n  MultiSelect.prototype.checkSelectAll = function () {\n    var groupItemLength = this.list.querySelectorAll('li.e-list-group-item.e-active').length;\n    var listItem = this.list.querySelectorAll('li.e-list-item');\n    var searchCount = this.list.querySelectorAll('li.' + dropDownBaseClasses.li).length;\n    var searchActiveCount = this.list.querySelectorAll('li.' + dropDownBaseClasses.selected).length;\n    if (this.enableGroupCheckBox && !isNullOrUndefined(this.fields.groupBy)) {\n      searchActiveCount = searchActiveCount - groupItemLength;\n    }\n    if ((searchCount === searchActiveCount || searchActiveCount === this.maximumSelectionLength) && this.mode === 'CheckBox' && this.showSelectAll) {\n      this.notify('checkSelectAll', {\n        module: 'CheckBoxSelection',\n        enable: this.mode === 'CheckBox',\n        value: 'check'\n      });\n    } else if (searchCount !== searchActiveCount && this.mode === 'CheckBox' && this.showSelectAll) {\n      this.notify('checkSelectAll', {\n        module: 'CheckBoxSelection',\n        enable: this.mode === 'CheckBox',\n        value: 'uncheck'\n      });\n    }\n    if (this.enableGroupCheckBox && this.fields.groupBy && !this.enableSelectionOrder) {\n      for (var i = 0; i < listItem.length; i++) {\n        this.findGroupStart(listItem[i]);\n      }\n      this.deselectHeader();\n    }\n  };\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  MultiSelect.prototype.openClick = function (e) {\n    if (!this.openOnClick && this.mode !== 'CheckBox') {\n      if (this.targetElement() !== '') {\n        this.showPopup();\n      } else {\n        this.hidePopup(e);\n      }\n    } else if (!this.openOnClick && this.mode === 'CheckBox' && !this.isPopupOpen()) {\n      this.showPopup();\n    }\n  };\n  MultiSelect.prototype.keyUp = function (e) {\n    if (this.mode === 'CheckBox' && !this.openOnClick) {\n      var char = String.fromCharCode(e.keyCode);\n      var isWordCharacter = char.match(/\\w/);\n      if (!isNullOrUndefined(isWordCharacter)) {\n        this.isValidKey = true;\n      }\n    }\n    this.isValidKey = this.isPopupOpen() && e.keyCode === 8 || this.isValidKey;\n    this.isValidKey = e.ctrlKey && e.keyCode === 86 ? false : this.isValidKey;\n    if (this.isValidKey) {\n      this.isValidKey = false;\n      this.expandTextbox();\n      this.showOverAllClear();\n      switch (e.keyCode) {\n        default:\n          // For filtering works in mobile firefox\n          this.search(e);\n      }\n    }\n  };\n  /**\n   * To filter the multiselect data from given data source by using query\n   *\n   * @param {Object[] | DataManager } dataSource - Set the data source to filter.\n   * @param {Query} query - Specify the query to filter the data.\n   * @param {FieldSettingsModel} fields - Specify the fields to map the column in the data table.\n   * @returns {void}\n   */\n  MultiSelect.prototype.filter = function (dataSource, query, fields) {\n    this.isFiltered = true;\n    this.remoteFilterAction = true;\n    this.dataUpdater(dataSource, query, fields);\n  };\n  MultiSelect.prototype.getQuery = function (query) {\n    var filterQuery = query ? query.clone() : this.query ? this.query.clone() : new Query();\n    if (this.isFiltered) {\n      return filterQuery;\n    }\n    if (this.filterAction) {\n      if (this.targetElement() !== null) {\n        var dataType = this.typeOfData(this.dataSource).typeof;\n        if (!(this.dataSource instanceof DataManager) && dataType === 'string' || dataType === 'number') {\n          filterQuery.where('', this.filterType, this.targetElement(), this.ignoreCase, this.ignoreAccent);\n        } else {\n          var fields = this.fields;\n          filterQuery.where(!isNullOrUndefined(fields.text) ? fields.text : '', this.filterType, this.targetElement(), this.ignoreCase, this.ignoreAccent);\n        }\n      }\n      return filterQuery;\n    } else {\n      return query ? query : this.query ? this.query : new Query();\n    }\n  };\n  MultiSelect.prototype.dataUpdater = function (dataSource, query, fields) {\n    this.isDataFetched = false;\n    if (this.targetElement().trim() === '') {\n      var list = this.mainList.cloneNode ? this.mainList.cloneNode(true) : this.mainList;\n      if (this.backCommand) {\n        this.remoteCustomValue = false;\n        if (this.allowCustomValue && list.querySelectorAll('li').length == 0 && this.mainData.length > 0) {\n          this.mainData = [];\n        }\n        this.onActionComplete(list, this.mainData);\n        if (this.value && this.value.length) {\n          this.refreshSelection();\n        }\n        if (this.keyCode !== 8) {\n          this.focusAtFirstListItem();\n        }\n        this.notify('reOrder', {\n          module: 'CheckBoxSelection',\n          enable: this.mode === 'CheckBox',\n          e: this\n        });\n      }\n    } else {\n      this.resetList(dataSource, fields, query);\n      if (this.allowCustomValue) {\n        if (!(dataSource instanceof DataManager)) {\n          this.checkForCustomValue(query, fields);\n        } else {\n          this.remoteCustomValue = true;\n          this.tempQuery = query;\n        }\n      }\n    }\n    this.refreshPopup();\n    if (this.mode === 'CheckBox') {\n      this.removeFocus();\n    }\n  };\n  MultiSelect.prototype.checkForCustomValue = function (query, fields) {\n    var dataChecks = !this.getValueByText(this.inputElement.value, this.ignoreCase);\n    if (this.allowCustomValue && dataChecks) {\n      var value = this.inputElement.value;\n      var field = fields ? fields : this.fields;\n      var customData = !isNullOrUndefined(this.mainData) && this.mainData.length > 0 ? this.mainData[0] : this.mainData;\n      if (typeof customData !== 'string' && typeof customData !== 'number' && typeof customData !== 'boolean') {\n        var dataItem = {};\n        setValue(field.text, value, dataItem);\n        if (typeof getValue(this.fields.value ? this.fields.value : 'value', customData) === 'number') {\n          setValue(field.value, Math.random(), dataItem);\n        } else {\n          setValue(field.value, value, dataItem);\n        }\n        var tempData = JSON.parse(JSON.stringify(this.listData));\n        tempData.splice(0, 0, dataItem);\n        this.resetList(tempData, field, query);\n      } else {\n        var tempData = JSON.parse(JSON.stringify(this.listData));\n        tempData.splice(0, 0, this.inputElement.value);\n        tempData[0] = typeof customData === 'number' && !isNaN(parseFloat(tempData[0])) ? parseFloat(tempData[0]) : tempData[0];\n        tempData[0] = typeof customData === 'boolean' ? tempData[0] === 'true' ? true : tempData[0] === 'false' ? false : tempData[0] : tempData[0];\n        this.resetList(tempData, field);\n      }\n    }\n    if (this.value && this.value.length) {\n      this.refreshSelection();\n    }\n  };\n  MultiSelect.prototype.getNgDirective = function () {\n    return 'EJS-MULTISELECT';\n  };\n  MultiSelect.prototype.wrapperClick = function (e) {\n    this.setDynValue = false;\n    if (!this.enabled) {\n      return;\n    }\n    if (e.target === this.overAllClear) {\n      e.preventDefault();\n      return;\n    }\n    if (!this.inputFocus) {\n      this.inputElement.focus();\n    }\n    if (!this.readonly) {\n      if (e.target && e.target.classList.toString().indexOf(CHIP_CLOSE$1) !== -1) {\n        if (this.isPopupOpen()) {\n          this.refreshPopup();\n        }\n        return;\n      }\n      if (!this.isPopupOpen() && (this.openOnClick || this.showDropDownIcon && e.target && e.target.className === dropdownIcon)) {\n        this.showPopup(e);\n      } else {\n        this.hidePopup(e);\n        if (this.mode === 'CheckBox') {\n          this.showOverAllClear();\n          this.inputFocus = true;\n          if (!this.overAllWrapper.classList.contains(FOCUS)) {\n            this.overAllWrapper.classList.add(FOCUS);\n          }\n        }\n      }\n    }\n    if (!(this.targetElement() && this.targetElement() !== '')) {\n      e.preventDefault();\n    }\n  };\n  MultiSelect.prototype.enable = function (state) {\n    if (state) {\n      this.overAllWrapper.classList.remove(DISABLED$1);\n      this.inputElement.removeAttribute('disabled');\n      attributes(this.inputElement, {\n        'aria-disabled': 'false'\n      });\n      this.ensureAriaDisabled('false');\n    } else {\n      this.overAllWrapper.classList.add(DISABLED$1);\n      this.inputElement.setAttribute('disabled', 'true');\n      attributes(this.inputElement, {\n        'aria-disabled': 'true'\n      });\n      this.ensureAriaDisabled('true');\n    }\n    if (this.enabled !== state) {\n      this.enabled = state;\n    }\n    this.hidePopup();\n  };\n  MultiSelect.prototype.onBlurHandler = function (eve, isDocClickFromCheck) {\n    var target;\n    if (!isNullOrUndefined(eve)) {\n      target = eve.relatedTarget;\n    }\n    if (this.popupObj && document.body.contains(this.popupObj.element) && this.popupObj.element.contains(target)) {\n      if (this.mode !== 'CheckBox') {\n        this.inputElement.focus();\n      } else if (this.floatLabelType === 'Auto' && (this.overAllWrapper.classList.contains('e-outline') || this.overAllWrapper.classList.contains('e-filled'))) {\n        addClass([this.overAllWrapper], 'e-valid-input');\n      }\n      return;\n    }\n    if (this.floatLabelType === 'Auto' && this.overAllWrapper.classList.contains('e-outline') && this.mode === 'CheckBox' && (isNullOrUndefined(this.value) || this.value.length === 0)) {\n      removeClass([this.overAllWrapper], 'e-valid-input');\n    }\n    if (this.mode === 'CheckBox' && Browser.isIE && !isNullOrUndefined(eve) && !isDocClickFromCheck) {\n      this.inputFocus = false;\n      this.overAllWrapper.classList.remove(FOCUS);\n      return;\n    }\n    if (this.scrollFocusStatus) {\n      if (!isNullOrUndefined(eve)) {\n        eve.preventDefault();\n      }\n      this.inputElement.focus();\n      this.scrollFocusStatus = false;\n      return;\n    }\n    this.inputFocus = false;\n    this.overAllWrapper.classList.remove(FOCUS);\n    if (this.addTagOnBlur) {\n      var dataChecks = this.getValueByText(this.inputElement.value, this.ignoreCase, this.ignoreAccent);\n      var listLiElement = this.findListElement(this.list, 'li', 'data-value', dataChecks);\n      var className = this.hideSelectedItem ? HIDE_LIST : dropDownBaseClasses.selected;\n      var allowChipAddition = listLiElement && !listLiElement.classList.contains(className) ? true : false;\n      if (allowChipAddition) {\n        this.updateListSelection(listLiElement, eve);\n        if (this.mode === 'Delimiter') {\n          this.updateDelimeter(this.delimiterChar);\n        }\n      }\n    }\n    this.updateDataList();\n    if (this.resetMainList) {\n      this.mainList = this.resetMainList;\n      this.resetMainList = null;\n    }\n    this.refreshListItems(null);\n    if (this.mode !== 'Box' && this.mode !== 'CheckBox') {\n      this.updateDelimView();\n    }\n    if (this.changeOnBlur) {\n      this.updateValueState(eve, this.value, this.tempValues);\n      this.dispatchEvent(this.hiddenElement, 'change');\n    }\n    this.overAllClear.style.display = 'none';\n    if (this.isPopupOpen()) {\n      this.hidePopup(eve);\n    }\n    this.makeTextBoxEmpty();\n    this.trigger('blur');\n    this.focused = true;\n    if (Browser.isDevice && this.mode !== 'Delimiter' && this.mode !== 'CheckBox') {\n      this.removeChipFocus();\n    }\n    this.removeChipSelection();\n    this.refreshInputHight();\n    floatLabelBlur(this.overAllWrapper, this.componentWrapper, this.value, this.floatLabelType, this.placeholder);\n    this.refreshPlaceHolder();\n    if ((this.allowFiltering || this.enableSelectionOrder === true && this.mode === 'CheckBox') && !isNullOrUndefined(this.mainList)) {\n      this.ulElement = this.mainList;\n    }\n    this.checkPlaceholderSize();\n    Input.createSpanElement(this.overAllWrapper, this.createElement);\n    this.calculateWidth();\n    if (!isNullOrUndefined(this.overAllWrapper) && !isNullOrUndefined(this.overAllWrapper.getElementsByClassName('e-ddl-icon')[0] && this.overAllWrapper.getElementsByClassName('e-float-text-content')[0] && this.floatLabelType !== 'Never')) {\n      this.overAllWrapper.getElementsByClassName('e-float-text-content')[0].classList.add('e-icon');\n    }\n  };\n  MultiSelect.prototype.calculateWidth = function () {\n    var elementWidth;\n    if (this.overAllWrapper) {\n      if (!this.showDropDownIcon || this.overAllWrapper.querySelector('.' + 'e-label-top')) {\n        elementWidth = this.overAllWrapper.clientWidth - 2 * parseInt(getComputedStyle(this.inputElement).paddingRight);\n      } else {\n        var downIconWidth = this.dropIcon.offsetWidth + parseInt(getComputedStyle(this.dropIcon).marginRight);\n        elementWidth = this.overAllWrapper.clientWidth - (downIconWidth + 2 * parseInt(getComputedStyle(this.inputElement).paddingRight));\n      }\n      if (this.floatLabelType === 'Auto') {\n        Input.calculateWidth(elementWidth, this.overAllWrapper, this.getModuleName());\n      }\n    }\n  };\n  MultiSelect.prototype.checkPlaceholderSize = function () {\n    if (this.showDropDownIcon) {\n      var downIconWidth = this.dropIcon.offsetWidth + parseInt(window.getComputedStyle(this.dropIcon).marginRight, 10);\n      this.setPlaceholderSize(downIconWidth);\n    } else {\n      if (!isNullOrUndefined(this.dropIcon)) {\n        this.setPlaceholderSize(this.showDropDownIcon ? this.dropIcon.offsetWidth : 0);\n      }\n    }\n  };\n  MultiSelect.prototype.setPlaceholderSize = function (downIconWidth) {\n    if (isNullOrUndefined(this.value) || this.value.length === 0) {\n      if (this.dropIcon.offsetWidth !== 0) {\n        this.searchWrapper.style.width = 'calc(100% - ' + (downIconWidth + 10) + 'px';\n      } else {\n        addClass([this.searchWrapper], CUSTOM_WIDTH);\n      }\n    } else if (!isNullOrUndefined(this.value)) {\n      this.searchWrapper.removeAttribute('style');\n      removeClass([this.searchWrapper], CUSTOM_WIDTH);\n    }\n  };\n  MultiSelect.prototype.refreshInputHight = function () {\n    if (!isNullOrUndefined(this.searchWrapper)) {\n      if ((!this.value || !this.value.length) && (isNullOrUndefined(this.text) || this.text === '')) {\n        this.searchWrapper.classList.remove(ZERO_SIZE);\n      } else {\n        this.searchWrapper.classList.add(ZERO_SIZE);\n      }\n    }\n  };\n  MultiSelect.prototype.validateValues = function (newValue, oldValue) {\n    return JSON.stringify(newValue.slice().sort()) !== JSON.stringify(oldValue.slice().sort());\n  };\n  MultiSelect.prototype.updateValueState = function (event, newVal, oldVal) {\n    var newValue = newVal ? newVal : [];\n    var oldValue = oldVal ? oldVal : [];\n    if (this.initStatus && this.validateValues(newValue, oldValue)) {\n      var eventArgs = {\n        e: event,\n        oldValue: oldVal,\n        value: newVal,\n        isInteracted: event ? true : false,\n        element: this.element,\n        event: event\n      };\n      if (this.isAngular && this.preventChange) {\n        this.preventChange = false;\n      } else {\n        this.trigger('change', eventArgs);\n      }\n      this.updateTempValue();\n      if (!this.changeOnBlur) {\n        this.dispatchEvent(this.hiddenElement, 'change');\n      }\n    }\n  };\n  MultiSelect.prototype.updateTempValue = function () {\n    if (!this.value) {\n      this.tempValues = this.value;\n    } else {\n      this.tempValues = this.value.slice();\n    }\n  };\n  MultiSelect.prototype.updateAriaActiveDescendant = function () {\n    if (!isNullOrUndefined(this.ulElement) && !isNullOrUndefined(this.ulElement.getElementsByClassName('e-item-focus')[0])) {\n      attributes(this.inputElement, {\n        'aria-activedescendant': this.ulElement.getElementsByClassName('e-item-focus')[0].id\n      });\n    }\n  };\n  MultiSelect.prototype.getPagingCount = function () {\n    var height = this.list.classList.contains(dropDownBaseClasses.noData) ? null : getComputedStyle(this.getItems()[0], null).getPropertyValue('height');\n    return Math.round(this.list.offsetHeight / parseInt(height, 10));\n  };\n  MultiSelect.prototype.pageUpSelection = function (steps) {\n    var collection = this.list.querySelectorAll('li.' + dropDownBaseClasses.li + ':not(.' + HIDE_LIST + ')' + ':not(.e-reorder-hide)');\n    var previousItem = steps >= 0 ? collection[steps + 1] : collection[0];\n    this.addListFocus(previousItem);\n    this.scrollBottom(previousItem, this.getIndexByValue(previousItem.getAttribute('data-value')));\n  };\n  MultiSelect.prototype.pageDownSelection = function (steps) {\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    var list = this.getItems();\n    var collection = this.list.querySelectorAll('li.' + dropDownBaseClasses.li + ':not(.' + HIDE_LIST + ')' + ':not(.e-reorder-hide)');\n    var previousItem = steps <= collection.length ? collection[steps - 1] : collection[collection.length - 1];\n    this.addListFocus(previousItem);\n    this.scrollBottom(previousItem, this.getIndexByValue(previousItem.getAttribute('data-value')));\n  };\n  MultiSelect.prototype.getItems = function () {\n    if (!this.list) {\n      _super.prototype.render.call(this);\n    }\n    return this.ulElement && this.ulElement.querySelectorAll('.' + dropDownBaseClasses.li).length > 0 ? this.ulElement.querySelectorAll('.' + dropDownBaseClasses.li + ':not(.' + HIDE_LIST + ')') : [];\n  };\n  MultiSelect.prototype.focusInHandler = function (e) {\n    var _this = this;\n    if (this.enabled) {\n      this.showOverAllClear();\n      this.inputFocus = true;\n      if (this.value && this.value.length) {\n        if (this.mode !== 'Delimiter' && this.mode !== 'CheckBox') {\n          this.chipCollectionWrapper.style.display = '';\n        } else {\n          this.showDelimWrapper();\n        }\n        if (this.mode !== 'CheckBox') {\n          this.viewWrapper.style.display = 'none';\n        }\n      }\n      if (this.mode !== 'CheckBox') {\n        this.searchWrapper.classList.remove(ZERO_SIZE);\n      }\n      this.checkPlaceholderSize();\n      if (this.focused) {\n        var args = {\n          isInteracted: e ? true : false,\n          event: e\n        };\n        this.trigger('focus', args);\n        this.focused = false;\n      }\n      if (!this.overAllWrapper.classList.contains(FOCUS)) {\n        this.overAllWrapper.classList.add(FOCUS);\n      }\n      floatLabelFocus(this.overAllWrapper, this.componentWrapper);\n      if (this.isPopupOpen()) {\n        this.refreshPopup();\n      }\n      setTimeout(function () {\n        _this.calculateWidth();\n      }, 150);\n      return true;\n    } else {\n      return false;\n    }\n  };\n  MultiSelect.prototype.showDelimWrapper = function () {\n    if (this.mode === 'CheckBox') {\n      this.viewWrapper.style.display = '';\n    } else {\n      this.delimiterWrapper.style.display = '';\n    }\n    this.componentWrapper.classList.add(DELIMITER_VIEW_WRAPPER);\n  };\n  MultiSelect.prototype.hideDelimWrapper = function () {\n    this.delimiterWrapper.style.display = 'none';\n    this.componentWrapper.classList.remove(DELIMITER_VIEW_WRAPPER);\n  };\n  MultiSelect.prototype.expandTextbox = function () {\n    var size = 5;\n    if (this.placeholder) {\n      size = size > this.inputElement.placeholder.length ? size : this.inputElement.placeholder.length;\n    }\n    if (this.inputElement.value.length > size) {\n      this.inputElement.size = this.inputElement.value.length;\n    } else {\n      this.inputElement.size = size;\n    }\n  };\n  MultiSelect.prototype.isPopupOpen = function () {\n    return this.popupWrapper !== null && this.popupWrapper.parentElement !== null;\n  };\n  MultiSelect.prototype.refreshPopup = function () {\n    if (this.popupObj && this.mobFilter) {\n      this.popupObj.setProperties({\n        width: this.calcPopupWidth()\n      });\n      this.popupObj.refreshPosition(this.overAllWrapper);\n      this.popupObj.resolveCollision();\n    }\n  };\n  MultiSelect.prototype.checkTextLength = function () {\n    return this.targetElement().length < 1;\n  };\n  MultiSelect.prototype.popupKeyActions = function (e) {\n    switch (e.keyCode) {\n      case 38:\n        this.hidePopup(e);\n        if (this.mode === 'CheckBox') {\n          this.inputElement.focus();\n        }\n        e.preventDefault();\n        break;\n      case 40:\n        if (!this.isPopupOpen()) {\n          this.showPopup(e);\n          e.preventDefault();\n        }\n        break;\n    }\n  };\n  MultiSelect.prototype.updateAriaAttribute = function () {\n    var focusedItem = this.list.querySelector('.' + dropDownBaseClasses.focus);\n    if (!isNullOrUndefined(focusedItem)) {\n      this.inputElement.setAttribute('aria-activedescendant', focusedItem.id);\n      if (this.allowFiltering) {\n        var filterInput = this.popupWrapper.querySelector('.' + FILTERINPUT);\n        filterInput && filterInput.setAttribute('aria-activedescendant', focusedItem.id);\n      } else if (this.mode == \"CheckBox\") {\n        this.overAllWrapper.setAttribute('aria-activedescendant', focusedItem.id);\n      }\n    }\n  };\n  MultiSelect.prototype.homeNavigation = function (isHome) {\n    this.removeFocus();\n    var scrollEle = this.ulElement.querySelectorAll('li.' + dropDownBaseClasses.li + ':not(.' + HIDE_LIST + ')' + ':not(.e-reorder-hide)');\n    if (scrollEle.length > 0) {\n      var element = scrollEle[isHome ? 0 : scrollEle.length - 1];\n      element.classList.add(dropDownBaseClasses.focus);\n      this.scrollBottom(element);\n      this.updateAriaActiveDescendant();\n    }\n  };\n  MultiSelect.prototype.onKeyDown = function (e) {\n    if (this.readonly || !this.enabled && this.mode !== 'CheckBox') {\n      return;\n    }\n    this.keyCode = e.keyCode;\n    this.keyDownStatus = true;\n    if (e.keyCode > 111 && e.keyCode < 124) {\n      return;\n    }\n    if (e.altKey) {\n      this.popupKeyActions(e);\n      return;\n    } else if (this.isPopupOpen()) {\n      var focusedItem = this.list.querySelector('.' + dropDownBaseClasses.focus);\n      var activeIndex = void 0;\n      switch (e.keyCode) {\n        case 36:\n        case 35:\n          this.homeNavigation(e.keyCode === 36 ? true : false);\n          break;\n        case 33:\n          e.preventDefault();\n          if (focusedItem) {\n            this.getIndexByValue(focusedItem.getAttribute('data-value'));\n            this.pageUpSelection(activeIndex - this.getPagingCount());\n            this.updateAriaAttribute();\n          }\n          return;\n        case 34:\n          e.preventDefault();\n          if (focusedItem) {\n            this.getIndexByValue(focusedItem.getAttribute('data-value'));\n            this.pageDownSelection(activeIndex + this.getPagingCount());\n            this.updateAriaAttribute();\n          }\n          return;\n        case 38:\n          this.arrowUp(e);\n          break;\n        case 40:\n          this.arrowDown(e);\n          break;\n        case 27:\n          e.preventDefault();\n          this.hidePopup(e);\n          if (this.mode === 'CheckBox') {\n            this.inputElement.focus();\n          }\n          return;\n        case 13:\n          e.preventDefault();\n          if (this.mode !== 'CheckBox') {\n            this.selectByKey(e);\n          }\n          this.checkPlaceholderSize();\n          return;\n        case 32:\n          this.spaceKeySelection(e);\n          return;\n        case 9:\n          e.preventDefault();\n          this.hidePopup(e);\n          this.inputElement.focus();\n          this.overAllWrapper.classList.add(FOCUS);\n      }\n    } else {\n      switch (e.keyCode) {\n        case 13:\n        case 9:\n        case 16:\n        case 17:\n        case 20:\n          return;\n        case 40:\n          if (this.openOnClick) {\n            this.showPopup();\n          }\n          break;\n        case 27:\n          e.preventDefault();\n          this.escapeAction();\n          return;\n      }\n    }\n    if (this.checkTextLength()) {\n      this.keyNavigation(e);\n    }\n    if (this.mode === 'CheckBox' && this.enableSelectionOrder) {\n      if (this.allowFiltering) {\n        this.previousFilterText = this.targetElement();\n      }\n      this.checkBackCommand(e);\n    }\n    this.expandTextbox();\n    if (!(this.mode === 'CheckBox' && this.showSelectAll)) {\n      this.refreshPopup();\n    }\n  };\n  MultiSelect.prototype.arrowDown = function (e) {\n    e.preventDefault();\n    this.moveByList(1);\n    this.keyAction = true;\n    if (document.activeElement.classList.contains(FILTERINPUT) || this.mode === 'CheckBox' && !this.allowFiltering && document.activeElement !== this.list) {\n      EventHandler.add(this.list, 'keydown', this.onKeyDown, this);\n    }\n    this.updateAriaAttribute();\n  };\n  MultiSelect.prototype.arrowUp = function (e) {\n    e.preventDefault();\n    this.keyAction = true;\n    var list = this.list.querySelectorAll('li.' + dropDownBaseClasses.li + ':not(.' + HIDE_LIST + ')' + ':not(.e-reorder-hide)');\n    if (this.enableGroupCheckBox && this.mode === 'CheckBox' && !isNullOrUndefined(this.fields.groupBy)) {\n      list = this.list.querySelectorAll('li.' + dropDownBaseClasses.li + ',li.' + dropDownBaseClasses.group + ':not(.' + HIDE_LIST + ')' + ':not(.e-reorder-hide)');\n    }\n    var focuseElem = this.list.querySelector('li.' + dropDownBaseClasses.focus);\n    this.focusFirstListItem = !isNullOrUndefined(this.liCollections[0]) ? this.liCollections[0].classList.contains('e-item-focus') : false;\n    var index = Array.prototype.slice.call(list).indexOf(focuseElem);\n    if (index <= 0 && this.mode === 'CheckBox' && this.allowFiltering) {\n      this.keyAction = false;\n      this.notify('inputFocus', {\n        module: 'CheckBoxSelection',\n        enable: this.mode === 'CheckBox',\n        value: 'focus'\n      });\n    }\n    this.moveByList(-1);\n    this.updateAriaAttribute();\n  };\n  MultiSelect.prototype.spaceKeySelection = function (e) {\n    if (this.mode === 'CheckBox') {\n      var li = this.list.querySelector('li.' + dropDownBaseClasses.focus);\n      var selectAllParent = document.getElementsByClassName('e-selectall-parent')[0];\n      if (!isNullOrUndefined(li) || selectAllParent && selectAllParent.classList.contains('e-item-focus')) {\n        e.preventDefault();\n        this.keyAction = true;\n      }\n      this.selectByKey(e);\n      if (this.keyAction) {\n        var li_1 = this.list.querySelector('li.' + dropDownBaseClasses.focus);\n        if (!isNullOrUndefined(li_1) && selectAllParent && selectAllParent.classList.contains('e-item-focus')) {\n          li_1.classList.remove('e-item-focus');\n        }\n      }\n    }\n    this.checkPlaceholderSize();\n  };\n  MultiSelect.prototype.checkBackCommand = function (e) {\n    if (e.keyCode === 8 && this.allowFiltering ? this.targetElement() !== this.previousFilterText : this.targetElement() === '') {\n      this.backCommand = false;\n    } else {\n      this.backCommand = true;\n    }\n  };\n  MultiSelect.prototype.keyNavigation = function (e) {\n    if (this.mode !== 'Delimiter' && this.mode !== 'CheckBox' && this.value && this.value.length) {\n      switch (e.keyCode) {\n        case 37:\n          //left arrow\n          e.preventDefault();\n          this.moveBy(-1, e);\n          break;\n        case 39:\n          //right arrow\n          e.preventDefault();\n          this.moveBy(1, e);\n          break;\n        case 8:\n          this.removelastSelection(e);\n          break;\n        case 46:\n          //del\n          this.removeSelectedChip(e);\n          break;\n      }\n    } else if (e.keyCode === 8 && this.mode === 'Delimiter') {\n      if (this.value && this.value.length) {\n        e.preventDefault();\n        var temp = this.value[this.value.length - 1];\n        this.removeValue(temp, e);\n        this.updateDelimeter(this.delimiterChar, e);\n        this.focusAtLastListItem(temp);\n      }\n    }\n  };\n  MultiSelect.prototype.selectByKey = function (e) {\n    this.removeChipSelection();\n    this.selectListByKey(e);\n    if (this.hideSelectedItem) {\n      this.focusAtFirstListItem();\n    }\n  };\n  MultiSelect.prototype.escapeAction = function () {\n    var temp = this.tempValues ? this.tempValues.slice() : [];\n    if (this.value && this.validateValues(this.value, temp)) {\n      if (this.mode !== 'CheckBox') {\n        this.value = temp;\n        this.initialValueUpdate();\n      }\n      if (this.mode !== 'Delimiter' && this.mode !== 'CheckBox') {\n        this.chipCollectionWrapper.style.display = '';\n      } else {\n        this.showDelimWrapper();\n      }\n      this.refreshPlaceHolder();\n      if (this.value.length) {\n        this.showOverAllClear();\n      } else {\n        this.hideOverAllClear();\n      }\n    }\n    this.makeTextBoxEmpty();\n  };\n  MultiSelect.prototype.scrollBottom = function (selectedLI, activeIndex) {\n    var currentOffset = this.list.offsetHeight;\n    var nextBottom = selectedLI.offsetTop + selectedLI.offsetHeight - this.list.scrollTop;\n    var nextOffset = this.list.scrollTop + nextBottom - currentOffset;\n    var boxRange = selectedLI.offsetTop + selectedLI.offsetHeight - this.list.scrollTop;\n    boxRange = this.fields.groupBy && !isNullOrUndefined(this.fixedHeaderElement) ? boxRange - this.fixedHeaderElement.offsetHeight : boxRange;\n    if (activeIndex === 0) {\n      this.list.scrollTop = 0;\n    } else if (nextBottom > currentOffset) {\n      this.list.scrollTop = nextOffset;\n    } else if (!(boxRange > 0 && this.list.offsetHeight > boxRange)) {\n      this.list.scrollTop = nextOffset;\n    }\n  };\n  MultiSelect.prototype.scrollTop = function (selectedLI, activeIndex) {\n    var nextOffset = selectedLI.offsetTop - this.list.scrollTop;\n    nextOffset = this.fields.groupBy && !isUndefined(this.fixedHeaderElement) ? nextOffset - this.fixedHeaderElement.offsetHeight : nextOffset;\n    var boxRange = selectedLI.offsetTop + selectedLI.offsetHeight - this.list.scrollTop;\n    if (activeIndex === 0) {\n      this.list.scrollTop = 0;\n    } else if (nextOffset < 0) {\n      this.list.scrollTop = this.list.scrollTop + nextOffset;\n    } else if (!(boxRange > 0 && this.list.offsetHeight > boxRange)) {\n      this.list.scrollTop = selectedLI.offsetTop - (this.fields.groupBy && !isUndefined(this.fixedHeaderElement) ? this.fixedHeaderElement.offsetHeight : 0);\n    }\n  };\n  MultiSelect.prototype.selectListByKey = function (e) {\n    var li = this.list.querySelector('li.' + dropDownBaseClasses.focus);\n    var limit = this.value && this.value.length ? this.value.length : 0;\n    var target;\n    if (li !== null) {\n      e.preventDefault();\n      if (li.classList.contains('e-active')) {\n        limit = limit - 1;\n      }\n      if (this.isValidLI(li) && limit < this.maximumSelectionLength) {\n        this.updateListSelection(li, e);\n        this.addListFocus(li);\n        if (this.mode === 'CheckBox') {\n          this.updateDelimView();\n          this.updateDelimeter(this.delimiterChar, e);\n          this.refreshInputHight();\n          this.checkPlaceholderSize();\n          if (this.enableGroupCheckBox && !isNullOrUndefined(this.fields.groupBy)) {\n            target = li.firstElementChild.lastElementChild;\n            this.findGroupStart(target);\n            this.deselectHeader();\n          }\n        } else {\n          this.updateDelimeter(this.delimiterChar, e);\n        }\n        this.makeTextBoxEmpty();\n        if (this.mode !== 'CheckBox') {\n          this.refreshListItems(li.textContent);\n        }\n        if (!this.changeOnBlur) {\n          this.updateValueState(e, this.value, this.tempValues);\n        }\n        this.refreshPopup();\n      } else {\n        if (!this.isValidLI(li) && limit < this.maximumSelectionLength) {\n          target = li.firstElementChild.lastElementChild;\n          if (target.classList.contains('e-check')) {\n            this.selectAllItem(false, e, li);\n          } else {\n            this.selectAllItem(true, e, li);\n          }\n        }\n      }\n      this.refreshSelection();\n      if (this.closePopupOnSelect) {\n        this.hidePopup(e);\n      }\n    }\n    var selectAllParent = document.getElementsByClassName('e-selectall-parent')[0];\n    if (selectAllParent && selectAllParent.classList.contains('e-item-focus')) {\n      var selectAllCheckBox = selectAllParent.childNodes[0];\n      if (!selectAllCheckBox.classList.contains('e-check')) {\n        selectAllCheckBox.classList.add('e-check');\n        var args = {\n          module: 'CheckBoxSelection',\n          enable: this.mode === 'CheckBox',\n          value: 'check',\n          name: 'checkSelectAll'\n        };\n        this.notify('checkSelectAll', args);\n        this.selectAllItem(true, e, li);\n      } else {\n        selectAllCheckBox.classList.remove('e-check');\n        var args = {\n          module: 'CheckBoxSelection',\n          enable: this.mode === 'CheckBox',\n          value: 'check',\n          name: 'checkSelectAll'\n        };\n        this.notify('checkSelectAll', args);\n        this.selectAllItem(false, e, li);\n      }\n    }\n    this.refreshPlaceHolder();\n  };\n  MultiSelect.prototype.refreshListItems = function (data) {\n    if ((this.allowFiltering || this.mode === 'CheckBox' && this.enableSelectionOrder === true || this.allowCustomValue) && this.mainList && this.listData) {\n      var list = this.mainList.cloneNode ? this.mainList.cloneNode(true) : this.mainList;\n      this.onActionComplete(list, this.mainData);\n      this.focusAtLastListItem(data);\n      if (this.value && this.value.length) {\n        this.refreshSelection();\n      }\n    } else if (!isNullOrUndefined(this.fields.groupBy) && this.value && this.value.length) {\n      this.refreshSelection();\n    }\n  };\n  MultiSelect.prototype.removeSelectedChip = function (e) {\n    var selectedElem = this.chipCollectionWrapper.querySelector('span.' + CHIP_SELECTED);\n    var temp;\n    if (selectedElem !== null) {\n      if (!isNullOrUndefined(this.value)) {\n        this.tempValues = this.value.slice();\n      }\n      temp = selectedElem.nextElementSibling;\n      if (temp !== null) {\n        this.removeChipSelection();\n        this.addChipSelection(temp, e);\n      }\n      this.removeValue(selectedElem.getAttribute('data-value'), e);\n      this.makeTextBoxEmpty();\n    }\n    if (this.closePopupOnSelect) {\n      this.hidePopup(e);\n    }\n    this.checkPlaceholderSize();\n  };\n  MultiSelect.prototype.moveByTop = function (state) {\n    var elements = this.list.querySelectorAll('li.' + dropDownBaseClasses.li);\n    var index;\n    if (elements.length > 1) {\n      this.removeFocus();\n      index = state ? 0 : elements.length - 1;\n      this.addListFocus(elements[index]);\n      this.scrollBottom(elements[index], index);\n    }\n    this.updateAriaAttribute();\n  };\n  MultiSelect.prototype.clickHandler = function (e) {\n    var targetElement = e.target;\n    var filterInputClassName = targetElement.className;\n    var selectAllParent = document.getElementsByClassName('e-selectall-parent')[0];\n    if ((filterInputClassName === 'e-input-filter e-input' || filterInputClassName === 'e-input-group e-control-wrapper e-input-focus') && selectAllParent.classList.contains('e-item-focus')) {\n      selectAllParent.classList.remove('e-item-focus');\n    }\n  };\n  MultiSelect.prototype.moveByList = function (position) {\n    if (this.list) {\n      var elements = this.list.querySelectorAll('li.' + dropDownBaseClasses.li + ':not(.' + HIDE_LIST + ')' + ':not(.e-reorder-hide)');\n      if (this.mode === 'CheckBox' && this.enableGroupCheckBox && !isNullOrUndefined(this.fields.groupBy)) {\n        elements = this.list.querySelectorAll('li.' + dropDownBaseClasses.li + ',li.' + dropDownBaseClasses.group + ':not(.' + HIDE_LIST + ')' + ':not(.e-reorder-hide)');\n      }\n      var selectedElem = this.list.querySelector('li.' + dropDownBaseClasses.focus);\n      var temp = -1;\n      var selectAllParent = document.getElementsByClassName('e-selectall-parent')[0];\n      if (this.mode === 'CheckBox' && this.showSelectAll && position == 1 && !isNullOrUndefined(selectAllParent) && !selectAllParent.classList.contains('e-item-focus') && this.list.getElementsByClassName('e-item-focus').length == 0 && this.liCollections.length > 1) {\n        if (!this.focusFirstListItem && selectAllParent.classList.contains('e-item-focus')) {\n          selectAllParent.classList.remove('e-item-focus');\n        } else if (!selectAllParent.classList.contains('e-item-focus')) {\n          selectAllParent.classList.add('e-item-focus');\n        }\n      } else if (elements.length) {\n        if (this.mode === 'CheckBox' && this.showSelectAll && !isNullOrUndefined(selectAllParent && position == -1)) {\n          if (!this.focusFirstListItem && selectAllParent.classList.contains('e-item-focus')) {\n            selectAllParent.classList.remove('e-item-focus');\n          } else if (this.focusFirstListItem && !selectAllParent.classList.contains('e-item-focus')) {\n            selectAllParent.classList.add('e-item-focus');\n          }\n        }\n        for (var index = 0; index < elements.length; index++) {\n          if (elements[index] === selectedElem) {\n            temp = index;\n            break;\n          }\n        }\n        if (position > 0) {\n          if (temp < elements.length - 1) {\n            this.removeFocus();\n            this.addListFocus(elements[++temp]);\n            this.updateCheck(elements[temp]);\n            this.scrollBottom(elements[temp], temp);\n          }\n        } else {\n          if (temp > 0) {\n            this.removeFocus();\n            this.addListFocus(elements[--temp]);\n            this.updateCheck(elements[temp]);\n            this.scrollTop(elements[temp], temp);\n          }\n        }\n      }\n    }\n  };\n  MultiSelect.prototype.updateCheck = function (element) {\n    if (this.mode === 'CheckBox' && this.enableGroupCheckBox && !isNullOrUndefined(this.fields.groupBy)) {\n      var checkElement = element.firstElementChild.lastElementChild;\n      if (checkElement.classList.contains('e-check')) {\n        element.classList.add('e-active');\n      } else {\n        element.classList.remove('e-active');\n      }\n    }\n  };\n  MultiSelect.prototype.moveBy = function (position, e) {\n    var temp;\n    var elements = this.chipCollectionWrapper.querySelectorAll('span.' + CHIP$1);\n    var selectedElem = this.chipCollectionWrapper.querySelector('span.' + CHIP_SELECTED);\n    if (selectedElem === null) {\n      if (position < 0) {\n        this.addChipSelection(elements[elements.length - 1], e);\n      }\n    } else {\n      if (position < 0) {\n        temp = selectedElem.previousElementSibling;\n        if (temp !== null) {\n          this.removeChipSelection();\n          this.addChipSelection(temp, e);\n        }\n      } else {\n        temp = selectedElem.nextElementSibling;\n        this.removeChipSelection();\n        if (temp !== null) {\n          this.addChipSelection(temp, e);\n        }\n      }\n    }\n  };\n  MultiSelect.prototype.chipClick = function (e) {\n    if (this.enabled) {\n      var elem = closest(e.target, '.' + CHIP$1);\n      this.removeChipSelection();\n      this.addChipSelection(elem, e);\n    }\n  };\n  MultiSelect.prototype.removeChipSelection = function () {\n    if (this.chipCollectionWrapper) {\n      this.removeChipFocus();\n    }\n  };\n  MultiSelect.prototype.addChipSelection = function (element, e) {\n    addClass([element], CHIP_SELECTED);\n    this.trigger('chipSelection', e);\n  };\n  MultiSelect.prototype.onChipRemove = function (e) {\n    if (e.which === 3 || e.button === 2) {\n      return;\n    }\n    if (this.enabled && !this.readonly) {\n      var element = e.target.parentElement;\n      var customVal = element.getAttribute('data-value');\n      var value = this.getFormattedValue(customVal);\n      if (this.allowCustomValue && (customVal !== 'false' && value === false || !isNullOrUndefined(value) && value.toString() === 'NaN')) {\n        value = customVal;\n      }\n      if (this.isPopupOpen() && this.mode !== 'CheckBox') {\n        this.hidePopup(e);\n      }\n      if (!this.inputFocus) {\n        this.inputElement.focus();\n      }\n      this.removeValue(value, e);\n      if (isNullOrUndefined(this.findListElement(this.list, 'li', 'data-value', value)) && this.mainList && this.listData) {\n        var list = this.mainList.cloneNode ? this.mainList.cloneNode(true) : this.mainList;\n        this.onActionComplete(list, this.mainData);\n      }\n      this.updateDelimeter(this.delimiterChar, e);\n      if (this.placeholder && this.floatLabelType === 'Never') {\n        this.makeTextBoxEmpty();\n        this.checkPlaceholderSize();\n      } else {\n        this.inputElement.value = '';\n      }\n      e.preventDefault();\n    }\n  };\n  MultiSelect.prototype.makeTextBoxEmpty = function () {\n    this.inputElement.value = '';\n    this.refreshPlaceHolder();\n  };\n  MultiSelect.prototype.refreshPlaceHolder = function () {\n    if (this.placeholder && this.floatLabelType === 'Never') {\n      if (this.value && this.value.length || !isNullOrUndefined(this.text) && this.text !== '') {\n        this.inputElement.placeholder = '';\n      } else {\n        this.inputElement.placeholder = encodePlaceholder(this.placeholder);\n      }\n    } else {\n      this.setFloatLabelType();\n    }\n    this.expandTextbox();\n  };\n  MultiSelect.prototype.removeAllItems = function (value, eve, isClearAll, element, mainElement) {\n    var index = this.value.indexOf(value);\n    var removeVal = this.value.slice(0);\n    removeVal.splice(index, 1);\n    this.setProperties({\n      value: [].concat([], removeVal)\n    }, true);\n    element.setAttribute('aria-selected', 'false');\n    var className = this.hideSelectedItem ? HIDE_LIST : dropDownBaseClasses.selected;\n    removeClass([element], className);\n    this.notify('activeList', {\n      module: 'CheckBoxSelection',\n      enable: this.mode === 'CheckBox',\n      li: element,\n      e: this,\n      index: index\n    });\n    this.invokeCheckboxSelection(element, eve, isClearAll);\n    this.updateMainList(true, value, mainElement);\n    this.updateChipStatus();\n  };\n  MultiSelect.prototype.invokeCheckboxSelection = function (element, eve, isClearAll) {\n    this.notify('updatelist', {\n      module: 'CheckBoxSelection',\n      enable: this.mode === 'CheckBox',\n      li: element,\n      e: eve\n    });\n    this.updateAriaActiveDescendant();\n    if (this.value && this.value.length !== this.mainData.length && this.mode === 'CheckBox' && this.showSelectAll && !(this.isSelectAll || isClearAll)) {\n      this.notify('checkSelectAll', {\n        module: 'CheckBoxSelection',\n        enable: this.mode === 'CheckBox',\n        value: 'uncheck'\n      });\n    }\n  };\n  MultiSelect.prototype.removeValue = function (value, eve, length, isClearAll) {\n    var _this = this;\n    var index = this.value.indexOf(this.getFormattedValue(value));\n    if (index === -1 && this.allowCustomValue && !isNullOrUndefined(value)) {\n      index = this.value.indexOf(value.toString());\n    }\n    var targetEle = eve && eve.target;\n    isClearAll = isClearAll || targetEle && targetEle.classList.contains('e-close-hooker') ? true : null;\n    var className = this.hideSelectedItem ? HIDE_LIST : dropDownBaseClasses.selected;\n    if (index !== -1) {\n      var element_1 = this.findListElement(this.list, 'li', 'data-value', value);\n      var val_1 = this.getDataByValue(value);\n      var eventArgs = {\n        e: eve,\n        item: element_1,\n        itemData: val_1,\n        isInteracted: eve ? true : false,\n        cancel: false\n      };\n      this.trigger('removing', eventArgs, function (eventArgs) {\n        if (eventArgs.cancel) {\n          _this.removeIndex++;\n        } else {\n          var removeVal = _this.value.slice(0);\n          removeVal.splice(index, 1);\n          _this.setProperties({\n            value: [].concat([], removeVal)\n          }, true);\n          if (element_1 !== null) {\n            var hideElement = _this.findListElement(_this.mainList, 'li', 'data-value', value);\n            element_1.setAttribute('aria-selected', 'false');\n            removeClass([element_1], className);\n            if (hideElement) {\n              hideElement.setAttribute('aria-selected', 'false');\n              removeClass([element_1, hideElement], className);\n            }\n            _this.notify('activeList', {\n              module: 'CheckBoxSelection',\n              enable: _this.mode === 'CheckBox',\n              li: element_1,\n              e: _this,\n              index: index\n            });\n            _this.invokeCheckboxSelection(element_1, eve, isClearAll);\n          }\n          if (_this.hideSelectedItem && _this.fields.groupBy && element_1) {\n            _this.hideGroupItem(value);\n          }\n          if (_this.hideSelectedItem && _this.fixedHeaderElement && _this.fields.groupBy && _this.mode !== 'CheckBox' && _this.isPopupOpen()) {\n            _super.prototype.scrollStop.call(_this);\n          }\n          _this.updateMainList(true, value);\n          _this.removeChip(value);\n          _this.updateChipStatus();\n          var limit = _this.value && _this.value.length ? _this.value.length : 0;\n          if (limit < _this.maximumSelectionLength) {\n            var collection = _this.list.querySelectorAll('li.' + dropDownBaseClasses.li + ':not(.e-active)');\n            removeClass(collection, 'e-disable');\n          }\n          _this.trigger('removed', eventArgs);\n          var targetEle_1 = eve && eve.currentTarget;\n          var isSelectAll = targetEle_1 && targetEle_1.classList.contains('e-selectall-parent') ? true : null;\n          if (!_this.changeOnBlur && !isClearAll && eve && length && !isSelectAll) {\n            _this.updateValueState(eve, _this.value, _this.tempValues);\n          }\n          if (length) {\n            _this.selectAllEventData.push(val_1);\n            _this.selectAllEventEle.push(element_1);\n          }\n          if (length === 1) {\n            if (!_this.changeOnBlur) {\n              _this.updateValueState(eve, _this.value, _this.tempValues);\n            }\n            var args = {\n              event: eve,\n              items: _this.selectAllEventEle,\n              itemData: _this.selectAllEventData,\n              isInteracted: eve ? true : false,\n              isChecked: false\n            };\n            _this.trigger('selectedAll', args);\n            _this.selectAllEventData = [];\n            _this.selectAllEventEle = [];\n          }\n          if (isClearAll && (length === 1 || length === null)) {\n            _this.clearAllCallback(eve, isClearAll);\n          }\n        }\n      });\n    }\n  };\n  MultiSelect.prototype.updateMainList = function (state, value, mainElement) {\n    if (this.allowFiltering || this.mode === 'CheckBox') {\n      var element2 = mainElement ? mainElement : this.findListElement(this.mainList, 'li', 'data-value', value);\n      if (element2) {\n        if (state) {\n          element2.setAttribute('aria-selected', 'false');\n          removeClass([element2], this.hideSelectedItem ? HIDE_LIST : dropDownBaseClasses.selected);\n          if (this.mode === 'CheckBox') {\n            removeClass([element2.firstElementChild.lastElementChild], 'e-check');\n          }\n        } else {\n          element2.setAttribute('aria-selected', 'true');\n          addClass([element2], this.hideSelectedItem ? HIDE_LIST : dropDownBaseClasses.selected);\n          if (this.mode === 'CheckBox') {\n            addClass([element2.firstElementChild.lastElementChild], 'e-check');\n          }\n        }\n      }\n    }\n  };\n  MultiSelect.prototype.removeChip = function (value) {\n    if (this.chipCollectionWrapper) {\n      var element = this.findListElement(this.chipCollectionWrapper, 'span', 'data-value', value);\n      if (element) {\n        remove(element);\n      }\n    }\n  };\n  MultiSelect.prototype.setWidth = function (width) {\n    if (!isNullOrUndefined(width)) {\n      if (typeof width === 'number') {\n        this.overAllWrapper.style.width = formatUnit(width);\n      } else if (typeof width === 'string') {\n        this.overAllWrapper.style.width = width.match(/px|%|em/) ? width : formatUnit(width);\n      }\n    }\n  };\n  MultiSelect.prototype.updateChipStatus = function () {\n    if (this.value && this.value.length) {\n      if (!isNullOrUndefined(this.chipCollectionWrapper)) {\n        this.chipCollectionWrapper.style.display = '';\n      }\n      if (this.mode === 'Delimiter' || this.mode === 'CheckBox') {\n        this.showDelimWrapper();\n      }\n      this.showOverAllClear();\n    } else {\n      if (!isNullOrUndefined(this.chipCollectionWrapper)) {\n        this.chipCollectionWrapper.style.display = 'none';\n      }\n      if (!isNullOrUndefined(this.delimiterWrapper)) {\n        this.delimiterWrapper.style.display = 'none';\n      }\n      this.hideOverAllClear();\n    }\n  };\n  MultiSelect.prototype.addValue = function (value, text, eve) {\n    if (!this.value) {\n      this.value = [];\n    }\n    if (this.value.indexOf(value) < 0) {\n      this.setProperties({\n        value: [].concat([], this.value, [value])\n      }, true);\n    }\n    var element = this.findListElement(this.list, 'li', 'data-value', value);\n    this.removeFocus();\n    if (element) {\n      this.addListFocus(element);\n      this.addListSelection(element);\n    }\n    if (this.mode !== 'Delimiter' && this.mode !== 'CheckBox') {\n      this.addChip(text, value, eve);\n    }\n    if (this.hideSelectedItem && this.fields.groupBy) {\n      this.hideGroupItem(value);\n    }\n    this.updateChipStatus();\n    this.checkMaxSelection();\n  };\n  MultiSelect.prototype.checkMaxSelection = function () {\n    var limit = this.value && this.value.length ? this.value.length : 0;\n    if (limit === this.maximumSelectionLength) {\n      var collection = this.list.querySelectorAll('li.' + dropDownBaseClasses.li + ':not(.e-active)');\n      addClass(collection, 'e-disable');\n    }\n  };\n  MultiSelect.prototype.dispatchSelect = function (value, eve, element, isNotTrigger, length) {\n    var _this = this;\n    var list = this.listData;\n    if (this.initStatus && !isNotTrigger) {\n      var val_2 = this.getDataByValue(value);\n      var eventArgs = {\n        e: eve,\n        item: element,\n        itemData: val_2,\n        isInteracted: eve ? true : false,\n        cancel: false\n      };\n      this.trigger('select', eventArgs, function (eventArgs) {\n        if (!eventArgs.cancel) {\n          if (length) {\n            _this.selectAllEventData.push(val_2);\n            _this.selectAllEventEle.push(element);\n          }\n          if (length === 1) {\n            var args = {\n              event: eve,\n              items: _this.selectAllEventEle,\n              itemData: _this.selectAllEventData,\n              isInteracted: eve ? true : false,\n              isChecked: true\n            };\n            _this.trigger('selectedAll', args);\n            _this.selectAllEventData = [];\n          }\n          if (_this.allowCustomValue && _this.isServerRendered && _this.listData !== list) {\n            _this.listData = list;\n          }\n          _this.updateListSelectEventCallback(value, element, eve);\n          if (_this.hideSelectedItem && _this.fixedHeaderElement && _this.fields.groupBy && _this.mode !== 'CheckBox') {\n            _super.prototype.scrollStop.call(_this);\n          }\n        }\n      });\n    }\n  };\n  MultiSelect.prototype.addChip = function (text, value, e) {\n    if (this.chipCollectionWrapper) {\n      this.getChip(text, value, e);\n    }\n  };\n  MultiSelect.prototype.removeChipFocus = function () {\n    var elements = this.chipCollectionWrapper.querySelectorAll('span.' + CHIP$1 + '.' + CHIP_SELECTED);\n    removeClass(elements, CHIP_SELECTED);\n    if (Browser.isDevice) {\n      var closeElements = this.chipCollectionWrapper.querySelectorAll('span.' + CHIP_CLOSE$1.split(' ')[0]);\n      for (var index = 0; index < closeElements.length; index++) {\n        closeElements[index].style.display = 'none';\n      }\n    }\n  };\n  MultiSelect.prototype.onMobileChipInteraction = function (e) {\n    var chipElem = closest(e.target, '.' + CHIP$1);\n    var chipClose = chipElem.querySelector('span.' + CHIP_CLOSE$1.split(' ')[0]);\n    if (this.enabled && !this.readonly) {\n      if (!chipElem.classList.contains(CHIP_SELECTED)) {\n        this.removeChipFocus();\n        chipClose.style.display = '';\n        chipElem.classList.add(CHIP_SELECTED);\n      }\n      this.refreshPopup();\n      e.preventDefault();\n    }\n  };\n  MultiSelect.prototype.multiCompiler = function (multiselectTemplate) {\n    var checkTemplate = false;\n    if (typeof multiselectTemplate !== 'function' && multiselectTemplate) {\n      try {\n        checkTemplate = selectAll(multiselectTemplate, document).length ? true : false;\n      } catch (exception) {\n        checkTemplate = false;\n      }\n    }\n    return checkTemplate;\n  };\n  MultiSelect.prototype.encodeHtmlEntities = function (input) {\n    return input.replace(/[\\u00A0-\\u9999<>&]/g, function (match) {\n      return \"&#\" + match.charCodeAt(0) + \";\";\n    });\n  };\n  MultiSelect.prototype.getChip = function (data, value, e) {\n    var _this = this;\n    var itemData = {\n      text: value,\n      value: value\n    };\n    var chip = this.createElement('span', {\n      className: CHIP$1,\n      attrs: {\n        'data-value': value,\n        'title': data\n      }\n    });\n    var compiledString;\n    var chipContent = this.createElement('span', {\n      className: CHIP_CONTENT$1\n    });\n    var chipClose = this.createElement('span', {\n      className: CHIP_CLOSE$1\n    });\n    if (this.mainData) {\n      itemData = this.getDataByValue(value);\n    }\n    if (this.valueTemplate && !isNullOrUndefined(itemData)) {\n      var valuecheck = this.multiCompiler(this.valueTemplate);\n      if (typeof this.valueTemplate !== 'function' && valuecheck) {\n        compiledString = compile(select(this.valueTemplate, document).innerHTML.trim());\n      } else {\n        compiledString = compile(this.valueTemplate);\n      }\n      // eslint-disable-next-line\n      var valueCompTemp = compiledString(itemData, this, 'valueTemplate', this.valueTemplateId, this.isStringTemplate, null, chipContent);\n      if (valueCompTemp && valueCompTemp.length > 0) {\n        append(valueCompTemp, chipContent);\n      }\n      this.renderReactTemplates();\n    } else if (this.enableHtmlSanitizer) {\n      chipContent.innerText = data;\n    } else {\n      chipContent.innerHTML = this.encodeHtmlEntities(data);\n    }\n    chip.appendChild(chipContent);\n    var eventArgs = {\n      isInteracted: e ? true : false,\n      itemData: itemData,\n      e: e,\n      setClass: function (classes) {\n        addClass([chip], classes);\n      },\n      cancel: false\n    };\n    this.isPreventChange = this.isAngular && this.preventChange;\n    this.trigger('tagging', eventArgs, function (eventArgs) {\n      if (!eventArgs.cancel) {\n        if (Browser.isDevice) {\n          chip.classList.add(MOBILE_CHIP);\n          append([chipClose], chip);\n          chipClose.style.display = 'none';\n          EventHandler.add(chip, 'click', _this.onMobileChipInteraction, _this);\n        } else {\n          EventHandler.add(chip, 'mousedown', _this.chipClick, _this);\n          if (_this.showClearButton) {\n            chip.appendChild(chipClose);\n          }\n        }\n        EventHandler.add(chipClose, 'mousedown', _this.onChipRemove, _this);\n        _this.chipCollectionWrapper.appendChild(chip);\n        if (!_this.changeOnBlur && e) {\n          _this.updateValueState(e, _this.value, _this.tempValues);\n        }\n      }\n    });\n  };\n  MultiSelect.prototype.calcPopupWidth = function () {\n    var width = formatUnit(this.popupWidth);\n    if (width.indexOf('%') > -1) {\n      var inputWidth = this.componentWrapper.offsetWidth * parseFloat(width) / 100;\n      width = inputWidth.toString() + 'px';\n    }\n    return width;\n  };\n  MultiSelect.prototype.mouseIn = function () {\n    if (this.enabled && !this.readonly) {\n      this.showOverAllClear();\n    }\n  };\n  MultiSelect.prototype.mouseOut = function () {\n    if (!this.inputFocus) {\n      this.overAllClear.style.display = 'none';\n    }\n  };\n  MultiSelect.prototype.listOption = function (dataSource, fields) {\n    var iconCss = isNullOrUndefined(fields.iconCss) ? false : true;\n    var fieldProperty = isNullOrUndefined(fields.properties) ? fields : fields.properties;\n    this.listCurrentOptions = fields.text !== null || fields.value !== null ? {\n      fields: fieldProperty,\n      showIcon: iconCss,\n      ariaAttributes: {\n        groupItemRole: 'presentation'\n      }\n    } : {\n      fields: {\n        value: 'text'\n      }\n    };\n    extend(this.listCurrentOptions, this.listCurrentOptions, fields, true);\n    if (this.mode === 'CheckBox') {\n      this.notify('listoption', {\n        module: 'CheckBoxSelection',\n        enable: this.mode === 'CheckBox',\n        dataSource: dataSource,\n        fieldProperty: fieldProperty\n      });\n    }\n    return this.listCurrentOptions;\n  };\n  MultiSelect.prototype.renderPopup = function () {\n    var _this = this;\n    if (!this.list) {\n      _super.prototype.render.call(this);\n    }\n    if (!this.popupObj) {\n      if (!isNullOrUndefined(this.popupWrapper)) {\n        document.body.appendChild(this.popupWrapper);\n        var checkboxFilter = this.popupWrapper.querySelector('.' + FILTERPARENT);\n        if (this.mode === 'CheckBox' && !this.allowFiltering && checkboxFilter && this.filterParent) {\n          checkboxFilter.remove();\n          this.filterParent = null;\n        }\n        var overAllHeight = parseInt(this.popupHeight, 10);\n        this.popupWrapper.style.visibility = 'hidden';\n        if (this.headerTemplate) {\n          this.setHeaderTemplate();\n          overAllHeight -= this.header.offsetHeight;\n        }\n        append([this.list], this.popupWrapper);\n        if (this.footerTemplate) {\n          this.setFooterTemplate();\n          overAllHeight -= this.footer.offsetHeight;\n        }\n        if (this.mode === 'CheckBox' && this.showSelectAll) {\n          this.notify('selectAll', {\n            module: 'CheckBoxSelection',\n            enable: this.mode === 'CheckBox'\n          });\n          overAllHeight -= this.selectAllHeight;\n        } else if (this.mode === 'CheckBox' && !this.showSelectAll && !this.headerTemplate && !this.footerTemplate) {\n          this.notify('selectAll', {\n            module: 'CheckBoxSelection',\n            enable: this.mode === 'CheckBox'\n          });\n          overAllHeight = parseInt(this.popupHeight, 10);\n        } else if (this.mode === 'CheckBox' && !this.showSelectAll) {\n          this.notify('selectAll', {\n            module: 'CheckBoxSelection',\n            enable: this.mode === 'CheckBox'\n          });\n          overAllHeight = parseInt(this.popupHeight, 10);\n          if (this.headerTemplate && this.header) {\n            overAllHeight -= this.header.offsetHeight;\n          }\n          if (this.footerTemplate && this.footer) {\n            overAllHeight -= this.footer.offsetHeight;\n          }\n        }\n        if (this.mode === 'CheckBox') {\n          var args = {\n            module: 'CheckBoxSelection',\n            enable: this.mode === 'CheckBox',\n            popupElement: this.popupWrapper\n          };\n          if (this.allowFiltering) {\n            this.notify('searchBox', args);\n            overAllHeight -= this.searchBoxHeight;\n          }\n          addClass([this.popupWrapper], 'e-checkbox');\n        }\n        if (this.popupHeight !== 'auto') {\n          this.list.style.maxHeight = formatUnit(overAllHeight);\n          this.popupWrapper.style.maxHeight = formatUnit(this.popupHeight);\n        } else {\n          this.list.style.maxHeight = formatUnit(this.popupHeight);\n        }\n        this.popupObj = new Popup(this.popupWrapper, {\n          width: this.calcPopupWidth(),\n          targetType: 'relative',\n          position: this.enableRtl ? {\n            X: 'right',\n            Y: 'bottom'\n          } : {\n            X: 'left',\n            Y: 'bottom'\n          },\n          relateTo: this.overAllWrapper,\n          collision: this.enableRtl ? {\n            X: 'fit',\n            Y: 'flip'\n          } : {\n            X: 'flip',\n            Y: 'flip'\n          },\n          offsetY: 1,\n          enableRtl: this.enableRtl,\n          zIndex: this.zIndex,\n          close: function () {\n            if (_this.popupObj.element.parentElement) {\n              _this.popupObj.unwireScrollEvents();\n              // For restrict the page scrolling in safari browser\n              var checkboxFilterInput = _this.popupWrapper.querySelector('.' + FILTERINPUT);\n              if (_this.mode === 'CheckBox' && checkboxFilterInput && document.activeElement === checkboxFilterInput) {\n                checkboxFilterInput.blur();\n              }\n              detach(_this.popupObj.element);\n            }\n          },\n          open: function () {\n            _this.popupObj.resolveCollision();\n            if (!_this.isFirstClick) {\n              var ulElement = _this.list.querySelector('ul');\n              if (ulElement) {\n                if (!(_this.mode !== 'CheckBox' && (_this.allowFiltering || _this.allowCustomValue) && _this.targetElement().trim() !== '')) {\n                  _this.mainList = ulElement.cloneNode ? ulElement.cloneNode(true) : ulElement;\n                }\n              }\n              _this.isFirstClick = true;\n            }\n            _this.popupObj.wireScrollEvents();\n            if (!(_this.mode !== 'CheckBox' && (_this.allowFiltering || _this.allowCustomValue) && _this.targetElement().trim() !== '')) {\n              _this.loadTemplate();\n            }\n            _this.setScrollPosition();\n            if (_this.allowFiltering) {\n              _this.notify('inputFocus', {\n                module: 'CheckBoxSelection',\n                enable: _this.mode === 'CheckBox',\n                value: 'focus'\n              });\n            }\n          },\n          targetExitViewport: function () {\n            if (!Browser.isDevice) {\n              _this.hidePopup();\n            }\n          }\n        });\n        if (this.mode === 'CheckBox' && Browser.isDevice && this.allowFiltering) {\n          this.notify('deviceSearchBox', {\n            module: 'CheckBoxSelection',\n            enable: this.mode === 'CheckBox'\n          });\n        }\n        this.popupObj.close();\n        this.popupWrapper.style.visibility = '';\n      }\n    }\n  };\n  MultiSelect.prototype.setHeaderTemplate = function () {\n    var compiledString;\n    if (this.header) {\n      this.header.remove();\n    }\n    this.header = this.createElement('div');\n    addClass([this.header], HEADER$1);\n    var headercheck = this.multiCompiler(this.headerTemplate);\n    if (typeof this.headerTemplate !== 'function' && headercheck) {\n      compiledString = compile(select(this.headerTemplate, document).innerHTML.trim());\n    } else {\n      compiledString = compile(this.headerTemplate);\n    }\n    // eslint-disable-next-line\n    var elements = compiledString({}, this, 'headerTemplate', this.headerTemplateId, this.isStringTemplate, null, this.header);\n    if (elements && elements.length > 0) {\n      append(elements, this.header);\n    }\n    if (this.mode === 'CheckBox' && this.showSelectAll) {\n      prepend([this.header], this.popupWrapper);\n    } else {\n      append([this.header], this.popupWrapper);\n    }\n    EventHandler.add(this.header, 'mousedown', this.onListMouseDown, this);\n  };\n  MultiSelect.prototype.setFooterTemplate = function () {\n    var compiledString;\n    if (this.footer) {\n      this.footer.remove();\n    }\n    this.footer = this.createElement('div');\n    addClass([this.footer], FOOTER$1);\n    var footercheck = this.multiCompiler(this.footerTemplate);\n    if (typeof this.footerTemplate !== 'function' && footercheck) {\n      compiledString = compile(select(this.footerTemplate, document).innerHTML.trim());\n    } else {\n      compiledString = compile(this.footerTemplate);\n    }\n    // eslint-disable-next-line\n    var elements = compiledString({}, this, 'footerTemplate', this.footerTemplateId, this.isStringTemplate, null, this.footer);\n    if (elements && elements.length > 0) {\n      append(elements, this.footer);\n    }\n    append([this.footer], this.popupWrapper);\n    EventHandler.add(this.footer, 'mousedown', this.onListMouseDown, this);\n  };\n  MultiSelect.prototype.clearAll = function (e) {\n    if (this.enabled && !this.readonly) {\n      var temp = void 0;\n      if (this.value && this.value.length > 0) {\n        var liElement = this.list && this.list.querySelectorAll('li.e-list-item');\n        if (liElement && liElement.length > 0) {\n          this.selectAllItems(false, e);\n        } else {\n          this.removeIndex = 0;\n          for (temp = this.value[this.removeIndex]; this.removeIndex < this.value.length; temp = this.value[this.removeIndex]) {\n            this.removeValue(temp, e, null, true);\n          }\n        }\n        this.selectedElementID = null;\n        this.inputElement.removeAttribute('aria-activedescendant');\n      } else {\n        this.clearAllCallback(e);\n      }\n    }\n  };\n  MultiSelect.prototype.clearAllCallback = function (e, isClearAll) {\n    var tempValues = this.value ? this.value.slice() : [];\n    if (this.mainList && this.listData && (this.allowFiltering && this.mode !== 'CheckBox' || this.allowCustomValue)) {\n      var list = this.mainList.cloneNode ? this.mainList.cloneNode(true) : this.mainList;\n      this.onActionComplete(list, this.mainData);\n    }\n    this.focusAtFirstListItem();\n    this.updateDelimeter(this.delimiterChar, e);\n    if (this.mode !== 'Box' && (!this.inputFocus || this.mode === 'CheckBox')) {\n      this.updateDelimView();\n    }\n    if (this.inputElement.value !== '') {\n      this.makeTextBoxEmpty();\n      this.search(null);\n    }\n    this.checkPlaceholderSize();\n    if (this.isPopupOpen()) {\n      this.refreshPopup();\n    }\n    if (!this.inputFocus) {\n      if (this.changeOnBlur) {\n        this.updateValueState(e, this.value, tempValues);\n      }\n      if (this.mode !== 'CheckBox') {\n        this.inputElement.focus();\n      }\n    }\n    if (this.mode === 'CheckBox') {\n      this.refreshPlaceHolder();\n      this.refreshInputHight();\n      if (this.changeOnBlur && isClearAll && (isNullOrUndefined(this.value) || this.value.length === 0)) {\n        this.updateValueState(e, this.value, this.tempValues);\n      }\n    }\n    if (!this.changeOnBlur && isClearAll && (isNullOrUndefined(this.value) || this.value.length === 0)) {\n      this.updateValueState(e, this.value, this.tempValues);\n    }\n    if (this.mode === 'CheckBox' && this.enableGroupCheckBox && !isNullOrUndefined(this.fields.groupBy)) {\n      this.updateListItems(this.list.querySelectorAll('li.e-list-item'), this.mainList.querySelectorAll('li.e-list-item'));\n    }\n    e.preventDefault();\n  };\n  MultiSelect.prototype.windowResize = function () {\n    this.refreshPopup();\n    if ((!this.inputFocus || this.mode === 'CheckBox') && this.viewWrapper && this.viewWrapper.parentElement) {\n      this.updateDelimView();\n    }\n  };\n  MultiSelect.prototype.resetValueHandler = function (e) {\n    var formElement = closest(this.inputElement, 'form');\n    if (formElement && e.target === formElement) {\n      var textVal = this.element.tagName === this.getNgDirective() ? null : this.element.getAttribute('data-initial-value');\n      this.text = textVal;\n    }\n  };\n  MultiSelect.prototype.wireEvent = function () {\n    EventHandler.add(this.componentWrapper, 'mousedown', this.wrapperClick, this);\n    EventHandler.add(window, 'resize', this.windowResize, this);\n    EventHandler.add(this.inputElement, 'focus', this.focusInHandler, this);\n    EventHandler.add(this.inputElement, 'keydown', this.onKeyDown, this);\n    EventHandler.add(this.inputElement, 'keyup', this.keyUp, this);\n    if (this.mode !== 'CheckBox') {\n      EventHandler.add(this.inputElement, 'input', this.onInput, this);\n    }\n    EventHandler.add(this.inputElement, 'blur', this.onBlurHandler, this);\n    EventHandler.add(this.componentWrapper, 'mouseover', this.mouseIn, this);\n    var formElement = closest(this.inputElement, 'form');\n    if (formElement) {\n      EventHandler.add(formElement, 'reset', this.resetValueHandler, this);\n    }\n    EventHandler.add(this.componentWrapper, 'mouseout', this.mouseOut, this);\n    EventHandler.add(this.overAllClear, 'mouseup', this.clearAll, this);\n    EventHandler.add(this.inputElement, 'paste', this.pasteHandler, this);\n  };\n  MultiSelect.prototype.onInput = function (e) {\n    if (this.keyDownStatus) {\n      this.isValidKey = true;\n    } else {\n      this.isValidKey = false;\n    }\n    this.keyDownStatus = false;\n    // For Filtering works in mobile firefox\n    if (Browser.isDevice && Browser.info.name === 'mozilla') {\n      this.search(e);\n    }\n  };\n  MultiSelect.prototype.pasteHandler = function (event) {\n    var _this = this;\n    setTimeout(function () {\n      _this.expandTextbox();\n      _this.search(event);\n    });\n  };\n  MultiSelect.prototype.search = function (e) {\n    var _this = this;\n    this.resetFilteredData = true;\n    if (!isNullOrUndefined(e)) {\n      this.keyCode = e.keyCode;\n    }\n    if (!this.isPopupOpen() && this.openOnClick) {\n      this.showPopup(e);\n    }\n    this.openClick(e);\n    if (this.checkTextLength() && !this.allowFiltering && !isNullOrUndefined(e) && e.keyCode !== 8) {\n      this.focusAtFirstListItem();\n    } else {\n      var text = this.targetElement();\n      if (this.allowFiltering) {\n        var eventArgs_1 = {\n          preventDefaultAction: false,\n          text: this.targetElement(),\n          updateData: function (dataSource, query, fields) {\n            if (eventArgs_1.cancel) {\n              return;\n            }\n            _this.isFiltered = true;\n            _this.remoteFilterAction = true;\n            _this.dataUpdater(dataSource, query, fields);\n          },\n          event: e,\n          cancel: false\n        };\n        this.trigger('filtering', eventArgs_1, function (eventArgs) {\n          if (!eventArgs.cancel) {\n            if (!_this.isFiltered && !eventArgs.preventDefaultAction) {\n              _this.filterAction = true;\n              _this.dataUpdater(_this.dataSource, null, _this.fields);\n            }\n          }\n        });\n      } else if (this.allowCustomValue) {\n        var query = new Query();\n        query = text !== '' ? query.where(this.fields.text, 'startswith', text, this.ignoreCase, this.ignoreAccent) : query;\n        this.dataUpdater(this.mainData, query, this.fields);\n      } else {\n        var liCollections = this.list.querySelectorAll('li.' + dropDownBaseClasses.li + ':not(.e-hide-listitem)');\n        var activeElement = Search(this.targetElement(), liCollections, 'StartsWith', this.ignoreCase);\n        if (activeElement && activeElement.item !== null) {\n          this.addListFocus(activeElement.item);\n          this.list.scrollTop = activeElement.item.offsetHeight * activeElement.index;\n        } else if (this.targetElement() !== '') {\n          this.removeFocus();\n        } else {\n          this.focusAtFirstListItem();\n        }\n      }\n    }\n  };\n  MultiSelect.prototype.preRender = function () {\n    if (this.allowFiltering === null) {\n      this.allowFiltering = this.mode === 'CheckBox' ? true : false;\n    }\n    this.initializeData();\n    this.updateDataAttribute(this.htmlAttributes);\n    _super.prototype.preRender.call(this);\n  };\n  MultiSelect.prototype.getLocaleName = function () {\n    return 'multi-select';\n  };\n  MultiSelect.prototype.initializeData = function () {\n    this.mainListCollection = [];\n    this.beforePopupOpen = false;\n    this.filterAction = false;\n    this.remoteFilterAction = false;\n    this.isFirstClick = false;\n    this.mobFilter = true;\n    this.isFiltered = false;\n    this.focused = true;\n    this.initial = true;\n    this.backCommand = true;\n  };\n  MultiSelect.prototype.updateData = function (delimiterChar, e) {\n    var data = '';\n    var delim = this.mode === 'Delimiter' || this.mode === 'CheckBox';\n    var text = [];\n    var temp;\n    var tempData = this.listData;\n    this.listData = this.mainData;\n    if (!isNullOrUndefined(this.hiddenElement)) {\n      this.hiddenElement.innerHTML = '';\n    }\n    if (!isNullOrUndefined(this.value)) {\n      var valueLength = this.value.length;\n      var hiddenElementContent = '';\n      for (var index = 0; index < valueLength; index++) {\n        var valueItem = this.value[index];\n        var listValue = this.findListElement(!isNullOrUndefined(this.mainList) ? this.mainList : this.ulElement, 'li', 'data-value', valueItem);\n        if (isNullOrUndefined(listValue) && !this.allowCustomValue) {\n          this.value.splice(index, 1);\n          index -= 1;\n          valueLength -= 1;\n        } else {\n          if (this.listData) {\n            temp = this.getTextByValue(valueItem);\n          } else {\n            temp = valueItem;\n          }\n          data += temp + delimiterChar + ' ';\n          text.push(temp);\n        }\n        hiddenElementContent += \"<option selected value=\\\"\" + valueItem + \"\\\">\" + index + \"</option>\";\n      }\n      if (!isNullOrUndefined(this.hiddenElement)) {\n        this.hiddenElement.innerHTML = hiddenElementContent;\n      }\n    }\n    this.setProperties({\n      text: text.toString()\n    }, true);\n    if (delim) {\n      this.updateWrapperText(this.delimiterWrapper, data);\n      this.delimiterWrapper.setAttribute('id', getUniqueID('delim_val'));\n      this.inputElement.setAttribute('aria-labelledby', this.delimiterWrapper.id);\n    }\n    var targetEle = e && e.target;\n    var isClearAll = targetEle && targetEle.classList.contains('e-close-hooker') ? true : null;\n    if (!this.changeOnBlur && e && !isClearAll || this.isSelectAll) {\n      this.isSelectAll = false;\n      this.updateValueState(e, this.value, this.tempValues);\n    }\n    this.listData = tempData;\n    this.addValidInputClass();\n  };\n  MultiSelect.prototype.initialTextUpdate = function () {\n    if (!isNullOrUndefined(this.text)) {\n      var textArr = this.text.split(this.delimiterChar);\n      var textVal = [];\n      for (var index = 0; textArr.length > index; index++) {\n        var val = this.getValueByText(textArr[index]);\n        if (!isNullOrUndefined(val)) {\n          textVal.push(val);\n        } else if (this.allowCustomValue) {\n          textVal.push(textArr[index]);\n        }\n      }\n      if (textVal && textVal.length) {\n        this.setProperties({\n          value: textVal\n        }, true);\n      }\n    } else {\n      this.setProperties({\n        value: null\n      }, true);\n    }\n  };\n  MultiSelect.prototype.renderList = function (isEmptyData) {\n    if (!isEmptyData && this.allowCustomValue && this.list && (this.list.textContent === this.noRecordsTemplate || this.list.querySelector('.e-ul') && this.list.querySelector('.e-ul').childElementCount === 0)) {\n      isEmptyData = true;\n    }\n    _super.prototype.render.call(this, null, isEmptyData);\n    this.unwireListEvents();\n    this.wireListEvents();\n  };\n  MultiSelect.prototype.initialValueUpdate = function () {\n    if (this.list) {\n      var text = void 0;\n      var element = void 0;\n      var value = void 0;\n      if (this.chipCollectionWrapper) {\n        this.chipCollectionWrapper.innerHTML = '';\n      }\n      this.removeListSelection();\n      if (!isNullOrUndefined(this.value)) {\n        for (var index = 0; !isNullOrUndefined(this.value[index]); index++) {\n          value = this.value[index];\n          element = this.findListElement(this.hideSelectedItem ? this.ulElement : this.list, 'li', 'data-value', value);\n          text = this.getTextByValue(value);\n          if (element && element.getAttribute('aria-selected') !== 'true' || element && element.getAttribute('aria-selected') === 'true' && this.hideSelectedItem && (this.mode === 'Box' || this.mode === 'Default')) {\n            this.addChip(text, value);\n            this.addListSelection(element);\n          } else if (value && this.allowCustomValue) {\n            var indexItem = this.listData.length;\n            var newValue = {};\n            setValue(this.fields.text, value, newValue);\n            setValue(this.fields.value, value, newValue);\n            var noDataEle = this.popupWrapper.querySelector('.' + dropDownBaseClasses.noData);\n            this.addItem(newValue, indexItem);\n            element = element ? element : this.findListElement(this.hideSelectedItem ? this.ulElement : this.list, 'li', 'data-value', value);\n            if (this.popupWrapper.contains(noDataEle)) {\n              this.list.setAttribute('style', noDataEle.getAttribute('style'));\n              this.popupWrapper.replaceChild(this.list, noDataEle);\n              this.wireListEvents();\n            }\n            this.addChip(text, value);\n            this.addListSelection(element);\n          }\n        }\n      }\n      if (this.mode === 'CheckBox') {\n        this.updateDelimView();\n        if (this.changeOnBlur) {\n          this.updateValueState(null, this.value, this.tempValues);\n        }\n        this.updateDelimeter(this.delimiterChar);\n        this.refreshInputHight();\n      } else {\n        this.updateDelimeter(this.delimiterChar);\n      }\n      if (this.mode === 'CheckBox' && this.showSelectAll && (isNullOrUndefined(this.value) || !this.value.length)) {\n        this.notify('checkSelectAll', {\n          module: 'CheckBoxSelection',\n          enable: this.mode === 'CheckBox',\n          value: 'uncheck'\n        });\n      }\n      if (this.mode === 'Box' || this.mode === 'Default' && this.inputFocus) {\n        this.chipCollectionWrapper.style.display = '';\n      } else if (this.mode === 'Delimiter' || this.mode === 'CheckBox') {\n        this.showDelimWrapper();\n      }\n    }\n  };\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  MultiSelect.prototype.updateActionCompleteData = function (li, item) {\n    if (this.value && this.value.indexOf(li.getAttribute('data-value')) > -1) {\n      this.mainList = this.ulElement;\n      if (this.hideSelectedItem) {\n        addClass([li], HIDE_LIST);\n      }\n    }\n  };\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  MultiSelect.prototype.updateAddItemList = function (list, itemCount) {\n    if (this.popupObj && this.popupObj.element && this.popupObj.element.querySelector('.' + dropDownBaseClasses.noData) && list) {\n      this.list = list;\n      this.mainList = this.ulElement = list.querySelector('ul');\n      remove(this.popupWrapper.querySelector('.e-content'));\n      this.popupObj = null;\n      this.renderPopup();\n    } else if (this.allowCustomValue) {\n      this.list = list;\n      this.mainList = this.ulElement = list.querySelector('ul');\n    }\n  };\n  MultiSelect.prototype.updateDataList = function () {\n    if (this.mainList && this.ulElement && !(this.isFiltered || this.filterAction || this.targetElement().trim())) {\n      var isDynamicGroupItemUpdate = this.mainList.childElementCount < this.ulElement.childElementCount;\n      var isReactTemplateUpdate = this.ulElement.childElementCount > 0 && this.ulElement.children[0].childElementCount > 0 && this.mainList.children[0] && this.mainList.children[0].childElementCount < this.ulElement.children[0].childElementCount;\n      var isAngularTemplateUpdate = this.itemTemplate && this.ulElement.childElementCount > 0 && !(this.ulElement.childElementCount < this.mainList.childElementCount) && (this.ulElement.children[0].childElementCount > 0 || this.fields.groupBy && this.ulElement.children[1] && this.ulElement.children[1].childElementCount > 0);\n      if (isDynamicGroupItemUpdate || isReactTemplateUpdate || isAngularTemplateUpdate) {\n        //EJ2-57748 - for this task, we prevent the ul element cloning ( this.mainList = this.ulElement.cloneNode ? <HTMLElement>this.ulElement.cloneNode(true) : this.ulElement;)\n        this.mainList = this.ulElement;\n      }\n    }\n  };\n  MultiSelect.prototype.isValidLI = function (li) {\n    return li && !li.classList.contains(dropDownBaseClasses.disabled) && !li.classList.contains(dropDownBaseClasses.group) && li.classList.contains(dropDownBaseClasses.li);\n  };\n  MultiSelect.prototype.updateListSelection = function (li, e, length) {\n    var customVal = li.getAttribute('data-value');\n    var value = this.getFormattedValue(customVal);\n    if (this.allowCustomValue && (customVal !== 'false' && value === false || !isNullOrUndefined(value) && value.toString() === 'NaN')) {\n      value = customVal;\n    }\n    this.removeHover();\n    if (!this.value || this.value.indexOf(value) === -1) {\n      this.dispatchSelect(value, e, li, li.getAttribute('aria-selected') === 'true', length);\n    } else {\n      this.removeValue(value, e, length);\n    }\n  };\n  MultiSelect.prototype.updateListSelectEventCallback = function (value, li, e) {\n    var _this = this;\n    var text = this.getTextByValue(value);\n    if ((this.allowCustomValue || this.allowFiltering) && !this.findListElement(this.mainList, 'li', 'data-value', value)) {\n      var temp_1 = li.cloneNode(true);\n      var fieldValue = this.fields.value ? this.fields.value : 'value';\n      if (this.allowCustomValue && this.mainData.length && typeof getValue(fieldValue, this.mainData[0]) === 'number') {\n        value = !isNaN(parseFloat(value.toString())) ? parseFloat(value.toString()) : value;\n      }\n      var data_1 = this.getDataByValue(value);\n      var eventArgs = {\n        newData: data_1,\n        cancel: false\n      };\n      this.trigger('customValueSelection', eventArgs, function (eventArgs) {\n        if (!eventArgs.cancel) {\n          append([temp_1], _this.mainList);\n          _this.mainData.push(data_1);\n          _this.remoteCustomValue = false;\n          _this.addValue(value, text, e);\n        }\n      });\n    } else {\n      this.remoteCustomValue = false;\n      this.addValue(value, text, e);\n    }\n  };\n  MultiSelect.prototype.removeListSelection = function () {\n    var className = this.hideSelectedItem ? HIDE_LIST : dropDownBaseClasses.selected;\n    var selectedItems = this.list.querySelectorAll('.' + className);\n    var temp = selectedItems.length;\n    if (selectedItems && selectedItems.length) {\n      removeClass(selectedItems, className);\n      while (temp > 0) {\n        selectedItems[temp - 1].setAttribute('aria-selected', 'false');\n        temp--;\n      }\n    }\n    if (!isNullOrUndefined(this.mainList)) {\n      var selectItems = this.mainList.querySelectorAll('.' + className);\n      var temp1 = selectItems.length;\n      if (selectItems && selectItems.length) {\n        removeClass(selectItems, className);\n        while (temp1 > 0) {\n          selectItems[temp1 - 1].setAttribute('aria-selected', 'false');\n          if (this.mode === 'CheckBox') {\n            if (selectedItems && selectedItems.length > temp1 - 1) {\n              removeClass([selectedItems[temp1 - 1].firstElementChild.lastElementChild], 'e-check');\n            }\n            removeClass([selectItems[temp1 - 1].firstElementChild.lastElementChild], 'e-check');\n          }\n          temp1--;\n        }\n      }\n    }\n  };\n  MultiSelect.prototype.removeHover = function () {\n    var hoveredItem = this.list.querySelectorAll('.' + dropDownBaseClasses.hover);\n    if (hoveredItem && hoveredItem.length) {\n      removeClass(hoveredItem, dropDownBaseClasses.hover);\n    }\n  };\n  MultiSelect.prototype.removeFocus = function () {\n    if (this.list && this.mainList) {\n      var hoveredItem = this.list.querySelectorAll('.' + dropDownBaseClasses.focus);\n      var mainlist = this.mainList.querySelectorAll('.' + dropDownBaseClasses.focus);\n      if (hoveredItem && hoveredItem.length) {\n        removeClass(hoveredItem, dropDownBaseClasses.focus);\n        removeClass(mainlist, dropDownBaseClasses.focus);\n      }\n    }\n  };\n  MultiSelect.prototype.addListHover = function (li) {\n    if (this.enabled && this.isValidLI(li)) {\n      this.removeHover();\n      addClass([li], dropDownBaseClasses.hover);\n    } else {\n      if (li !== null && li.classList.contains('e-list-group-item') && this.enableGroupCheckBox && this.mode === 'CheckBox' && !isNullOrUndefined(this.fields.groupBy)) {\n        this.removeHover();\n        addClass([li], dropDownBaseClasses.hover);\n      }\n    }\n  };\n  MultiSelect.prototype.addListFocus = function (element) {\n    if (this.enabled && this.isValidLI(element)) {\n      this.removeFocus();\n      addClass([element], dropDownBaseClasses.focus);\n      this.updateAriaActiveDescendant();\n    } else {\n      if (this.enableGroupCheckBox && this.mode === 'CheckBox' && !isNullOrUndefined(this.fields.groupBy)) {\n        addClass([element], dropDownBaseClasses.focus);\n        this.updateAriaActiveDescendant();\n      }\n    }\n  };\n  MultiSelect.prototype.addListSelection = function (element, mainElement) {\n    var className = this.hideSelectedItem ? HIDE_LIST : dropDownBaseClasses.selected;\n    if (this.isValidLI(element) && !element.classList.contains(dropDownBaseClasses.hover)) {\n      addClass([element], className);\n      this.updateMainList(false, element.getAttribute('data-value'), mainElement);\n      element.setAttribute('aria-selected', 'true');\n      if (this.mode === 'CheckBox' && element.classList.contains('e-active')) {\n        var ariaCheck = element.getElementsByClassName('e-check').length;\n        if (ariaCheck === 0) {\n          this.notify('updatelist', {\n            module: 'CheckBoxSelection',\n            enable: this.mode === 'CheckBox',\n            li: element,\n            e: this\n          });\n        }\n      }\n      this.notify('activeList', {\n        module: 'CheckBoxSelection',\n        enable: this.mode === 'CheckBox',\n        li: element,\n        e: this\n      });\n      if (this.chipCollectionWrapper) {\n        this.removeChipSelection();\n      }\n      this.selectedElementID = element.id;\n    }\n  };\n  MultiSelect.prototype.updateDelimeter = function (delimChar, e) {\n    this.updateData(delimChar, e);\n  };\n  MultiSelect.prototype.onMouseClick = function (e) {\n    var _this = this;\n    this.keyCode = null;\n    this.scrollFocusStatus = false;\n    var target = e.target;\n    var li = closest(target, '.' + dropDownBaseClasses.li);\n    var headerLi = closest(target, '.' + dropDownBaseClasses.group);\n    if (headerLi && this.enableGroupCheckBox && this.mode === 'CheckBox' && this.fields.groupBy) {\n      target = target.classList.contains('e-list-group-item') ? target.firstElementChild.lastElementChild : e.target;\n      if (target.classList.contains('e-check')) {\n        this.selectAllItem(false, e);\n        target.classList.remove('e-check');\n        target.classList.remove('e-stop');\n        closest(target, '.' + 'e-list-group-item').classList.remove('e-active');\n        target.setAttribute('aria-selected', 'false');\n      } else {\n        this.selectAllItem(true, e);\n        target.classList.remove('e-stop');\n        target.classList.add('e-check');\n        closest(target, '.' + 'e-list-group-item').classList.add('e-active');\n        target.setAttribute('aria-selected', 'true');\n      }\n      this.refreshSelection();\n      this.checkSelectAll();\n    } else {\n      if (this.isValidLI(li)) {\n        var limit = this.value && this.value.length ? this.value.length : 0;\n        if (li.classList.contains('e-active')) {\n          limit = limit - 1;\n        }\n        if (limit < this.maximumSelectionLength) {\n          this.updateListSelection(li, e);\n          this.checkPlaceholderSize();\n          this.addListFocus(li);\n          if ((this.allowCustomValue || this.allowFiltering) && this.mainList && this.listData) {\n            if (this.mode !== 'CheckBox') {\n              this.focusAtLastListItem(li.getAttribute('data-value'));\n              this.refreshSelection();\n            }\n          } else {\n            this.makeTextBoxEmpty();\n          }\n        }\n        if (this.mode === 'CheckBox') {\n          this.updateDelimView();\n          if (this.value && this.value.length > 50) {\n            setTimeout(function () {\n              _this.updateDelimeter(_this.delimiterChar, e);\n            }, 0);\n          } else {\n            this.updateDelimeter(this.delimiterChar, e);\n          }\n          this.refreshInputHight();\n        } else {\n          this.updateDelimeter(this.delimiterChar, e);\n        }\n        this.checkSelectAll();\n        this.refreshPopup();\n        if (this.hideSelectedItem) {\n          this.focusAtFirstListItem();\n        }\n        if (this.closePopupOnSelect) {\n          this.hidePopup(e);\n        } else {\n          e.preventDefault();\n        }\n        this.makeTextBoxEmpty();\n        this.findGroupStart(target);\n        if (this.mode !== 'CheckBox') {\n          this.refreshListItems(isNullOrUndefined(li) ? null : li.textContent);\n        }\n      } else {\n        e.preventDefault();\n      }\n      this.refreshPlaceHolder();\n      this.deselectHeader();\n    }\n  };\n  MultiSelect.prototype.findGroupStart = function (target) {\n    if (this.enableGroupCheckBox && this.mode === 'CheckBox' && !isNullOrUndefined(this.fields.groupBy)) {\n      var count = 0;\n      var liChecked = 0;\n      var liUnchecked = 0;\n      var groupValues = void 0;\n      if (this.itemTemplate && !target.getElementsByClassName('e-frame').length) {\n        while (!target.getElementsByClassName('e-frame').length) {\n          target = target.parentElement;\n        }\n      }\n      if (target.classList.contains('e-frame')) {\n        target = target.parentElement.parentElement;\n      }\n      groupValues = this.findGroupAttrtibutes(target, liChecked, liUnchecked, count, 0);\n      groupValues = this.findGroupAttrtibutes(target, groupValues[0], groupValues[1], groupValues[2], 1);\n      while (!target.classList.contains('e-list-group-item')) {\n        if (target.classList.contains('e-list-icon')) {\n          target = target.parentElement;\n        }\n        target = target.previousElementSibling;\n        if (target == null) {\n          break;\n        }\n      }\n      this.updateCheckBox(target, groupValues[0], groupValues[1], groupValues[2]);\n    }\n  };\n  MultiSelect.prototype.findGroupAttrtibutes = function (listElement, checked, unChecked, count, position) {\n    while (!listElement.classList.contains('e-list-group-item')) {\n      if (listElement.classList.contains('e-list-icon')) {\n        listElement = listElement.parentElement;\n      }\n      if (listElement.getElementsByClassName('e-frame')[0].classList.contains('e-check') && listElement.classList.contains('e-list-item')) {\n        checked++;\n      } else if (listElement.classList.contains('e-list-item')) {\n        unChecked++;\n      }\n      count++;\n      listElement = position ? listElement.nextElementSibling : listElement.previousElementSibling;\n      if (listElement == null) {\n        break;\n      }\n    }\n    return [checked, unChecked, count];\n  };\n  MultiSelect.prototype.updateCheckBox = function (groupHeader, checked, unChecked, count) {\n    if (groupHeader === null) {\n      return;\n    }\n    var checkBoxElement = groupHeader.getElementsByClassName('e-frame')[0];\n    if (count === checked) {\n      checkBoxElement.classList.remove('e-stop');\n      checkBoxElement.classList.add('e-check');\n      closest(checkBoxElement, '.' + 'e-list-group-item').classList.add('e-active');\n      groupHeader.setAttribute('aria-selected', 'true');\n    } else if (count === unChecked) {\n      checkBoxElement.classList.remove('e-check');\n      checkBoxElement.classList.remove('e-stop');\n      closest(checkBoxElement, '.' + 'e-list-group-item').classList.remove('e-active');\n      groupHeader.setAttribute('aria-selected', 'false');\n    } else if (this.maximumSelectionLength === checked - 1) {\n      checkBoxElement.classList.remove('e-stop');\n      groupHeader.setAttribute('aria-selected', 'true');\n      closest(checkBoxElement, '.' + 'e-list-group-item').classList.add('e-active');\n      checkBoxElement.classList.add('e-check');\n    } else {\n      checkBoxElement.classList.remove('e-check');\n      checkBoxElement.classList.add('e-stop');\n      closest(checkBoxElement, '.' + 'e-list-group-item').classList.add('e-active');\n      groupHeader.setAttribute('aria-selected', 'false');\n    }\n  };\n  MultiSelect.prototype.deselectHeader = function () {\n    var limit = this.value && this.value.length ? this.value.length : 0;\n    var collection = this.list.querySelectorAll('li.e-list-group-item:not(.e-active)');\n    if (limit < this.maximumSelectionLength) {\n      removeClass(collection, 'e-disable');\n    }\n    if (limit === this.maximumSelectionLength) {\n      addClass(collection, 'e-disable');\n    }\n  };\n  MultiSelect.prototype.onMouseOver = function (e) {\n    var currentLi = closest(e.target, '.' + dropDownBaseClasses.li);\n    if (currentLi === null && this.mode === 'CheckBox' && !isNullOrUndefined(this.fields.groupBy) && this.enableGroupCheckBox) {\n      currentLi = closest(e.target, '.' + dropDownBaseClasses.group);\n    }\n    this.addListHover(currentLi);\n  };\n  MultiSelect.prototype.onMouseLeave = function () {\n    this.removeHover();\n  };\n  MultiSelect.prototype.onListMouseDown = function (e) {\n    e.preventDefault();\n    this.scrollFocusStatus = true;\n  };\n  MultiSelect.prototype.onDocumentClick = function (e) {\n    if (this.mode !== 'CheckBox') {\n      var target = e.target;\n      if (!(!isNullOrUndefined(this.popupObj) && closest(target, '[id=\"' + this.popupObj.element.id + '\"]')) && !this.overAllWrapper.contains(e.target)) {\n        this.scrollFocusStatus = false;\n      } else {\n        this.scrollFocusStatus = (Browser.isIE || Browser.info.name === 'edge') && document.activeElement === this.inputElement;\n      }\n    }\n  };\n  MultiSelect.prototype.wireListEvents = function () {\n    if (!isNullOrUndefined(this.list)) {\n      EventHandler.add(document, 'mousedown', this.onDocumentClick, this);\n      EventHandler.add(this.list, 'mousedown', this.onListMouseDown, this);\n      EventHandler.add(this.list, 'mouseup', this.onMouseClick, this);\n      EventHandler.add(this.list, 'mouseover', this.onMouseOver, this);\n      EventHandler.add(this.list, 'mouseout', this.onMouseLeave, this);\n    }\n  };\n  MultiSelect.prototype.unwireListEvents = function () {\n    EventHandler.remove(document, 'mousedown', this.onDocumentClick);\n    if (this.list) {\n      EventHandler.remove(this.list, 'mousedown', this.onListMouseDown);\n      EventHandler.remove(this.list, 'mouseup', this.onMouseClick);\n      EventHandler.remove(this.list, 'mouseover', this.onMouseOver);\n      EventHandler.remove(this.list, 'mouseout', this.onMouseLeave);\n    }\n  };\n  MultiSelect.prototype.hideOverAllClear = function () {\n    if (!this.value || !this.value.length || this.inputElement.value === '') {\n      this.overAllClear.style.display = 'none';\n    }\n  };\n  MultiSelect.prototype.showOverAllClear = function () {\n    if ((this.value && this.value.length || this.inputElement.value !== '') && this.showClearButton && this.readonly !== true) {\n      this.overAllClear.style.display = '';\n    } else {\n      this.overAllClear.style.display = 'none';\n    }\n  };\n  /**\n   * Sets the focus to widget for interaction.\n   *\n   * @returns {void}\n   */\n  MultiSelect.prototype.focusIn = function () {\n    if (document.activeElement !== this.inputElement && this.enabled) {\n      this.inputElement.focus();\n    }\n  };\n  /**\n   * Remove the focus from widget, if the widget is in focus state.\n   *\n   * @returns {void}\n   */\n  MultiSelect.prototype.focusOut = function () {\n    if (document.activeElement === this.inputElement && this.enabled) {\n      this.inputElement.blur();\n    }\n  };\n  /**\n   * Shows the spinner loader.\n   *\n   * @returns {void}\n   */\n  MultiSelect.prototype.showSpinner = function () {\n    if (isNullOrUndefined(this.spinnerElement)) {\n      var filterClear = this.filterParent && this.filterParent.querySelector('.e-clear-icon.e-icons');\n      if (this.overAllClear.style.display !== 'none' || filterClear) {\n        this.spinnerElement = filterClear ? filterClear : this.overAllClear;\n      } else {\n        this.spinnerElement = this.createElement('span', {\n          className: CLOSEICON_CLASS$1 + ' ' + SPINNER_CLASS$1\n        });\n        this.componentWrapper.appendChild(this.spinnerElement);\n      }\n      createSpinner({\n        target: this.spinnerElement,\n        width: Browser.isDevice ? '16px' : '14px'\n      }, this.createElement);\n      addClass([this.spinnerElement], DISABLE_ICON);\n      showSpinner(this.spinnerElement);\n    }\n  };\n  /**\n   * Hides the spinner loader.\n   *\n   * @returns {void}\n   */\n  MultiSelect.prototype.hideSpinner = function () {\n    if (!isNullOrUndefined(this.spinnerElement)) {\n      hideSpinner(this.spinnerElement);\n      removeClass([this.spinnerElement], DISABLE_ICON);\n      if (this.spinnerElement.classList.contains(SPINNER_CLASS$1)) {\n        detach(this.spinnerElement);\n      } else {\n        this.spinnerElement.innerHTML = '';\n      }\n      this.spinnerElement = null;\n    }\n  };\n  MultiSelect.prototype.updateWrapperText = function (wrapperType, wrapperData) {\n    if (this.valueTemplate || !this.enableHtmlSanitizer) {\n      wrapperType.innerHTML = this.encodeHtmlEntities(wrapperData);\n    } else {\n      wrapperType.innerText = wrapperData;\n    }\n  };\n  MultiSelect.prototype.updateDelimView = function () {\n    if (this.delimiterWrapper) {\n      this.hideDelimWrapper();\n    }\n    if (this.chipCollectionWrapper) {\n      this.chipCollectionWrapper.style.display = 'none';\n    }\n    if (!isNullOrUndefined(this.viewWrapper)) {\n      this.viewWrapper.style.display = '';\n      this.viewWrapper.style.width = '';\n      this.viewWrapper.classList.remove(TOTAL_COUNT_WRAPPER$1);\n    }\n    if (this.value && this.value.length) {\n      var data = '';\n      var temp = void 0;\n      var tempData = void 0;\n      var tempIndex = 1;\n      var wrapperleng = void 0;\n      var remaining = void 0;\n      var downIconWidth = 0;\n      var overAllContainer = void 0;\n      this.updateWrapperText(this.viewWrapper, data);\n      var l10nLocale = {\n        noRecordsTemplate: 'No records found',\n        actionFailureTemplate: 'Request failed',\n        overflowCountTemplate: '+${count} more..',\n        totalCountTemplate: '${count} selected'\n      };\n      var l10n = new L10n(this.getLocaleName(), l10nLocale, this.locale);\n      if (l10n.getConstant('actionFailureTemplate') === '') {\n        l10n = new L10n('dropdowns', l10nLocale, this.locale);\n      }\n      if (l10n.getConstant('noRecordsTemplate') === '') {\n        l10n = new L10n('dropdowns', l10nLocale, this.locale);\n      }\n      var remainContent = l10n.getConstant('overflowCountTemplate');\n      var totalContent = l10n.getConstant('totalCountTemplate');\n      var raminElement = this.createElement('span', {\n        className: REMAIN_WRAPPER$1\n      });\n      var remainCompildTemp = remainContent.replace('${count}', this.value.length.toString());\n      raminElement.innerText = remainCompildTemp;\n      this.viewWrapper.appendChild(raminElement);\n      this.renderReactTemplates();\n      var remainSize = raminElement.offsetWidth;\n      remove(raminElement);\n      if (this.showDropDownIcon) {\n        downIconWidth = this.dropIcon.offsetWidth + parseInt(window.getComputedStyle(this.dropIcon).marginRight, 10);\n      }\n      this.checkClearIconWidth();\n      if (!isNullOrUndefined(this.value)) {\n        for (var index = 0; !isNullOrUndefined(this.value[index]); index++) {\n          data += index === 0 ? '' : this.delimiterChar + ' ';\n          temp = this.getOverflowVal(index);\n          data += temp;\n          temp = this.viewWrapper.innerHTML;\n          this.updateWrapperText(this.viewWrapper, data);\n          wrapperleng = this.viewWrapper.offsetWidth + parseInt(window.getComputedStyle(this.viewWrapper).paddingRight, 10);\n          overAllContainer = this.componentWrapper.offsetWidth - parseInt(window.getComputedStyle(this.componentWrapper).paddingLeft, 10) - parseInt(window.getComputedStyle(this.componentWrapper).paddingRight, 10);\n          if (wrapperleng + downIconWidth + this.clearIconWidth > overAllContainer) {\n            if (tempData !== undefined && tempData !== '') {\n              temp = tempData;\n              index = tempIndex + 1;\n            }\n            this.updateWrapperText(this.viewWrapper, temp);\n            remaining = this.value.length - index;\n            wrapperleng = this.viewWrapper.offsetWidth + parseInt(window.getComputedStyle(this.viewWrapper).paddingRight, 10);\n            while (wrapperleng + remainSize + downIconWidth + this.clearIconWidth > overAllContainer && wrapperleng !== 0 && this.viewWrapper.innerHTML !== '') {\n              var textArr = [];\n              this.viewWrapper.innerHTML = textArr.join(this.delimiterChar);\n              remaining = this.value.length;\n              wrapperleng = this.viewWrapper.offsetWidth + parseInt(window.getComputedStyle(this.viewWrapper).paddingRight, 10);\n            }\n            break;\n          } else if (wrapperleng + remainSize + downIconWidth + this.clearIconWidth <= overAllContainer) {\n            tempData = data;\n            tempIndex = index;\n          } else if (index === 0) {\n            tempData = '';\n            tempIndex = -1;\n          }\n        }\n      }\n      if (remaining > 0) {\n        var totalWidth = overAllContainer - downIconWidth - this.clearIconWidth;\n        this.viewWrapper.appendChild(this.updateRemainTemplate(raminElement, this.viewWrapper, remaining, remainContent, totalContent, totalWidth));\n        this.updateRemainWidth(this.viewWrapper, totalWidth);\n        this.updateRemainingText(raminElement, downIconWidth, remaining, remainContent, totalContent);\n      }\n    } else {\n      if (!isNullOrUndefined(this.viewWrapper)) {\n        this.viewWrapper.innerHTML = '';\n        this.viewWrapper.style.display = 'none';\n      }\n    }\n  };\n  MultiSelect.prototype.checkClearIconWidth = function () {\n    if (this.showClearButton) {\n      this.clearIconWidth = this.overAllClear.offsetWidth;\n    }\n  };\n  MultiSelect.prototype.updateRemainWidth = function (viewWrapper, totalWidth) {\n    if (viewWrapper.classList.contains(TOTAL_COUNT_WRAPPER$1) && totalWidth < viewWrapper.offsetWidth + parseInt(window.getComputedStyle(viewWrapper).paddingLeft, 10) + parseInt(window.getComputedStyle(viewWrapper).paddingLeft, 10)) {\n      viewWrapper.style.width = totalWidth + 'px';\n    }\n  };\n  MultiSelect.prototype.updateRemainTemplate = function (raminElement, viewWrapper, remaining, remainContent, totalContent, totalWidth) {\n    if (viewWrapper.firstChild && viewWrapper.firstChild.nodeType === 3 && viewWrapper.firstChild.nodeValue === '') {\n      viewWrapper.removeChild(viewWrapper.firstChild);\n    }\n    raminElement.innerHTML = '';\n    var remainTemp = remainContent.replace('${count}', remaining.toString());\n    var totalTemp = totalContent.replace('${count}', remaining.toString());\n    raminElement.innerText = viewWrapper.firstChild && viewWrapper.firstChild.nodeType === 3 ? remainTemp : totalTemp;\n    if (viewWrapper.firstChild && viewWrapper.firstChild.nodeType === 3) {\n      viewWrapper.classList.remove(TOTAL_COUNT_WRAPPER$1);\n    } else {\n      viewWrapper.classList.add(TOTAL_COUNT_WRAPPER$1);\n      this.updateRemainWidth(viewWrapper, totalWidth);\n    }\n    return raminElement;\n  };\n  MultiSelect.prototype.updateRemainingText = function (raminElement, downIconWidth, remaining, remainContent, totalContent) {\n    var overAllContainer = this.componentWrapper.offsetWidth - parseInt(window.getComputedStyle(this.componentWrapper).paddingLeft, 10) - parseInt(window.getComputedStyle(this.componentWrapper).paddingRight, 10);\n    var wrapperleng = this.viewWrapper.offsetWidth + parseInt(window.getComputedStyle(this.viewWrapper).paddingRight, 10);\n    if (wrapperleng + downIconWidth >= overAllContainer && wrapperleng !== 0 && this.viewWrapper.firstChild && this.viewWrapper.firstChild.nodeType === 3) {\n      while (wrapperleng + downIconWidth > overAllContainer && wrapperleng !== 0 && this.viewWrapper.firstChild && this.viewWrapper.firstChild.nodeType === 3) {\n        var textArr = this.viewWrapper.firstChild.nodeValue.split(this.delimiterChar);\n        textArr.pop();\n        this.viewWrapper.firstChild.nodeValue = textArr.join(this.delimiterChar);\n        if (this.viewWrapper.firstChild.nodeValue === '') {\n          this.viewWrapper.removeChild(this.viewWrapper.firstChild);\n        }\n        remaining++;\n        wrapperleng = this.viewWrapper.offsetWidth;\n      }\n      var totalWidth = overAllContainer - downIconWidth;\n      this.updateRemainTemplate(raminElement, this.viewWrapper, remaining, remainContent, totalContent, totalWidth);\n    }\n  };\n  MultiSelect.prototype.getOverflowVal = function (index) {\n    var temp;\n    if (this.mainData && this.mainData.length) {\n      if (this.mode === 'CheckBox') {\n        var newTemp = this.listData;\n        this.listData = this.mainData;\n        temp = this.getTextByValue(this.value[index]);\n        this.listData = newTemp;\n      } else {\n        temp = this.getTextByValue(this.value[index]);\n      }\n    } else {\n      temp = this.value[index];\n    }\n    return temp;\n  };\n  MultiSelect.prototype.unWireEvent = function () {\n    if (!isNullOrUndefined(this.componentWrapper)) {\n      EventHandler.remove(this.componentWrapper, 'mousedown', this.wrapperClick);\n    }\n    EventHandler.remove(window, 'resize', this.windowResize);\n    if (!isNullOrUndefined(this.inputElement)) {\n      EventHandler.remove(this.inputElement, 'focus', this.focusInHandler);\n      EventHandler.remove(this.inputElement, 'keydown', this.onKeyDown);\n      if (this.mode !== 'CheckBox') {\n        EventHandler.remove(this.inputElement, 'input', this.onInput);\n      }\n      EventHandler.remove(this.inputElement, 'keyup', this.keyUp);\n      var formElement = closest(this.inputElement, 'form');\n      if (formElement) {\n        EventHandler.remove(formElement, 'reset', this.resetValueHandler);\n      }\n      EventHandler.remove(this.inputElement, 'blur', this.onBlurHandler);\n    }\n    if (!isNullOrUndefined(this.componentWrapper)) {\n      EventHandler.remove(this.componentWrapper, 'mouseover', this.mouseIn);\n      EventHandler.remove(this.componentWrapper, 'mouseout', this.mouseOut);\n    }\n    if (!isNullOrUndefined(this.overAllClear)) {\n      EventHandler.remove(this.overAllClear, 'mousedown', this.clearAll);\n    }\n    if (!isNullOrUndefined(this.inputElement)) {\n      EventHandler.remove(this.inputElement, 'paste', this.pasteHandler);\n    }\n  };\n  MultiSelect.prototype.selectAllItem = function (state, event, list) {\n    var li;\n    if (!isNullOrUndefined(this.list)) {\n      li = this.list.querySelectorAll(state ? 'li.e-list-item:not([aria-selected=\"true\"]):not(.e-reorder-hide)' : 'li.e-list-item[aria-selected=\"true\"]:not(.e-reorder-hide)');\n    }\n    if (this.value && this.value.length && event && event.target && closest(event.target, '.e-close-hooker') && this.allowFiltering) {\n      li = this.mainList.querySelectorAll(state ? 'li.e-list-item:not([aria-selected=\"true\"]):not(.e-reorder-hide)' : 'li.e-list-item[aria-selected=\"true\"]:not(.e-reorder-hide)');\n    }\n    if (this.enableGroupCheckBox && this.mode === 'CheckBox' && !isNullOrUndefined(this.fields.groupBy)) {\n      var target = event ? this.groupTemplate ? closest(event.target, '.e-list-group-item') : event.target : null;\n      target = event && event.keyCode === 32 ? list : target;\n      target = target && target.classList.contains('e-frame') ? target.parentElement.parentElement : target;\n      if (target && target.classList.contains('e-list-group-item')) {\n        var listElement = target.nextElementSibling;\n        if (isNullOrUndefined(listElement)) {\n          return;\n        }\n        while (listElement.classList.contains('e-list-item')) {\n          if (state) {\n            if (!listElement.firstElementChild.lastElementChild.classList.contains('e-check')) {\n              var selectionLimit = this.value && this.value.length ? this.value.length : 0;\n              if (listElement.classList.contains('e-active')) {\n                selectionLimit -= 1;\n              }\n              if (selectionLimit < this.maximumSelectionLength) {\n                this.updateListSelection(listElement, event);\n              }\n            }\n          } else {\n            if (listElement.firstElementChild.lastElementChild.classList.contains('e-check')) {\n              this.updateListSelection(listElement, event);\n            }\n          }\n          listElement = listElement.nextElementSibling;\n          if (listElement == null) {\n            break;\n          }\n        }\n        if (target.classList.contains('e-list-group-item')) {\n          var focusedElement = this.list.getElementsByClassName('e-item-focus')[0];\n          if (focusedElement) {\n            focusedElement.classList.remove('e-item-focus');\n          }\n          if (state) {\n            target.classList.add('e-active');\n          } else {\n            target.classList.remove('e-active');\n          }\n          target.classList.add('e-item-focus');\n          this.updateAriaActiveDescendant();\n        }\n        this.textboxValueUpdate();\n        this.checkPlaceholderSize();\n        if (!this.changeOnBlur && event) {\n          this.updateValueState(event, this.value, this.tempValues);\n        }\n      } else {\n        this.updateValue(event, li, state);\n      }\n    } else {\n      this.updateValue(event, li, state);\n    }\n    this.addValidInputClass();\n  };\n  MultiSelect.prototype.updateValue = function (event, li, state) {\n    var _this = this;\n    var length = li.length;\n    var beforeSelectArgs = {\n      event: event,\n      items: state ? li : [],\n      itemData: state ? this.listData : [],\n      isInteracted: event ? true : false,\n      isChecked: state,\n      preventSelectEvent: false\n    };\n    this.trigger('beforeSelectAll', beforeSelectArgs);\n    if (li && li.length) {\n      var index_1 = 0;\n      var count_1 = 0;\n      if (this.enableGroupCheckBox) {\n        count_1 = state ? this.maximumSelectionLength - (this.value ? this.value.length : 0) : li.length;\n      } else {\n        count_1 = state ? this.maximumSelectionLength - (this.value ? this.value.length : 0) : this.maximumSelectionLength;\n      }\n      if (!beforeSelectArgs.preventSelectEvent) {\n        while (index_1 < length && index_1 <= 50 && index_1 < count_1) {\n          this.updateListSelection(li[index_1], event, length - index_1);\n          if (this.enableGroupCheckBox) {\n            this.findGroupStart(li[index_1]);\n          }\n          index_1++;\n        }\n        if (length > 50) {\n          setTimeout(function () {\n            while (index_1 < length && index_1 < count_1) {\n              _this.updateListSelection(li[index_1], event, length - index_1);\n              if (_this.enableGroupCheckBox) {\n                _this.findGroupStart(li[index_1]);\n              }\n              index_1++;\n            }\n            _this.updatedataValueItems(event);\n            if (!_this.changeOnBlur) {\n              _this.updateValueState(event, _this.value, _this.tempValues);\n              _this.isSelectAll = _this.isSelectAll ? !_this.isSelectAll : _this.isSelectAll;\n            }\n            _this.updateHiddenElement();\n          }, 0);\n        }\n      } else {\n        for (var i = 0; i < li.length && i < count_1; i++) {\n          this.removeHover();\n          var customVal = li[i].getAttribute('data-value');\n          var value = this.getFormattedValue(customVal);\n          var mainElement = this.mainList ? this.mainList.querySelectorAll(state ? 'li.e-list-item:not([aria-selected=\"true\"]):not(.e-reorder-hide)' : 'li.e-list-item[aria-selected=\"true\"]:not(.e-reorder-hide)')[i] : null;\n          if (state) {\n            this.value = !this.value ? [] : this.value;\n            if (this.value.indexOf(value) < 0) {\n              this.setProperties({\n                value: [].concat([], this.value, [value])\n              }, true);\n            }\n            this.removeFocus();\n            this.addListSelection(li[i], mainElement);\n            this.updateChipStatus();\n            this.checkMaxSelection();\n          } else {\n            this.removeAllItems(value, event, false, li[i], mainElement);\n          }\n          if (this.enableGroupCheckBox) {\n            this.findGroupStart(li[i]);\n          }\n        }\n        if (!state) {\n          var limit = this.value && this.value.length ? this.value.length : 0;\n          if (limit < this.maximumSelectionLength) {\n            var collection = this.list.querySelectorAll('li.' + dropDownBaseClasses.li + ':not(.e-active)');\n            removeClass(collection, 'e-disable');\n          }\n        }\n        var args = {\n          event: event,\n          items: state ? li : [],\n          itemData: state ? this.listData : [],\n          isInteracted: event ? true : false,\n          isChecked: state\n        };\n        this.trigger('selectedAll', args);\n      }\n    }\n    this.updatedataValueItems(event);\n    this.checkPlaceholderSize();\n    if (length <= 50 && !beforeSelectArgs.preventSelectEvent) {\n      if (!this.changeOnBlur) {\n        this.updateValueState(event, this.value, this.tempValues);\n        this.isSelectAll = this.isSelectAll ? !this.isSelectAll : this.isSelectAll;\n      }\n      this.updateHiddenElement();\n    }\n  };\n  MultiSelect.prototype.updateHiddenElement = function () {\n    var _this = this;\n    var hiddenValue = '';\n    var wrapperText = '';\n    var data = '';\n    var text = [];\n    if (this.mode === 'CheckBox') {\n      this.value.map(function (value, index) {\n        hiddenValue += '<option selected value =\"' + value + '\">' + index + '</option>';\n        if (_this.listData) {\n          data = _this.getTextByValue(value);\n        } else {\n          data = value;\n        }\n        wrapperText += data + _this.delimiterChar + ' ';\n        text.push(data);\n      });\n      this.hiddenElement.innerHTML = hiddenValue;\n      this.updateWrapperText(this.delimiterWrapper, wrapperText);\n      this.delimiterWrapper.setAttribute('id', getUniqueID('delim_val'));\n      this.inputElement.setAttribute('aria-labelledby', this.delimiterWrapper.id);\n      this.setProperties({\n        text: text.toString()\n      }, true);\n      this.refreshInputHight();\n      this.refreshPlaceHolder();\n    }\n  };\n  MultiSelect.prototype.updatedataValueItems = function (event) {\n    this.deselectHeader();\n    this.textboxValueUpdate(event);\n  };\n  MultiSelect.prototype.textboxValueUpdate = function (event) {\n    var isRemoveAll = event && event.target && (closest(event.target, '.e-selectall-parent') || closest(event.target, '.e-close-hooker'));\n    if (this.mode !== 'Box' && !this.isPopupOpen() && !(this.mode === 'CheckBox' && (this.isSelectAll || isRemoveAll))) {\n      this.updateDelimView();\n    } else {\n      this.searchWrapper.classList.remove(ZERO_SIZE);\n    }\n    if (this.mode === 'CheckBox') {\n      this.updateDelimView();\n      if (!(isRemoveAll || this.isSelectAll)) {\n        this.updateDelimeter(this.delimiterChar, event);\n      }\n      this.refreshInputHight();\n    } else {\n      this.updateDelimeter(this.delimiterChar, event);\n    }\n    this.refreshPlaceHolder();\n  };\n  MultiSelect.prototype.setZIndex = function () {\n    if (this.popupObj) {\n      this.popupObj.setProperties({\n        'zIndex': this.zIndex\n      });\n    }\n  };\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  MultiSelect.prototype.updateDataSource = function (prop) {\n    if (isNullOrUndefined(this.list)) {\n      this.renderPopup();\n    } else {\n      this.resetList(this.dataSource);\n    }\n    if (this.value && this.value.length) {\n      this.setProperties({\n        'value': this.value\n      });\n      this.refreshSelection();\n    }\n  };\n  MultiSelect.prototype.onLoadSelect = function () {\n    this.setDynValue = true;\n    this.renderPopup();\n  };\n  MultiSelect.prototype.selectAllItems = function (state, event) {\n    var _this = this;\n    if (isNullOrUndefined(this.list)) {\n      this.selectAllAction = function () {\n        if (_this.mode === 'CheckBox' && _this.showSelectAll) {\n          var args = {\n            module: 'CheckBoxSelection',\n            enable: _this.mode === 'CheckBox',\n            value: state ? 'check' : 'uncheck'\n          };\n          _this.notify('checkSelectAll', args);\n        }\n        _this.selectAllItem(state, event);\n        _this.selectAllAction = null;\n      };\n      _super.prototype.render.call(this);\n    } else {\n      this.selectAllAction = null;\n      if (this.mode === 'CheckBox' && this.showSelectAll) {\n        var args = {\n          value: state ? 'check' : 'uncheck',\n          enable: this.mode === 'CheckBox',\n          module: 'CheckBoxSelection'\n        };\n        this.notify('checkSelectAll', args);\n      }\n      this.selectAllItem(state, event);\n    }\n  };\n  /**\n   * Get the properties to be maintained in the persisted state.\n   *\n   * @returns {string} Returns the persisted data of the component.\n   */\n  MultiSelect.prototype.getPersistData = function () {\n    return this.addOnPersist(['value']);\n  };\n  /**\n   * Dynamically change the value of properties.\n   *\n   * @param {MultiSelectModel} newProp - Returns the dynamic property value of the component.\n   * @param {MultiSelectModel} oldProp - Returns the previous property value of the component.\n   * @private\n   * @returns {void}\n   */\n  MultiSelect.prototype.onPropertyChanged = function (newProp, oldProp) {\n    if (newProp.dataSource && !isNullOrUndefined(Object.keys(newProp.dataSource)) || newProp.query && !isNullOrUndefined(Object.keys(newProp.query))) {\n      if (this.resetFilteredData) {\n        // The filtered data is not being reset in the component after the user focuses out.\n        this.resetMainList = !this.resetMainList ? this.mainList : this.resetMainList;\n        this.resetFilteredData = false;\n      }\n      this.mainList = null;\n      this.mainData = null;\n      this.isFirstClick = false;\n      this.isDynamicDataChange = true;\n    }\n    if (this.getModuleName() === 'multiselect') {\n      this.filterAction = false;\n      this.setUpdateInitial(['fields', 'query', 'dataSource'], newProp);\n    }\n    for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n      switch (prop) {\n        case 'query':\n        case 'dataSource':\n          if (this.mode === 'CheckBox' && this.showSelectAll) {\n            if (!isNullOrUndefined(this.popupObj)) {\n              this.popupObj.destroy();\n              this.popupObj = null;\n            }\n            this.renderPopup();\n          }\n          break;\n        case 'htmlAttributes':\n          this.updateHTMLAttribute();\n          break;\n        case 'showClearButton':\n          this.updateClearButton(newProp.showClearButton);\n          break;\n        case 'text':\n          this.updateVal(this.value, this.value, 'text');\n          break;\n        case 'value':\n          this.updateVal(this.value, oldProp.value, 'value');\n          this.addValidInputClass();\n          if (!this.closePopupOnSelect && this.isPopupOpen()) {\n            this.refreshPopup();\n          }\n          this.preventChange = this.isAngular && this.preventChange ? !this.preventChange : this.preventChange;\n          break;\n        case 'width':\n          this.setWidth(newProp.width);\n          this.popupObj.setProperties({\n            width: this.calcPopupWidth()\n          });\n          break;\n        case 'placeholder':\n          this.refreshPlaceHolder();\n          break;\n        case 'filterBarPlaceholder':\n          if (this.allowFiltering) {\n            this.notify('filterBarPlaceholder', {\n              filterBarPlaceholder: newProp.filterBarPlaceholder\n            });\n          }\n          break;\n        case 'delimiterChar':\n          if (this.mode !== 'Box') {\n            this.updateDelimView();\n          }\n          this.updateData(newProp.delimiterChar);\n          break;\n        case 'cssClass':\n          this.updateOldPropCssClass(oldProp.cssClass);\n          this.updateCssClass();\n          this.calculateWidth();\n          break;\n        case 'enableRtl':\n          this.enableRTL(newProp.enableRtl);\n          _super.prototype.onPropertyChanged.call(this, newProp, oldProp);\n          break;\n        case 'readonly':\n          this.updateReadonly(newProp.readonly);\n          this.hidePopup();\n          break;\n        case 'enabled':\n          this.hidePopup();\n          this.enable(newProp.enabled);\n          break;\n        case 'showSelectAll':\n          if (this.popupObj) {\n            this.popupObj.destroy();\n            this.popupObj = null;\n          }\n          this.renderPopup();\n          break;\n        case 'showDropDownIcon':\n          this.dropDownIcon();\n          break;\n        case 'floatLabelType':\n          this.setFloatLabelType();\n          this.addValidInputClass();\n          Input.createSpanElement(this.overAllWrapper, this.createElement);\n          this.calculateWidth();\n          if (!isNullOrUndefined(this.overAllWrapper) && !isNullOrUndefined(this.overAllWrapper.getElementsByClassName('e-ddl-icon')[0] && this.overAllWrapper.getElementsByClassName('e-float-text-content')[0] && this.floatLabelType !== 'Never')) {\n            this.overAllWrapper.getElementsByClassName('e-float-text-content')[0].classList.add('e-icon');\n          }\n          break;\n        case 'enableSelectionOrder':\n          break;\n        case 'selectAllText':\n          this.notify('selectAllText', false);\n          break;\n        case 'popupHeight':\n          if (this.popupObj) {\n            var overAllHeight = parseInt(this.popupHeight, 10);\n            if (this.popupHeight !== 'auto') {\n              this.list.style.maxHeight = formatUnit(overAllHeight);\n              this.popupWrapper.style.maxHeight = formatUnit(this.popupHeight);\n            } else {\n              this.list.style.maxHeight = formatUnit(this.popupHeight);\n            }\n          }\n          break;\n        case 'headerTemplate':\n        case 'footerTemplate':\n          this.reInitializePoup();\n          break;\n        case 'allowFiltering':\n          if (this.mode === 'CheckBox' && this.popupObj) {\n            this.reInitializePoup();\n          }\n          this.updateSelectElementData(this.allowFiltering);\n          break;\n        case 'fields':\n          if (isNullOrUndefined(this.fields.groupBy)) {\n            this.removeScrollEvent();\n          }\n          break;\n        default:\n          {\n            // eslint-disable-next-line max-len\n            var msProps = this.getPropObject(prop, newProp, oldProp);\n            _super.prototype.onPropertyChanged.call(this, msProps.newProperty, msProps.oldProperty);\n          }\n          break;\n      }\n    }\n  };\n  MultiSelect.prototype.reInitializePoup = function () {\n    if (this.popupObj) {\n      this.popupObj.destroy();\n      this.popupObj = null;\n    }\n    this.renderPopup();\n  };\n  MultiSelect.prototype.presentItemValue = function (ulElement) {\n    var valuecheck = [];\n    for (var i = 0; i < this.value.length; i++) {\n      var checkEle = this.findListElement(this.allowFiltering && !isNullOrUndefined(this.mainList) ? this.mainList : ulElement, 'li', 'data-value', this.value[i]);\n      if (!checkEle) {\n        valuecheck.push(this.value[i]);\n      }\n    }\n    return valuecheck;\n  };\n  MultiSelect.prototype.addNonPresentItems = function (valuecheck, ulElement, list, event) {\n    var _this = this;\n    this.dataSource.executeQuery(this.getForQuery(valuecheck)).then(function (e) {\n      if (e.result.length > 0) {\n        _this.addItem(e.result, list.length);\n      }\n      _this.updateActionList(ulElement, list, event);\n    });\n  };\n  MultiSelect.prototype.updateVal = function (newProp, oldProp, prop) {\n    if (!this.list) {\n      this.onLoadSelect();\n    } else if (this.dataSource instanceof DataManager && (!this.listData || !(this.mainList && this.mainData))) {\n      this.onLoadSelect();\n    } else {\n      var valuecheck = [];\n      if (!isNullOrUndefined(this.value) && !this.allowCustomValue) {\n        valuecheck = this.presentItemValue(this.ulElement);\n      }\n      if (prop == 'value' && valuecheck.length > 0 && this.dataSource instanceof DataManager && !isNullOrUndefined(this.value) && this.listData != null) {\n        this.mainData = null;\n        this.setDynValue = true;\n        this.addNonPresentItems(valuecheck, this.ulElement, this.listData);\n      } else {\n        if (prop === 'text') {\n          this.initialTextUpdate();\n          newProp = this.value;\n        }\n        if (isNullOrUndefined(this.value) || this.value.length === 0) {\n          this.tempValues = oldProp;\n        }\n        // eslint-disable-next-line\n        if (this.allowCustomValue && (this.mode === 'Default' || this.mode === 'Box') && this.isReact && this.inputFocus && this.isPopupOpen() && this.mainData !== this.listData) {\n          var list = this.mainList.cloneNode ? this.mainList.cloneNode(true) : this.mainList;\n          this.onActionComplete(list, this.mainData);\n        }\n        this.initialValueUpdate();\n        if (this.mode !== 'Box' && !this.inputFocus) {\n          this.updateDelimView();\n        }\n        if (!this.inputFocus) {\n          this.refreshInputHight();\n        }\n        this.refreshPlaceHolder();\n        if (this.mode !== 'CheckBox' && this.changeOnBlur) {\n          this.updateValueState(null, newProp, oldProp);\n        }\n        this.checkPlaceholderSize();\n      }\n    }\n    if (!this.changeOnBlur) {\n      this.updateValueState(null, newProp, oldProp);\n    }\n  };\n  /**\n   * Adds a new item to the multiselect popup list. By default, new item appends to the list as the last item,\n   * but you can insert based on the index parameter.\n   *\n   * @param { Object[] } items - Specifies an array of JSON data or a JSON data.\n   * @param { number } itemIndex - Specifies the index to place the newly added item in the popup list.\n   * @returns {void}\n   */\n  MultiSelect.prototype.addItem = function (items, itemIndex) {\n    _super.prototype.addItem.call(this, items, itemIndex);\n  };\n  /**\n   * Hides the popup, if the popup in a open state.\n   *\n   * @returns {void}\n   */\n  MultiSelect.prototype.hidePopup = function (e) {\n    var _this = this;\n    var delay = 100;\n    if (this.isPopupOpen()) {\n      var animModel = {\n        name: 'FadeOut',\n        duration: 100,\n        delay: delay ? delay : 0\n      };\n      var eventArgs = {\n        popup: this.popupObj,\n        cancel: false,\n        animation: animModel,\n        event: e || null\n      };\n      this.trigger('close', eventArgs, function (eventArgs) {\n        if (!eventArgs.cancel) {\n          if (_this.fields.groupBy && _this.mode !== 'CheckBox' && _this.fixedHeaderElement) {\n            remove(_this.fixedHeaderElement);\n            _this.fixedHeaderElement = null;\n          }\n          _this.beforePopupOpen = false;\n          _this.overAllWrapper.classList.remove(iconAnimation);\n          _this.popupObj.hide(new Animation(eventArgs.animation));\n          attributes(_this.inputElement, {\n            'aria-expanded': 'false'\n          });\n          _this.inputElement.removeAttribute('aria-owns');\n          _this.inputElement.removeAttribute('aria-activedescendant');\n          if (_this.allowFiltering) {\n            _this.notify('inputFocus', {\n              module: 'CheckBoxSelection',\n              enable: _this.mode === 'CheckBox',\n              value: 'clear'\n            });\n          }\n          _this.popupObj.hide();\n          removeClass([document.body, _this.popupObj.element], 'e-popup-full-page');\n          EventHandler.remove(_this.list, 'keydown', _this.onKeyDown);\n          if (_this.mode === 'CheckBox' && _this.showSelectAll) {\n            EventHandler.remove(_this.popupObj.element, 'click', _this.clickHandler);\n          }\n        }\n      });\n    }\n  };\n  /**\n   * Shows the popup, if the popup in a closed state.\n   *\n   * @returns {void}\n   */\n  MultiSelect.prototype.showPopup = function (e) {\n    var _this = this;\n    if (!this.enabled) {\n      return;\n    }\n    var args = {\n      cancel: false\n    };\n    this.trigger('beforeOpen', args, function (args) {\n      if (!args.cancel) {\n        if (!_this.ulElement) {\n          _this.beforePopupOpen = true;\n          if (_this.mode === 'CheckBox' && Browser.isDevice && _this.allowFiltering) {\n            _this.notify('popupFullScreen', {\n              module: 'CheckBoxSelection',\n              enable: _this.mode === 'CheckBox'\n            });\n          }\n          _super.prototype.render.call(_this, e);\n          return;\n        }\n        if (_this.mode === 'CheckBox' && Browser.isDevice && _this.allowFiltering) {\n          _this.notify('popupFullScreen', {\n            module: 'CheckBoxSelection',\n            enable: _this.mode === 'CheckBox'\n          });\n        }\n        var mainLiLength = _this.ulElement.querySelectorAll('li.' + 'e-list-item').length;\n        var liLength = _this.ulElement.querySelectorAll('li.' + dropDownBaseClasses.li + '.' + HIDE_LIST).length;\n        if (mainLiLength > 0 && mainLiLength === liLength && liLength === _this.mainData.length && !(_this.targetElement() !== '' && _this.allowCustomValue)) {\n          _this.beforePopupOpen = false;\n          return;\n        }\n        _this.onPopupShown(e);\n      }\n    });\n  };\n  /**\n   * Based on the state parameter, entire list item will be selected/deselected.\n   * parameter\n   * `true`   - Selects entire list items.\n   * `false`  - Un Selects entire list items.\n   *\n   * @param {boolean} state - if its true then Selects the entire list items. If its false the Unselects entire list items.\n   * @returns {void}\n   */\n  MultiSelect.prototype.selectAll = function (state) {\n    this.isSelectAll = true;\n    this.selectAllItems(state);\n  };\n  /**\n   * Return the module name of this component.\n   *\n   * @private\n   * @returns {string} Return the module name of this component.\n   */\n  MultiSelect.prototype.getModuleName = function () {\n    return 'multiselect';\n  };\n  /**\n   * Allows you to clear the selected values from the Multiselect component.\n   *\n   * @returns {void}\n   */\n  MultiSelect.prototype.clear = function () {\n    var _this = this;\n    this.selectAll(false);\n    if (this.value && this.value.length) {\n      setTimeout(function () {\n        _this.setProperties({\n          value: null\n        }, true);\n      }, 0);\n    } else {\n      this.setProperties({\n        value: null\n      }, true);\n    }\n  };\n  /**\n   * To Initialize the control rendering\n   *\n   * @private\n   * @returns {void}\n   */\n  MultiSelect.prototype.render = function () {\n    if (!isNullOrUndefined(this.value)) {\n      // eslint-disable-next-line\n      this.value = this.value.slice();\n    }\n    this.setDynValue = this.initStatus = false;\n    this.isSelectAll = false;\n    this.selectAllEventEle = [];\n    this.searchWrapper = this.createElement('span', {\n      className: SEARCHBOX_WRAPPER + ' ' + (this.mode === 'Box' ? BOX_ELEMENT : '')\n    });\n    this.viewWrapper = this.createElement('span', {\n      className: DELIMITER_VIEW + ' ' + DELIMITER_WRAPPER,\n      styles: 'display:none;'\n    });\n    this.overAllClear = this.createElement('span', {\n      className: CLOSEICON_CLASS$1,\n      styles: 'display:none;'\n    });\n    this.componentWrapper = this.createElement('div', {\n      className: ELEMENT_WRAPPER\n    });\n    this.overAllWrapper = this.createElement('div', {\n      className: OVER_ALL_WRAPPER\n    });\n    if (this.mode === 'CheckBox') {\n      addClass([this.overAllWrapper], 'e-checkbox');\n    }\n    if (Browser.isDevice) {\n      this.componentWrapper.classList.add(ELEMENT_MOBILE_WRAPPER);\n    }\n    this.setWidth(this.width);\n    this.overAllWrapper.appendChild(this.componentWrapper);\n    this.popupWrapper = this.createElement('div', {\n      id: this.element.id + '_popup',\n      className: POPUP_WRAPPER\n    });\n    this.popupWrapper.setAttribute('aria-label', this.element.id);\n    this.popupWrapper.setAttribute('role', 'dialog');\n    if (this.mode === 'Delimiter' || this.mode === 'CheckBox') {\n      this.delimiterWrapper = this.createElement('span', {\n        className: DELIMITER_WRAPPER,\n        styles: 'display:none'\n      });\n      this.componentWrapper.appendChild(this.delimiterWrapper);\n    } else {\n      this.chipCollectionWrapper = this.createElement('span', {\n        className: CHIP_WRAPPER$1,\n        styles: 'display:none'\n      });\n      if (this.mode === 'Default') {\n        this.chipCollectionWrapper.setAttribute('id', getUniqueID('chip_default'));\n      } else if (this.mode === 'Box') {\n        this.chipCollectionWrapper.setAttribute('id', getUniqueID('chip_box'));\n      }\n      this.componentWrapper.appendChild(this.chipCollectionWrapper);\n    }\n    if (this.mode !== 'Box') {\n      this.componentWrapper.appendChild(this.viewWrapper);\n    }\n    this.componentWrapper.appendChild(this.searchWrapper);\n    if (this.showClearButton && !Browser.isDevice) {\n      this.componentWrapper.appendChild(this.overAllClear);\n    } else {\n      this.componentWrapper.classList.add(CLOSE_ICON_HIDE);\n    }\n    this.dropDownIcon();\n    this.inputElement = this.createElement('input', {\n      className: INPUT_ELEMENT,\n      attrs: {\n        spellcheck: 'false',\n        type: 'text',\n        autocomplete: 'off',\n        tabindex: '0',\n        role: 'combobox'\n      }\n    });\n    if (this.mode === 'Default' || this.mode === 'Box') {\n      this.inputElement.setAttribute('aria-labelledby', this.chipCollectionWrapper.id);\n    }\n    if (this.element.tagName !== this.getNgDirective()) {\n      this.element.style.display = 'none';\n    }\n    if (this.element.tagName === this.getNgDirective()) {\n      this.element.appendChild(this.overAllWrapper);\n      this.searchWrapper.appendChild(this.inputElement);\n    } else {\n      this.element.parentElement.insertBefore(this.overAllWrapper, this.element);\n      this.searchWrapper.appendChild(this.inputElement);\n      this.searchWrapper.appendChild(this.element);\n      this.element.removeAttribute('tabindex');\n    }\n    if (this.floatLabelType !== 'Never') {\n      createFloatLabel(this.overAllWrapper, this.searchWrapper, this.element, this.inputElement, this.value, this.floatLabelType, this.placeholder);\n    } else if (this.floatLabelType === 'Never') {\n      this.refreshPlaceHolder();\n    }\n    this.addValidInputClass();\n    this.element.style.opacity = '';\n    var id = this.element.getAttribute('id') ? this.element.getAttribute('id') : getUniqueID('ej2_dropdownlist');\n    this.element.id = id;\n    this.hiddenElement = this.createElement('select', {\n      attrs: {\n        'aria-hidden': 'true',\n        'class': HIDDEN_ELEMENT,\n        'tabindex': '-1',\n        'multiple': ''\n      }\n    });\n    this.componentWrapper.appendChild(this.hiddenElement);\n    this.validationAttribute(this.element, this.hiddenElement);\n    if (this.mode !== 'CheckBox') {\n      this.hideOverAllClear();\n    }\n    if (!isNullOrUndefined(closest(this.element, \"fieldset\")) && closest(this.element, \"fieldset\").disabled) {\n      this.enabled = false;\n    }\n    this.wireEvent();\n    this.enable(this.enabled);\n    this.enableRTL(this.enableRtl);\n    this.checkInitialValue();\n    if (this.element.hasAttribute('data-val')) {\n      this.element.setAttribute('data-val', 'false');\n    }\n    Input.createSpanElement(this.overAllWrapper, this.createElement);\n    this.calculateWidth();\n    if (!isNullOrUndefined(this.overAllWrapper) && !isNullOrUndefined(this.overAllWrapper.getElementsByClassName('e-ddl-icon')[0] && this.overAllWrapper.getElementsByClassName('e-float-text-content')[0] && this.floatLabelType !== 'Never')) {\n      this.overAllWrapper.getElementsByClassName('e-float-text-content')[0].classList.add('e-icon');\n    }\n    this.renderComplete();\n  };\n  MultiSelect.prototype.checkInitialValue = function () {\n    var _this = this;\n    var isData = this.dataSource instanceof Array ? this.dataSource.length > 0 : !isNullOrUndefined(this.dataSource);\n    if (!(this.value && this.value.length) && isNullOrUndefined(this.text) && !isData && this.element.tagName === 'SELECT' && this.element.options.length > 0) {\n      var optionsElement = this.element.options;\n      var valueCol = [];\n      var textCol = '';\n      for (var index = 0, optionsLen = optionsElement.length; index < optionsLen; index++) {\n        var opt = optionsElement[index];\n        if (!isNullOrUndefined(opt.getAttribute('selected'))) {\n          if (opt.getAttribute('value')) {\n            valueCol.push(opt.getAttribute('value'));\n          } else {\n            textCol += opt.text + this.delimiterChar;\n          }\n        }\n      }\n      if (valueCol.length > 0) {\n        this.setProperties({\n          value: valueCol\n        }, true);\n      } else if (textCol !== '') {\n        this.setProperties({\n          text: textCol\n        }, true);\n      }\n      if (valueCol.length > 0 || textCol !== '') {\n        this.refreshInputHight();\n        this.refreshPlaceHolder();\n      }\n    }\n    if (this.value && this.value.length || !isNullOrUndefined(this.text)) {\n      if (!this.list) {\n        _super.prototype.render.call(this);\n      }\n    }\n    if (!isNullOrUndefined(this.text) && (isNullOrUndefined(this.value) || this.value.length === 0)) {\n      this.initialTextUpdate();\n    }\n    if (this.value && this.value.length) {\n      if (!(this.dataSource instanceof DataManager)) {\n        this.initialValueUpdate();\n        this.initialUpdate();\n      } else {\n        this.setInitialValue = function () {\n          _this.initStatus = false;\n          _this.initialValueUpdate();\n          _this.initialUpdate();\n          _this.setInitialValue = null;\n          _this.initStatus = true;\n        };\n      }\n      this.updateTempValue();\n    } else {\n      this.initialUpdate();\n    }\n    this.initStatus = true;\n    this.checkAutoFocus();\n    if (!isNullOrUndefined(this.text)) {\n      this.element.setAttribute('data-initial-value', this.text);\n    }\n  };\n  MultiSelect.prototype.checkAutoFocus = function () {\n    if (this.element.hasAttribute('autofocus')) {\n      this.inputElement.focus();\n    }\n  };\n  MultiSelect.prototype.setFloatLabelType = function () {\n    removeFloating(this.overAllWrapper, this.componentWrapper, this.searchWrapper, this.inputElement, this.value, this.floatLabelType, this.placeholder);\n    if (this.floatLabelType !== 'Never') {\n      createFloatLabel(this.overAllWrapper, this.searchWrapper, this.element, this.inputElement, this.value, this.floatLabelType, this.placeholder);\n    }\n  };\n  MultiSelect.prototype.addValidInputClass = function () {\n    if (!isNullOrUndefined(this.overAllWrapper)) {\n      if (!isNullOrUndefined(this.value) && this.value.length || this.floatLabelType === 'Always') {\n        addClass([this.overAllWrapper], 'e-valid-input');\n      } else {\n        removeClass([this.overAllWrapper], 'e-valid-input');\n      }\n    }\n  };\n  MultiSelect.prototype.dropDownIcon = function () {\n    if (this.showDropDownIcon) {\n      this.dropIcon = this.createElement('span', {\n        className: dropdownIcon\n      });\n      this.componentWrapper.appendChild(this.dropIcon);\n      addClass([this.componentWrapper], ['e-down-icon']);\n    } else {\n      if (!isNullOrUndefined(this.dropIcon)) {\n        this.dropIcon.parentElement.removeChild(this.dropIcon);\n        removeClass([this.componentWrapper], ['e-down-icon']);\n      }\n    }\n  };\n  MultiSelect.prototype.initialUpdate = function () {\n    if (this.mode !== 'Box' && !(this.setDynValue && this.mode === 'Default' && this.inputFocus)) {\n      this.updateDelimView();\n    }\n    this.updateCssClass();\n    this.updateHTMLAttribute();\n    this.updateReadonly(this.readonly);\n    this.refreshInputHight();\n    this.checkPlaceholderSize();\n  };\n  /**\n   * Removes the component from the DOM and detaches all its related event handlers. Also it removes the attributes and classes.\n   *\n   * @method destroy\n   * @returns {void}\n   */\n  MultiSelect.prototype.destroy = function () {\n    // eslint-disable-next-line\n    if (this.isReact) {\n      this.clearTemplate();\n    }\n    if (this.popupObj) {\n      this.popupObj.hide();\n    }\n    this.notify(destroy, {});\n    this.unwireListEvents();\n    this.unWireEvent();\n    this.list = null;\n    this.popupObj = null;\n    this.mainList = null;\n    this.mainData = null;\n    this.filterParent = null;\n    this.ulElement = null;\n    this.mainListCollection = null;\n    _super.prototype.destroy.call(this);\n    var temp = ['readonly', 'aria-disabled', 'placeholder'];\n    var length = temp.length;\n    if (!isNullOrUndefined(this.inputElement)) {\n      while (length > 0) {\n        this.inputElement.removeAttribute(temp[length - 1]);\n        length--;\n      }\n    }\n    if (!isNullOrUndefined(this.element)) {\n      this.element.removeAttribute('data-initial-value');\n      this.element.style.display = 'block';\n    }\n    if (this.overAllWrapper && this.overAllWrapper.parentElement) {\n      if (this.overAllWrapper.parentElement.tagName === this.getNgDirective()) {\n        remove(this.overAllWrapper);\n      } else {\n        this.overAllWrapper.parentElement.insertBefore(this.element, this.overAllWrapper);\n        remove(this.overAllWrapper);\n      }\n    }\n    this.componentWrapper = null;\n    this.overAllClear = null;\n    this.overAllWrapper = null;\n    this.hiddenElement = null;\n    this.searchWrapper = null;\n    this.viewWrapper = null;\n    this.chipCollectionWrapper = null;\n    this.targetInputElement = null;\n    this.popupWrapper = null;\n    this.inputElement = null;\n    this.delimiterWrapper = null;\n    this.popupObj = null;\n    this.popupWrapper = null;\n    this.liCollections = null;\n    this.header = null;\n    this.mainList = null;\n    this.mainListCollection = null;\n    this.footer = null;\n    this.selectAllEventEle = null;\n  };\n  __decorate$5([Complex({\n    text: null,\n    value: null,\n    iconCss: null,\n    groupBy: null\n  }, FieldSettings)], MultiSelect.prototype, \"fields\", void 0);\n  __decorate$5([Property(false)], MultiSelect.prototype, \"enablePersistence\", void 0);\n  __decorate$5([Property(null)], MultiSelect.prototype, \"groupTemplate\", void 0);\n  __decorate$5([Property('No records found')], MultiSelect.prototype, \"noRecordsTemplate\", void 0);\n  __decorate$5([Property('Request failed')], MultiSelect.prototype, \"actionFailureTemplate\", void 0);\n  __decorate$5([Property('None')], MultiSelect.prototype, \"sortOrder\", void 0);\n  __decorate$5([Property(true)], MultiSelect.prototype, \"enabled\", void 0);\n  __decorate$5([Property(false)], MultiSelect.prototype, \"enableHtmlSanitizer\", void 0);\n  __decorate$5([Property([])], MultiSelect.prototype, \"dataSource\", void 0);\n  __decorate$5([Property(null)], MultiSelect.prototype, \"query\", void 0);\n  __decorate$5([Property('StartsWith')], MultiSelect.prototype, \"filterType\", void 0);\n  __decorate$5([Property(1000)], MultiSelect.prototype, \"zIndex\", void 0);\n  __decorate$5([Property(false)], MultiSelect.prototype, \"ignoreAccent\", void 0);\n  __decorate$5([Property()], MultiSelect.prototype, \"locale\", void 0);\n  __decorate$5([Property(false)], MultiSelect.prototype, \"enableGroupCheckBox\", void 0);\n  __decorate$5([Property(null)], MultiSelect.prototype, \"cssClass\", void 0);\n  __decorate$5([Property('100%')], MultiSelect.prototype, \"width\", void 0);\n  __decorate$5([Property('300px')], MultiSelect.prototype, \"popupHeight\", void 0);\n  __decorate$5([Property('100%')], MultiSelect.prototype, \"popupWidth\", void 0);\n  __decorate$5([Property(null)], MultiSelect.prototype, \"placeholder\", void 0);\n  __decorate$5([Property(null)], MultiSelect.prototype, \"filterBarPlaceholder\", void 0);\n  __decorate$5([Property({})], MultiSelect.prototype, \"htmlAttributes\", void 0);\n  __decorate$5([Property(null)], MultiSelect.prototype, \"valueTemplate\", void 0);\n  __decorate$5([Property(null)], MultiSelect.prototype, \"headerTemplate\", void 0);\n  __decorate$5([Property(null)], MultiSelect.prototype, \"footerTemplate\", void 0);\n  __decorate$5([Property(null)], MultiSelect.prototype, \"itemTemplate\", void 0);\n  __decorate$5([Property(null)], MultiSelect.prototype, \"allowFiltering\", void 0);\n  __decorate$5([Property(true)], MultiSelect.prototype, \"changeOnBlur\", void 0);\n  __decorate$5([Property(false)], MultiSelect.prototype, \"allowCustomValue\", void 0);\n  __decorate$5([Property(true)], MultiSelect.prototype, \"showClearButton\", void 0);\n  __decorate$5([Property(1000)], MultiSelect.prototype, \"maximumSelectionLength\", void 0);\n  __decorate$5([Property(false)], MultiSelect.prototype, \"readonly\", void 0);\n  __decorate$5([Property(null)], MultiSelect.prototype, \"text\", void 0);\n  __decorate$5([Property(null)], MultiSelect.prototype, \"value\", void 0);\n  __decorate$5([Property(true)], MultiSelect.prototype, \"hideSelectedItem\", void 0);\n  __decorate$5([Property(true)], MultiSelect.prototype, \"closePopupOnSelect\", void 0);\n  __decorate$5([Property('Default')], MultiSelect.prototype, \"mode\", void 0);\n  __decorate$5([Property(',')], MultiSelect.prototype, \"delimiterChar\", void 0);\n  __decorate$5([Property(true)], MultiSelect.prototype, \"ignoreCase\", void 0);\n  __decorate$5([Property(false)], MultiSelect.prototype, \"showDropDownIcon\", void 0);\n  __decorate$5([Property('Never')], MultiSelect.prototype, \"floatLabelType\", void 0);\n  __decorate$5([Property(false)], MultiSelect.prototype, \"showSelectAll\", void 0);\n  __decorate$5([Property('Select All')], MultiSelect.prototype, \"selectAllText\", void 0);\n  __decorate$5([Property('Unselect All')], MultiSelect.prototype, \"unSelectAllText\", void 0);\n  __decorate$5([Property(true)], MultiSelect.prototype, \"enableSelectionOrder\", void 0);\n  __decorate$5([Property(true)], MultiSelect.prototype, \"openOnClick\", void 0);\n  __decorate$5([Property(false)], MultiSelect.prototype, \"addTagOnBlur\", void 0);\n  __decorate$5([Event()], MultiSelect.prototype, \"change\", void 0);\n  __decorate$5([Event()], MultiSelect.prototype, \"removing\", void 0);\n  __decorate$5([Event()], MultiSelect.prototype, \"removed\", void 0);\n  __decorate$5([Event()], MultiSelect.prototype, \"beforeSelectAll\", void 0);\n  __decorate$5([Event()], MultiSelect.prototype, \"selectedAll\", void 0);\n  __decorate$5([Event()], MultiSelect.prototype, \"beforeOpen\", void 0);\n  __decorate$5([Event()], MultiSelect.prototype, \"open\", void 0);\n  __decorate$5([Event()], MultiSelect.prototype, \"close\", void 0);\n  __decorate$5([Event()], MultiSelect.prototype, \"blur\", void 0);\n  __decorate$5([Event()], MultiSelect.prototype, \"focus\", void 0);\n  __decorate$5([Event()], MultiSelect.prototype, \"chipSelection\", void 0);\n  __decorate$5([Event()], MultiSelect.prototype, \"filtering\", void 0);\n  __decorate$5([Event()], MultiSelect.prototype, \"tagging\", void 0);\n  __decorate$5([Event()], MultiSelect.prototype, \"customValueSelection\", void 0);\n  MultiSelect = __decorate$5([NotifyPropertyChanges], MultiSelect);\n  return MultiSelect;\n}(DropDownBase);\nvar ICON = 'e-icons';\nvar CHECKBOXFRAME$1 = 'e-frame';\nvar CHECK$1 = 'e-check';\nvar CHECKBOXWRAP$1 = 'e-checkbox-wrapper';\nvar INDETERMINATE = 'e-stop';\nvar checkAllParent = 'e-selectall-parent';\nvar searchBackIcon = 'e-input-group-icon e-back-icon e-icons';\nvar filterBarClearIcon = 'e-input-group-icon e-clear-icon e-icons';\nvar filterInput = 'e-input-filter';\nvar filterParent = 'e-filter-parent';\nvar mobileFilter = 'e-ddl-device-filter';\nvar clearIcon = 'e-clear-icon';\nvar popupFullScreen = 'e-popup-full-page';\nvar device = 'e-ddl-device';\nvar FOCUS$1 = 'e-input-focus';\n/**\n * The Multiselect enable CheckBoxSelection call this inject module.\n */\nvar CheckBoxSelection = /** @__PURE__ @class */function () {\n  function CheckBoxSelection(parent) {\n    this.activeLi = [];\n    this.activeEle = [];\n    this.parent = parent;\n    this.removeEventListener();\n    this.addEventListener();\n  }\n  CheckBoxSelection.prototype.getModuleName = function () {\n    return 'CheckBoxSelection';\n  };\n  CheckBoxSelection.prototype.addEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    this.parent.on('updatelist', this.listSelection, this);\n    this.parent.on('listoption', this.listOption, this);\n    this.parent.on('selectAll', this.setSelectAll, this);\n    this.parent.on('checkSelectAll', this.checkSelectAll, this);\n    this.parent.on('searchBox', this.setSearchBox, this);\n    this.parent.on('blur', this.onBlurHandler, this);\n    this.parent.on('targetElement', this.targetElement, this);\n    this.parent.on('deviceSearchBox', this.setDeviceSearchBox, this);\n    this.parent.on('inputFocus', this.getFocus, this);\n    this.parent.on('reOrder', this.setReorder, this);\n    this.parent.on('activeList', this.getActiveList, this);\n    this.parent.on('selectAllText', this.setLocale, this);\n    this.parent.on('filterBarPlaceholder', this.setPlaceholder, this);\n    EventHandler.add(document, 'mousedown', this.onDocumentClick, this);\n    this.parent.on('addItem', this.checboxCreate, this);\n    this.parent.on('popupFullScreen', this.setPopupFullScreen, this);\n  };\n  CheckBoxSelection.prototype.removeEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n    this.parent.off('updatelist', this.listSelection);\n    this.parent.off('listoption', this.listOption);\n    this.parent.off('selectAll', this.setSelectAll);\n    this.parent.off('checkSelectAll', this.checkSelectAll);\n    this.parent.off('searchBox', this.setSearchBox);\n    this.parent.off('blur', this.onBlurHandler);\n    this.parent.off('targetElement', this.targetElement);\n    this.parent.off('deviceSearchBox', this.setDeviceSearchBox);\n    this.parent.off('inputFocus', this.getFocus);\n    this.parent.off('reOrder', this.setReorder);\n    this.parent.off('activeList', this.getActiveList);\n    this.parent.off('selectAllText', this.setLocale);\n    this.parent.off('filterBarPlaceholder', this.setPlaceholder);\n    this.parent.off('addItem', this.checboxCreate);\n    this.parent.off('popupFullScreen', this.setPopupFullScreen);\n  };\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  CheckBoxSelection.prototype.listOption = function (args) {\n    var _this = this;\n    if (isNullOrUndefined(this.parent.listCurrentOptions.itemCreated)) {\n      this.parent.listCurrentOptions.itemCreated = function (e) {\n        _this.checboxCreate(e);\n      };\n    } else {\n      var itemCreated_1 = this.parent.listCurrentOptions.itemCreated;\n      this.parent.listCurrentOptions.itemCreated = function (e) {\n        _this.checboxCreate(e);\n        itemCreated_1.apply(_this, [e]);\n      };\n    }\n  };\n  CheckBoxSelection.prototype.setPlaceholder = function (props) {\n    Input.setPlaceholder(props.filterBarPlaceholder, this.filterInput);\n  };\n  CheckBoxSelection.prototype.checboxCreate = function (e) {\n    var item;\n    if (!isNullOrUndefined(e.item)) {\n      item = e.item;\n    } else {\n      item = e;\n    }\n    if (this.parent.enableGroupCheckBox || item.className !== 'e-list-group-item ' && item.className !== 'e-list-group-item') {\n      var checkboxEle = createCheckBox(this.parent.createElement, true);\n      var icon = select('div.' + ICON, item);\n      item.insertBefore(checkboxEle, item.childNodes[isNullOrUndefined(icon) ? 0 : 1]);\n      select('.' + CHECKBOXFRAME$1, checkboxEle);\n      if (this.parent.enableGroupCheckBox) {\n        this.parent.popupWrapper.classList.add('e-multiselect-group');\n      }\n      return item;\n    } else {\n      return item;\n    }\n  };\n  CheckBoxSelection.prototype.setSelectAll = function () {\n    if (this.parent.showSelectAll) {\n      if (isNullOrUndefined(this.checkAllParent)) {\n        this.checkAllParent = this.parent.createElement('div', {\n          className: checkAllParent\n        });\n        this.selectAllSpan = this.parent.createElement('span', {\n          className: 'e-all-text'\n        });\n        this.selectAllSpan.textContent = '';\n        this.checkAllParent.appendChild(this.selectAllSpan);\n        this.setLocale();\n        this.checboxCreate(this.checkAllParent);\n        if (this.parent.headerTemplate) {\n          if (!isNullOrUndefined(this.parent.filterParent)) {\n            append([this.checkAllParent], this.parent.filterParent);\n          } else {\n            append([this.checkAllParent], this.parent.popupWrapper);\n          }\n        }\n        if (!this.parent.headerTemplate) {\n          if (!isNullOrUndefined(this.parent.filterParent)) {\n            this.parent.filterParent.parentNode.insertBefore(this.checkAllParent, this.parent.filterParent.nextSibling);\n          } else {\n            prepend([this.checkAllParent], this.parent.popupWrapper);\n          }\n        }\n        EventHandler.add(this.checkAllParent, 'mousedown', this.clickHandler, this);\n      }\n      if (this.parent.list.classList.contains('e-nodata') || this.parent.listData && this.parent.listData.length <= 1 && !this.parent.isDynamicDataChange || this.parent.isDynamicDataChange && this.parent.listData && this.parent.listData.length <= 1) {\n        this.checkAllParent.style.display = 'none';\n      } else {\n        this.checkAllParent.style.display = 'block';\n      }\n      this.parent.selectAllHeight = this.checkAllParent.getBoundingClientRect().height;\n    } else if (!isNullOrUndefined(this.checkAllParent)) {\n      this.checkAllParent.parentElement.removeChild(this.checkAllParent);\n      this.checkAllParent = null;\n    }\n  };\n  CheckBoxSelection.prototype.destroy = function () {\n    this.removeEventListener();\n    EventHandler.remove(document, 'mousedown', this.onDocumentClick);\n    this.checkAllParent = null;\n    this.clearIconElement = null;\n    this.filterInput = null;\n    this.filterInputObj = null;\n    this.checkWrapper = null;\n    this.selectAllSpan = null;\n  };\n  CheckBoxSelection.prototype.listSelection = function (args) {\n    var target;\n    if (!isNullOrUndefined(args.e)) {\n      var frameElm = args.li.querySelector('.e-checkbox-wrapper .e-frame');\n      target = !isNullOrUndefined(args.e.target) ? args.e.target.classList.contains('e-frame') && (!this.parent.showSelectAll || this.checkAllParent && !this.checkAllParent.contains(args.e.target)) ? args.e.target : args.li.querySelector('.e-checkbox-wrapper').childNodes[1] : args.li.querySelector('.e-checkbox-wrapper').childNodes[1];\n    } else {\n      var checkboxWrapper = args.li.querySelector('.e-checkbox-wrapper');\n      target = checkboxWrapper ? checkboxWrapper.childNodes[1] : args.li.lastElementChild.childNodes[1];\n    }\n    if (this.parent.itemTemplate || this.parent.enableGroupCheckBox) {\n      target = args.li.firstElementChild.childNodes[1];\n    }\n    if (!isNullOrUndefined(target)) {\n      this.checkWrapper = closest(target, '.' + CHECKBOXWRAP$1);\n    }\n    if (!isNullOrUndefined(this.checkWrapper)) {\n      var checkElement = select('.' + CHECKBOXFRAME$1, this.checkWrapper);\n      var selectAll$$1 = false;\n      this.validateCheckNode(this.checkWrapper, checkElement.classList.contains(CHECK$1), args.li, args.e, selectAll$$1);\n    }\n  };\n  CheckBoxSelection.prototype.validateCheckNode = function (checkWrap, isCheck, li, e, selectAll$$1) {\n    this.changeState(checkWrap, isCheck ? 'uncheck' : 'check', e, true, selectAll$$1);\n  };\n  CheckBoxSelection.prototype.clickHandler = function (e) {\n    var target;\n    if (e.currentTarget.classList.contains(this.checkAllParent.className) || e.currentTarget.classList.value === this.checkAllParent.className) {\n      target = e.currentTarget.firstElementChild.lastElementChild;\n    } else {\n      target = e.currentTarget;\n    }\n    this.checkWrapper = closest(target, '.' + CHECKBOXWRAP$1);\n    var selectAll$$1 = true;\n    if (!isNullOrUndefined(this.checkWrapper)) {\n      var checkElement = select('.' + CHECKBOXFRAME$1, this.checkWrapper);\n      this.validateCheckNode(this.checkWrapper, checkElement.classList.contains(CHECK$1), null, e, selectAll$$1);\n    }\n    e.preventDefault();\n  };\n  CheckBoxSelection.prototype.changeState = function (wrapper, state, e, isPrevent, selectAll$$1) {\n    var frameSpan = wrapper.getElementsByClassName(CHECKBOXFRAME$1)[0];\n    if (state === 'check' && !frameSpan.classList.contains(CHECK$1)) {\n      frameSpan.classList.remove(INDETERMINATE);\n      frameSpan.classList.add(CHECK$1);\n      if (selectAll$$1) {\n        this.parent.selectAllItems(true, e);\n        this.setLocale(true);\n      }\n    } else if (state === 'uncheck' && (frameSpan.classList.contains(CHECK$1) || frameSpan.classList.contains(INDETERMINATE))) {\n      removeClass([frameSpan], [CHECK$1, INDETERMINATE]);\n      if (selectAll$$1) {\n        this.parent.selectAllItems(false, e);\n        this.setLocale();\n      }\n    } else if (state === 'indeterminate' && !frameSpan.classList.contains(INDETERMINATE)) {\n      removeClass([frameSpan], [CHECK$1]);\n      frameSpan.classList.add(INDETERMINATE);\n      if (selectAll$$1) {\n        this.parent.selectAllItems(false, e);\n        this.setLocale();\n      }\n    }\n  };\n  CheckBoxSelection.prototype.setSearchBox = function (args) {\n    if (isNullOrUndefined(this.parent.filterParent)) {\n      this.parent.filterParent = this.parent.createElement('span', {\n        className: filterParent\n      });\n      this.filterInput = this.parent.createElement('input', {\n        attrs: {\n          type: 'text'\n        },\n        className: filterInput\n      });\n      this.parent.element.parentNode.insertBefore(this.filterInput, this.parent.element);\n      var backIcon = false;\n      if (Browser.isDevice) {\n        backIcon = true;\n        this.parent.mobFilter = false;\n      }\n      this.filterInputObj = Input.createInput({\n        element: this.filterInput,\n        buttons: backIcon ? [searchBackIcon, filterBarClearIcon] : [filterBarClearIcon],\n        properties: {\n          placeholder: this.parent.filterBarPlaceholder\n        }\n      }, this.parent.createElement);\n      if (!isNullOrUndefined(this.parent.cssClass)) {\n        if (this.parent.cssClass.split(' ').indexOf('e-outline') !== -1) {\n          addClass([this.filterInputObj.container], 'e-outline');\n        } else if (this.parent.cssClass.split(' ').indexOf('e-filled') !== -1) {\n          addClass([this.filterInputObj.container], 'e-filled');\n        }\n      }\n      append([this.filterInputObj.container], this.parent.filterParent);\n      prepend([this.parent.filterParent], args.popupElement);\n      attributes(this.filterInput, {\n        'aria-disabled': 'false',\n        'role': 'combobox',\n        'autocomplete': 'off',\n        'autocapitalize': 'off',\n        'spellcheck': 'false',\n        'aria-label': 'multiselect',\n        'aria-expanded': 'true',\n        'aria-controls': args.popupElement.id\n      });\n      this.clearIconElement = this.filterInput.parentElement.querySelector('.' + clearIcon);\n      if (!Browser.isDevice && this.clearIconElement) {\n        EventHandler.add(this.clearIconElement, 'mousedown', this.clearText, this);\n        this.clearIconElement.style.visibility = 'hidden';\n      }\n      EventHandler.add(this.filterInput, 'input', this.parent.onInput, this.parent);\n      EventHandler.add(this.filterInput, 'keyup', this.parent.keyUp, this.parent);\n      EventHandler.add(this.filterInput, 'keydown', this.parent.onKeyDown, this.parent);\n      EventHandler.add(this.filterInput, 'blur', this.onBlurHandler, this);\n      EventHandler.add(this.filterInput, 'paste', this.parent.pasteHandler, this.parent);\n      this.parent.searchBoxHeight = this.filterInputObj.container.parentElement.getBoundingClientRect().height;\n      return this.filterInputObj;\n    }\n  };\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  CheckBoxSelection.prototype.clickOnBackIcon = function (e) {\n    this.parent.hidePopup();\n    removeClass([document.body, this.parent.popupObj.element], popupFullScreen);\n    this.parent.inputElement.focus();\n  };\n  CheckBoxSelection.prototype.clearText = function (e) {\n    this.parent.targetInputElement.value = '';\n    if (this.parent.allowFiltering && this.parent.targetInputElement.value === '') {\n      this.parent.search(null);\n    }\n    this.parent.refreshPopup();\n    this.parent.refreshListItems(null);\n    this.clearIconElement.style.visibility = 'hidden';\n    this.filterInput.focus();\n    this.setReorder(e);\n    e.preventDefault();\n  };\n  CheckBoxSelection.prototype.setDeviceSearchBox = function () {\n    this.parent.popupObj.element.classList.add(device);\n    this.parent.popupObj.element.classList.add(mobileFilter);\n    this.parent.popupObj.position = {\n      X: 0,\n      Y: 0\n    };\n    this.parent.popupObj.dataBind();\n    this.setSearchBoxPosition();\n    this.backIconElement = this.filterInputObj.container.querySelector('.e-back-icon');\n    this.clearIconElement = this.filterInputObj.container.querySelector('.' + clearIcon);\n    this.clearIconElement.style.visibility = 'hidden';\n    EventHandler.add(this.backIconElement, 'click', this.clickOnBackIcon, this);\n    EventHandler.add(this.clearIconElement, 'click', this.clearText, this);\n  };\n  CheckBoxSelection.prototype.setSearchBoxPosition = function () {\n    var searchBoxHeight = this.filterInput.parentElement.getBoundingClientRect().height;\n    var selectAllHeight = 0;\n    if (this.checkAllParent) {\n      selectAllHeight = this.checkAllParent.getBoundingClientRect().height;\n    }\n    this.parent.popupObj.element.style.maxHeight = '100%';\n    this.parent.popupObj.element.style.width = '100%';\n    this.parent.list.style.maxHeight = window.innerHeight - searchBoxHeight - selectAllHeight + 'px';\n    this.parent.list.style.height = window.innerHeight - searchBoxHeight - selectAllHeight + 'px';\n    var clearElement = this.filterInput.parentElement.querySelector('.' + clearIcon);\n    detach(this.filterInput);\n    clearElement.parentElement.insertBefore(this.filterInput, clearElement);\n  };\n  CheckBoxSelection.prototype.setPopupFullScreen = function () {\n    if (this.parent && this.parent.popupObj) {\n      attributes(this.parent.popupObj.element, {\n        style: 'left:0px;right:0px;top:0px;bottom:0px;'\n      });\n      addClass([document.body, this.parent.popupObj.element], popupFullScreen);\n      this.parent.popupObj.element.style.maxHeight = '100%';\n      this.parent.popupObj.element.style.width = '100%';\n    }\n  };\n  CheckBoxSelection.prototype.targetElement = function () {\n    if (!isNullOrUndefined(this.clearIconElement)) {\n      this.parent.targetInputElement = this.filterInput;\n      this.clearIconElement.style.visibility = this.parent.targetInputElement.value === '' ? 'hidden' : 'visible';\n    }\n    return this.parent.targetInputElement.value;\n  };\n  CheckBoxSelection.prototype.onBlurHandler = function (e) {\n    if (!this.parent.element.classList.contains('e-listbox')) {\n      var target = void 0;\n      if (this.parent.keyAction) {\n        return;\n      }\n      if (Browser.isIE) {\n        target = !isNullOrUndefined(e) && e.target;\n      }\n      if (!Browser.isIE) {\n        target = !isNullOrUndefined(e) && e.relatedTarget;\n      }\n      // eslint-disable-next-line max-len\n      if (this.parent.popupObj && document.body.contains(this.parent.popupObj.element) && this.parent.popupObj.element.contains(target) && !Browser.isIE && this.filterInput) {\n        this.filterInput.focus();\n        return;\n      }\n      if (this.parent.scrollFocusStatus && this.filterInput) {\n        e.preventDefault();\n        this.filterInput.focus();\n        this.parent.scrollFocusStatus = false;\n        return;\n      }\n      if (this.parent.popupObj && document.body.contains(this.parent.popupObj.element) && !this.parent.popupObj.element.classList.contains('e-popup-close')) {\n        this.parent.inputFocus = false;\n        this.parent.updateValueState(e, this.parent.value, this.parent.tempValues);\n        this.parent.dispatchEvent(this.parent.hiddenElement, 'change');\n      }\n      if (this.parent.popupObj && document.body.contains(this.parent.popupObj.element) && !this.parent.popupObj.element.classList.contains('e-popup-close')) {\n        this.parent.inputFocus = false;\n        this.parent.overAllWrapper.classList.remove(FOCUS$1);\n        this.parent.trigger('blur');\n        this.parent.focused = true;\n      }\n      if (this.parent.popupObj && document.body.contains(this.parent.popupObj.element) && !this.parent.popupObj.element.classList.contains('e-popup-close') && !Browser.isDevice) {\n        this.parent.hidePopup();\n      }\n    }\n  };\n  CheckBoxSelection.prototype.onDocumentClick = function (e) {\n    if (this.parent.getLocaleName() !== 'listbox') {\n      var target = e.target;\n      if (!isNullOrUndefined(this.parent.popupObj) && closest(target, '[id=\"' + this.parent.popupObj.element.id + '\"]')) {\n        if (!(this.filterInput && this.filterInput.value !== '')) {\n          e.preventDefault();\n        }\n      }\n      if (!(!isNullOrUndefined(this.parent.popupObj) && closest(target, '[id=\"' + this.parent.popupObj.element.id + '\"]')) && !isNullOrUndefined(this.parent.overAllWrapper) && !this.parent.overAllWrapper.contains(e.target)) {\n        if (this.parent.overAllWrapper.classList.contains(dropDownBaseClasses.focus) || this.parent.isPopupOpen()) {\n          this.parent.inputFocus = false;\n          this.parent.scrollFocusStatus = false;\n          this.parent.hidePopup();\n          this.parent.onBlurHandler(e, true);\n          this.parent.focused = true;\n        }\n      } else {\n        this.parent.scrollFocusStatus = (Browser.isIE || Browser.info.name === 'edge') && document.activeElement === this.filterInput;\n      }\n      if (!isNullOrUndefined(this.parent.overAllWrapper) && !this.parent.overAllWrapper.contains(e.target) && this.parent.overAllWrapper.classList.contains('e-input-focus') && !this.parent.isPopupOpen()) {\n        if (Browser.isIE) {\n          this.parent.onBlurHandler();\n        } else {\n          this.parent.onBlurHandler(e);\n        }\n      }\n      if (this.filterInput === target) {\n        this.filterInput.focus();\n      }\n    }\n  };\n  CheckBoxSelection.prototype.getFocus = function (e) {\n    this.parent.overAllWrapper.classList.remove(FOCUS$1);\n    if (this.parent.keyAction && e.value !== 'clear' && e.value !== 'focus') {\n      this.parent.keyAction = false;\n      return;\n    }\n    if (e.value === 'focus') {\n      this.filterInput.focus();\n      this.parent.removeFocus();\n      EventHandler.remove(this.parent.list, 'keydown', this.parent.onKeyDown);\n    }\n    if (e.value === 'clear') {\n      this.filterInput.value = '';\n      this.clearIconElement.style.visibility = 'hidden';\n    }\n  };\n  CheckBoxSelection.prototype.checkSelectAll = function (e) {\n    if (e.value === 'check') {\n      this.changeState(this.checkAllParent, e.value, null, null, false);\n      this.setLocale(true);\n    }\n    if (e.value === 'uncheck') {\n      this.changeState(this.checkAllParent, e.value, null, null, false);\n      this.setLocale();\n    }\n    if (e.value === 'indeterminate') {\n      this.changeState(this.checkAllParent, e.value, null, null, false);\n      this.setLocale();\n    }\n  };\n  CheckBoxSelection.prototype.setLocale = function (unSelect) {\n    if (this.parent.selectAllText !== 'Select All' || this.parent.unSelectAllText !== 'Unselect All') {\n      var template = unSelect ? this.parent.unSelectAllText : this.parent.selectAllText;\n      this.selectAllSpan.textContent = '';\n      var compiledString = compile(template);\n      var templateName = unSelect ? 'unSelectAllText' : 'selectAllText';\n      for (var _i = 0, _a = compiledString({}, this.parent, templateName, null, !this.parent.isStringTemplate); _i < _a.length; _i++) {\n        var item = _a[_i];\n        this.selectAllSpan.textContent = item.textContent;\n      }\n    } else {\n      var l10nLocale = {\n        selectAllText: 'Select All',\n        unSelectAllText: 'Unselect All'\n      };\n      var l10n = new L10n(this.parent.getLocaleName(), {}, this.parent.locale);\n      if (l10n.getConstant('selectAllText') === '') {\n        l10n = new L10n('dropdowns', l10nLocale, this.parent.locale);\n      }\n      this.selectAllSpan.textContent = unSelect ? l10n.getConstant('unSelectAllText') : l10n.getConstant('selectAllText');\n    }\n  };\n  CheckBoxSelection.prototype.getActiveList = function (args) {\n    if (args.li.classList.contains('e-active')) {\n      this.activeLi.push(args.li.cloneNode(true));\n    } else {\n      this.activeLi.splice(args.index, 1);\n    }\n  };\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  CheckBoxSelection.prototype.setReorder = function (args) {\n    if (this.parent.enableSelectionOrder && !isNullOrUndefined(this.parent.value)) {\n      var activeLiCount = this.parent.ulElement.querySelectorAll('li.e-active').length;\n      var remLi = void 0;\n      var ulEle_1 = this.parent.createElement('ul', {\n        className: 'e-list-parent e-ul e-reorder'\n      });\n      if (activeLiCount > 0) {\n        var activeListItems = this.parent.ulElement.querySelectorAll('li.e-active');\n        activeListItems.forEach(function (item) {\n          ulEle_1.appendChild(item);\n        });\n        remLi = this.parent.ulElement.querySelectorAll('li.e-active');\n        addClass(remLi, 'e-reorder-hide');\n        prepend([ulEle_1], this.parent.list);\n      }\n      this.parent.focusAtFirstListItem();\n    }\n  };\n  return CheckBoxSelection;\n}();\n\n/**\n * export all modules from current location\n */\n\nvar __extends$6 = undefined && undefined.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$6 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n// eslint-disable-next-line @typescript-eslint/triple-slash-reference\n/// <reference path='../drop-down-base/drop-down-base-model.d.ts'/>\n/**\n * Defines the Selection settings of List Box.\n */\nvar SelectionSettings = /** @__PURE__ @class */function (_super) {\n  __extends$6(SelectionSettings, _super);\n  function SelectionSettings() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  __decorate$6([Property('Multiple')], SelectionSettings.prototype, \"mode\", void 0);\n  __decorate$6([Property(false)], SelectionSettings.prototype, \"showCheckbox\", void 0);\n  __decorate$6([Property(false)], SelectionSettings.prototype, \"showSelectAll\", void 0);\n  __decorate$6([Property('Left')], SelectionSettings.prototype, \"checkboxPosition\", void 0);\n  return SelectionSettings;\n}(ChildProperty);\n/**\n * Defines the toolbar settings of List Box.\n */\nvar ToolbarSettings = /** @__PURE__ @class */function (_super) {\n  __extends$6(ToolbarSettings, _super);\n  function ToolbarSettings() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  __decorate$6([Property([])], ToolbarSettings.prototype, \"items\", void 0);\n  __decorate$6([Property('Right')], ToolbarSettings.prototype, \"position\", void 0);\n  return ToolbarSettings;\n}(ChildProperty);\n/**\n * The ListBox is a graphical user interface component used to display a list of items.\n * Users can select one or more items in the list using a checkbox or by keyboard selection.\n * It supports sorting, grouping, reordering and drag and drop of items.\n * ```html\n * <select id=\"listbox\">\n *      <option value='1'>Badminton</option>\n *      <option value='2'>Basketball</option>\n *      <option value='3'>Cricket</option>\n *      <option value='4'>Football</option>\n *      <option value='5'>Tennis</option>\n * </select>\n * ```\n * ```typescript\n * <script>\n *   var listObj = new ListBox();\n *   listObj.appendTo(\"#listbox\");\n * </script>\n * ```\n */\nvar ListBox = /** @__PURE__ @class */function (_super) {\n  __extends$6(ListBox, _super);\n  /**\n   * Constructor for creating the ListBox component.\n   *\n   * @param {ListBoxModel} options - Specifies ListBox model\n   * @param {string | HTMLElement} element - Specifies the element.\n   */\n  function ListBox(options, element) {\n    var _this = _super.call(this, options, element) || this;\n    _this.isValidKey = false;\n    _this.isDataSourceUpdate = false;\n    _this.keyDownStatus = false;\n    return _this;\n  }\n  ListBox_1 = ListBox;\n  /**\n   * Adds a new item to the popup list. By default, new item appends to the list as the last item,\n   * but you can insert based on the index parameter.\n   *\n   * @param  { Object[] } items - Specifies an array of JSON data or a JSON data.\n   * @param { number } itemIndex - Specifies the index to place the newly added item in the popup list.\n   * @returns {void}.\n   * @private\n   */\n  ListBox.prototype.addItem = function (items, itemIndex) {\n    _super.prototype.addItem.call(this, items, itemIndex);\n  };\n  /**\n   * Build and render the component.\n   *\n   * @private\n   * @returns {void}\n   */\n  ListBox.prototype.render = function () {\n    this.inputString = '';\n    this.initLoad = true;\n    this.isCustomFiltering = false;\n    this.initialSelectedOptions = this.value;\n    this.inputFormName = this.element.getAttribute('name');\n    _super.prototype.render.call(this);\n    this.setEnabled();\n    this.renderComplete();\n  };\n  ListBox.prototype.initWrapper = function () {\n    var hiddenSelect = this.createElement('select', {\n      className: 'e-hidden-select',\n      attrs: {\n        'multiple': ''\n      }\n    });\n    hiddenSelect.style.visibility = 'hidden';\n    this.list.classList.add('e-listbox-wrapper');\n    this.list.querySelector('.e-list-parent').setAttribute('role', 'presentation');\n    var groupHdrs = this.list.querySelectorAll('.e-list-group-item');\n    for (var i = 0; i < groupHdrs.length; i++) {\n      groupHdrs[i].removeAttribute('tabindex');\n      groupHdrs[i].setAttribute('role', 'option');\n    }\n    if (this.itemTemplate) {\n      this.list.classList.add('e-list-template');\n    }\n    this.list.classList.add('e-wrapper');\n    this.list.classList.add('e-lib');\n    if (this.element.tagName === 'EJS-LISTBOX') {\n      this.element.setAttribute('tabindex', '0');\n      if (this.initLoad) {\n        this.element.appendChild(this.list);\n      }\n    } else {\n      if (this.initLoad) {\n        this.element.parentElement.insertBefore(this.list, this.element);\n      }\n      this.list.insertBefore(this.element, this.list.firstChild);\n      this.element.style.display = 'none';\n    }\n    this.list.insertBefore(hiddenSelect, this.list.firstChild);\n    if (this.list.getElementsByClassName('e-list-item')[0]) {\n      this.list.getElementsByClassName('e-list-item')[0].classList.remove(dropDownBaseClasses.focus);\n    }\n    if (this.itemTemplate) {\n      this.renderReactTemplates();\n    }\n    removeClass([this.list], [dropDownBaseClasses.content, dropDownBaseClasses.root]);\n    this.validationAttribute(this.element, hiddenSelect);\n    this.list.setAttribute('role', 'listbox');\n    attributes(this.list, {\n      'role': 'listbox',\n      'aria-label': 'listbox',\n      'aria-multiselectable': this.selectionSettings.mode === 'Multiple' ? 'true' : 'false'\n    });\n    this.updateSelectionSettings();\n  };\n  ListBox.prototype.updateSelectionSettings = function () {\n    if (this.selectionSettings.showCheckbox && this.selectionSettings.showSelectAll && this.liCollections.length) {\n      var l10nSelect = new L10n(this.getModuleName(), {\n        selectAllText: 'Select All',\n        unSelectAllText: 'Unselect All'\n      }, this.locale);\n      this.showSelectAll = true;\n      this.selectAllText = l10nSelect.getConstant('selectAllText');\n      this.unSelectAllText = l10nSelect.getConstant('unSelectAllText');\n      this.popupWrapper = this.list;\n      this.checkBoxSelectionModule.checkAllParent = null;\n      this.notify('selectAll', {});\n    }\n  };\n  ListBox.prototype.initDraggable = function () {\n    var _this = this;\n    if (this.ulElement) {\n      this.ulElement.id = this.element.id + '_parent';\n    }\n    if (this.allowDragAndDrop) {\n      new Sortable(this.ulElement, {\n        scope: this.scope,\n        itemClass: 'e-list-item',\n        dragStart: this.triggerDragStart.bind(this),\n        drag: this.triggerDrag.bind(this),\n        beforeDrop: this.beforeDragEnd.bind(this),\n        drop: this.dragEnd.bind(this),\n        placeHolder: function () {\n          return _this.createElement('span', {\n            className: 'e-placeholder'\n          });\n        },\n        helper: function (e) {\n          var wrapper = _this.list.cloneNode();\n          var ele = e.sender.cloneNode(true);\n          wrapper.appendChild(ele);\n          var refEle = _this.getItems()[0];\n          wrapper.style.width = refEle.offsetWidth + 'px';\n          wrapper.style.height = refEle.offsetHeight + 'px';\n          if ((_this.value && _this.value.length) > 1 && _this.isSelected(ele)) {\n            ele.appendChild(_this.createElement('span', {\n              className: 'e-list-badge',\n              innerHTML: _this.value.length + ''\n            }));\n          }\n          wrapper.style.zIndex = getZindexPartial(_this.element) + '';\n          return wrapper;\n        }\n      });\n    }\n  };\n  ListBox.prototype.updateActionCompleteData = function (li, item, index) {\n    this.jsonData.splice(index, 0, item);\n  };\n  ListBox.prototype.initToolbar = function () {\n    var pos = this.toolbarSettings.position;\n    var prevScope = this.element.getAttribute('data-value');\n    if (this.toolbarSettings.items.length) {\n      var toolElem = this.createElement('div', {\n        className: 'e-listbox-tool',\n        attrs: {\n          'role': 'toolbar'\n        }\n      });\n      var wrapper = this.createElement('div', {\n        className: 'e-listboxtool-wrapper e-lib e-' + pos.toLowerCase()\n      });\n      this.list.parentElement.insertBefore(wrapper, this.list);\n      wrapper.appendChild(pos === 'Right' ? this.list : toolElem);\n      wrapper.appendChild(pos === 'Right' ? toolElem : this.list);\n      this.createButtons(toolElem);\n      if (!this.element.id) {\n        this.element.id = getUniqueID('e-' + this.getModuleName());\n      }\n      if (this.scope) {\n        document.querySelector(this.scope).setAttribute('data-value', this.element.id);\n      } else {\n        this.updateToolBarState();\n      }\n    }\n    var scope = this.element.getAttribute('data-value');\n    if (prevScope && scope && prevScope !== scope) {\n      this.tBListBox = getComponent(document.getElementById(prevScope), this.getModuleName());\n      this.tBListBox.updateToolBarState();\n    } else if (scope) {\n      this.tBListBox = getComponent(document.getElementById(scope), this.getModuleName());\n      this.tBListBox.updateToolBarState();\n    }\n  };\n  ListBox.prototype.createButtons = function (toolElem) {\n    var _this = this;\n    var btn;\n    var ele;\n    var title;\n    var l10n = new L10n(this.getModuleName(), {\n      moveUp: 'Move Up',\n      moveDown: 'Move Down',\n      moveTo: 'Move To',\n      moveFrom: 'Move From',\n      moveAllTo: 'Move All To',\n      moveAllFrom: 'Move All From'\n    }, this.locale);\n    this.toolbarSettings.items.forEach(function (value) {\n      title = l10n.getConstant(value);\n      ele = _this.createElement('button', {\n        attrs: {\n          'type': 'button',\n          'data-value': value,\n          'title': title,\n          'aria-label': title\n        }\n      });\n      toolElem.appendChild(ele);\n      btn = new Button({\n        iconCss: 'e-icons e-' + value.toLowerCase()\n      }, ele);\n      btn.createElement = _this.createElement;\n    });\n  };\n  ListBox.prototype.validationAttribute = function (input, hiddenSelect) {\n    if (this.inputFormName) {\n      input.setAttribute('name', this.inputFormName);\n    }\n    _super.prototype.validationAttribute.call(this, input, hiddenSelect);\n    hiddenSelect.required = input.required;\n    input.required = false;\n  };\n  ListBox.prototype.setHeight = function () {\n    var ele = this.toolbarSettings.items.length ? this.list.parentElement : this.list;\n    ele.style.height = formatUnit(this.height);\n    if (this.allowFiltering && this.height.toString().indexOf('%') < 0) {\n      addClass([this.list], 'e-filter-list');\n    } else {\n      removeClass([this.list], 'e-filter-list');\n    }\n  };\n  ListBox.prototype.setCssClass = function () {\n    var wrap = this.toolbarSettings.items.length ? this.list.parentElement : this.list;\n    if (this.cssClass) {\n      addClass([wrap], this.cssClass.replace(/\\s+/g, ' ').trim().split(' '));\n    }\n    if (this.enableRtl) {\n      addClass([this.list], 'e-rtl');\n    }\n  };\n  ListBox.prototype.setEnable = function () {\n    var ele = this.toolbarSettings.items.length ? this.list.parentElement : this.list;\n    if (this.enabled) {\n      removeClass([ele], cssClass.disabled);\n    } else {\n      addClass([ele], cssClass.disabled);\n    }\n  };\n  ListBox.prototype.showSpinner = function () {\n    if (!this.spinner) {\n      this.spinner = this.createElement('div', {\n        className: 'e-listbox-wrapper'\n      });\n    }\n    this.spinner.style.height = formatUnit(this.height);\n    this.element.parentElement.insertBefore(this.spinner, this.element.nextSibling);\n    createSpinner({\n      target: this.spinner\n    }, this.createElement);\n    showSpinner(this.spinner);\n  };\n  ListBox.prototype.hideSpinner = function () {\n    if (this.spinner.querySelector('.e-spinner-pane')) {\n      hideSpinner(this.spinner);\n    }\n    if (this.spinner.parentElement) {\n      detach(this.spinner);\n    }\n  };\n  ListBox.prototype.onInput = function () {\n    this.isDataSourceUpdate = false;\n    if (this.keyDownStatus) {\n      this.isValidKey = true;\n    } else {\n      this.isValidKey = false;\n    }\n    this.keyDownStatus = false;\n    this.refreshClearIcon();\n  };\n  ListBox.prototype.clearText = function () {\n    this.filterInput.value = '';\n    this.refreshClearIcon();\n    var event = document.createEvent('KeyboardEvent');\n    this.isValidKey = true;\n    this.KeyUp(event);\n  };\n  ListBox.prototype.refreshClearIcon = function () {\n    if (this.filterInput.parentElement.querySelector('.' + listBoxClasses.clearIcon)) {\n      var clearElement = this.filterInput.parentElement.querySelector('.' + listBoxClasses.clearIcon);\n      clearElement.style.visibility = this.filterInput.value === '' ? 'hidden' : 'visible';\n    }\n  };\n  ListBox.prototype.onActionComplete = function (ulElement, list, e) {\n    var searchEle;\n    var filterElem;\n    var txtLength;\n    if (this.allowFiltering && this.list.getElementsByClassName('e-filter-parent')[0]) {\n      searchEle = this.list.getElementsByClassName('e-filter-parent')[0].cloneNode(true);\n    }\n    if (list.length === 0) {\n      var noRecElem = ulElement.childNodes[0];\n      if (noRecElem) {\n        ulElement.removeChild(noRecElem);\n      }\n    }\n    if (this.allowFiltering) {\n      filterElem = this.list.getElementsByClassName('e-input-filter')[0];\n      if (filterElem) {\n        txtLength = filterElem.selectionStart;\n      }\n    }\n    _super.prototype.onActionComplete.call(this, ulElement, list, e);\n    if (this.allowFiltering && !isNullOrUndefined(searchEle)) {\n      this.list.insertBefore(searchEle, this.list.firstElementChild);\n      this.filterParent = this.list.getElementsByClassName('e-filter-parent')[0];\n      this.filterWireEvents(searchEle);\n      var inputSearch = searchEle.querySelector('.e-input-filter');\n      if (inputSearch) {\n        inputSearch.addEventListener('focus', function () {\n          if (!searchEle.childNodes[0].classList.contains('e-input-focus')) {\n            searchEle.childNodes[0].classList.add('e-input-focus');\n          }\n        });\n        inputSearch.addEventListener('blur', function () {\n          if (searchEle.childNodes[0].classList.contains('e-input-focus')) {\n            searchEle.childNodes[0].classList.remove('e-input-focus');\n          }\n        });\n      }\n    }\n    this.initWrapper();\n    this.setSelection();\n    this.initDraggable();\n    this.mainList = this.ulElement;\n    if (this.initLoad) {\n      this.jsonData = [];\n      extend(this.jsonData, list, []);\n      this.initToolbarAndStyles();\n      this.wireEvents();\n      if (this.showCheckbox) {\n        this.setCheckboxPosition();\n      }\n      if (this.allowFiltering) {\n        this.setFiltering();\n      }\n    } else {\n      if (this.isDataSourceUpdate) {\n        this.jsonData = [];\n        extend(this.jsonData, list, []);\n        this.isDataSourceUpdate = false;\n      }\n      if (this.allowFiltering) {\n        filterElem = this.list.getElementsByClassName('e-input-filter')[0];\n        filterElem.selectionStart = txtLength;\n        filterElem.selectionEnd = txtLength;\n        filterElem.focus();\n      }\n    }\n    if (this.toolbarSettings.items.length && this.scope && this.scope.indexOf('#') > -1 && !isNullOrUndefined(e)) {\n      var scope = this.scope.replace('#', '');\n      var scopedLB = getComponent(document.getElementById(scope), this.getModuleName());\n      scopedLB.initToolbar();\n    }\n    this.initLoad = false;\n  };\n  ListBox.prototype.initToolbarAndStyles = function () {\n    this.initToolbar();\n    this.setCssClass();\n    this.setEnable();\n    this.setHeight();\n  };\n  ListBox.prototype.triggerDragStart = function (args) {\n    var _this = this;\n    var badge;\n    args = extend(this.getDragArgs(args), {\n      dragSelected: true\n    });\n    if (Browser.isIos) {\n      this.list.style.overflow = 'hidden';\n    }\n    this.trigger('dragStart', args, function (dragEventArgs) {\n      _this.allowDragAll = dragEventArgs.dragSelected;\n      if (!_this.allowDragAll) {\n        badge = _this.ulElement.getElementsByClassName('e-list-badge')[0];\n        if (badge) {\n          detach(badge);\n        }\n      }\n    });\n  };\n  ListBox.prototype.triggerDrag = function (args) {\n    var _this = this;\n    var scrollParent;\n    var boundRect;\n    var scrollMoved = 36;\n    var scrollHeight = 10;\n    if (this.itemTemplate && args.target) {\n      if (args.target && args.target.closest('.e-list-item')) {\n        scrollHeight = args.target.closest('.e-list-item').scrollHeight;\n      } else {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var listItem = args.element.querySelector('.e-list-item');\n        if (listItem) {\n          scrollHeight = listItem.scrollHeight;\n        }\n      }\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var event = args.event;\n    var wrapper;\n    this.stopTimer();\n    if (args.target && (args.target.classList.contains('e-listbox-wrapper') || args.target.classList.contains('e-list-item') || args.target.classList.contains('e-filter-parent') || args.target.classList.contains('e-input-group') || args.target.closest('.e-list-item'))) {\n      if (args.target.classList.contains('e-list-item') || args.target.classList.contains('e-filter-parent') || args.target.classList.contains('e-input-group') || args.target.closest('.e-list-item')) {\n        wrapper = args.target.closest('.e-listbox-wrapper');\n      } else {\n        wrapper = args.target;\n      }\n      if (this.allowFiltering) {\n        scrollParent = wrapper.querySelector('.e-list-parent');\n      } else {\n        scrollParent = wrapper;\n      }\n      boundRect = scrollParent.getBoundingClientRect();\n      if (boundRect.y + scrollParent.offsetHeight - (event.clientY + scrollMoved) < 1) {\n        this.timer = window.setInterval(function () {\n          _this.setScrollDown(scrollParent, scrollHeight, true);\n        }, 70);\n      } else if (event.clientY - scrollMoved - boundRect.y < 1) {\n        this.timer = window.setInterval(function () {\n          _this.setScrollDown(scrollParent, scrollHeight, false);\n        }, 70);\n      }\n    }\n    if (args.target === null) {\n      return;\n    }\n    this.trigger('drag', this.getDragArgs(args));\n  };\n  ListBox.prototype.setScrollDown = function (scrollElem, scrollPixel, isScrollDown) {\n    if (isScrollDown) {\n      scrollElem.scrollTop = scrollElem.scrollTop + scrollPixel;\n    } else {\n      scrollElem.scrollTop = scrollElem.scrollTop - scrollPixel;\n    }\n  };\n  ListBox.prototype.stopTimer = function () {\n    window.clearInterval(this.timer);\n  };\n  ListBox.prototype.beforeDragEnd = function (args) {\n    this.stopTimer();\n    var items = [];\n    this.dragValue = this.getFormattedValue(args.droppedElement.getAttribute('data-value'));\n    if (this.value.indexOf(this.dragValue) > -1) {\n      args.items = this.getDataByValues(this.value);\n    } else {\n      args.items = this.getDataByValues([this.dragValue]);\n    }\n    extend(items, args.items);\n    this.trigger('beforeDrop', args);\n    if (args.items !== items) {\n      this.customDraggedItem = args.items;\n    }\n  };\n  ListBox.prototype.dragEnd = function (args) {\n    var _this = this;\n    var listData;\n    var liColl;\n    var jsonData;\n    var droppedData;\n    var selectedOptions;\n    var sortedData;\n    var dropValue = this.getFormattedValue(args.droppedElement.getAttribute('data-value'));\n    var listObj = this.getComponent(args.droppedElement);\n    var getArgs = this.getDragArgs({\n      target: args.droppedElement\n    }, true);\n    var sourceArgs = {\n      previousData: this.dataSource\n    };\n    var destArgs = {\n      previousData: listObj.dataSource\n    };\n    var dragArgs = extend({}, getArgs, {\n      target: args.target,\n      source: {\n        previousData: this.dataSource\n      },\n      previousIndex: args.previousIndex,\n      currentIndex: args.currentIndex\n    });\n    if (listObj !== this) {\n      var sourceArgs1 = extend(sourceArgs, {\n        currentData: this.listData\n      });\n      dragArgs = extend(dragArgs, {\n        source: sourceArgs1,\n        destination: destArgs\n      });\n    }\n    if (Browser.isIos) {\n      this.list.style.overflow = '';\n    }\n    var targetListObj = this.getComponent(args.target);\n    if (targetListObj && targetListObj.listData.length === 0) {\n      var noRecElem = targetListObj.ulElement.childNodes[0];\n      if (noRecElem) {\n        targetListObj.ulElement.removeChild(noRecElem);\n      }\n    }\n    if (listObj === this) {\n      var ul_1 = this.ulElement;\n      listData = [].slice.call(this.listData);\n      liColl = [].slice.call(this.liCollections);\n      jsonData = [].slice.call(this.jsonData);\n      sortedData = [].slice.call(this.sortedData);\n      var toSortIdx_1 = args.currentIndex;\n      var toIdx_1 = args.currentIndex = this.getCurIdx(this, args.currentIndex);\n      var rIdx = listData.indexOf(this.getDataByValue(dropValue));\n      var jsonIdx = jsonData.indexOf(this.getDataByValue(dropValue));\n      var sIdx = sortedData.indexOf(this.getDataByValue(dropValue));\n      listData.splice(toIdx_1, 0, listData.splice(rIdx, 1)[0]);\n      sortedData.splice(toSortIdx_1, 0, sortedData.splice(sIdx, 1)[0]);\n      jsonData.splice(toIdx_1, 0, jsonData.splice(jsonIdx, 1)[0]);\n      liColl.splice(toIdx_1, 0, liColl.splice(rIdx, 1)[0]);\n      if (this.allowDragAll) {\n        selectedOptions = this.value && Array.prototype.indexOf.call(this.value, dropValue) > -1 ? this.value : [dropValue];\n        if (!isNullOrUndefined(this.customDraggedItem)) {\n          selectedOptions = [];\n          this.customDraggedItem.forEach(function (item) {\n            selectedOptions.push(getValue(_this.fields.value, item));\n          });\n        }\n        selectedOptions.forEach(function (value) {\n          if (value !== dropValue) {\n            var idx = listData.indexOf(_this.getDataByValue(value));\n            var jsonIdx_1 = jsonData.indexOf(_this.getDataByValue(value));\n            var sIdx_1 = sortedData.indexOf(_this.getDataByValue(value));\n            if (idx > toIdx_1) {\n              toIdx_1++;\n            }\n            jsonData.splice(toIdx_1, 0, jsonData.splice(jsonIdx_1, 1)[0]);\n            listData.splice(toIdx_1, 0, listData.splice(idx, 1)[0]);\n            sortedData.splice(toSortIdx_1, 0, sortedData.splice(sIdx_1, 1)[0]);\n            liColl.splice(toIdx_1, 0, liColl.splice(idx, 1)[0]);\n            ul_1.insertBefore(_this.getItems()[_this.getIndexByValue(value)], ul_1.getElementsByClassName('e-placeholder')[0]);\n          }\n        });\n      }\n      this.listData = listData;\n      this.jsonData = jsonData;\n      this.sortedData = sortedData;\n      this.liCollections = liColl;\n    } else {\n      var li_1;\n      var fLiColl_1 = [].slice.call(this.liCollections);\n      var currIdx_1 = args.currentIndex = this.getCurIdx(listObj, args.currentIndex);\n      var ul_2 = listObj.ulElement;\n      listData = [].slice.call(listObj.listData);\n      liColl = [].slice.call(listObj.liCollections);\n      jsonData = [].slice.call(listObj.jsonData);\n      sortedData = [].slice.call(listObj.sortedData);\n      selectedOptions = this.value && Array.prototype.indexOf.call(this.value, dropValue) > -1 && this.allowDragAll ? this.value : [dropValue];\n      if (!isNullOrUndefined(this.customDraggedItem)) {\n        selectedOptions = [];\n        this.customDraggedItem.forEach(function (item) {\n          selectedOptions.push(getValue(_this.fields.value, item));\n        });\n      }\n      var fListData_1 = [].slice.call(this.listData);\n      var fSortData_1 = [].slice.call(this.sortedData);\n      selectedOptions.forEach(function (value, index) {\n        droppedData = _this.getDataByValue(value);\n        var srcIdx = _this.listData.indexOf(droppedData);\n        var jsonSrcIdx = _this.jsonData.indexOf(droppedData);\n        var sortIdx = _this.sortedData.indexOf(droppedData);\n        fListData_1.splice(srcIdx, 1);\n        _this.jsonData.splice(jsonSrcIdx, 1);\n        fSortData_1.splice(sortIdx, 1);\n        _this.listData = fListData_1;\n        _this.sortedData = fSortData_1;\n        var destIdx = value === dropValue ? args.currentIndex : currIdx_1;\n        listData.splice(destIdx, 0, droppedData);\n        jsonData.splice(destIdx, 0, droppedData);\n        sortedData.splice(destIdx, 0, droppedData);\n        liColl.splice(destIdx, 0, fLiColl_1.splice(srcIdx, 1)[0]);\n        if (!value) {\n          var liCollElem_1 = _this.getItems();\n          for (var i = 0; i < liCollElem_1.length; i++) {\n            if (liCollElem_1[i].getAttribute('data-value') === null && liCollElem_1[i].classList.contains('e-list-item')) {\n              li_1 = liCollElem_1[i];\n              break;\n            }\n          }\n        } else {\n          li_1 = _this.getItems()[_this.getIndexByValue(value)];\n        }\n        if (!li_1) {\n          li_1 = args.helper;\n        }\n        _this.removeSelected(_this, value === dropValue ? [args.droppedElement] : [li_1]);\n        ul_2.insertBefore(li_1, ul_2.getElementsByClassName('e-placeholder')[0]);\n        currIdx_1++;\n      });\n      if (this.fields.groupBy) {\n        var sourceElem = this.renderItems(this.listData, this.fields);\n        this.updateListItems(sourceElem, this.ulElement);\n        this.setSelection();\n      }\n      if (listObj.sortOrder !== 'None' || this.selectionSettings.showCheckbox !== listObj.selectionSettings.showCheckbox || listObj.fields.groupBy || listObj.itemTemplate || this.itemTemplate) {\n        var sortable = getComponent(ul_2, 'sortable');\n        var sourceElem = listObj.renderItems(listData, listObj.fields);\n        listObj.updateListItems(sourceElem, ul_2);\n        this.setSelection();\n        if (sortable.placeHolderElement) {\n          ul_2.appendChild(sortable.placeHolderElement);\n        }\n        ul_2.appendChild(args.helper);\n        listObj.setSelection();\n      }\n      this.liCollections = fLiColl_1;\n      listObj.liCollections = liColl;\n      listObj.jsonData = extend([], [], jsonData, false);\n      listObj.listData = extend([], [], listData, false);\n      listObj.sortedData = extend([], [], sortedData, false);\n      if (this.listData.length === 0) {\n        this.l10nUpdate();\n      }\n    }\n    if (this === listObj) {\n      var sourceArgs1 = extend(sourceArgs, {\n        currentData: listData\n      });\n      dragArgs = extend(dragArgs, {\n        source: sourceArgs1\n      });\n    } else {\n      var dragArgs1 = extend(destArgs, {\n        currentData: listData\n      });\n      dragArgs = extend(dragArgs, {\n        destination: dragArgs1\n      });\n    }\n    if (!isNullOrUndefined(this.customDraggedItem)) {\n      dragArgs.items = this.customDraggedItem;\n    }\n    this.trigger('drop', dragArgs);\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var liCollElem = dragArgs.elements;\n    if (liCollElem.length) {\n      for (var i = 0; i < liCollElem.length; i++) {\n        liCollElem[i].classList.remove('e-grabbed');\n      }\n    }\n  };\n  ListBox.prototype.updateListItems = function (sourceElem, destElem) {\n    var i = 0;\n    destElem.innerHTML = '';\n    while (i < sourceElem.childNodes.length) {\n      destElem.appendChild(sourceElem.childNodes[i]);\n    }\n  };\n  ListBox.prototype.removeSelected = function (listObj, elems) {\n    if (listObj.selectionSettings.showCheckbox) {\n      elems.forEach(function (ele) {\n        ele.getElementsByClassName('e-frame')[0].classList.remove('e-check');\n      });\n    } else {\n      removeClass(elems, cssClass.selected);\n    }\n  };\n  ListBox.prototype.getCurIdx = function (listObj, idx) {\n    if (listObj.fields.groupBy) {\n      idx -= [].slice.call(listObj.ulElement.children).slice(0, idx).filter(function (ele) {\n        return ele.classList.contains(cssClass.group);\n      }).length;\n    }\n    return idx;\n  };\n  ListBox.prototype.getComponent = function (li) {\n    var listObj;\n    var ele = this.element.tagName === 'EJS-LISTBOX' ? closest(li, '.e-listbox') : closest(li, '.e-listbox-wrapper') && closest(li, '.e-listbox-wrapper').querySelector('.e-listbox');\n    if (ele) {\n      listObj = getComponent(ele, this.getModuleName());\n    }\n    return listObj;\n  };\n  /**\n   * Sets the enabled state to DropDownBase.\n   *\n   * @returns {void}\n   */\n  ListBox.prototype.setEnabled = function () {\n    this.element.setAttribute('aria-disabled', this.enabled ? 'false' : 'true');\n  };\n  ListBox.prototype.listOption = function (dataSource, fields) {\n    this.listCurrentOptions = _super.prototype.listOption.call(this, dataSource, fields);\n    this.listCurrentOptions = extend({}, this.listCurrentOptions, {\n      itemCreated: this.triggerBeforeItemRender.bind(this)\n    }, true);\n    this.notify('listoption', {\n      module: 'CheckBoxSelection'\n    });\n    return this.listCurrentOptions;\n  };\n  ListBox.prototype.triggerBeforeItemRender = function (e) {\n    e.item.setAttribute('tabindex', '-1');\n    this.trigger('beforeItemRender', {\n      element: e.item,\n      item: e.curData\n    });\n  };\n  ListBox.prototype.requiredModules = function () {\n    var modules = [];\n    if (this.selectionSettings.showCheckbox) {\n      modules.push({\n        member: 'CheckBoxSelection',\n        args: [this]\n      });\n    }\n    return modules;\n  };\n  /**\n   * This method is used to enable or disable the items in the ListBox based on the items and enable argument.\n   *\n   * @param {string[]} items - Text items that needs to be enabled/disabled.\n   * @param {boolean} enable - Set `true`/`false` to enable/disable the list items.\n   * @param {boolean} isValue - Set `true` if `items` parameter is a array of unique values.\n   * @returns {void}\n   */\n  ListBox.prototype.enableItems = function (items, enable, isValue) {\n    var _this = this;\n    if (enable === void 0) {\n      enable = true;\n    }\n    var li;\n    items.forEach(function (item) {\n      var text = item;\n      li = _this.findListElement(_this.list, 'li', 'data-value', isValue ? text : _this.getValueByText(text));\n      if (!li) {\n        return;\n      }\n      if (enable) {\n        removeClass([li], cssClass.disabled);\n        li.removeAttribute('aria-disabled');\n      } else {\n        addClass([li], cssClass.disabled);\n        li.setAttribute('aria-disabled', 'true');\n      }\n    });\n  };\n  /**\n   * Based on the state parameter, specified list item will be selected/deselected.\n   *\n   * @param {string[]} items - Array of text value of the item.\n   * @param {boolean} state - Set `true`/`false` to select/un select the list items.\n   * @param {boolean} isValue - Set `true` if `items` parameter is a array of unique values.\n   * @returns {void}\n   */\n  ListBox.prototype.selectItems = function (items, state, isValue) {\n    if (state === void 0) {\n      state = true;\n    }\n    if (state && !this.selectionSettings.showCheckbox && this.selectionSettings.mode === 'Single') {\n      this.getSelectedItems().forEach(function (li) {\n        li.classList.remove('e-active');\n        li.removeAttribute('aria-selected');\n        removeClass([li], cssClass.selected);\n      });\n    }\n    this.setSelection(items, state, !isValue);\n    this.updateSelectedOptions();\n    var selElems = [];\n    for (var i = 0; i < items.length; i++) {\n      var liColl = this.list.querySelectorAll('[aria-selected=\"true\"]');\n      for (var j = 0; j < liColl.length; j++) {\n        if (items[i] === this.getFormattedValue(liColl[j].getAttribute('data-value'))) {\n          selElems.push(liColl[j]);\n        }\n      }\n    }\n    this.triggerChange(selElems, null);\n  };\n  /**\n   * Based on the state parameter, entire list item will be selected/deselected.\n   *\n   * @param {boolean} state - Set `true`/`false` to select/un select the entire list items.\n   * @returns {void}\n   */\n  ListBox.prototype.selectAll = function (state) {\n    if (state === void 0) {\n      state = true;\n    }\n    this.selectAllItems(state);\n  };\n  /**\n   * Adds a new item to the list. By default, new item appends to the list as the last item,\n   * but you can insert based on the index parameter.\n   *\n   * @param  { Object[] } items - Specifies an array of JSON data or a JSON data.\n   * @param { number } itemIndex - Specifies the index to place the newly added item in the list.\n   * @returns {void}.\n   */\n  ListBox.prototype.addItems = function (items, itemIndex) {\n    _super.prototype.addItem.call(this, items, itemIndex);\n  };\n  /**\n   * Removes a item from the list. By default, removed the last item in the list,\n   * but you can remove based on the index parameter.\n   *\n   * @param  { Object[] } items - Specifies an array of JSON data or a JSON data.\n   * @param { number } itemIndex - Specifies the index to remove the item from the list.\n   * @returns {void}.\n   */\n  ListBox.prototype.removeItems = function (items, itemIndex) {\n    this.removeItem(items, itemIndex);\n  };\n  /**\n   * Removes a item from the list. By default, removed the last item in the list,\n   * but you can remove based on the index parameter.\n   *\n   * @param  { Object[] } items - Specifies an array of JSON data or a JSON data.\n   * @param { number } itemIndex - Specifies the index to remove the item from the list.\n   * @returns {void}.\n   */\n  ListBox.prototype.removeItem = function (items, itemIndex) {\n    var liCollections = [];\n    var liElement = this.list.querySelectorAll('.' + dropDownBaseClasses.li);\n    if (items) {\n      items = items instanceof Array ? items : [items];\n      var fields = this.fields;\n      var dataValue = void 0;\n      var objValue = void 0;\n      var dupData = [];\n      var itemIdx = void 0;\n      extend(dupData, [], this.jsonData);\n      var removeIdxes = [];\n      var removeLiIdxes = [];\n      for (var j = 0; j < items.length; j++) {\n        if (items[j] instanceof Object) {\n          dataValue = getValue(fields.value, items[j]);\n        } else {\n          dataValue = items[j].toString();\n        }\n        for (var i = 0, len = dupData.length; i < len; i++) {\n          if (dupData[i] instanceof Object) {\n            objValue = getValue(fields.value, dupData[i]);\n          } else {\n            objValue = dupData[i].toString();\n          }\n          if (objValue === dataValue) {\n            itemIdx = this.getIndexByValue(dataValue);\n            var idx = itemIdx === i ? itemIdx : i;\n            liCollections.push(liElement[idx]);\n            removeIdxes.push(idx);\n            removeLiIdxes.push(idx);\n          }\n        }\n      }\n      for (var k = removeIdxes.length - 1; k >= 0; k--) {\n        this.listData.splice(removeIdxes[k], 1);\n      }\n      for (var k = removeIdxes.length - 1; k >= 0; k--) {\n        this.jsonData.splice(removeIdxes[k], 1);\n      }\n      for (var k = removeLiIdxes.length - 1; k >= 0; k--) {\n        this.updateLiCollection(removeLiIdxes[k]);\n      }\n    } else {\n      itemIndex = itemIndex ? itemIndex : 0;\n      liCollections.push(liElement[itemIndex]);\n      this.listData.splice(itemIndex, 1);\n      this.jsonData.splice(itemIndex, 1);\n      this.updateLiCollection(itemIndex);\n    }\n    for (var i = 0; i < liCollections.length; i++) {\n      this.ulElement.removeChild(liCollections[i]);\n    }\n    if (this.listData.length === 0) {\n      this.l10nUpdate();\n    }\n    this.value = [];\n    this.updateToolBarState();\n  };\n  /**\n   * Gets the array of data Object that matches the given array of values.\n   *\n   * @param  { string[] | number[] | boolean[] } value - Specifies the array value of the list item.\n   * @returns {object[]}.\n   */\n  ListBox.prototype.getDataByValues = function (value) {\n    var data = [];\n    for (var i = 0; i < value.length; i++) {\n      data.push(this.getDataByValue(value[i]));\n    }\n    return data;\n  };\n  /**\n   * Moves the given value(s) / selected value(s) upwards.\n   *\n   * @param  { string[] | number[] | boolean[] } value - Specifies the value(s).\n   * @returns {void}\n   */\n  ListBox.prototype.moveUp = function (value) {\n    var elem = value ? this.getElemByValue(value) : this.getSelectedItems();\n    this.moveUpDown(true, false, elem);\n  };\n  /**\n   * Moves the given value(s) / selected value(s) downwards.\n   *\n   * @param  { string[] | number[] | boolean[] } value - Specifies the value(s).\n   * @returns {void}\n   */\n  ListBox.prototype.moveDown = function (value) {\n    var elem = value ? this.getElemByValue(value) : this.getSelectedItems();\n    this.moveUpDown(false, false, elem);\n  };\n  /**\n   * Moves the given value(s) / selected value(s) in Top of the list.\n   *\n   * @param  { string[] | number[] | boolean[] } value - Specifies the value(s).\n   * @returns {void}\n   */\n  ListBox.prototype.moveTop = function (value) {\n    var elem = value ? this.getElemByValue(value) : this.getSelectedItems();\n    this.moveUpDown(null, false, elem, true);\n  };\n  /**\n   * Moves the given value(s) / selected value(s) in bottom of the list.\n   *\n   * @param  { string[] | number[] | boolean[] } value - Specifies the value(s).\n   * @returns {void}\n   */\n  ListBox.prototype.moveBottom = function (value) {\n    var elem = value ? this.getElemByValue(value) : this.getSelectedItems();\n    this.moveUpDown(true, false, elem, false, true);\n  };\n  /**\n   * Moves the given value(s) / selected value(s) to the given / default scoped ListBox.\n   *\n   * @param  { string[] | number[] | boolean[] } value - Specifies the value or array value of the list item.\n   * @param {number} index - Specifies the index.\n   * @param {string} targetId - Specifies the target id.\n   * @returns {void}\n   */\n  ListBox.prototype.moveTo = function (value, index, targetId) {\n    var elem = value ? this.getElemByValue(value) : this.getSelectedItems();\n    var tlistbox = targetId ? getComponent(targetId, ListBox_1) : this.getScopedListBox();\n    this.moveData(this, tlistbox, false, elem, index);\n  };\n  /**\n   * Moves all the values from one ListBox to the scoped ListBox.\n   *\n   * @param  { string } targetId - Specifies the scoped ListBox ID.\n   * @param  { string } index - Specifies the index to where the items moved.\n   * @returns {void}\n   */\n  ListBox.prototype.moveAllTo = function (targetId, index) {\n    if (this.listData.length > 0) {\n      var tlistbox = targetId ? getComponent(targetId, ListBox_1) : this.getScopedListBox();\n      this.moveAllData(this, tlistbox, false, index);\n    }\n  };\n  /* eslint-disable */\n  /**\n   * Gets the updated dataSource in ListBox.\n   *\n   * @returns {{ [key: string]: Object }[] | string[] | boolean[] | number[]} - Updated DataSource.\n   */\n  /* eslint-enable */\n  ListBox.prototype.getDataList = function () {\n    return this.jsonData;\n  };\n  /* eslint-disable */\n  /**\n   * Returns the sorted Data in ListBox.\n   *\n   * @returns {{ [key: string]: Object }[] | string[] | boolean[] | number[]} - Sorted data\n   */\n  /* eslint-enable */\n  ListBox.prototype.getSortedList = function () {\n    var sortData;\n    var tempData;\n    sortData = tempData = this.sortedData;\n    if (this.fields.groupBy) {\n      sortData = [];\n      for (var i = 0; i < tempData.length; i++) {\n        if (tempData[i].isHeader) {\n          continue;\n        }\n        sortData.push(tempData[i]);\n      }\n    }\n    return sortData;\n  };\n  ListBox.prototype.getElemByValue = function (value) {\n    var elem = [];\n    for (var i = 0; i < value.length; i++) {\n      elem.push(this.ulElement.querySelector('[data-value =\"' + value[i] + '\"]'));\n    }\n    return elem;\n  };\n  ListBox.prototype.updateLiCollection = function (index) {\n    var tempLi = [].slice.call(this.liCollections);\n    tempLi.splice(index, 1);\n    this.liCollections = tempLi;\n  };\n  ListBox.prototype.selectAllItems = function (state, event) {\n    var _this = this;\n    [].slice.call(this.getItems()).forEach(function (li) {\n      if (!li.classList.contains(cssClass.disabled)) {\n        if (_this.selectionSettings.showCheckbox) {\n          var ele = li.getElementsByClassName('e-check')[0];\n          if (!ele && state || ele && !state) {\n            _this.notify('updatelist', {\n              li: li,\n              module: 'listbox'\n            });\n            if (_this.maximumSelectionLength >= _this.list.querySelectorAll('.e-list-item span.e-check').length) {\n              _this.checkMaxSelection();\n            }\n          }\n        } else {\n          if (state) {\n            li.classList.add(cssClass.selected);\n          } else {\n            li.classList.remove(cssClass.selected);\n          }\n        }\n      }\n    });\n    this.updateSelectedOptions();\n    if (this.allowFiltering && this.selectionSettings.showCheckbox) {\n      var liEle = this.list.getElementsByTagName('li');\n      var index = 0;\n      if (state) {\n        var _loop_1 = function () {\n          var dataValue1 = this_1.getFormattedValue(liEle[index].getAttribute('data-value'));\n          if (!this_1.value.some(function (e) {\n            return e === dataValue1;\n          })) {\n            this_1.value.push(this_1.getFormattedValue(liEle[index].getAttribute('data-value')));\n          }\n        };\n        var this_1 = this;\n        for (index = 0; index < liEle.length; index++) {\n          _loop_1();\n        }\n      } else {\n        var _loop_2 = function () {\n          var dataValue2 = this_2.getFormattedValue(liEle[index].getAttribute('data-value'));\n          this_2.value = this_2.value.filter(function (e) {\n            return e !== dataValue2;\n          });\n        };\n        var this_2 = this;\n        for (index = 0; index < liEle.length; index++) {\n          _loop_2();\n        }\n      }\n      if (document.querySelectorAll('ul').length < 2) {\n        this.updateMainList();\n      }\n    }\n    this.triggerChange(this.getSelectedItems(), event);\n  };\n  ListBox.prototype.updateMainList = function () {\n    var mainList = this.mainList.querySelectorAll('.e-list-item');\n    var ulList = this.ulElement.querySelectorAll('.e-list-item');\n    var mainCount = mainList.length;\n    var ulEleCount = ulList.length;\n    if (this.selectionSettings.showCheckbox || document.querySelectorAll('ul').length > 1 || mainCount !== ulEleCount) {\n      var listindex = 0;\n      var valueindex = 0;\n      var count = 0;\n      for (listindex; listindex < mainCount;) {\n        if (this.value) {\n          for (valueindex; valueindex < this.value.length; valueindex++) {\n            if (mainList[listindex].getAttribute('data-value') === this.value[valueindex]) {\n              count++;\n            }\n          }\n        }\n        if (!count && this.selectionSettings.showCheckbox) {\n          mainList[listindex].getElementsByClassName('e-frame')[0].classList.remove('e-check');\n        }\n        if (document.querySelectorAll('ul').length > 1 && count && mainCount !== ulEleCount) {\n          this.mainList.removeChild(this.mainList.getElementsByTagName('li')[listindex]);\n          listindex = 0;\n        } else {\n          listindex++;\n        }\n        count = 0;\n        valueindex = 0;\n      }\n    }\n  };\n  ListBox.prototype.wireEvents = function () {\n    var form = closest(this.element, 'form');\n    var wrapper = this.element.tagName === 'EJS-LISTBOX' ? this.element : this.list;\n    EventHandler.add(this.list, 'click', this.clickHandler, this);\n    EventHandler.add(wrapper, 'keydown', this.keyDownHandler, this);\n    EventHandler.add(wrapper, 'focusout', this.focusOutHandler, this);\n    this.wireToolbarEvent();\n    if (this.selectionSettings.showCheckbox) {\n      EventHandler.remove(document, 'mousedown', this.checkBoxSelectionModule.onDocumentClick);\n    }\n    if (this.fields.groupBy || this.element.querySelector('select>optgroup')) {\n      EventHandler.remove(this.list, 'scroll', this.setFloatingHeader);\n    }\n    if (form) {\n      EventHandler.add(form, 'reset', this.formResetHandler, this);\n    }\n  };\n  ListBox.prototype.wireToolbarEvent = function () {\n    if (this.toolbarSettings.items.length) {\n      EventHandler.add(this.getToolElem(), 'click', this.toolbarClickHandler, this);\n    }\n  };\n  ListBox.prototype.unwireEvents = function () {\n    var form = closest(this.element, 'form');\n    var wrapper = this.element.tagName === 'EJS-LISTBOX' ? this.element : this.list;\n    EventHandler.remove(this.list, 'click', this.clickHandler);\n    EventHandler.remove(wrapper, 'keydown', this.keyDownHandler);\n    EventHandler.remove(wrapper, 'focusout', this.focusOutHandler);\n    if (this.allowFiltering && this.clearFilterIconElem) {\n      EventHandler.remove(this.clearFilterIconElem, 'click', this.clearText);\n    }\n    if (this.toolbarSettings.items.length) {\n      EventHandler.remove(this.getToolElem(), 'click', this.toolbarClickHandler);\n    }\n    if (form) {\n      EventHandler.remove(form, 'reset', this.formResetHandler);\n    }\n  };\n  ListBox.prototype.clickHandler = function (e) {\n    this.selectHandler(e);\n  };\n  ListBox.prototype.checkSelectAll = function () {\n    var searchCount = 0;\n    var liItems = this.list.querySelectorAll('li.' + dropDownBaseClasses.li);\n    for (var i = 0; i < liItems.length; i++) {\n      if (!liItems[i].classList.contains('e-disabled')) {\n        searchCount++;\n      }\n    }\n    var len = this.getSelectedItems().length;\n    if (this.showSelectAll && searchCount) {\n      this.notify('checkSelectAll', {\n        module: 'CheckBoxSelection',\n        value: searchCount === len ? 'check' : len === 0 ? 'uncheck' : 'indeterminate'\n      });\n    }\n  };\n  ListBox.prototype.getQuery = function (query) {\n    var filterQuery = query ? query.clone() : this.query ? this.query.clone() : new Query();\n    if (this.allowFiltering) {\n      var filterType = this.inputString === '' ? 'contains' : this.filterType;\n      var dataType = this.typeOfData(this.dataSource).typeof;\n      if (dataType === null) {\n        dataType = this.typeOfData(this.jsonData).typeof;\n      }\n      if (!(this.dataSource instanceof DataManager) && dataType === 'string' || dataType === 'number') {\n        filterQuery.where('', filterType, this.inputString, this.ignoreCase, this.ignoreAccent);\n      } else {\n        var fields = this.fields.text ? this.fields.text : '';\n        filterQuery.where(fields, filterType, this.inputString, this.ignoreCase, this.ignoreAccent);\n      }\n    } else {\n      filterQuery = query ? query : this.query ? this.query : new Query();\n    }\n    return filterQuery;\n  };\n  ListBox.prototype.setFiltering = function () {\n    var filterInputObj;\n    if (this.initLoad || isNullOrUndefined(this.filterParent)) {\n      this.filterParent = this.createElement('span', {\n        className: listBoxClasses.filterParent\n      });\n      this.filterInput = this.createElement('input', {\n        attrs: {\n          type: 'text'\n        },\n        className: listBoxClasses.filterInput\n      });\n      this.element.parentNode.insertBefore(this.filterInput, this.element);\n      filterInputObj = Input.createInput({\n        element: this.filterInput,\n        buttons: [listBoxClasses.filterBarClearIcon],\n        properties: {\n          placeholder: this.filterBarPlaceholder\n        }\n      }, this.createElement);\n      append([filterInputObj.container], this.filterParent);\n      prepend([this.filterParent], this.list);\n      attributes(this.filterInput, {\n        'aria-disabled': 'false',\n        'aria-label': 'search list item',\n        'autocomplete': 'off',\n        'autocorrect': 'off',\n        'autocapitalize': 'off',\n        'spellcheck': 'false',\n        'role': 'textbox'\n      });\n      if (this.height.toString().indexOf('%') < 0) {\n        addClass([this.list], 'e-filter-list');\n      }\n      this.inputString = this.filterInput.value;\n      this.filterWireEvents();\n      return filterInputObj;\n    }\n  };\n  ListBox.prototype.filterWireEvents = function (filterElem) {\n    if (filterElem) {\n      this.filterInput = filterElem.querySelector('.e-input-filter');\n    }\n    this.clearFilterIconElem = this.filterInput.parentElement.querySelector('.' + listBoxClasses.clearIcon);\n    if (this.clearFilterIconElem) {\n      EventHandler.add(this.clearFilterIconElem, 'click', this.clearText, this);\n      if (!filterElem) {\n        this.clearFilterIconElem.style.visibility = 'hidden';\n      }\n    }\n    EventHandler.add(this.filterInput, 'input', this.onInput, this);\n    EventHandler.add(this.filterInput, 'keyup', this.KeyUp, this);\n    EventHandler.add(this.filterInput, 'keydown', this.onKeyDown, this);\n  };\n  ListBox.prototype.selectHandler = function (e, isKey) {\n    var isSelect = true;\n    var currSelIdx;\n    var li = closest(e.target, '.' + 'e-list-item');\n    var selectedLi = [li];\n    if (li && li.parentElement) {\n      currSelIdx = [].slice.call(li.parentElement.children).indexOf(li);\n      if (!this.selectionSettings.showCheckbox) {\n        if ((e.ctrlKey || e.metaKey || Browser.isDevice) && this.isSelected(li)) {\n          li.classList.remove(cssClass.selected);\n          li.removeAttribute('aria-selected');\n          isSelect = false;\n        } else if (!(this.selectionSettings.mode === 'Multiple' && (e.ctrlKey || e.metaKey || Browser.isDevice))) {\n          this.getSelectedItems().forEach(function (ele) {\n            ele.removeAttribute('aria-selected');\n          });\n          removeClass(this.getSelectedItems(), cssClass.selected);\n        }\n      } else {\n        isSelect = !li.getElementsByClassName('e-frame')[0].classList.contains('e-check');\n      }\n      if (e.shiftKey && !this.selectionSettings.showCheckbox && this.selectionSettings.mode !== 'Single') {\n        selectedLi = [].slice.call(li.parentElement.children).slice(Math.min(currSelIdx, this.prevSelIdx), Math.max(currSelIdx, this.prevSelIdx) + 1).filter(function (ele) {\n          return ele.classList.contains('e-list-item');\n        });\n      } else {\n        this.prevSelIdx = [].slice.call(li.parentElement.children).indexOf(li);\n      }\n      if (isSelect) {\n        if (!this.selectionSettings.showCheckbox) {\n          addClass(selectedLi, cssClass.selected);\n        }\n        selectedLi.forEach(function (ele) {\n          ele.setAttribute('aria-selected', 'true');\n        });\n        this.list.setAttribute('aria-activedescendant', li.id);\n      } else {\n        selectedLi.forEach(function (ele) {\n          ele.setAttribute('aria-selected', 'false');\n        });\n      }\n      if (!isKey && (this.maximumSelectionLength > (this.value && this.value.length) || !isSelect) && (this.maximumSelectionLength >= (this.value && this.value.length) || !isSelect) && !(this.maximumSelectionLength < (this.value && this.value.length))) {\n        this.notify('updatelist', {\n          li: li,\n          e: e,\n          module: 'listbox'\n        });\n      }\n      if (this.allowFiltering && !isKey) {\n        var liDataValue_1 = this.getFormattedValue(li.getAttribute('data-value'));\n        if (!isSelect) {\n          this.value = this.value.filter(function (value1) {\n            return value1 !== liDataValue_1;\n          });\n        } else {\n          var values = [];\n          extend(values, this.value);\n          values.push(liDataValue_1);\n          this.value = values;\n        }\n        if (document.querySelectorAll('ul').length < 2) {\n          this.updateMainList();\n        }\n      }\n      this.updateSelectedOptions();\n      this.triggerChange(this.getSelectedItems(), e);\n      if (this.list) {\n        this.checkMaxSelection();\n      }\n    }\n  };\n  ListBox.prototype.triggerChange = function (selectedLis, event) {\n    this.trigger('change', {\n      elements: selectedLis,\n      items: this.getDataByElements(selectedLis),\n      value: this.value,\n      event: event\n    });\n  };\n  ListBox.prototype.getDataByElems = function (elems) {\n    var data = [];\n    for (var i = 0, len = elems.length; i < len; i++) {\n      data.push(this.getDataByValue(this.getFormattedValue(elems[i].getAttribute('data-value'))));\n    }\n    return data;\n  };\n  ListBox.prototype.getDataByElements = function (elems) {\n    var data = [];\n    var value;\n    var sIdx = 0;\n    if (!isNullOrUndefined(this.listData)) {\n      var type = this.typeOfData(this.listData).typeof;\n      if (type === 'string' || type === 'number' || type === 'boolean') {\n        for (var _i = 0, _a = this.listData; _i < _a.length; _i++) {\n          var item = _a[_i];\n          for (var i = sIdx, len = elems.length; i < len; i++) {\n            value = this.getFormattedValue(elems[i].getAttribute('data-value'));\n            if (!isNullOrUndefined(item) && item === value) {\n              sIdx = i;\n              data.push(item);\n              break;\n            }\n          }\n          if (elems.length === data.length) {\n            break;\n          }\n        }\n      } else {\n        for (var _b = 0, _c = this.listData; _b < _c.length; _b++) {\n          var item = _c[_b];\n          for (var i = sIdx, len = elems.length; i < len; i++) {\n            value = this.getFormattedValue(elems[i].getAttribute('data-value'));\n            if (!isNullOrUndefined(item) && getValue(this.fields.value ? this.fields.value : 'value', item) === value) {\n              sIdx = i;\n              data.push(item);\n              break;\n            }\n          }\n          if (elems.length === data.length) {\n            break;\n          }\n        }\n      }\n      return data;\n    }\n    return null;\n  };\n  ListBox.prototype.checkMaxSelection = function () {\n    var limit = this.list.querySelectorAll('.e-list-item span.e-check').length;\n    if (this.selectionSettings.showCheckbox) {\n      var index = 0;\n      var liCollElem = this.list.getElementsByClassName('e-list-item');\n      for (index; index < liCollElem.length; index++) {\n        if (!liCollElem[index].querySelector('.e-frame.e-check')) {\n          if (limit === this.maximumSelectionLength) {\n            liCollElem[index].classList.add('e-disable');\n          } else if (liCollElem[index].classList.contains('e-disable')) {\n            liCollElem[index].classList.remove('e-disable');\n          }\n        }\n      }\n    }\n  };\n  ListBox.prototype.toolbarClickHandler = function (e) {\n    var btn = closest(e.target, 'button');\n    if (btn) {\n      this.toolbarAction = btn.getAttribute('data-value');\n      if (btn.disabled) {\n        return;\n      }\n      switch (this.toolbarAction) {\n        case 'moveUp':\n          this.moveUpDown(true);\n          break;\n        case 'moveDown':\n          this.moveUpDown();\n          break;\n        case 'moveTo':\n          this.moveItemTo();\n          break;\n        case 'moveFrom':\n          this.moveItemFrom();\n          break;\n        case 'moveAllTo':\n          this.moveAllItemTo();\n          break;\n        case 'moveAllFrom':\n          this.moveAllItemFrom();\n          break;\n        default:\n          this.trigger('actionBegin', {\n            cancel: false,\n            items: this.getDataByElems(this.getSelectedItems()),\n            eventName: this.toolbarAction\n          });\n          break;\n      }\n    }\n  };\n  ListBox.prototype.moveUpDown = function (isUp, isKey, value, isTop, isBottom) {\n    var _this = this;\n    var elems = this.getSelectedItems();\n    if (value) {\n      elems = value;\n    }\n    if ((isUp && this.isSelected(this.ulElement.firstElementChild) || !isUp && this.isSelected(this.ulElement.lastElementChild)) && !value) {\n      return;\n    }\n    var tempItems = this.getDataByElems(elems);\n    var localDataArgs = {\n      cancel: false,\n      items: tempItems,\n      eventName: this.toolbarAction\n    };\n    this.trigger('actionBegin', localDataArgs);\n    if (localDataArgs.cancel) {\n      return;\n    }\n    (isUp ? elems : elems.reverse()).forEach(function (ele) {\n      var jsonToIdx = Array.prototype.indexOf.call(_this.ulElement.querySelectorAll('.e-list-item'), ele);\n      var idx = Array.prototype.indexOf.call(_this.ulElement.children, ele);\n      if (isTop) {\n        moveTo(_this.ulElement, _this.ulElement, [idx], 0);\n        _this.changeData(idx, 0, jsonToIdx, ele);\n      } else if (isBottom) {\n        moveTo(_this.ulElement, _this.ulElement, [idx], _this.ulElement.querySelectorAll('.e-list-item').length);\n        _this.changeData(idx, _this.ulElement.querySelectorAll('.e-list-item').length, jsonToIdx, ele);\n      } else {\n        moveTo(_this.ulElement, _this.ulElement, [idx], isUp ? idx - 1 : idx + 2);\n        _this.changeData(idx, isUp ? idx - 1 : idx + 1, isUp ? jsonToIdx - 1 : jsonToIdx + 1, ele);\n      }\n    });\n    this.trigger('actionComplete', {\n      items: tempItems,\n      eventName: this.toolbarAction\n    });\n    elems[0].focus();\n    if (!isKey && this.toolbarSettings.items.length) {\n      this.getToolElem().querySelector('[data-value=' + (isUp ? 'moveUp' : 'moveDown') + ']').focus();\n    }\n    this.updateToolBarState();\n  };\n  ListBox.prototype.moveItemTo = function () {\n    this.moveData(this, this.getScopedListBox());\n  };\n  ListBox.prototype.moveItemFrom = function () {\n    this.moveData(this.getScopedListBox(), this);\n  };\n  /**\n   * Called internally if any of the property value changed.\n   *\n   * @param {ListBox} fListBox - Specifies the from listbox.\n   * @param {ListBox} tListBox - Specifies the to listbox.\n   * @param {boolean} isKey - Specifies the key.\n   * @param {Element[]} value - Specifies the value.\n   * @param {number} index - Specifies the index.\n   * @returns {void}\n   * @private\n   */\n  ListBox.prototype.moveData = function (fListBox, tListBox, isKey, value, index) {\n    var idx = [];\n    var dataIdx = [];\n    var jsonIdx = [];\n    var sortIdx = [];\n    var listData = [].slice.call(fListBox.listData);\n    var tListData = [].slice.call(tListBox.listData);\n    var sortData = [].slice.call(fListBox.sortedData);\n    var tSortData = [].slice.call(tListBox.sortedData);\n    var fliCollections = [].slice.call(fListBox.liCollections);\n    var dataLiIdx = [];\n    var tliCollections = [].slice.call(tListBox.liCollections);\n    var tempItems = [];\n    var data = [];\n    var elems = fListBox.getSelectedItems();\n    if (value) {\n      elems = value;\n    }\n    var isRefresh = tListBox.sortOrder !== 'None' || tListBox.selectionSettings.showCheckbox !== fListBox.selectionSettings.showCheckbox || tListBox.fields.groupBy || tListBox.itemTemplate || fListBox.itemTemplate;\n    fListBox.value = [];\n    if (elems.length) {\n      this.removeSelected(fListBox, elems);\n      elems.forEach(function (ele) {\n        idx.push(Array.prototype.indexOf.call(fListBox.ulElement.children, ele)); // update sortable elem\n        // To update lb view data\n        dataLiIdx.push(Array.prototype.indexOf.call(fListBox.ulElement.querySelectorAll('.e-list-item'), ele));\n        // To update lb listdata data\n        dataIdx.push(Array.prototype.indexOf.call(fListBox.listData, fListBox.getDataByElems([ele])[0]));\n        // To update lb sorted data\n        sortIdx.push(Array.prototype.indexOf.call(fListBox.sortedData, fListBox.getDataByElems([ele])[0]));\n        // To update lb original data\n        jsonIdx.push(Array.prototype.indexOf.call(fListBox.jsonData, fListBox.getDataByElems([ele])[0]));\n      });\n      if (this.sortOrder !== 'None') {\n        sortIdx.forEach(function (i) {\n          tempItems.push(fListBox.sortedData[i]);\n        });\n      } else {\n        jsonIdx.forEach(function (i) {\n          tempItems.push(fListBox.jsonData[i]);\n        });\n      }\n      var localDataArgs = {\n        cancel: false,\n        items: tempItems,\n        eventName: this.toolbarAction\n      };\n      fListBox.trigger('actionBegin', localDataArgs);\n      if (localDataArgs.cancel) {\n        return;\n      }\n      var rLiCollection_1 = [];\n      dataLiIdx.sort(function (n1, n2) {\n        return n1 - n2;\n      }).reverse().forEach(function (i) {\n        rLiCollection_1.push(fliCollections.splice(i, 1)[0]);\n      });\n      fListBox.liCollections = fliCollections;\n      if (index) {\n        var toColl = tliCollections.splice(0, index);\n        tListBox.liCollections = toColl.concat(rLiCollection_1.reverse()).concat(tliCollections);\n      } else {\n        tListBox.liCollections = tliCollections.concat(rLiCollection_1.reverse());\n      }\n      if (tListBox.listData.length === 0) {\n        var noRecElem = tListBox.ulElement.childNodes[0];\n        if (noRecElem) {\n          tListBox.ulElement.removeChild(noRecElem);\n        }\n      }\n      dataIdx.sort(function (n1, n2) {\n        return n2 - n1;\n      }).forEach(function (i) {\n        // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n        listData.splice(i, 1)[0];\n      });\n      sortIdx.sort(function (n1, n2) {\n        return n2 - n1;\n      }).forEach(function (i) {\n        // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n        sortData.splice(i, 1)[0];\n      });\n      jsonIdx.slice().reverse().forEach(function (i) {\n        data.push(fListBox.jsonData.splice(i, 1)[0]);\n      });\n      if (isRefresh) {\n        if (fListBox.fields.groupBy) {\n          var sourceElem = fListBox.renderItems(listData, fListBox.fields);\n          fListBox.updateListItems(sourceElem, fListBox.ulElement);\n        } else {\n          elems.forEach(function (ele) {\n            detach(ele);\n          });\n        }\n      } else {\n        moveTo(fListBox.ulElement, tListBox.ulElement, idx, index);\n        fListBox.trigger('actionComplete', {\n          items: tempItems,\n          eventName: this.toolbarAction\n        });\n      }\n      if (tListBox.mainList.childElementCount !== tListBox.jsonData.length) {\n        tListBox.mainList = tListBox.ulElement;\n      }\n      fListBox.updateMainList();\n      var tJsonData = [].slice.call(tListBox.jsonData);\n      tSortData = [].slice.call(tListBox.sortedData);\n      this.selectNextList(elems, dataLiIdx, dataIdx, fListBox);\n      if (isKey) {\n        this.list.focus();\n      }\n      fListBox.listData = listData;\n      fListBox.sortedData = sortData;\n      index = index ? index : tListData.length;\n      for (var i = tempItems.length - 1; i >= 0; i--) {\n        tListData.splice(index, 0, tempItems[i]);\n        tJsonData.splice(index, 0, tempItems[i]);\n        tSortData.splice(index, 0, tempItems[i]);\n      }\n      tListBox.listData = tListData;\n      tListBox.jsonData = tJsonData;\n      tListBox.sortedData = tSortData;\n      if (isRefresh) {\n        var sourceElem = tListBox.renderItems(tListData, tListBox.fields);\n        tListBox.updateListItems(sourceElem, tListBox.ulElement);\n        tListBox.setSelection();\n        fListBox.trigger('actionComplete', {\n          items: tempItems,\n          eventName: this.toolbarAction\n        });\n      }\n      fListBox.updateSelectedOptions();\n      if (fListBox.listData.length === 0) {\n        fListBox.l10nUpdate();\n      }\n    }\n    if (fListBox.value.length === 1 && fListBox.getSelectedItems().length) {\n      fListBox.value[0] = fListBox.getFormattedValue(fListBox.getSelectedItems()[0].getAttribute('data-value'));\n    }\n  };\n  ListBox.prototype.selectNextList = function (elems, dataLiIdx, dataIdx, inst) {\n    var childCnt = inst.ulElement.querySelectorAll('.e-list-item').length;\n    var ele;\n    var liIdx;\n    var validIdx = -1;\n    if (elems.length === 1 && childCnt && !inst.selectionSettings.showCheckbox) {\n      liIdx = childCnt <= dataLiIdx[0] ? childCnt - 1 : dataLiIdx[0];\n      ele = inst.ulElement.querySelectorAll('.e-list-item')[liIdx];\n      validIdx = inst.getValidIndex(ele, liIdx, childCnt === dataIdx[0] ? 38 : 40);\n      if (validIdx > -1) {\n        inst.ulElement.querySelectorAll('.e-list-item')[validIdx].classList.add(cssClass.selected);\n      }\n    }\n  };\n  ListBox.prototype.moveAllItemTo = function () {\n    this.moveAllData(this, this.getScopedListBox());\n  };\n  ListBox.prototype.moveAllItemFrom = function () {\n    this.moveAllData(this.getScopedListBox(), this);\n  };\n  ListBox.prototype.moveAllData = function (fListBox, tListBox, isKey, index) {\n    var listData = [].slice.call(tListBox.listData);\n    var jsonData = [].slice.call(tListBox.jsonData);\n    var isRefresh = tListBox.sortOrder !== 'None' || tListBox.selectionSettings.showCheckbox !== fListBox.selectionSettings.showCheckbox || tListBox.fields.groupBy || tListBox.itemTemplate || fListBox.itemTemplate;\n    this.removeSelected(fListBox, fListBox.getSelectedItems());\n    var tempItems = [].slice.call(fListBox.listData);\n    var localDataArgs = {\n      cancel: false,\n      items: tempItems,\n      eventName: this.toolbarAction\n    };\n    fListBox.trigger('actionBegin', localDataArgs);\n    if (localDataArgs.cancel) {\n      return;\n    }\n    if (tListBox.listData.length === 0) {\n      var noRecElem = tListBox.ulElement.childNodes[0];\n      if (noRecElem) {\n        tListBox.ulElement.removeChild(noRecElem);\n      }\n    }\n    if (isRefresh) {\n      var noRecElem = fListBox.ulElement.childNodes[0];\n      if (noRecElem) {\n        fListBox.ulElement.removeChild(noRecElem);\n      }\n    }\n    moveTo(fListBox.ulElement, tListBox.ulElement,\n    // eslint-disable-next-line prefer-spread\n    Array.apply(null, {\n      length: fListBox.ulElement.childElementCount\n    }).map(Number.call, Number), index);\n    this.trigger('actionComplete', {\n      items: tempItems,\n      eventName: this.toolbarAction\n    });\n    if (isKey) {\n      this.list.focus();\n    }\n    index = index ? index : listData.length;\n    for (var i = 0; i < fListBox.listData.length; i++) {\n      listData.splice(index + i, 0, fListBox.listData[i]);\n    }\n    for (var i = 0; i < fListBox.jsonData.length; i++) {\n      jsonData.splice(index + i, 0, fListBox.jsonData[i]);\n    }\n    var fliCollections = [].slice.call(fListBox.liCollections);\n    var tliCollections = [].slice.call(tListBox.liCollections);\n    fListBox.liCollections = [];\n    if (index) {\n      var toColl = tliCollections.splice(0, index);\n      tListBox.liCollections = toColl.concat(fliCollections).concat(tliCollections);\n    } else {\n      tListBox.liCollections = tliCollections.concat(fliCollections);\n    }\n    fListBox.value = [];\n    listData = listData.filter(function (data) {\n      return data.isHeader !== true;\n    });\n    var sortedData = listData.filter(function (val) {\n      return tListBox.jsonData.indexOf(val) === -1;\n    });\n    for (var i = 0; i < sortedData.length; i++) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      tListBox.jsonData.splice(index + i, 0, sortedData[i]);\n    }\n    tListBox.listData = listData;\n    if (fListBox.listData.length === fListBox.jsonData.length) {\n      fListBox.listData = fListBox.sortedData = fListBox.jsonData = [];\n    } else if (fListBox.allowFiltering) {\n      for (var i = 0; i < fListBox.listData.length; i++) {\n        for (var j = 0; j < fListBox.jsonData.length; j++) {\n          if (fListBox.listData[i] === fListBox.jsonData[j]) {\n            fListBox.jsonData.splice(j, 1);\n          }\n        }\n      }\n      fListBox.listData = fListBox.sortedData = [];\n    }\n    if (isRefresh) {\n      var sourceElem = tListBox.renderItems(listData, tListBox.fields);\n      tListBox.updateListItems(sourceElem, tListBox.ulElement);\n      this.trigger('actionComplete', {\n        items: tempItems,\n        eventName: this.toolbarAction\n      });\n    } else {\n      tListBox.sortedData = listData;\n    }\n    fListBox.updateSelectedOptions();\n    if (fListBox.listData.length === 0) {\n      fListBox.l10nUpdate();\n    }\n  };\n  ListBox.prototype.changeData = function (fromIdx, toIdx, jsonToIdx, ele) {\n    var listData = [].slice.call(this.listData);\n    var jsonData = [].slice.call(this.jsonData);\n    var sortData = [].slice.call(this.sortedData);\n    var jsonIdx = Array.prototype.indexOf.call(this.jsonData, this.getDataByElems([ele])[0]);\n    var sortIdx = Array.prototype.indexOf.call(this.sortedData, this.getDataByElems([ele])[0]);\n    var liColl = [].slice.call(this.liCollections);\n    listData.splice(toIdx, 0, listData.splice(fromIdx, 1)[0]);\n    jsonData.splice(jsonToIdx, 0, jsonData.splice(jsonIdx, 1)[0]);\n    sortData.splice(toIdx, 0, sortData.splice(sortIdx, 1)[0]);\n    liColl.splice(toIdx, 0, liColl.splice(fromIdx, 1)[0]);\n    this.listData = listData;\n    this.jsonData = jsonData;\n    this.liCollections = liColl;\n    this.sortedData = sortData;\n  };\n  ListBox.prototype.getSelectedItems = function () {\n    var ele = [];\n    if (this.selectionSettings.showCheckbox) {\n      [].slice.call(this.ulElement.getElementsByClassName('e-check')).forEach(function (cbox) {\n        ele.push(closest(cbox, '.' + 'e-list-item'));\n      });\n    } else {\n      ele = [].slice.call(this.ulElement.getElementsByClassName(cssClass.selected));\n    }\n    return ele;\n  };\n  ListBox.prototype.getScopedListBox = function () {\n    var _this = this;\n    var listObj;\n    if (this.scope) {\n      [].slice.call(document.querySelectorAll(this.scope)).forEach(function (ele) {\n        if (getComponent(ele, _this.getModuleName())) {\n          listObj = getComponent(ele, _this.getModuleName());\n        }\n      });\n    }\n    return listObj;\n  };\n  ListBox.prototype.getGrabbedItems = function (args) {\n    var grabbItems = false;\n    for (var i = 0; i < this.value.length; i++) {\n      if (this.value[i] === this.getFormattedValue(args.target.getAttribute('data-value'))) {\n        grabbItems = true;\n        break;\n      }\n    }\n    if (grabbItems) {\n      for (var i = 0; i < this.value.length; i++) {\n        var liColl = this.list.querySelectorAll('[aria-selected=\"true\"]');\n        for (var j = 0; j < liColl.length; j++) {\n          if (this.value[i] === this.getFormattedValue(liColl[j].getAttribute('data-value'))) {\n            liColl[j].classList.add('e-grabbed');\n          }\n        }\n      }\n    }\n    var elems;\n    if (this.isAngular) {\n      elems = Array.prototype.slice.call(this.element.getElementsByClassName('e-list-parent')[0].querySelectorAll('.e-grabbed'));\n    } else {\n      elems = Array.prototype.slice.call(this.element.nextElementSibling.querySelectorAll('.e-grabbed'));\n    }\n    return elems;\n  };\n  ListBox.prototype.getDragArgs = function (args, isDragEnd) {\n    var elems = this.getGrabbedItems(args);\n    if (elems.length) {\n      if (isDragEnd) {\n        elems.push(args.target);\n      }\n    } else {\n      elems = [args.target];\n    }\n    return {\n      elements: elems,\n      items: this.getDataByElems(elems)\n    };\n  };\n  ListBox.prototype.onKeyDown = function (e) {\n    this.keyDownHandler(e);\n    e.stopPropagation();\n  };\n  ListBox.prototype.keyDownHandler = function (e) {\n    if ([32, 35, 36, 37, 38, 39, 40, 65].indexOf(e.keyCode) > -1 && (!this.allowFiltering || this.allowFiltering && e.target !== this.filterInput)) {\n      if (e.target && e.target.className.indexOf('e-edit-template') > -1) {\n        return;\n      }\n      e.preventDefault();\n      if (e.keyCode === 32 && this.ulElement.children.length) {\n        this.selectHandler({\n          target: this.ulElement.getElementsByClassName('e-focused')[0],\n          ctrlKey: e.ctrlKey,\n          shiftKey: e.shiftKey\n        });\n      } else if (e.keyCode === 65 && e.ctrlKey) {\n        this.selectAll();\n      } else if ((e.keyCode === 38 || e.keyCode === 40) && e.ctrlKey && e.shiftKey) {\n        this.moveUpDown(e.keyCode === 38 ? true : false, true);\n      } else if ((this.toolbarSettings.items.length || this.tBListBox) && (e.keyCode === 39 || e.keyCode === 37) && e.ctrlKey) {\n        var listObj = this.tBListBox || this.getScopedListBox();\n        if (e.keyCode === 39) {\n          if (e.shiftKey) {\n            this.moveAllData(this, listObj, true);\n          } else {\n            this.moveData(this, listObj, true);\n          }\n        } else {\n          if (e.shiftKey) {\n            this.moveAllData(listObj, this, true);\n          } else {\n            this.moveData(listObj, this, true);\n          }\n        }\n      } else if (e.keyCode !== 37 && e.keyCode !== 39 && e.code !== 'KeyA') {\n        this.upDownKeyHandler(e);\n      }\n    } else if (this.allowFiltering) {\n      if (e.keyCode === 40 || e.keyCode === 38) {\n        this.upDownKeyHandler(e);\n      }\n    }\n  };\n  ListBox.prototype.upDownKeyHandler = function (e) {\n    var ul = this.ulElement;\n    var defaultIdx = e.keyCode === 40 || e.keyCode === 36 ? 0 : ul.childElementCount - 1;\n    var fliIdx = defaultIdx;\n    var fli = ul.getElementsByClassName('e-focused')[0] || ul.getElementsByClassName(cssClass.selected)[0];\n    if (fli) {\n      if (e.keyCode !== 35 && e.keyCode !== 36) {\n        fliIdx = Array.prototype.indexOf.call(ul.children, fli);\n        if (e.keyCode === 40) {\n          fliIdx++;\n        } else {\n          fliIdx--;\n        }\n        if (fliIdx < 0 || fliIdx > ul.childElementCount - 1) {\n          return;\n        }\n      }\n      removeClass([fli], 'e-focused');\n    }\n    var cli = ul.children[fliIdx];\n    if (cli) {\n      fliIdx = this.getValidIndex(cli, fliIdx, e.keyCode);\n      if (fliIdx === -1) {\n        addClass([fli], 'e-focused');\n        return;\n      }\n      ul.children[fliIdx].focus();\n      ul.children[fliIdx].classList.add('e-focused');\n      if (!e.ctrlKey || !this.selectionSettings.showCheckbox && e.shiftKey && (e.keyCode === 36 || e.keyCode === 35)) {\n        this.selectHandler({\n          target: ul.children[fliIdx],\n          ctrlKey: e.ctrlKey,\n          shiftKey: e.shiftKey\n        }, true);\n      }\n      if (this.selectionSettings.showCheckbox && e.ctrlKey && e.shiftKey && (e.keyCode === 36 || e.keyCode === 35)) {\n        var selectedidx = Array.prototype.indexOf.call(ul.children, fli);\n        var sidx = e.code === 'Home' ? 0 : selectedidx;\n        var eidx = e.code === 'Home' ? selectedidx : ul.children.length - 1;\n        for (var i = sidx; i <= eidx; i++) {\n          var item = ul.children[i];\n          this.notify('updatelist', {\n            li: item,\n            e: {\n              target: this.ulElement.getElementsByClassName('e-focused')[0],\n              ctrlKey: e.ctrlKey,\n              shiftKey: e.shiftKey\n            },\n            module: 'listbox'\n          });\n        }\n      }\n    }\n  };\n  ListBox.prototype.KeyUp = function (e) {\n    var _this = this;\n    if (this.allowFiltering && e.ctrlKey && e.keyCode === 65) {\n      e.preventDefault();\n      return;\n    }\n    var char = String.fromCharCode(e.keyCode);\n    var isWordCharacter = char.match(/\\w/);\n    if (!isNullOrUndefined(isWordCharacter)) {\n      this.isValidKey = true;\n    }\n    this.isValidKey = e.keyCode === 8 || e.keyCode === 46 || this.isValidKey;\n    if (this.isValidKey) {\n      this.isValidKey = false;\n      switch (e.keyCode) {\n        default:\n          if (this.allowFiltering) {\n            var eventArgsData_1 = {\n              preventDefaultAction: false,\n              text: this.targetElement(),\n              updateData: function (dataSource, query, fields) {\n                if (eventArgsData_1.cancel) {\n                  return;\n                }\n                _this.isFiltered = true;\n                _this.remoteFilterAction = true;\n                _this.dataUpdater(dataSource, query, fields);\n              },\n              event: e,\n              cancel: false\n            };\n            this.trigger('filtering', eventArgsData_1, function (args) {\n              _this.isDataFetched = false;\n              if (args.cancel || _this.filterInput.value !== '' && _this.isFiltered) {\n                return;\n              }\n              if (!args.cancel && !_this.isCustomFiltering && !args.preventDefaultAction) {\n                _this.inputString = _this.filterInput.value;\n                _this.filteringAction(_this.jsonData, new Query(), _this.fields);\n              }\n              if (!_this.isFiltered && !_this.isCustomFiltering && !args.preventDefaultAction) {\n                _this.dataUpdater(_this.jsonData, new Query(), _this.fields);\n              }\n            });\n          }\n      }\n    }\n  };\n  /**\n   * To filter the data from given data source by using query.\n   *\n   * @param  {Object[] | DataManager } dataSource - Set the data source to filter.\n   * @param  {Query} query - Specify the query to filter the data.\n   * @param  {FieldSettingsModel} fields - Specify the fields to map the column in the data table.\n   * @returns {void}.\n   */\n  ListBox.prototype.filter = function (dataSource, query, fields) {\n    this.isCustomFiltering = true;\n    this.filteringAction(dataSource, query, fields);\n  };\n  ListBox.prototype.filteringAction = function (dataSource, query, fields) {\n    this.resetList(dataSource, fields, query);\n  };\n  ListBox.prototype.targetElement = function () {\n    this.targetInputElement = this.list.getElementsByClassName('e-input-filter')[0];\n    return this.targetInputElement.value;\n  };\n  ListBox.prototype.dataUpdater = function (dataSource, query, fields) {\n    this.isDataFetched = false;\n    var backCommand = true;\n    if (this.targetElement().trim() === '') {\n      var list = this.mainList.cloneNode ? this.mainList.cloneNode(true) : this.mainList;\n      if (backCommand) {\n        this.remoteCustomValue = false;\n        if (this.isAngular && this.itemTemplate) {\n          list = this.renderItems(this.listData, fields);\n        }\n        this.onActionComplete(list, this.jsonData);\n        this.notify('reOrder', {\n          module: 'CheckBoxSelection',\n          enable: this.selectionSettings.showCheckbox,\n          e: this\n        });\n      }\n    } else {\n      this.resetList(dataSource, fields, query);\n    }\n  };\n  ListBox.prototype.focusOutHandler = function () {\n    var ele = this.list.getElementsByClassName('e-focused')[0];\n    if (ele) {\n      ele.classList.remove('e-focused');\n    }\n    if (this.allowFiltering) {\n      this.refreshClearIcon();\n    }\n  };\n  ListBox.prototype.getValidIndex = function (cli, index, keyCode) {\n    var cul = this.ulElement;\n    if (cli.classList.contains('e-disabled') || cli.classList.contains(cssClass.group)) {\n      if (keyCode === 40 || keyCode === 36) {\n        index++;\n      } else {\n        index--;\n      }\n    }\n    if (index < 0 || index === cul.childElementCount) {\n      return -1;\n    }\n    cli = cul.childNodes[index];\n    if (cli.classList.contains('e-disabled') || cli.classList.contains(cssClass.group)) {\n      index = this.getValidIndex(cli, index, keyCode);\n    }\n    return index;\n  };\n  ListBox.prototype.updateSelectedOptions = function () {\n    var _this = this;\n    var selectedOptions = [];\n    var values = [];\n    extend(values, this.value);\n    this.getSelectedItems().forEach(function (ele) {\n      if (!ele.classList.contains('e-grabbed')) {\n        selectedOptions.push(_this.getFormattedValue(ele.getAttribute('data-value')));\n      }\n    });\n    if (this.mainList.childElementCount === this.ulElement.childElementCount) {\n      if (this.allowFiltering && this.selectionSettings.showCheckbox) {\n        for (var i = 0; i < selectedOptions.length; i++) {\n          if (values.indexOf(selectedOptions[i]) > -1) {\n            continue;\n          } else {\n            values.push(selectedOptions[i]);\n          }\n        }\n        this.setProperties({\n          value: values\n        }, true);\n      } else {\n        this.setProperties({\n          value: selectedOptions\n        }, true);\n      }\n    }\n    this.updateSelectTag();\n    this.updateToolBarState();\n    if (this.tBListBox) {\n      this.tBListBox.updateToolBarState();\n    }\n  };\n  ListBox.prototype.clearSelection = function (values) {\n    var _this = this;\n    if (values === void 0) {\n      values = this.value;\n    }\n    if (this.selectionSettings.showCheckbox) {\n      var dvalue_1;\n      this.getSelectedItems().forEach(function (li) {\n        dvalue_1 = _this.getFormattedValue(li.getAttribute('data-value'));\n        if (values.indexOf(dvalue_1) < 0) {\n          li.getElementsByClassName('e-check')[0].classList.remove('e-check');\n          li.removeAttribute('aria-selected');\n        }\n      });\n    }\n  };\n  ListBox.prototype.setSelection = function (values, isSelect, isText) {\n    var _this = this;\n    if (values === void 0) {\n      values = this.value;\n    }\n    if (isSelect === void 0) {\n      isSelect = true;\n    }\n    if (isText === void 0) {\n      isText = false;\n    }\n    var li;\n    var liselect;\n    if (values) {\n      values.forEach(function (value) {\n        var text;\n        if (isText) {\n          text = _this.getValueByText(value);\n        } else {\n          text = value;\n        }\n        if (typeof text === 'string') {\n          text = text.split('\\\\').join('\\\\\\\\');\n          li = _this.list.querySelector('[data-value=\"' + text.replace(/\"/g, '\\\\\"') + '\"]');\n        } else {\n          li = _this.list.querySelector('[data-value=\"' + text + '\"]');\n        }\n        if (li) {\n          if (_this.selectionSettings.showCheckbox) {\n            liselect = li.getElementsByClassName('e-frame')[0].classList.contains('e-check');\n          } else {\n            liselect = li.classList.contains('e-selected');\n          }\n          if (!isSelect && liselect || isSelect && !liselect && li) {\n            if (_this.selectionSettings.showCheckbox) {\n              _this.notify('updatelist', {\n                li: li,\n                module: 'listbox'\n              });\n              li.focus();\n            } else {\n              if (isSelect) {\n                li.classList.add(cssClass.selected);\n                li.setAttribute('aria-selected', 'true');\n                li.focus();\n              } else {\n                li.classList.remove(cssClass.selected);\n                li.removeAttribute('aria-selected');\n              }\n            }\n          }\n        }\n      });\n    }\n    this.updateSelectTag();\n  };\n  ListBox.prototype.updateSelectTag = function () {\n    var ele = this.getSelectTag();\n    var innerHTML = '';\n    ele.innerHTML = '';\n    if (this.value) {\n      for (var i = 0, len = this.value.length; i < len; i++) {\n        innerHTML += '<option selected>' + this.value[i] + '</option>';\n      }\n      ele.innerHTML += innerHTML;\n      for (var i = 0, len = ele.childNodes.length; i < len; i++) {\n        ele.childNodes[i].setAttribute('value', this.value[i].toString());\n      }\n    }\n    this.checkSelectAll();\n  };\n  ListBox.prototype.checkDisabledState = function (inst) {\n    return inst.ulElement.querySelectorAll('.' + cssClass.li).length === 0;\n  };\n  ListBox.prototype.updateToolBarState = function () {\n    var _this = this;\n    if (this.toolbarSettings.items.length) {\n      var listObj_1 = this.getScopedListBox();\n      var wrap_1 = this.list.parentElement.getElementsByClassName('e-listbox-tool')[0];\n      this.toolbarSettings.items.forEach(function (value) {\n        var btn = wrap_1.querySelector('[data-value=\"' + value + '\"]');\n        switch (value) {\n          case 'moveAllTo':\n            btn.disabled = _this.checkDisabledState(_this);\n            break;\n          case 'moveAllFrom':\n            btn.disabled = _this.checkDisabledState(listObj_1);\n            break;\n          case 'moveFrom':\n            btn.disabled = listObj_1.value && listObj_1.value.length ? false : true;\n            break;\n          case 'moveUp':\n            btn.disabled = _this.value && _this.value.length && !_this.isSelected(_this.ulElement.children[0]) ? false : true;\n            break;\n          case 'moveDown':\n            btn.disabled = _this.value && _this.value.length && !_this.isSelected(_this.ulElement.children[_this.ulElement.childElementCount - 1]) ? false : true;\n            break;\n          default:\n            btn.disabled = _this.value && _this.value.length ? false : true;\n            break;\n        }\n      });\n    }\n  };\n  ListBox.prototype.setCheckboxPosition = function () {\n    var listWrap = this.list;\n    if (!this.initLoad && this.selectionSettings.checkboxPosition === 'Left') {\n      listWrap.classList.remove('e-right');\n    }\n    if (this.selectionSettings.checkboxPosition === 'Right') {\n      listWrap.classList.add('e-right');\n    }\n  };\n  ListBox.prototype.showCheckbox = function (showCheckbox) {\n    var index = 0;\n    var liColl = this.list.lastElementChild.querySelectorAll('li');\n    var liCollLen = this.list.lastElementChild.getElementsByClassName('e-list-item').length;\n    if (showCheckbox) {\n      this.ulElement = this.renderItems(this.listData, this.fields);\n      this.mainList = this.ulElement;\n      this.list.removeChild(this.list.getElementsByTagName('ul')[0]);\n      this.list.appendChild(this.ulElement);\n      if (this.selectionSettings.showSelectAll && !this.list.getElementsByClassName('e-selectall-parent')[0]) {\n        var l10nShow = new L10n(this.getModuleName(), {\n          selectAllText: 'Select All',\n          unSelectAllText: 'Unselect All'\n        }, this.locale);\n        this.showSelectAll = true;\n        this.selectAllText = l10nShow.getConstant('selectAllText');\n        this.unSelectAllText = l10nShow.getConstant('unSelectAllText');\n        this.popupWrapper = this.list;\n        this.checkBoxSelectionModule.checkAllParent = null;\n        this.notify('selectAll', {});\n        this.checkSelectAll();\n      }\n    } else {\n      if (this.list.getElementsByClassName('e-selectall-parent')[0]) {\n        this.list.removeChild(this.list.getElementsByClassName('e-selectall-parent')[0]);\n      }\n      for (index; index < liCollLen; index++) {\n        if (liColl[index].classList.contains('e-list-item')) {\n          liColl[index].removeChild(liColl[index].getElementsByClassName('e-checkbox-wrapper')[0]);\n        }\n        if (liColl[index].hasAttribute('aria-selected')) {\n          liColl[index].removeAttribute('aria-selected');\n        }\n      }\n      this.mainList = this.ulElement;\n    }\n    this.value = [];\n  };\n  ListBox.prototype.isSelected = function (ele) {\n    if (!isNullOrUndefined(ele)) {\n      return ele.classList.contains(cssClass.selected) || ele.querySelector('.e-check') !== null;\n    } else {\n      return false;\n    }\n  };\n  ListBox.prototype.getSelectTag = function () {\n    return this.list.getElementsByClassName('e-hidden-select')[0];\n  };\n  ListBox.prototype.getToolElem = function () {\n    return this.list.parentElement.getElementsByClassName('e-listbox-tool')[0];\n  };\n  ListBox.prototype.formResetHandler = function () {\n    this.value = this.initialSelectedOptions;\n  };\n  /**\n   * Return the module name.\n   *\n   * @private\n   * @returns {string} - Module name\n   */\n  ListBox.prototype.getModuleName = function () {\n    return 'listbox';\n  };\n  /**\n   * Get the properties to be maintained in the persisted state.\n   *\n   * @returns {string} - Persist data\n   */\n  ListBox.prototype.getPersistData = function () {\n    return this.addOnPersist(['value']);\n  };\n  ListBox.prototype.getLocaleName = function () {\n    return 'listbox';\n  };\n  ListBox.prototype.destroy = function () {\n    this.unwireEvents();\n    if (this.element.tagName === 'EJS-LISTBOX') {\n      this.element.innerHTML = '';\n    } else {\n      this.element.style.display = 'inline-block';\n      if (this.toolbarSettings.items.length) {\n        this.list.parentElement.parentElement.insertBefore(this.list, this.list.parentElement);\n        detach(this.list.nextElementSibling);\n      }\n      this.list.parentElement.insertBefore(this.element, this.list);\n    }\n    _super.prototype.destroy.call(this);\n    this.enableRtlElements = [];\n    this.liCollections = null;\n    this.list = null;\n    this.ulElement = null;\n    this.mainList = null;\n    this.spinner = null;\n    this.rippleFun = null;\n    if (this.itemTemplate) {\n      this.clearTemplate();\n    }\n  };\n  /**\n   * Called internally if any of the property value changed.\n   *\n   * @param {ListBoxModel} newProp - Specifies the new properties.\n   * @param {ListBoxModel} oldProp - Specifies the old properties.\n   * @returns {void}\n   * @private\n   */\n  ListBox.prototype.onPropertyChanged = function (newProp, oldProp) {\n    var wrap = this.toolbarSettings.items.length ? this.list.parentElement : this.list;\n    _super.prototype.onPropertyChanged.call(this, newProp, oldProp);\n    this.setUpdateInitial(['fields', 'query', 'dataSource'], newProp);\n    for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n      switch (prop) {\n        case 'cssClass':\n          if (oldProp.cssClass) {\n            removeClass([wrap], oldProp.cssClass.split(' '));\n          }\n          if (newProp.cssClass) {\n            addClass([wrap], newProp.cssClass.replace(/\\s+/g, ' ').trim().split(' '));\n          }\n          break;\n        case 'enableRtl':\n          if (newProp.enableRtl) {\n            this.list.classList.add('e-rtl');\n          } else {\n            this.list.classList.remove('e-rtl');\n          }\n          break;\n        case 'value':\n          removeClass(this.list.querySelectorAll('.' + cssClass.selected), cssClass.selected);\n          this.clearSelection(this.value);\n          this.setSelection();\n          break;\n        case 'height':\n          this.setHeight();\n          break;\n        case 'enabled':\n          this.setEnable();\n          break;\n        case 'allowDragAndDrop':\n          if (newProp.allowDragAndDrop) {\n            this.initDraggable();\n          } else {\n            getComponent(this.ulElement, 'sortable').destroy();\n          }\n          break;\n        case 'allowFiltering':\n          if (this.allowFiltering) {\n            this.setFiltering();\n          } else {\n            this.list.removeChild(this.list.getElementsByClassName('e-filter-parent')[0]);\n            this.filterParent = null;\n            removeClass([this.list], 'e-filter-list');\n          }\n          break;\n        case 'filterBarPlaceholder':\n          if (this.allowFiltering) {\n            if (this.filterInput) {\n              Input.setPlaceholder(newProp.filterBarPlaceholder, this.filterInput);\n            }\n          }\n          break;\n        case 'scope':\n          if (this.allowDragAndDrop) {\n            getComponent(this.ulElement, 'sortable').scope = newProp.scope;\n          }\n          if (this.toolbarSettings.items.length) {\n            if (oldProp.scope) {\n              getComponent(document.querySelector(oldProp.scope), this.getModuleName()).tBListBox = null;\n            }\n            if (newProp.scope) {\n              getComponent(document.querySelector(newProp.scope), this.getModuleName()).tBListBox = this;\n            }\n          }\n          break;\n        case 'toolbarSettings':\n          {\n            var ele = void 0;\n            var pos = newProp.toolbarSettings.position;\n            var toolElem = this.getToolElem();\n            if (pos) {\n              removeClass([wrap], ['e-right', 'e-left']);\n              wrap.classList.add('e-' + pos.toLowerCase());\n              if (pos === 'Left') {\n                wrap.insertBefore(toolElem, this.list);\n              } else {\n                wrap.appendChild(toolElem);\n              }\n            }\n            if (newProp.toolbarSettings.items) {\n              if (oldProp.toolbarSettings && oldProp.toolbarSettings.items.length) {\n                ele = this.list.parentElement;\n                ele.parentElement.insertBefore(this.list, ele);\n                detach(ele);\n              }\n              this.initToolbarAndStyles();\n              this.wireToolbarEvent();\n            }\n            break;\n          }\n        case 'selectionSettings':\n          {\n            var showSelectAll = newProp.selectionSettings.showSelectAll;\n            var showCheckbox = newProp.selectionSettings.showCheckbox;\n            if (!isNullOrUndefined(showSelectAll)) {\n              this.showSelectAll = showSelectAll;\n              if (this.showSelectAll) {\n                var l10nSel = new L10n(this.getModuleName(), {\n                  selectAllText: 'Select All',\n                  unSelectAllText: 'Unselect All'\n                }, this.locale);\n                this.checkBoxSelectionModule.checkAllParent = null;\n                this.showSelectAll = true;\n                this.selectAllText = l10nSel.getConstant('selectAllText');\n                this.unSelectAllText = l10nSel.getConstant('selectAllText');\n                this.popupWrapper = this.list;\n              }\n              this.notify('selectAll', {});\n              this.checkSelectAll();\n            }\n            if (!isNullOrUndefined(showCheckbox)) {\n              this.showCheckbox(showCheckbox);\n            }\n            if (this.selectionSettings.showCheckbox) {\n              this.setCheckboxPosition();\n            }\n            break;\n          }\n        case 'dataSource':\n          this.isDataSourceUpdate = true;\n          this.jsonData = [].slice.call(this.dataSource);\n          break;\n      }\n    }\n  };\n  var ListBox_1;\n  __decorate$6([Property('')], ListBox.prototype, \"cssClass\", void 0);\n  __decorate$6([Property([])], ListBox.prototype, \"value\", void 0);\n  __decorate$6([Property('')], ListBox.prototype, \"height\", void 0);\n  __decorate$6([Property(true)], ListBox.prototype, \"enabled\", void 0);\n  __decorate$6([Property(false)], ListBox.prototype, \"enablePersistence\", void 0);\n  __decorate$6([Property(false)], ListBox.prototype, \"allowDragAndDrop\", void 0);\n  __decorate$6([Property(1000)], ListBox.prototype, \"maximumSelectionLength\", void 0);\n  __decorate$6([Property(false)], ListBox.prototype, \"allowFiltering\", void 0);\n  __decorate$6([Property('')], ListBox.prototype, \"scope\", void 0);\n  __decorate$6([Property(true)], ListBox.prototype, \"ignoreCase\", void 0);\n  __decorate$6([Property(null)], ListBox.prototype, \"filterBarPlaceholder\", void 0);\n  __decorate$6([Event()], ListBox.prototype, \"beforeItemRender\", void 0);\n  __decorate$6([Event()], ListBox.prototype, \"filtering\", void 0);\n  __decorate$6([Event()], ListBox.prototype, \"select\", void 0);\n  __decorate$6([Event()], ListBox.prototype, \"change\", void 0);\n  __decorate$6([Event()], ListBox.prototype, \"beforeDrop\", void 0);\n  __decorate$6([Event()], ListBox.prototype, \"dragStart\", void 0);\n  __decorate$6([Event()], ListBox.prototype, \"drag\", void 0);\n  __decorate$6([Event()], ListBox.prototype, \"drop\", void 0);\n  __decorate$6([Event()], ListBox.prototype, \"dataBound\", void 0);\n  __decorate$6([Property(null)], ListBox.prototype, \"groupTemplate\", void 0);\n  __decorate$6([Property('Request failed')], ListBox.prototype, \"actionFailureTemplate\", void 0);\n  __decorate$6([Property(1000)], ListBox.prototype, \"zIndex\", void 0);\n  __decorate$6([Property(false)], ListBox.prototype, \"ignoreAccent\", void 0);\n  __decorate$6([Complex({}, ToolbarSettings)], ListBox.prototype, \"toolbarSettings\", void 0);\n  __decorate$6([Complex({}, SelectionSettings)], ListBox.prototype, \"selectionSettings\", void 0);\n  ListBox = ListBox_1 = __decorate$6([NotifyPropertyChanges], ListBox);\n  return ListBox;\n}(DropDownBase);\nvar listBoxClasses = {\n  backIcon: 'e-input-group-icon e-back-icon e-icons',\n  filterBarClearIcon: 'e-input-group-icon e-clear-icon e-icons',\n  filterInput: 'e-input-filter',\n  filterParent: 'e-filter-parent',\n  clearIcon: 'e-clear-icon'\n};\n\n/**\n * export all modules from current location\n */\n\nvar __extends$7 = undefined && undefined.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nvar __decorate$7 = undefined && undefined.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/**\n * The Mention component is used to list someone or something based on user input in textarea, input,\n * or any other editable element from which the user can select.\n */\nvar Mention = /** @__PURE__ @class */function (_super) {\n  __extends$7(Mention, _super);\n  /**\n   * * Constructor for creating the widget\n   *\n   * @param {MentionModel} options - Specifies the MentionComponent model.\n   * @param {string | HTMLElement} element - Specifies the element to render as component.\n   * @private\n   */\n  function Mention(options, element) {\n    return _super.call(this, options, element) || this;\n  }\n  /**\n   * When property value changes happened, then onPropertyChanged method will execute the respective changes in this component.\n   *\n   * @param {MentionModel} newProp - Returns the dynamic property value of the component.\n   * @param {MentionModel} oldProp - Returns the previous property value of the component.\n   * @private\n   * @returns {void}\n   */\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  Mention.prototype.onPropertyChanged = function (newProp, oldProp) {\n    for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n      switch (prop) {\n        case 'minLength':\n          this.minLength = newProp.minLength;\n          break;\n        case 'suffixText':\n          this.suffixText = newProp.suffixText;\n          break;\n        case 'allowSpaces':\n          this.allowSpaces = newProp.allowSpaces;\n          break;\n        case 'mentionChar':\n          this.mentionChar = newProp.mentionChar;\n          break;\n        case 'showMentionChar':\n          this.showMentionChar = newProp.showMentionChar;\n          break;\n        case 'cssClass':\n          this.updateCssClass(newProp.cssClass, oldProp.cssClass);\n          break;\n      }\n    }\n  };\n  Mention.prototype.updateCssClass = function (newClass, oldClass) {\n    if (!isNullOrUndefined(oldClass)) {\n      oldClass = oldClass.replace(/\\s+/g, ' ').trim();\n    }\n    if (!isNullOrUndefined(newClass)) {\n      newClass = newClass.replace(/\\s+/g, ' ').trim();\n    }\n    this.setCssClass(newClass, [this.inputElement], oldClass);\n    if (this.popupObj) {\n      this.setCssClass(newClass, [this.popupObj.element], oldClass);\n    }\n  };\n  Mention.prototype.setCssClass = function (cssClass$$1, elements, oldClass) {\n    if (!isNullOrUndefined(oldClass) && oldClass !== '') {\n      removeClass(elements, oldClass.split(' '));\n    }\n    if (!isNullOrUndefined(cssClass$$1) && cssClass$$1 !== '') {\n      addClass(elements, cssClass$$1.split(' '));\n    }\n  };\n  Mention.prototype.initializeData = function () {\n    this.isSelected = false;\n    this.isFiltered = false;\n    this.beforePopupOpen = false;\n    this.initRemoteRender = false;\n    this.isListResetted = false;\n    this.isPopupOpen = false;\n    this.isCollided = false;\n    this.lineBreak = false;\n    this.keyConfigure = {\n      tab: 'tab',\n      enter: '13',\n      escape: '27',\n      end: '35',\n      home: '36',\n      down: '40',\n      up: '38',\n      pageUp: '33',\n      pageDown: '34',\n      open: 'alt+40',\n      close: 'shift+tab',\n      hide: 'alt+38',\n      space: '32'\n    };\n  };\n  /**\n   * Execute before render the list items\n   *\n   * @private\n   * @returns {void}\n   */\n  Mention.prototype.preRender = function () {\n    this.initializeData();\n    _super.prototype.preRender.call(this);\n  };\n  /**\n   * To Initialize the control rendering\n   *\n   * @private\n   * @returns {void}\n   */\n  Mention.prototype.render = function () {\n    var isSelector = typeof this.target === 'string';\n    this.inputElement = !isNullOrUndefined(this.target) ? this.checkAndUpdateInternalComponent(isSelector ? document.querySelector(this.target) : this.target) : this.element;\n    if (this.isContentEditable(this.inputElement)) {\n      this.inputElement.setAttribute('contenteditable', 'true');\n      addClass([this.inputElement], ['e-mention']);\n      if (isNullOrUndefined(this.target)) {\n        addClass([this.inputElement], ['e-editable-element']);\n      }\n    }\n    this.inputElement.setAttribute('role', 'textbox');\n    this.inputElement.setAttribute('aria-label', 'mention');\n    this.queryString = this.elementValue();\n    this.wireEvent();\n  };\n  Mention.prototype.wireEvent = function () {\n    EventHandler.add(this.inputElement, 'keyup', this.onKeyUp, this);\n    this.bindCommonEvent();\n  };\n  Mention.prototype.unWireEvent = function () {\n    EventHandler.remove(this.inputElement, 'keyup', this.onKeyUp);\n    this.unBindCommonEvent();\n  };\n  Mention.prototype.bindCommonEvent = function () {\n    if (!Browser.isDevice) {\n      this.keyboardModule = new KeyboardEvents(this.inputElement, {\n        keyAction: this.keyActionHandler.bind(this),\n        keyConfigs: this.keyConfigure,\n        eventName: 'keydown'\n      });\n    }\n  };\n  /**\n   * Hides the spinner loader.\n   *\n   * @private\n   * @returns {void}\n   */\n  Mention.prototype.hideSpinner = function () {\n    this.hideWaitingSpinner();\n  };\n  Mention.prototype.hideWaitingSpinner = function () {\n    if (!isNullOrUndefined(this.spinnerElement)) {\n      hideSpinner(this.spinnerElement);\n    }\n    if (!isNullOrUndefined(this.spinnerTemplate) && !isNullOrUndefined(this.spinnerTemplateElement)) {\n      detach(this.spinnerTemplateElement);\n    }\n  };\n  Mention.prototype.checkAndUpdateInternalComponent = function (targetElement) {\n    if (!this.isVue && targetElement.classList.contains('e-richtexteditor')) {\n      return targetElement.querySelector('.e-content');\n    }\n    if (this.isVue && targetElement.nodeName === 'TEXTAREA' && targetElement.classList.contains('e-rte-hidden')) {\n      var parentElement = targetElement.parentElement;\n      if (parentElement && parentElement.classList.contains('e-richtexteditor')) {\n        return parentElement.querySelector('.e-content');\n      }\n    }\n    return targetElement;\n  };\n  /**\n   * Shows the spinner loader.\n   *\n   * @returns {void}\n   */\n  Mention.prototype.showWaitingSpinner = function () {\n    if (!isNullOrUndefined(this.popupObj)) {\n      if (isNullOrUndefined(this.spinnerTemplate) && isNullOrUndefined(this.spinnerElement)) {\n        this.spinnerElement = this.popupObj.element;\n        createSpinner({\n          target: this.spinnerElement,\n          width: Browser.isDevice ? '16px' : '14px'\n        }, this.createElement);\n        showSpinner(this.spinnerElement);\n      }\n      if (!isNullOrUndefined(this.spinnerTemplate)) {\n        this.setSpinnerTemplate();\n      }\n    }\n  };\n  Mention.prototype.keyActionHandler = function (e) {\n    var isNavigation = e.action === 'down' || e.action === 'up' || e.action === 'pageUp' || e.action === 'pageDown' || e.action === 'home' || e.action === 'end';\n    var isTabAction = e.action === 'tab' || e.action === 'close';\n    if (this.list === undefined && !this.isRequested && !isTabAction && e.action !== 'escape' && e.action !== 'space') {\n      this.renderList();\n    }\n    if (isNullOrUndefined(this.list) || !isNullOrUndefined(this.liCollections) && isNavigation && this.liCollections.length === 0 || this.isRequested) {\n      return;\n    }\n    if (e.action === 'escape') {\n      e.preventDefault();\n    }\n    this.isSelected = e.action === 'escape' ? false : this.isSelected;\n    switch (e.action) {\n      case 'down':\n      case 'up':\n        this.isUpDownKey = true;\n        this.updateUpDownAction(e);\n        break;\n      case 'tab':\n        if (this.isPopupOpen) {\n          e.preventDefault();\n          var li = this.list.querySelector('.' + dropDownBaseClasses.selected);\n          if (li) {\n            this.setSelection(li, e);\n          }\n          if (this.isPopupOpen) {\n            this.hidePopup(e);\n          }\n        }\n        break;\n      case 'enter':\n        if (this.isPopupOpen) {\n          e.preventDefault();\n          if (this.popupObj && this.popupObj.element.contains(this.selectedLI)) {\n            this.updateSelectedItem(this.selectedLI, e, false, true);\n          }\n        }\n        break;\n      case 'escape':\n        if (this.isPopupOpen) {\n          this.hidePopup(e);\n        }\n        break;\n    }\n  };\n  Mention.prototype.updateUpDownAction = function (e) {\n    var focusEle = this.list.querySelector('.' + dropDownBaseClasses.focus);\n    if (this.isSelectFocusItem(focusEle)) {\n      this.setSelection(focusEle, e);\n    } else if (!isNullOrUndefined(this.liCollections)) {\n      var li = this.list.querySelector('.' + dropDownBaseClasses.selected);\n      if (!isNullOrUndefined(li)) {\n        var value = this.getFormattedValue(li.getAttribute('data-value'));\n        this.activeIndex = this.getIndexByValue(value);\n      }\n      var index = e.action === 'down' ? this.activeIndex + 1 : this.activeIndex - 1;\n      var startIndex = 0;\n      startIndex = e.action === 'down' && isNullOrUndefined(this.activeIndex) ? 0 : this.liCollections.length - 1;\n      index = index < 0 ? this.liCollections.length - 1 : index === this.liCollections.length ? 0 : index;\n      var nextItem = isNullOrUndefined(this.activeIndex) ? this.liCollections[startIndex] : this.liCollections[index];\n      if (!isNullOrUndefined(nextItem)) {\n        this.setSelection(nextItem, e);\n      }\n    }\n    if (this.isPopupOpen) {\n      e.preventDefault();\n    }\n  };\n  Mention.prototype.isSelectFocusItem = function (element) {\n    return !isNullOrUndefined(element);\n  };\n  Mention.prototype.unBindCommonEvent = function () {\n    if (!Browser.isDevice) {\n      this.keyboardModule.destroy();\n    }\n  };\n  Mention.prototype.onKeyUp = function (e) {\n    var rangetextContent;\n    if (this.isUpDownKey && this.isPopupOpen && e.keyCode === 229) {\n      this.isUpDownKey = false;\n      return;\n    }\n    this.isTyped = e.code !== 'Enter' && e.code !== 'Space' && e.code !== 'ArrowDown' && e.code !== 'ArrowUp' ? true : false;\n    var isRteImage = document.activeElement.parentElement && document.activeElement.parentElement.querySelector('.e-rte-image') ? true : false;\n    if (document.activeElement != this.inputElement && !isRteImage) {\n      this.inputElement.focus();\n    }\n    if (this.isContentEditable(this.inputElement)) {\n      this.range = this.getCurrentRange();\n      rangetextContent = this.range.startContainer.textContent.split('');\n    }\n    var currentRange = this.getTextRange();\n    var lastWordRange = this.getLastLetter(currentRange);\n    var lastTwoLetters = this.mentionChar.toString() + this.mentionChar.toString();\n    // eslint-disable-next-line security/detect-non-literal-regexp\n    var Regex = new RegExp(this.mentionChar.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&'), 'g');\n    var charRegex = new RegExp('[a-zA-Z]', 'g');\n    if (e.key === 'Shift' || e.keyCode === 37 || e.keyCode === 39) {\n      return;\n    }\n    if (this.beforePopupOpen && this.isPopupOpen && lastWordRange == lastTwoLetters) {\n      this.hidePopup();\n      return;\n    }\n    if (!currentRange || !lastWordRange || e.code === 'Enter' || e.keyCode === 27 || lastWordRange.match(Regex) && lastWordRange.match(Regex).length > 1 || this.isContentEditable(this.inputElement) && this.range.startContainer && this.range.startContainer.previousElementSibling && this.range.startContainer.previousElementSibling.tagName !== 'BR' && this.range.startContainer.textContent.split('').length > 0 && (rangetextContent.length === 1 || rangetextContent[rangetextContent.length - 2].indexOf('') === -1 || this.range.startContainer.nodeType === 1)) {\n      if (this.allowSpaces && currentRange && currentRange.trim() !== '' && charRegex.test(currentRange) && currentRange.indexOf(this.mentionChar) !== -1 && !this.isMatchedText() && currentRange.length > 1 && currentRange.replace(/\\u00A0/g, ' ').charAt(currentRange.length - 2) !== ' ' && this.list && this.list.querySelectorAll('ul').length > 0) {\n        this.queryString = currentRange.substring(currentRange.lastIndexOf(this.mentionChar) + 1).replace('\\u00a0', ' ');\n        this.searchLists(e);\n      } else if (this.isPopupOpen && (!this.allowSpaces || !lastWordRange) && e.code !== 'ArrowDown' && e.code !== 'ArrowUp') {\n        this.hidePopup();\n        this.lineBreak = true;\n      }\n      return;\n    }\n    this.queryString = lastWordRange.replace(this.mentionChar, '');\n    if (this.mentionChar.charCodeAt(0) === lastWordRange.charCodeAt(0) && this.queryString !== '' && e.keyCode !== 38 && e.keyCode !== 40 && !this.lineBreak) {\n      this.searchLists(e);\n      if (!this.isPopupOpen && this.queryString.length >= this.minLength) {\n        if (!this.isContentEditable(this.inputElement)) {\n          this.showPopup();\n        } else if (this.isContentEditable(this.inputElement) && this.range && this.range.startContainer !== this.inputElement && e.keyCode !== 9) {\n          this.showPopup();\n        }\n      }\n    } else if (lastWordRange.indexOf(this.mentionChar) === 0 && !this.isPopupOpen && e.keyCode !== 8 && (!this.popupObj || isNullOrUndefined(this.target) && !document.body.contains(this.popupObj.element) || !isNullOrUndefined(this.target) && document.body.contains(this.popupObj.element))) {\n      if (this.initRemoteRender && this.list && this.list.classList.contains('e-nodata')) {\n        this.searchLists(e);\n      }\n      this.resetList(this.dataSource, this.fields);\n      if (isNullOrUndefined(this.list)) {\n        this.initValue();\n      }\n      if (!this.isPopupOpen && e.keyCode !== 38 && e.keyCode !== 40 && this.queryString.length >= this.minLength) {\n        this.didPopupOpenByTypingInitialChar = true;\n        this.showPopup();\n        if (this.initRemoteRender && this.list.querySelectorAll('li').length === 0) {\n          this.showWaitingSpinner();\n        }\n        this.lineBreak = false;\n      }\n    } else if (this.allowSpaces && this.queryString !== '' && currentRange && currentRange.trim() !== '' && currentRange.replace('\\u00a0', ' ').lastIndexOf(' ') < currentRange.length - 1 && e.keyCode !== 38 && e.keyCode !== 40 && e.keyCode !== 8 && this.mentionChar.charCodeAt(0) === lastWordRange.charCodeAt(0)) {\n      this.queryString = currentRange.substring(currentRange.lastIndexOf(this.mentionChar) + 1).replace('\\u00a0', ' ');\n      this.searchLists(e);\n    } else if (this.queryString === '' && this.isPopupOpen && e.keyCode !== 38 && e.keyCode !== 40 && this.mentionChar.charCodeAt(0) === lastWordRange.charCodeAt(0)) {\n      this.searchLists(e);\n      if (!this.isListResetted) {\n        this.resetList(this.dataSource, this.fields);\n      }\n    }\n    this.isListResetted = false;\n  };\n  Mention.prototype.isMatchedText = function () {\n    var isMatched = false;\n    for (var i = 0; i < (this.liCollections && this.liCollections.length); i++) {\n      if (this.getTextRange() && this.getTextRange().substring(this.getTextRange().lastIndexOf(this.mentionChar) + 1).replace('\\u00a0', ' ').trim() === this.liCollections[i].getAttribute('data-value').toLowerCase()) {\n        isMatched = true;\n      }\n    }\n    return isMatched;\n  };\n  Mention.prototype.getCurrentRange = function () {\n    this.range = this.inputElement.ownerDocument.getSelection().getRangeAt(0);\n    return this.range;\n  };\n  Mention.prototype.searchLists = function (e) {\n    var _this = this;\n    this.isDataFetched = false;\n    if (isNullOrUndefined(this.list)) {\n      _super.prototype.render.call(this);\n      this.unWireListEvents();\n      this.wireListEvents();\n    }\n    if (e.type !== 'mousedown' && (e.keyCode === 40 || e.keyCode === 38)) {\n      this.queryString = this.queryString === '' ? null : this.queryString;\n      this.beforePopupOpen = true;\n      this.resetList(this.dataSource, this.fields);\n      return;\n    }\n    this.isSelected = false;\n    this.activeIndex = null;\n    var eventArgs = {\n      preventDefaultAction: false,\n      text: this.queryString,\n      updateData: function (dataSource, query, fields) {\n        if (eventArgs.cancel) {\n          return;\n        }\n        _this.isFiltered = true;\n        _this.filterAction(dataSource, query, fields);\n      },\n      cancel: false\n    };\n    this.trigger('filtering', eventArgs, function (eventArgs) {\n      if (!eventArgs.cancel && !_this.isFiltered && !eventArgs.preventDefaultAction) {\n        _this.filterAction(_this.dataSource, null, _this.fields);\n      }\n    });\n  };\n  Mention.prototype.filterAction = function (dataSource, query, fields) {\n    this.beforePopupOpen = true;\n    if (this.queryString.length >= this.minLength) {\n      this.resetList(dataSource, fields, query);\n      this.isListResetted = true;\n    } else {\n      if (this.isPopupOpen) {\n        this.hidePopup();\n      }\n      this.beforePopupOpen = false;\n    }\n    this.setDataIndex();\n    this.renderReactTemplates();\n  };\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  Mention.prototype.onActionComplete = function (ulElement, list, e, isUpdated) {\n    _super.prototype.onActionComplete.call(this, ulElement, list, e);\n    if (this.isActive) {\n      if (!isNullOrUndefined(ulElement)) {\n        attributes(ulElement, {\n          'id': this.inputElement.id + '_options',\n          'role': 'listbox',\n          'aria-hidden': 'false'\n        });\n      }\n      var focusItem = ulElement.querySelector('.' + dropDownBaseClasses.li);\n      if (focusItem) {\n        focusItem.classList.add(dropDownBaseClasses.selected);\n        this.selectedLI = focusItem;\n        var value = this.getFormattedValue(focusItem.getAttribute('data-value'));\n        this.selectEventCallback(focusItem, this.getDataByValue(value), value, true);\n      }\n      if (this.beforePopupOpen && this.isPopupOpen) {\n        if (!isNullOrUndefined(this.popupObj.element)) {\n          this.popupObj.element.remove();\n        }\n        this.renderPopup();\n      }\n    }\n  };\n  Mention.prototype.setDataIndex = function () {\n    for (var i = 0; this.liCollections && i < this.liCollections.length; i++) {\n      this.liCollections[i].setAttribute('data-index', i.toString());\n    }\n  };\n  Mention.prototype.listOption = function (dataSource, fieldsSettings) {\n    var _this = this;\n    var fields = _super.prototype.listOption.call(this, dataSource, fieldsSettings);\n    if (isNullOrUndefined(fields.itemCreated)) {\n      fields.itemCreated = function (e) {\n        if (_this.highlight) {\n          if (_this.inputElement.tagName === _this.getNgDirective() && _this.itemTemplate) {\n            setTimeout(function () {\n              highlightSearch(e.item, _this.queryString, _this.ignoreCase, _this.filterType);\n            }, 0);\n          } else {\n            highlightSearch(e.item, _this.queryString, _this.ignoreCase, _this.filterType);\n          }\n        }\n      };\n    } else {\n      var itemCreated_1 = fields.itemCreated;\n      fields.itemCreated = function (e) {\n        if (_this.highlight) {\n          highlightSearch(e.item, _this.queryString, _this.ignoreCase, _this.filterType);\n        }\n        itemCreated_1.apply(_this, [e]);\n      };\n    }\n    return fields;\n  };\n  Mention.prototype.elementValue = function () {\n    if (!this.isContentEditable(this.inputElement)) {\n      return this.inputElement.value.replace(this.mentionChar, '');\n    } else {\n      return this.inputElement.textContent.replace(this.mentionChar, '');\n    }\n  };\n  Mention.prototype.getQuery = function (query) {\n    var filterQuery = query ? query.clone() : this.query ? this.query.clone() : new Query();\n    var filterType = this.queryString === '' && !isNullOrUndefined(this.elementValue()) ? 'equal' : this.filterType;\n    var queryString = this.queryString === '' && !isNullOrUndefined(this.elementValue()) ? this.elementValue() : this.queryString;\n    if (this.isFiltered) {\n      return filterQuery;\n    }\n    if (this.queryString !== null && this.queryString !== '') {\n      var dataType = this.typeOfData(this.dataSource).typeof;\n      if (!(this.dataSource instanceof DataManager) && dataType === 'string' || dataType === 'number') {\n        filterQuery.where('', filterType, queryString, this.ignoreCase, this.ignoreAccent);\n      } else {\n        var mapping = !isNullOrUndefined(this.fields.text) ? this.fields.text : '';\n        filterQuery.where(mapping, filterType, queryString, this.ignoreCase, this.ignoreAccent);\n      }\n    }\n    if (!isNullOrUndefined(this.suggestionCount)) {\n      // Since defualt value of suggestioncount is 25, checked the condition\n      if (this.suggestionCount !== 25) {\n        for (var queryElements = 0; queryElements < filterQuery.queries.length; queryElements++) {\n          if (filterQuery.queries[queryElements].fn === 'onTake') {\n            filterQuery.queries.splice(queryElements, 1);\n          }\n        }\n      }\n      filterQuery.take(this.suggestionCount);\n    }\n    return filterQuery;\n  };\n  Mention.prototype.renderHightSearch = function () {\n    if (this.highlight) {\n      for (var i = 0; i < this.liCollections.length; i++) {\n        var isHighlight = this.ulElement.querySelector('.e-active');\n        if (!isHighlight) {\n          revertHighlightSearch(this.liCollections[i]);\n          highlightSearch(this.liCollections[i], this.queryString, this.ignoreCase, this.filterType);\n        }\n      }\n    }\n  };\n  Mention.prototype.getTextRange = function () {\n    var text;\n    if (!this.isContentEditable(this.inputElement)) {\n      var component = this.inputElement;\n      if (!isNullOrUndefined(component)) {\n        var startPos = component.selectionStart;\n        if (component.value && startPos >= 0) {\n          text = component.value.substring(0, startPos);\n        }\n      }\n    } else {\n      if (this.range) {\n        var selectedElem = this.range.startContainer;\n        if (!isNullOrUndefined(selectedElem)) {\n          var workingNodeContent = selectedElem.textContent;\n          var selectStartOffset = this.range.startOffset;\n          if (workingNodeContent && selectStartOffset >= 0) {\n            text = workingNodeContent.substring(0, selectStartOffset);\n          }\n        }\n      }\n    }\n    return text;\n  };\n  Mention.prototype.getLastLetter = function (text) {\n    if (isNullOrUndefined(text)) {\n      return '';\n    }\n    var textValue = text.replace(/\\u00A0/g, ' ');\n    var words = textValue.split(/\\s+/);\n    var wordCnt = words.length - 1;\n    return words[wordCnt].trim();\n  };\n  Mention.prototype.isContentEditable = function (element) {\n    return element && element.nodeName !== 'INPUT' && element.nodeName !== 'TEXTAREA';\n  };\n  /**\n   * Opens the popup that displays the list of items.\n   *\n   * @returns {void}\n   */\n  Mention.prototype.showPopup = function () {\n    this.beforePopupOpen = true;\n    if (document.activeElement != this.inputElement) {\n      this.inputElement.focus();\n    }\n    this.queryString = this.didPopupOpenByTypingInitialChar ? this.queryString : '';\n    this.didPopupOpenByTypingInitialChar = false;\n    if (this.isContentEditable(this.inputElement)) {\n      this.range = this.getCurrentRange();\n    }\n    if (!this.isTyped) {\n      this.resetList(this.dataSource, this.fields);\n    }\n    if (isNullOrUndefined(this.list)) {\n      this.initValue();\n    }\n    this.renderPopup();\n    attributes(this.inputElement, {\n      'aria-activedescendant': this.selectedElementID\n    });\n    if (this.selectedElementID == null) {\n      this.inputElement.removeAttribute('aria-activedescendant');\n    }\n  };\n  /* eslint-disable valid-jsdoc, jsdoc/require-param */\n  /**\n   * Hides the popup if it is in an open state.\n   *\n   * @returns {void}\n   */\n  Mention.prototype.hidePopup = function (e) {\n    this.removeSelection();\n    this.closePopup(0, e);\n  };\n  Mention.prototype.closePopup = function (delay, e) {\n    var _this = this;\n    if (!(this.popupObj && document.body.contains(this.popupObj.element) && this.beforePopupOpen)) {\n      return;\n    }\n    EventHandler.remove(document, 'mousedown', this.onDocumentClick);\n    this.inputElement.removeAttribute('aria-owns');\n    this.inputElement.removeAttribute('aria-activedescendant');\n    this.beforePopupOpen = false;\n    var animModel = {\n      name: 'FadeOut',\n      duration: 100,\n      delay: delay ? delay : 0\n    };\n    var popupInstance = this.popupObj;\n    var eventArgs = {\n      popup: popupInstance,\n      cancel: false,\n      animation: animModel,\n      event: e || null\n    };\n    this.trigger('closed', eventArgs, function (eventArgs) {\n      if (!eventArgs.cancel && _this.popupObj) {\n        if (_this.isPopupOpen) {\n          _this.popupObj.hide(new Animation(eventArgs.animation));\n        } else {\n          _this.destroyPopup();\n        }\n      }\n    });\n  };\n  Mention.prototype.renderPopup = function () {\n    var _this = this;\n    var args = {\n      cancel: false\n    };\n    this.trigger('beforeOpen', args, function (args) {\n      if (!args.cancel) {\n        var popupEle_1;\n        if (isNullOrUndefined(_this.target)) {\n          popupEle_1 = _this.createElement('div', {\n            id: _this.inputElement.id + '_popup',\n            className: 'e-mention e-popup ' + (_this.cssClass != null ? _this.cssClass : '')\n          });\n        } else {\n          popupEle_1 = _this.element;\n          if (_this.cssClass != null) {\n            addClass([popupEle_1], _this.cssClass.split(' '));\n          }\n        }\n        if (!isNullOrUndefined(_this.target)) {\n          popupEle_1.id = _this.inputElement.id + '_popup';\n        }\n        _this.listHeight = formatUnit(_this.popupHeight);\n        if (!isNullOrUndefined(_this.list.querySelector('li')) && !_this.initRemoteRender) {\n          var li = _this.list.querySelector('.' + dropDownBaseClasses.focus);\n          if (!isNullOrUndefined(li)) {\n            _this.selectedLI = li;\n            var value = _this.getFormattedValue(li.getAttribute('data-value'));\n            _this.selectEventCallback(li, _this.getDataByValue(value), value, true);\n          }\n        }\n        append([_this.list], popupEle_1);\n        if (_this.inputElement.parentElement && _this.inputElement.parentElement.parentElement && _this.inputElement.parentElement.parentElement.classList.contains('e-richtexteditor')) {\n          if (popupEle_1.firstElementChild && popupEle_1.firstElementChild.childElementCount > 0) {\n            popupEle_1.firstElementChild.setAttribute('aria-owns', _this.inputElement.parentElement.parentElement.id);\n          }\n        }\n        if (!_this.popupObj || !document.body.contains(_this.popupObj.element) || !document.contains(popupEle_1) && isNullOrUndefined(_this.target)) {\n          document.body.appendChild(popupEle_1);\n        }\n        var coordinates_1;\n        popupEle_1.style.visibility = 'hidden';\n        _this.setHeight(popupEle_1);\n        var offsetValue = 0;\n        var left = 0;\n        _this.initializePopup(popupEle_1, offsetValue, left);\n        _this.checkCollision(popupEle_1);\n        popupEle_1.style.visibility = 'visible';\n        var popupLeft_1 = popupEle_1.parentElement.offsetWidth - popupEle_1.offsetWidth;\n        var popupHeight_1 = popupEle_1.offsetHeight;\n        addClass([popupEle_1], ['e-mention', 'e-popup', 'e-popup-close']);\n        if (!isNullOrUndefined(_this.list)) {\n          _this.unWireListEvents();\n          _this.wireListEvents();\n        }\n        _this.selectedElementID = _this.selectedLI ? _this.selectedLI.id : null;\n        attributes(_this.inputElement, {\n          'aria-owns': _this.inputElement.id + '_options',\n          'aria-activedescendant': _this.selectedElementID\n        });\n        if (_this.selectedElementID == null) {\n          _this.inputElement.removeAttribute('aria-activedescendant');\n        }\n        var animModel = {\n          name: 'FadeIn',\n          duration: 100\n        };\n        _this.beforePopupOpen = true;\n        var popupInstance = _this.popupObj;\n        var eventArgs = {\n          popup: popupInstance,\n          cancel: false,\n          animation: animModel\n        };\n        _this.trigger('opened', eventArgs, function (eventArgs) {\n          if (!eventArgs.cancel) {\n            _this.renderReactTemplates();\n            if (_this.popupObj) {\n              _this.popupObj.show(new Animation(eventArgs.animation), _this.zIndex === 1000 ? _this.inputElement : null);\n            }\n            if (isNullOrUndefined(_this.getTriggerCharPosition())) {\n              return;\n            }\n            coordinates_1 = _this.getCoordinates(_this.inputElement, _this.getTriggerCharPosition());\n            if (!_this.isCollided) {\n              popupEle_1.style.cssText = 'top: '.concat(coordinates_1.top.toString(), 'px;\\n left: ').concat(coordinates_1.left.toString(), 'px;\\nposition: absolute;\\n display: block;');\n            } else {\n              if (_this.collision.length > 0 && _this.collision.indexOf('right') > -1 && _this.collision.indexOf('bottom') === -1) {\n                popupEle_1.style.cssText = 'top: '.concat(coordinates_1.top.toString(), 'px;\\n left: ').concat(popupLeft_1.toString(), 'px;\\nposition: absolute;\\n display: block;');\n              } else if (_this.collision && _this.collision.length > 0 && _this.collision.indexOf('bottom') > -1 && _this.collision.indexOf('right') === -1) {\n                popupEle_1.style.left = formatUnit(coordinates_1.left);\n                popupEle_1.style.top = formatUnit(coordinates_1.top - parseInt(popupHeight_1.toString()));\n              } else if (_this.collision && _this.collision.length > 0 && _this.collision.indexOf('bottom') > -1 && _this.collision.indexOf('right') > -1) {\n                popupEle_1.style.left = formatUnit(popupLeft_1);\n                popupEle_1.style.top = formatUnit(coordinates_1.top - parseInt(popupHeight_1.toString()));\n              } else {\n                popupEle_1.style.left = formatUnit(coordinates_1.left);\n                popupEle_1.style.top = formatUnit(coordinates_1.top - parseInt(_this.popupHeight.toString()));\n              }\n              _this.isCollided = false;\n              _this.collision = [];\n            }\n            popupEle_1.style.width = _this.popupWidth !== '100%' && !isNullOrUndefined(_this.popupWidth) ? formatUnit(_this.popupWidth) : 'auto';\n            _this.setHeight(popupEle_1);\n            popupEle_1.style.zIndex = _this.zIndex === 1000 ? getZindexPartial(popupEle_1).toString() : _this.zIndex.toString();\n          } else {\n            _this.beforePopupOpen = false;\n            _this.destroyPopup();\n          }\n        });\n      } else {\n        _this.beforePopupOpen = false;\n      }\n    });\n  };\n  Mention.prototype.setHeight = function (popupEle) {\n    if (this.popupHeight !== 'auto' && this.list) {\n      this.list.style.maxHeight = (parseInt(this.listHeight, 10) - 2).toString() + 'px'; // due to box-sizing property\n      popupEle.style.maxHeight = formatUnit(this.popupHeight);\n    } else {\n      popupEle.style.height = 'auto';\n    }\n  };\n  Mention.prototype.checkCollision = function (popupEle) {\n    if (!Browser.isDevice || Browser.isDevice && !(this.getModuleName() === 'mention')) {\n      var coordinates = this.getCoordinates(this.inputElement, this.getTriggerCharPosition());\n      this.collision = isCollide(popupEle, null, coordinates.left, coordinates.top);\n      if (this.collision.length > 0) {\n        popupEle.style.marginTop = -parseInt(getComputedStyle(popupEle).marginTop, 10) + 'px';\n        this.isCollided = true;\n      }\n      this.popupObj.resolveCollision();\n    }\n  };\n  Mention.prototype.getTriggerCharPosition = function () {\n    var mostRecentTriggerCharPos;\n    var currentRange = this.getTextRange();\n    if (currentRange !== undefined && currentRange !== null) {\n      mostRecentTriggerCharPos = 0;\n      var idx = currentRange.lastIndexOf(this.mentionChar);\n      if (idx >= mostRecentTriggerCharPos) {\n        mostRecentTriggerCharPos = idx;\n      }\n    }\n    return mostRecentTriggerCharPos ? mostRecentTriggerCharPos : 0;\n  };\n  Mention.prototype.initializePopup = function (element, offsetValue, left) {\n    var _this = this;\n    this.popupObj = new Popup(element, {\n      width: this.setWidth(),\n      targetType: 'relative',\n      relateTo: this.inputElement,\n      collision: {\n        X: 'flip',\n        Y: 'flip'\n      },\n      offsetY: offsetValue,\n      enableRtl: this.enableRtl,\n      offsetX: left,\n      position: {\n        X: 'left',\n        Y: 'bottom'\n      },\n      actionOnScroll: 'hide',\n      zIndex: this.zIndex,\n      close: function () {\n        _this.destroyPopup();\n      },\n      open: function () {\n        EventHandler.add(document, 'mousedown', _this.onDocumentClick, _this);\n        _this.isPopupOpen = true;\n        _this.setDataIndex();\n      }\n    });\n  };\n  Mention.prototype.setWidth = function () {\n    var width = formatUnit(this.popupWidth);\n    if (width.indexOf('%') > -1) {\n      var inputWidth = this.inputElement.offsetWidth * parseFloat(width) / 100;\n      width = inputWidth.toString() + 'px';\n    }\n    return width;\n  };\n  Mention.prototype.destroyPopup = function () {\n    this.isPopupOpen = false;\n    this.popupObj.destroy();\n    if (isNullOrUndefined(this.target)) {\n      detach(this.popupObj.element);\n    } else {\n      this.popupObj.element.innerHTML = '';\n      this.popupObj.element.removeAttribute('style');\n      this.popupObj.element.removeAttribute('aria-disabled');\n    }\n  };\n  Mention.prototype.onDocumentClick = function (e) {\n    var target = e.target;\n    if (!(!isNullOrUndefined(this.popupObj) && closest(target, '#' + this.popupObj.element.id))) {\n      this.hidePopup(e);\n    }\n  };\n  Mention.prototype.getCoordinates = function (element, position) {\n    var properties = ['direction', 'boxSizing', 'width', 'height', 'overflowX', 'overflowY', 'borderTopWidth', 'borderRightWidth', 'borderBottomWidth', 'borderLeftWidth', 'paddingTop', 'paddingRight', 'paddingBottom', 'paddingLeft', 'fontStyle', 'fontVariant', 'fontWeight', 'fontStretch', 'fontSize', 'fontSizeAdjust', 'lineHeight', 'fontFamily', 'textAlign', 'textTransform', 'textIndent', 'textDecoration', 'letterSpacing', 'wordSpacing'];\n    var div;\n    var span;\n    var range;\n    var globalRange;\n    var coordinates;\n    var computed;\n    var rect;\n    if (!this.isContentEditable(this.inputElement)) {\n      div = this.createElement('div', {\n        className: 'e-form-mirror-div'\n      });\n      document.body.appendChild(div);\n      computed = getComputedStyle(element);\n      div.style.position = 'absolute';\n      div.style.visibility = 'hidden';\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      properties.forEach(function (prop) {\n        // eslint-disable-next-line security/detect-object-injection\n        div.style[prop] = computed[prop];\n      });\n      div.textContent = element.value.substring(0, position);\n      if (this.inputElement.nodeName === 'INPUT') {\n        div.textContent = div.textContent.replace(/\\s/g, '\\u00a0');\n      }\n      span = this.createElement('span');\n      span.textContent = element.value.substring(position) || '.';\n      div.appendChild(span);\n      rect = element.getBoundingClientRect();\n    } else {\n      var selectedNodePosition = this.getTriggerCharPosition();\n      globalRange = this.range;\n      range = document.createRange();\n      if (this.getTextRange() && this.getTextRange().lastIndexOf(this.mentionChar) !== -1) {\n        range.setStart(globalRange.startContainer, selectedNodePosition);\n        range.setEnd(globalRange.startContainer, selectedNodePosition);\n      } else {\n        range.setStart(globalRange.startContainer, globalRange.startOffset);\n        range.setEnd(globalRange.startContainer, globalRange.endOffset);\n      }\n      this.isTyped = false;\n      range.collapse(false);\n      rect = range.getBoundingClientRect().top === 0 ? range.startContainer.getClientRects()[0] : range.getBoundingClientRect();\n    }\n    var doc = document.documentElement;\n    var windowLeft = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0);\n    var windowTop = (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0);\n    var width = 0;\n    if (!isNullOrUndefined(range) && range.getBoundingClientRect().top === 0) {\n      for (var i = 0; i < this.range.startContainer.childNodes.length; i++) {\n        if (this.range.startContainer.childNodes[i].nodeType !== Node.TEXT_NODE && this.range.startContainer.childNodes[i].textContent.trim() !== '') {\n          width += this.range.startContainer.childNodes[i].getClientRects()[0].width;\n        } else if (this.range.startContainer.childNodes[i].textContent !== '') {\n          var span_1 = document.createElement(\"span\");\n          span_1.innerHTML = this.range.startContainer.childNodes[i].nodeValue;\n          document.body.appendChild(span_1);\n          var textNodeWidth = span_1.offsetWidth;\n          document.body.removeChild(span_1);\n          width += textNodeWidth;\n        }\n      }\n    }\n    if (!this.isContentEditable(this.inputElement)) {\n      coordinates = {\n        top: rect.top + windowTop + span.offsetTop + parseInt(computed.borderTopWidth, 10) + parseInt(computed.fontSize, 10) + 3 - element.scrollTop - (this.isCollided ? 10 : 0),\n        left: rect.left + windowLeft + span.offsetLeft + parseInt(computed.borderLeftWidth, 10)\n      };\n      document.body.removeChild(div);\n    } else {\n      if (this.collision && this.collision.length > 0 && this.collision.indexOf('right') > -1 && this.collision.indexOf('bottom') === -1) {\n        coordinates = {\n          top: rect.top + windowTop + parseInt(getComputedStyle(this.inputElement).fontSize, 10),\n          left: rect.left + windowLeft + width\n        };\n      } else {\n        coordinates = {\n          top: rect.top + windowTop + parseInt(getComputedStyle(this.inputElement).fontSize, 10) - (this.isCollided ? 10 : 0),\n          left: rect.left + windowLeft + width\n        };\n      }\n    }\n    return coordinates;\n  };\n  Mention.prototype.initValue = function () {\n    this.renderList();\n    if (this.dataSource instanceof DataManager) {\n      this.initRemoteRender = true;\n    } else {\n      this.updateValues();\n    }\n  };\n  Mention.prototype.updateValues = function () {\n    var li = this.list.querySelector('.' + dropDownBaseClasses.focus);\n    if (!isNullOrUndefined(li)) {\n      this.setSelection(li, null);\n    }\n  };\n  Mention.prototype.renderList = function () {\n    _super.prototype.render.call(this);\n    this.unWireListEvents();\n    this.wireListEvents();\n  };\n  /**\n   * Event binding for list\n   *\n   * @returns {void}\n   */\n  Mention.prototype.wireListEvents = function () {\n    EventHandler.add(this.list, 'click', this.onMouseClick, this);\n    EventHandler.add(this.list, 'mouseover', this.onMouseOver, this);\n    EventHandler.add(this.list, 'mouseout', this.onMouseLeave, this);\n  };\n  /**\n   * Event un binding for list items.\n   *\n   * @returns {void}\n   */\n  Mention.prototype.unWireListEvents = function () {\n    EventHandler.remove(this.list, 'click', this.onMouseClick);\n    EventHandler.remove(this.list, 'mouseover', this.onMouseOver);\n    EventHandler.remove(this.list, 'mouseout', this.onMouseLeave);\n  };\n  Mention.prototype.onMouseClick = function (e) {\n    var target = e.target;\n    var li = closest(target, '.' + dropDownBaseClasses.li);\n    if (!this.isValidLI(li)) {\n      return;\n    }\n    this.isSelected = true;\n    this.setSelection(li, e);\n    var delay = 100;\n    this.closePopup(delay, e);\n    this.inputElement.focus();\n  };\n  Mention.prototype.updateSelectedItem = function (li, e, preventSelect, isSelection) {\n    var _this = this;\n    this.removeSelection();\n    li.classList.add(dropDownBaseClasses.selected);\n    this.removeHover();\n    var value = this.getFormattedValue(li.getAttribute('data-value'));\n    var selectedData = this.getDataByValue(value);\n    if (!preventSelect && !isNullOrUndefined(e) && !(e.action === \"down\" || e.action === \"up\")) {\n      var items = this.detachChanges(selectedData);\n      this.isSelected = true;\n      var eventArgs = {\n        e: e,\n        item: li,\n        itemData: items,\n        isInteracted: e ? true : false,\n        cancel: false\n      };\n      this.trigger('select', eventArgs, function (eventArgs) {\n        if (eventArgs.cancel) {\n          li.classList.remove(dropDownBaseClasses.selected);\n          _this.isSelected = false;\n          _this.isSelectCancel = true;\n        } else {\n          _this.selectEventCallback(li, selectedData, value);\n          if (isSelection) {\n            _this.setSelectOptions(li, e);\n          }\n        }\n      });\n    } else {\n      this.selectEventCallback(li, selectedData, value);\n      if (isSelection) {\n        this.setSelectOptions(li, e);\n      }\n    }\n  };\n  Mention.prototype.setSelection = function (li, e) {\n    if (this.isValidLI(li) && (!li.classList.contains(dropDownBaseClasses.selected) || this.isPopupOpen && this.isSelected && li.classList.contains(dropDownBaseClasses.selected))) {\n      this.updateSelectedItem(li, e, false, true);\n    } else {\n      this.setSelectOptions(li, e);\n    }\n  };\n  Mention.prototype.setSelectOptions = function (li, e) {\n    if (this.list) {\n      this.removeHover();\n    }\n    this.previousSelectedLI = !isNullOrUndefined(this.selectedLI) ? this.selectedLI : null;\n    this.selectedLI = li;\n    if (this.isPopupOpen && !isNullOrUndefined(this.selectedLI)) {\n      this.setScrollPosition(e);\n    }\n    if (e && (e.keyCode === 38 || e.keyCode === 40)) {\n      return;\n    }\n    if (isNullOrUndefined(e) || this.setValue(e)) {\n      return;\n    }\n  };\n  Mention.prototype.setScrollPosition = function (e) {\n    if (!isNullOrUndefined(e)) {\n      switch (e.action) {\n        case 'pageDown':\n        case 'down':\n        case 'end':\n          this.scrollBottom();\n          break;\n        default:\n          this.scrollTop();\n          break;\n      }\n    } else {\n      this.scrollBottom(true);\n    }\n  };\n  Mention.prototype.scrollBottom = function (isInitial) {\n    if (!isNullOrUndefined(this.selectedLI)) {\n      var currentOffset = this.list.offsetHeight;\n      var nextBottom = this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop;\n      var nextOffset = this.list.scrollTop + nextBottom - currentOffset;\n      nextOffset = isInitial ? nextOffset + parseInt(getComputedStyle(this.list).paddingTop, 10) * 2 : nextOffset;\n      var boxRange = this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop;\n      if (this.activeIndex === 0) {\n        this.list.scrollTop = 0;\n      } else if (nextBottom > currentOffset || !(boxRange > 0 && this.list.offsetHeight > boxRange)) {\n        this.list.scrollTop = nextOffset;\n      }\n    }\n  };\n  Mention.prototype.scrollTop = function () {\n    if (!isNullOrUndefined(this.selectedLI)) {\n      var nextOffset = this.selectedLI.offsetTop - this.list.scrollTop;\n      nextOffset = this.fields.groupBy && nextOffset;\n      var boxRange = this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop;\n      if (this.activeIndex === 0) {\n        this.list.scrollTop = 0;\n      } else if (nextOffset < 0) {\n        this.list.scrollTop = this.list.scrollTop + nextOffset;\n      } else if (!(boxRange > 0 && this.list.offsetHeight > boxRange)) {\n        this.list.scrollTop = this.selectedLI.offsetTop;\n      }\n    }\n  };\n  Mention.prototype.selectEventCallback = function (li, selectedData, value, selectLi) {\n    this.previousItemData = !isNullOrUndefined(this.itemData) ? this.itemData : null;\n    this.item = li;\n    this.itemData = selectedData;\n    var focusedItem = this.list.querySelector('.' + dropDownBaseClasses.focus);\n    if (focusedItem) {\n      removeClass([focusedItem], dropDownBaseClasses.focus);\n    }\n    if (selectLi) {\n      addClass([li], dropDownBaseClasses.selected);\n    }\n    li.setAttribute('aria-selected', 'true');\n    this.activeIndex = this.getIndexByValue(value);\n  };\n  Mention.prototype.detachChanges = function (value) {\n    var items;\n    if (typeof value === 'string' || typeof value === 'boolean' || typeof value === 'number') {\n      items = Object.defineProperties({}, {\n        value: {\n          value: value,\n          enumerable: true\n        },\n        text: {\n          value: value,\n          enumerable: true\n        }\n      });\n    } else {\n      items = value;\n    }\n    return items;\n  };\n  Mention.prototype.setValue = function (e) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    if (!this.isReact) {\n      if (!isNullOrUndefined(this.displayTemplate)) {\n        this.setDisplayTemplate();\n      }\n      this.updateMentionValue(e);\n      return true;\n    } else {\n      if (!isNullOrUndefined(this.displayTemplate)) {\n        this.setDisplayTemplate(e);\n      } else {\n        this.updateMentionValue(e);\n      }\n      return true;\n    }\n  };\n  Mention.prototype.updateMentionValue = function (e) {\n    var dataItem = this.getItemData();\n    var textSuffix;\n    var value;\n    var endPos;\n    var range;\n    var globalRange;\n    var selection = this.inputElement.ownerDocument.getSelection();\n    var startPos = this.getTriggerCharPosition();\n    textSuffix = typeof this.suffixText === 'string' ? this.suffixText : '';\n    if (this.isSelectCancel) {\n      this.isSelectCancel = false;\n      return;\n    }\n    if (dataItem.text !== null) {\n      value = this.mentionVal(dataItem.text);\n    }\n    if (!this.isContentEditable(this.inputElement)) {\n      var myField = this.inputElement;\n      var currentTriggerSnippet = this.getTextRange().substring(startPos + this.mentionChar.length, this.getTextRange().length);\n      value += textSuffix;\n      endPos = startPos + this.mentionChar.length;\n      endPos += currentTriggerSnippet.length;\n      myField.value = myField.value.substring(0, startPos) + value + myField.value.substring(endPos, myField.value.length);\n      myField.selectionStart = startPos + value.length;\n      myField.selectionEnd = startPos + value.length;\n      if (this.isPopupOpen) {\n        this.hidePopup();\n      }\n      this.onChangeEvent(e);\n    } else {\n      endPos = this.getTriggerCharPosition() + this.mentionChar.length;\n      if (this.range && this.range.startContainer.textContent.trim() !== this.mentionChar) {\n        endPos = this.range.endOffset;\n      }\n      globalRange = this.range;\n      range = document.createRange();\n      if (this.getTextRange() && this.getTextRange().lastIndexOf(this.mentionChar) !== -1 || this.getTextRange() && this.getTextRange().trim() === this.mentionChar) {\n        range.setStart(globalRange.startContainer, startPos);\n        range.setEnd(globalRange.startContainer, endPos);\n      } else {\n        if (globalRange.commonAncestorContainer.textContent.trim() !== '' && !isNullOrUndefined(globalRange.commonAncestorContainer.textContent.trim()) && this.getTextRange() && this.getTextRange().lastIndexOf(this.mentionChar) !== -1) {\n          range.setStart(globalRange.startContainer, globalRange.startOffset - 1);\n          range.setEnd(globalRange.startContainer, globalRange.endOffset - 1);\n        } else {\n          range.setStart(globalRange.startContainer, globalRange.startOffset);\n          range.setEnd(globalRange.startContainer, globalRange.endOffset);\n        }\n      }\n      this.isTyped = false;\n      range.deleteContents();\n      var element = this.createElement('div');\n      element.innerHTML = value;\n      var frag = document.createDocumentFragment();\n      var node = void 0;\n      var lastNode = void 0;\n      // eslint-disable-next-line no-cond-assign\n      while (node = element.firstChild) {\n        lastNode = frag.appendChild(node);\n      }\n      range.insertNode(frag);\n      if (lastNode) {\n        range = range.cloneRange();\n        range.setStartAfter(lastNode);\n        range.collapse(true);\n        selection.removeAllRanges();\n        selection.addRange(range);\n      }\n      if (this.isPopupOpen) {\n        this.hidePopup();\n      }\n      //New event to update the RichTextEditor value, when a mention item is selected using mouse click action. \n      if (!isNullOrUndefined(e.pointerType) && e.pointerType === 'mouse') {\n        var event_1 = new CustomEvent('content-changed', {\n          detail: {\n            click: true\n          }\n        });\n        this.inputElement.dispatchEvent(event_1);\n      }\n      this.onChangeEvent(e);\n    }\n  };\n  Mention.prototype.mentionVal = function (value) {\n    var showChar = this.showMentionChar ? this.mentionChar : '';\n    if (!isNullOrUndefined(this.displayTemplate) && !isNullOrUndefined(this.displayTempElement)) {\n      value = this.displayTempElement.innerHTML;\n    }\n    if (this.isContentEditable(this.inputElement)) {\n      if (Browser.isAndroid) {\n        return '<span contenteditable=\"true\" class=\"e-mention-chip\">' + showChar + value + '</span>'.concat(typeof this.suffixText === 'string' ? this.suffixText : ' ');\n      } else {\n        return '<span contenteditable=\"false\" class=\"e-mention-chip\">' + showChar + value + '</span>'.concat(typeof this.suffixText === 'string' ? this.suffixText : ' ');\n      }\n    } else {\n      return showChar + value;\n    }\n  };\n  Mention.prototype.setDisplayTemplate = function (e) {\n    var _this = this;\n    var compiledString;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    if (this.isReact) {\n      this.clearTemplate(['displayTemplate']);\n      if (this.displayTempElement) {\n        detach(this.displayTempElement);\n        this.displayTempElement = null;\n      }\n    }\n    if (!this.displayTempElement) {\n      this.displayTempElement = this.createElement('div');\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    if (!this.isReact) {\n      this.displayTempElement.innerHTML = '';\n    }\n    compiledString = compile(this.displayTemplate);\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var displayCompTemp = compiledString(this.itemData, this, 'displayTemplate', this.displayTemplateId, this.isStringTemplate, null, this.displayTempElement);\n    if (displayCompTemp && displayCompTemp.length > 0) {\n      append(displayCompTemp, this.displayTempElement);\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    if (!this.isReact) {\n      this.renderTemplates();\n    } else {\n      this.renderTemplates(function () {\n        _this.updateMentionValue(e);\n      });\n    }\n  };\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  Mention.prototype.renderTemplates = function (callBack) {\n    this.renderReactTemplates(callBack);\n  };\n  Mention.prototype.setSpinnerTemplate = function () {\n    var _this = this;\n    var compiledString;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    if (this.isReact) {\n      this.clearTemplate(['spinnerTemplate']);\n      if (this.spinnerTemplateElement) {\n        detach(this.spinnerTemplateElement);\n        this.spinnerTemplateElement = null;\n      }\n    }\n    if (!this.spinnerTemplateElement) {\n      this.spinnerTemplateElement = this.createElement('div');\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    if (!this.isReact) {\n      this.spinnerTemplateElement.innerHTML = '';\n    }\n    compiledString = compile(this.spinnerTemplate);\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var spinnerCompTemp = compiledString(null, this, 'spinnerTemplate', this.spinnerTemplateId, this.isStringTemplate, null, this.spinnerTemplateElement);\n    if (spinnerCompTemp && spinnerCompTemp.length > 0) {\n      for (var i = 0; i < spinnerCompTemp.length; i++) {\n        this.spinnerTemplateElement.appendChild(spinnerCompTemp[i]);\n      }\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    if (!this.isReact) {\n      this.renderTemplates();\n      this.popupObj.element.appendChild(this.spinnerTemplateElement);\n    } else {\n      this.renderTemplates(function () {\n        _this.popupObj.element.appendChild(_this.spinnerTemplateElement);\n      });\n    }\n  };\n  Mention.prototype.onChangeEvent = function (eve) {\n    this.isSelected = false;\n    var items = this.detachMentionChanges(this.itemData);\n    var preItems;\n    if (typeof this.previousItemData === 'string' || typeof this.previousItemData === 'boolean' || typeof this.previousItemData === 'number') {\n      preItems = Object.defineProperties({}, {\n        value: {\n          value: this.previousItemData,\n          enumerable: true\n        },\n        text: {\n          value: this.previousItemData,\n          enumerable: true\n        }\n      });\n    } else {\n      preItems = this.previousItemData;\n    }\n    var eventArgs = {\n      e: eve,\n      item: this.item,\n      itemData: items,\n      previousItem: this.previousSelectedLI,\n      previousItemData: preItems,\n      isInteracted: eve ? true : false,\n      value: this.item.innerHTML,\n      element: this.inputElement\n    };\n    this.trigger('change', eventArgs);\n  };\n  Mention.prototype.detachMentionChanges = function (value) {\n    var items;\n    if (typeof value === 'string' || typeof value === 'boolean' || typeof value === 'number') {\n      items = Object.defineProperties({}, {\n        value: {\n          value: value,\n          enumerable: true\n        },\n        text: {\n          value: value,\n          enumerable: true\n        }\n      });\n    } else {\n      items = value;\n    }\n    return items;\n  };\n  Mention.prototype.getItemData = function () {\n    var fields = this.fields;\n    var dataItem = null;\n    dataItem = this.itemData;\n    var dataValue;\n    var dataText;\n    if (!isNullOrUndefined(dataItem)) {\n      dataValue = getValue(fields.value, dataItem);\n      dataText = getValue(fields.text, dataItem);\n    }\n    var value = !isNullOrUndefined(dataItem) && !isUndefined(dataValue) ? dataValue : dataItem;\n    var text = !isNullOrUndefined(dataItem) && !isUndefined(dataValue) ? dataText : dataItem;\n    return {\n      value: value,\n      text: text\n    };\n  };\n  Mention.prototype.removeSelection = function () {\n    if (this.list) {\n      var selectedItems = this.list.querySelectorAll('.' + dropDownBaseClasses.selected);\n      if (selectedItems.length) {\n        removeClass(selectedItems, dropDownBaseClasses.selected);\n        selectedItems[0].removeAttribute('aria-selected');\n      }\n    }\n  };\n  Mention.prototype.onMouseOver = function (e) {\n    var currentLi = closest(e.target, '.' + dropDownBaseClasses.li);\n    this.setHover(currentLi);\n  };\n  Mention.prototype.setHover = function (li) {\n    if (this.isValidLI(li) && !li.classList.contains(dropDownBaseClasses.hover)) {\n      this.removeHover();\n      addClass([li], dropDownBaseClasses.hover);\n    }\n  };\n  Mention.prototype.removeHover = function () {\n    if (this.list) {\n      var hoveredItem = this.list.querySelectorAll('.' + dropDownBaseClasses.hover);\n      if (hoveredItem && hoveredItem.length) {\n        removeClass(hoveredItem, dropDownBaseClasses.hover);\n      }\n    }\n  };\n  Mention.prototype.isValidLI = function (li) {\n    return li && li.hasAttribute('role') && li.getAttribute('role') === 'option';\n  };\n  Mention.prototype.onMouseLeave = function () {\n    this.removeHover();\n  };\n  /**\n   * Search the entered text and show it in the suggestion list if available.\n   *\n   * @returns {void}\n   */\n  Mention.prototype.search = function (text, positionX, positionY) {\n    if (this.isContentEditable(this.inputElement)) {\n      this.range = this.getCurrentRange();\n    }\n    var currentRange = this.getTextRange();\n    var lastWordRange = this.getLastLetter(currentRange);\n    if (this.ignoreCase && (text === lastWordRange || text === lastWordRange.toLowerCase()) || !this.ignoreCase && text === lastWordRange) {\n      this.resetList(this.dataSource, this.fields);\n    } else {\n      if (this.isPopupOpen) {\n        this.hidePopup();\n      }\n      return;\n    }\n    if (isNullOrUndefined(this.list)) {\n      this.renderList();\n      this.renderPopup();\n    } else {\n      this.showPopup();\n    }\n    this.popupObj.element.style.left = formatUnit(positionX);\n    this.popupObj.element.style.top = formatUnit(positionY);\n  };\n  /**\n   * Removes the component from the DOM and detaches all its related event handlers. Also it removes the attributes and classes.\n   *\n   * @method destroy\n   * @returns {void}\n   */\n  Mention.prototype.destroy = function () {\n    this.hidePopup();\n    this.unWireEvent();\n    if (this.list) {\n      this.unWireListEvents();\n    }\n    if (this.inputElement && !this.inputElement.classList.contains('e-' + this.getModuleName())) {\n      return;\n    }\n    this.previousSelectedLI = null;\n    this.item = null;\n    this.selectedLI = null;\n    this.popupObj = null;\n    _super.prototype.destroy.call(this);\n  };\n  Mention.prototype.getLocaleName = function () {\n    return 'mention';\n  };\n  Mention.prototype.getNgDirective = function () {\n    return 'EJS-MENTION';\n  };\n  /**\n   * Return the module name of this component.\n   *\n   * @private\n   * @returns {string} Return the module name of this component.\n   */\n  Mention.prototype.getModuleName = function () {\n    return 'mention';\n  };\n  __decorate$7([Property(null)], Mention.prototype, \"cssClass\", void 0);\n  __decorate$7([Property('@')], Mention.prototype, \"mentionChar\", void 0);\n  __decorate$7([Property(false)], Mention.prototype, \"showMentionChar\", void 0);\n  __decorate$7([Property(false)], Mention.prototype, \"allowSpaces\", void 0);\n  __decorate$7([Property(null)], Mention.prototype, \"suffixText\", void 0);\n  __decorate$7([Property(25)], Mention.prototype, \"suggestionCount\", void 0);\n  __decorate$7([Property(0)], Mention.prototype, \"minLength\", void 0);\n  __decorate$7([Property('None')], Mention.prototype, \"sortOrder\", void 0);\n  __decorate$7([Property(true)], Mention.prototype, \"ignoreCase\", void 0);\n  __decorate$7([Property(false)], Mention.prototype, \"highlight\", void 0);\n  __decorate$7([Property()], Mention.prototype, \"locale\", void 0);\n  __decorate$7([Property('auto')], Mention.prototype, \"popupWidth\", void 0);\n  __decorate$7([Property('300px')], Mention.prototype, \"popupHeight\", void 0);\n  __decorate$7([Property(null)], Mention.prototype, \"displayTemplate\", void 0);\n  __decorate$7([Property(null)], Mention.prototype, \"itemTemplate\", void 0);\n  __decorate$7([Property('No records found')], Mention.prototype, \"noRecordsTemplate\", void 0);\n  __decorate$7([Property(null)], Mention.prototype, \"spinnerTemplate\", void 0);\n  __decorate$7([Property()], Mention.prototype, \"target\", void 0);\n  __decorate$7([Property([])], Mention.prototype, \"dataSource\", void 0);\n  __decorate$7([Property(null)], Mention.prototype, \"query\", void 0);\n  __decorate$7([Property('Contains')], Mention.prototype, \"filterType\", void 0);\n  __decorate$7([Complex({\n    text: null,\n    value: null,\n    iconCss: null,\n    groupBy: null\n  }, FieldSettings)], Mention.prototype, \"fields\", void 0);\n  __decorate$7([Event()], Mention.prototype, \"actionBegin\", void 0);\n  __decorate$7([Event()], Mention.prototype, \"actionComplete\", void 0);\n  __decorate$7([Event()], Mention.prototype, \"actionFailure\", void 0);\n  __decorate$7([Event()], Mention.prototype, \"change\", void 0);\n  __decorate$7([Event()], Mention.prototype, \"beforeOpen\", void 0);\n  __decorate$7([Event()], Mention.prototype, \"opened\", void 0);\n  __decorate$7([Event()], Mention.prototype, \"closed\", void 0);\n  __decorate$7([Event()], Mention.prototype, \"select\", void 0);\n  __decorate$7([Event()], Mention.prototype, \"filtering\", void 0);\n  __decorate$7([Event()], Mention.prototype, \"created\", void 0);\n  __decorate$7([Event()], Mention.prototype, \"destroyed\", void 0);\n  Mention = __decorate$7([NotifyPropertyChanges], Mention);\n  return Mention;\n}(DropDownBase);\n\n/**\n * export all modules from current location\n */\n\n/**\n * export all modules from current location\n */\n\nexport { incrementalSearch, Search, escapeCharRegExp, resetIncrementalSearchValues, highlightSearch, revertHighlightSearch, VirtualScroll, FieldSettings, dropDownBaseClasses, DropDownBase, dropDownListClasses, DropDownList, Fields, TreeSettings, DropDownTree, ComboBox, AutoComplete, MultiSelect, CheckBoxSelection, createFloatLabel, updateFloatLabelState, removeFloating, setPlaceHolder, floatLabelFocus, floatLabelBlur, encodePlaceholder, SelectionSettings, ToolbarSettings, ListBox, Mention };","map":{"version":3,"names":["Animation","Browser","ChildProperty","Complex","Component","Event","EventHandler","KeyboardEvents","L10n","NotifyPropertyChanges","Property","SanitizeHtmlHelper","Touch","addClass","append","attributes","classList","closest","compile","createElement","debounce","detach","extend","formatUnit","getComponent","getUniqueID","getValue","isNullOrUndefined","isUndefined","matches","prepend","remove","removeClass","rippleEffect","select","selectAll","setStyleAttribute","setValue","DataManager","DataUtil","JsonAdaptor","Predicate","Query","ListBase","Sortable","cssClass","moveTo","Popup","createSpinner","getZindexPartial","hideSpinner","isCollide","showSpinner","Input","TextBox","Skeleton","Button","createCheckBox","TreeView","queryString","prevString","tempQueryString","matches$1","activeClass","prevElementId","incrementalSearch","keyCode","items","selectedIndex","ignoreCase","elementId","queryStringUpdated","currentValue","isVirtual","refresh","String","fromCharCode","setTimeout","index","toLowerCase","i","length","contains","textContent","listItems","strLength","text","item","innerText","substr","push","indexUpdated","i_1","Search","inputVal","searchType","dataSource","fields","type","undefined","itemData","queryStr","toLocaleLowerCase","escapeCharRegExp","_loop_1","itemsData","filterValue","checkField_1","fieldValue_1","split","filter","data","Array","prototype","slice","call","forEach","value","isHeader","toString","indexOf","getAttribute","replace","RegExp","test","state_1","resetIncrementalSearchValues","highlightSearch","element","query","ignoreRegex","replaceQuery","findTextNode","pattern","childNodes","nodeType","trim","nodeValue","innerHTML","revertHighlightSearch","content","contentElement","querySelectorAll","parent_1","parentNode","document","createTextNode","replaceChild","__assign","Object","assign","t","s","n","arguments","p","hasOwnProperty","apply","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","result","done","then","__generator","body","_","label","sent","trys","ops","f","y","g","verb","Symbol","iterator","v","op","TypeError","pop","VirtualScroll","parent","_this","sentinelInfo","check","rect","info","top","containerElementRect","entered","listItemHeight","virtualItemCount","axis","cHeight","popupContentElement","clientHeight","bottom","removeEventListener","addEventListener","isDestroyed","on","observe","setGeneratedData","dataProcessAsync","setCurrentViewDataAsync","bindScrollEvent","off","component","scrollArgs","scrollListener","callback","getBoundingClientRect","add","popupScrollHandler","touchModule","scroll","bind","virtualScrollHandler","getModuleName","isMouseScrollAction","isPreventScrollAction","getPageQuery","virtualStartIndex","virtualEndIndex","allowFiltering","skip","qStartIndex","recentlyGeneratedData","loopIteration","endIndex","listData","virtualItemStartIndex","alreadyAddedData","generatedDataObject","slicedData","generateAndExecuteQueryAsync","virtualItemEndIndex","isQueryGenerated","newQuery","removeSkipAndTakeEvents","clone","tempCustomFilter","isCustomFilter","totalData","json","totalItemCount","typedString","resetList","queries","event","fn","currentData","viewPortInfo","startIndex","renderItems","virtualTrackElement","list","getElementsByClassName","style","GetVirtualTrackHeight","UpdateSkeleton","liCollections","virtualContentElement","getTransformValues","groupBy","scrollStop","generateQueryAndSetQueryIndexAsync","isPopupOpen","isStartIndexInitialised","queryStartIndex","queryEndIndex","sortedDataStartIndex","vEndIndex","getItems","isOpenPopup","selectedValueInfo","virtualScrollRefreshAsync","_a","isTyped","filterInput","dataCount","itemCount","getSkeletonCount","skeletonCount","keyboardEvent","handleVirtualKeyboardActions","pageCount","sentinel","pStartIndex","previousStartIndex","getInfoFromView","direction","offset","isUpwardScrolling","isKeyBoardAction","isScrollActionTriggered","currentPageNumber","virtualListInfo","isPreventKeyAction","isVirtualScrolling","getPageCount","popupObj","querySelector","updateSelectionList","virtualListCount","listElement","translateY","offsetHeight","transform","previousInfo","popupElement","returnExactCount","liHeight","getComputedStyle","getPropertyValue","height","parseInt","Math","round","getRowHeight","ceil","isscrollAction","infoType","offsets","previousEndIndex","vHeight","rowHeight","exactTopIndex","infoViewIndices","exactEndIndex","pageSizeBy4","sIndex","floor","eIndex","loadAtIndex","idxAddedToExactTop","scrollPreStartIndex","delay","name","prevTop","debounced100","debounced50","target","scrollTop","left","scrollLeft","current","pstartIndex","scrollOffsetargs","infoview","virtualPoup","debounceFunction","focusElement","activeElement","destroy","__extends","extendStatics","d","b","setPrototypeOf","__proto__","__","constructor","create","__decorate","decorators","key","desc","c","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","FieldSettings","_super","dropDownBaseClasses","root","rtl","selected","hover","noData","fixedHead","focus","li","group","disabled","grouping","ITEMTEMPLATE_PROPERTY","DISPLAYTEMPLATE_PROPERTY","SPINNERTEMPLATE_PROPERTY","VALUETEMPLATE_PROPERTY","GROUPTEMPLATE_PROPERTY","HEADERTEMPLATE_PROPERTY","FOOTERTEMPLATE_PROPERTY","NORECORDSTEMPLATE_PROPERTY","ACTIONFAILURETEMPLATE_PROPERTY","HIDE_GROUPLIST","DropDownBase","options","preventChange","isAngular","isPreventChange","isDynamicDataChange","addedNewItem","isAddNewItemTemplate","isRequesting","isVirtualizationEnabled","isAllowFiltering","virtualizedItemsCount","isRemoteDataUpdated","isIncrementalRequest","getPropObject","prop","newProp","oldProp","newProperty","oldProperty","propName","getValueByText","ignoreAccent","checkValueCase","isTextByValue","typeOfData","typeof","_i","dataSource_1","checkingAccent","checkIgnoreCase","getItemValue","checkNonIgnoreCase","itemValue","compareValue_1","dataItem","ignoreDiacritics","textItem","typedText","getFormattedValue","templateCompiler","baseTemplate","checkTemplate","exception","l10nUpdate","actionFailure","ele","ulElement","noRecordsTemplate","actionFailureTemplate","template","compiledString","templateId","actionFailureTemplateId","noRecordsTemplateId","tempaltecheck","templateName","noDataElement","isReact","isStringTemplate","nodeName","liElem","setAttribute","appendChild","HTMLElement","renderReactTemplates","l10nLocale","componentLocale","getLocaleName","locale","getConstant","l10n","getTextByValue","properties","allowCustomValue","parseFloat","setEnableRtl","enableRtlElements","enableRtl","initialize","bindEvent","id","tagName","jsonElement","createJsonFromElement","setProperties","renderItemsBySelect","setListData","getPersistData","addOnPersist","updateDataAttribute","invalidAttr","attr","a","htmlAttributes","option","getJSONfromOption","optionGroup","child","updateFields","iconCss","field","options_1","preRender","scrollTimer","isRequested","isDataFetched","itemTemplateId","displayTemplateId","spinnerTemplateId","valueTemplateId","groupTemplateId","headerTemplateId","footerTemplateId","isActive","eventArgs","cancel","trigger","virtualGroupDataSource","emptyDataRequest","executeQuery","getQuery","dataSource_2","executeLocal","records","updatePopupState","count","onActionComplete","groupTemplate","renderGroupTemplate","bindChildItems","catch","onActionFailure","dataManager","queryElements","nos","localDataArgs","itemTemplate","childElementCount","children","updateDataList","updateRemoteData","childNode","remainingItems","sortedData","updateListValues","raiseDataBound","findListElement","findNode","attribute","liElement","listArr","dataBoundEventArgs","spliceData","listElements","templateListItem","createListItemFromArray","listOption","createListItemFromJson","notify","module","clearTemplate","fixedHeaderElement","postRender","focusItem","selectedItem","updateVirtualizationProperties","filtering","listEle","groupTemplateID","headerItems","groupcheck","groupValue","tempHeaders","isGroupChecking","createListItems","sortOrder","getSortedDataSource","groupDataSource","take","createList","fieldValues","showIcon","ariaAttributes","groupItemRole","setFloatingHeader","className","display","setFixedHeader","zIndex","isDownkey","getValidLi","topIndex","isCount","groupListLength","loadedGroupList","updateGroupHeader","updateGroupFixedHeader","position","parentElement","offsetTop","oldUlElement","virtualUlElement","updateListElements","createVirtualContent","incrementalLiCollections","incrementalUlElement","incrementalListData","templateID","itemcheck","renderContentTemplate","listDataType","isNullData","borderWidth","defaultView","isNaN","borderTopWidth","borderBottomWidth","borderLeftWidth","borderRightWidth","liWidth","offsetWidth","width","firstLi","textField","getDataSource","addSorting","getIndexByValue","getIndexByValueFilter","selectData","dispatchEvent","evt","createEvent","initEvent","setFields","updateSelectElementData","isFiltering","updateSelection","renderList","render","updateDataSource","props","setUpdateInitial","updateData","j","keys","onPropertyChanged","setZIndex","isEmptyData","attrs","rippleModel","duration","selector","rippleFun","wrapperElement","insertBefore","removeScrollEvent","addItem","itemIndex","newList","itemsCount","selectedItemValue","itemText","itemCheck","addItemTemplate","updateActionCompleteData","updateAddItemList","listGroupItem","tempLi","splice","validationAttribute","hidden","removeAttribute","attributes$$1","getDataByValue","_b","_c","__extends$1","__decorate$1","dropDownListClasses","disable","base","input","inputFocus","icon","iconAnimation","device","backIcon","filterBarClearIcon","filterParent","mobileFilter","footer","header","clearIcon","clearIconHide","popupFullScreen","disableIcon","hiddenElement","virtualList","inputObject","container","buttons","DropDownList","isListSearched","virtualListHeight","incrementalQueryString","incrementalEndIndex","incrementalStartIndex","incrementalPreQueryString","isTouched","IsScrollerAtEnd","scrollHeight","valueTempElement","opacity","initializeData","activeIndex","isDocumentClick","isInteracted","isFilterFocus","beforePopupOpen","initial","initRemoteRender","isNotSearchList","isSelected","preventFocus","preventAutoFill","isValidKey","isEscapeKey","isPreventBlur","isTabKey","actionCompleteData","isUpdated","actionData","prevSelectPoints","isSelectCustom","isDropDownClick","preventAltUp","isSecondClick","previousValue","keyConfigure","tab","enter","escape","end","home","down","up","pageUp","pageDown","open","close","hide","space","requiredModules","modules","enableVirtualization","args","member","unWireListEvents","wireListEvents","floatLabelChange","floatLabelType","floatElement","inputWrapper","inputElement","resetHandler","preventDefault","clearAll","resetFocusElement","removeHover","removeSelection","removeFocus","previousItemData","resetSelection","getItemData","onChangeEvent","checkAndResetCache","updateInitialData","selectedLI","cloneNode","setSelection","updateIconState","cloneElements","setHTMLAttributes","htmlAttr","updatedClassValue","enabled","setEnable","readonly","dataBind","defaultAttr","validateAttr","setPlaceholder","getAriaAttributes","setEnabled","targetElement","tabIndex","hidePopup","preventTabIndex","getNgDirective","getElementByText","getElementByValue","listItems_1","liItem","initValue","updateValues","setHiddenValue","showClearButton","onBlurHandler","relatedTarget","currentTarget","isFilterLayout","focusOutAction","focusOut","onFocusOut","clearButton","onFocus","resetValueHandler","formElement","val","wireEvent","dropDownClick","focusIn","onSearch","window","windowResize","bindCommonEvent","isDevice","keyboardModule","keyAction","keyActionHandler","keyConfigs","eventName","mobileKeyActionHandler","bindClearEvent","refreshPosition","unBindCommonEvent","onMouseClick","onMouseOver","onMouseLeave","charCode","searchKeyEvent","onServerIncrementalSearch","isValidLI","history","back","closePopup","currentLi","setHover","hoveredItem","hasAttribute","updateIncrementalInfo","updateVirtualItemIndex","updateIncrementalView","updateIncrementalItemIndex","updatingincrementalindex","index_1","setScrollPosition","selectedLiOffsetTop","spinnerElement","filterInputObj","preventAction","action","preventHomeEnd","isNavigation","isEditTextBox","isTabAction","updateUpDownAction","pageUpSelection","pageDownSelection","updateHomeEndAction","showPopup","focusDropDown","selectCurrentItem","selectCurrentValueOnTab","isVirtualKeyAction","value_1","filterIndex","focusEle","isSelectFocusItem","virtualIndex","nextItem","value_2","selectedData","value_3","value_4","findLi","steps","previousItem","PageUpDownSelection","unWireEvent","checkSelector","onDocumentClick","isIE","activeStateChange","which","button","proxy_1","updateSelectedItem","preventSelect","isSelection","detachChanges","selectEventCallback","setSelectOptions","checkFieldValue","focusedItem","activeItem","valueTemplate","setValueTemplate","previousSibling","isFilterElement","clearElement","removeProperty","where","getItem","previousSelectedLI","dropdownCompiler","dropdownTemplate","valuecheck","valueCompTemp","selectedItems","dataValue","dataText","eve","detachChangeEvent","defineProperties","enumerable","preItems","selectedElement","onFilterUp","ctrlKey","searchLists","getFilteringSkeletonCount","difference","currentSkeletonCount","skeletonUpdated","isSkeletonCountChange","abs","retainSkeleton","listHeight","actualCount","onFilterDown","getSelectionPoints","removeFillSelection","selection","setSelectionRange","filterQuery","filterType","dataType","takeValue","getTakeValue","alreadySkipAdded","requiresCount","start","selectionStart","selectionEnd","visibility","eventArgs_1","preventDefaultAction","filteringAction","baseEventArgs","isNoData","styles","virualElement","focusIndexItem","setSearchBox","createInput","placeholder","filterBarPlaceholder","clearIconElement","clearText","searchKeyModule","onInput","pasteHandler","renderPopup","isContainSkeleton","isContainVirtualList","totalSkeletonCount","skeleton","shape","appendTo","firstChild","outerHeight","tempItemCount","checkVal","some","x","setInputValue","updateActionCompleteDataValues","allowCustom","isValueInList","addNewItem","valueToFind","isArray","fieldValue","checkField","newElement","value_5","isExist","actionCompleteDataUpdate","findEle","highlightedItem","styleText","heightDimension","refreshPopup","popupEle","searchBox","popupHeight","headerTemplate","setHeaderTemplate","footerTemplate","setFooterTemplate","listitems","searchBoxHeight","maxHeight","offsetValue","getOffsetValue","firstItem","isEmptyList","textIndent","paddingLeft","createPopup","getFocusElement","checkCollision","collision","X","Y","setSearchBoxPosition","backIconElement","clickOnBackIcon","scrollParentElements","getScrollableParent","scrollParentElements_1","scrollHandler","selectedElementID","enable","scrollBottom","inputParent","animModel","popupInstance","popup","animation","show","destroyPopup","marginTop","resolveCollision","popupStyles","borderTop","borderBottom","setPopupPosition","setWidth","targetType","relateTo","offsetY","offsetX","actionList","targetExitViewport","isElementInViewport","elementRect","innerHeight","right","innerWidth","border","popupOffset","lastItem","lastItemOffsetValue","paddingBottom","inputHeight","popupWidth","inputWidth","isInitial","isInitialSelection","lastElementValue","currentOffset","nextBottom","nextOffset","isScrollerCHanged","paddingTop","boxRange","currentElementValue","liCount","firstElementValue","isPageUpKeyAction","scrollTo","isPopupButton","setEleWidth","match","isFilterValue","scrollableParentElements","scrollableParentElements_1","fixedHeader","removeChild","dataSourceCount","preselectedIndex","role","updatedCssClassValues","setReadOnly","calculateWidth","getListHeight","selectElement","onselect","stopImmediatePropagation","onchange","floatLabelElement","renderComplete","listParent","listParentHeight","footercheck","footerCompTemp","headercheck","headerCompTemp","contentEle","setOldText","setOldValue","checkData","isChangeValue","isChangeText","checkCustomValue","updateInputFields","this_1","setReadonly","setCssClass","checkValidLi","setSelectionData","listLength_1","listLength_2","removeFloating","addFloating","setClearButton","ddlProps","newClass","oldClass","invokeRenderPopup","isOpen","proxy_2","onpopstate","pushState","renderHightSearch","isSelectVal","isFocused","blur","attrArray","clear","__extends$2","__decorate$2","RTL","DROPDOWNTREE","HIDDENELEMENT","DROPDOWNICON","SHOW_CHIP","SHOW_CLEAR","SHOW_DD_ICON","CHIP_INPUT","INPUTFOCUS","INPUTGROUP","ICONANIMATION","CLOSEICON_CLASS","CHIP_WRAPPER","CHIP_COLLECTION","CHIP","CHIP_CONTENT","CHIP_CLOSE","HIDEICON","DDTHIDEICON","POPUP_CLASS","PARENTITEM","CONTENT","DROPDOWN","DISABLED","ICONS","CHECKALLPARENT","CHECKALLHIDE","BIGGER","SMALL","ALLTEXT","CHECKBOXFRAME","CHECK","CHECKBOXWRAP","FILTERWRAP","DDTICON","FOOTER","HEADER","NODATACONTAINER","NODATA","HEADERTEMPLATE","FOOTERTEMPLATE","NORECORDSTEMPLATE","ACTIONFAILURETEMPLATE","CUSTOMTEMPLATE","REMAIN_WRAPPER","OVERFLOW_VIEW","SHOW_TEXT","TOTAL_COUNT_WRAPPER","REMAIN_COUNT","Fields","TreeSettings","DropDownTree","filterTimer","isFilteredData","isFilterRestore","filterDelayTime","isClicked","isCheckAllCalled","isFromFilterChange","keyEntity","isFirstRender","isInitialized","currentText","oldValue","removeValue","selectedText","treeItems","isNodeSelected","isDynamicChange","clearIconWidth","customTemplateId","altUp","altDown","shiftTab","moveDown","moveLeft","moveRight","moveUp","ctrlDown","ctrlUp","ctrlEnter","ctrlHome","ctrlEnd","shiftDown","shiftUp","shiftEnter","shiftHome","shiftEnd","csDown","csUp","csEnter","csHome","csEnd","ctrlA","isTree","popupDiv","inputEle","inputObj","showDropDownIcon","getDirective","createHiddenElement","createClearIcon","setElementWidth","setAttributes","tree","wireTreeEvents","renderTree","isRemoteData","allowMultiSelection","showCheckBox","mode","createChip","wrapText","overFlowWrapper","setTreeValue","setTreeText","updateHiddenValue","setSelectedValue","updateView","wireEvents","firstUl","treeObj","hasTemplate","customTemplate","hideCheckAll","flag","checkAllEle","renderFilter","filterContainer","autocomplete","filterObj","filterChangeHandler","clearTimeout","filterHandler","isChildObject","expandedNodes","treeData","getTreeData","filterFields","cloneFields","treeDataType","selfReferencefilter","remoteDataFilter","getTreeFields","nestedFilter","portals","filteredFields","map","remoteChildFilter","filteredChild","node","isChild","isChildFiltering","isMatchedNode","matchedChildren","filteredItems","matchedDataSource","nestedChildFilter","matchedData","parentId","parentValue","checkValue","isObjectValue","tempChild","mouseIn","overAllClear","treeAction","wireCheckAllWrapperEvents","checkAllParent","checkAllAction","unWireEvents","isClearButtonClick","showOverAllClear","isValue","chipWrapper","changeOnBlur","triggerChangeEvent","updateOverFlowView","ensurePlaceHolder","isEqual","ddtCompareValues","isChipDelete","newValue","isValid","observedArgs","isValueChange","keyEventArgs","showSelectAll","clickHandler","focusedElement","resetValue","overAllContainer","temp","tempData","tempIndex","wrapperleng","remaining","downIconWidth","overflowCountTemplate","totalCountTemplate","remainContent","totalContent","remainElement","remainSize","delimiterChar","getOverflowVal","enableHtmlSanitizer","sanitize","textArr","join","chips","lastChild","updateRemainTemplate","updateDelimMode","getSelectedData","treeSettings","loadOnDemand","chipCollection","getValidMode","checkWrapper","createSelectAllWrapper","selectAllSpan","touchClass","checkBoxElement","setLocale","firstElementChild","lastElementChild","checkElement","changeState","wrapper","state","ariaState","frameSpan","isReverseUpdate","checkAll","uncheckAll","setMultiSelect","unSelect","selectAllText","unSelectAllText","setValidValue","valArr","selectedNodes","updateMode","checkedNodes","updateSelectedValues","autoCheck","givenText","getNestedItems","newData","objlen","dataId","childData","getChildType","mapper","nodeSelected","onNodeSelected","nodeChecked","onNodeChecked","nodeChecking","beforeCheck","nodeExpanded","onNodeExpanded","nodeClicked","onNodeClicked","dataBound","OnDataBound","expandOn","nodeSelecting","onBeforeSelect","nodeTemplate","isCancelled","concat","updatePopupHeight","checkSelectAll","wrap","getHeight","ddElement","documentElement","isFilter","isFooter","isScroller","getTreeDataType","expandAll","restoreFilterSelection","elements","setEnableRTL","clonedField","cloneChildField","hasChildren","expanded","imageUrl","selectable","tableName","tooltip","treeFields","parentID","getTreeChildren","isChecked","getActualProperties","childFields","ds","len","updateTemplate","getEventArgs","nodeData","getNode","getNodeDetails","removeSelectedData","nodes","updateClearButton","nextSibling","chipClose","updateDropDownIconState","spinIcon","appendSpan","ensureClearIconPosition","setMultiSelectValue","newValues","selectedValues","ddtValue","checkSelection","getNodeData","childItems","getChildNodeData","obj","newChildItems","childNodeData","getChildMapperFields","muteOnChange","textValue","hiddenInputValue","setChipValues","setTagValues","chip","chipContent","removeChip","templatestring","templateComplier","tempArr","setSelectAllWrapper","updateOverflowWrapper","clearCheckAll","selectAllItems","arr","updateTreeSettings","updateValue","updateCheckBoxState","checkBox","noRecord","updateRecordTemplate","updateMultiSelection","updateOption","updateAllowFiltering","destroyFilter","updateFilterPlaceHolder","updateText","updateModelMode","validMode","overFlow","ensureVisible","getData","__extends$3","__decorate$3","SPINNER_CLASS","inputObject$1","ComboBox","preventBlur","targetFocus","inputValue","customValue","valueMuteChange","setHoverList","searchBoxContainer","inlineSearch","autofill","setAutoFill","isHover","currentFillValue","isAndroidAutoFill","setAutoFillSelection","isAndroid","currentPoints","prevEnd","curEnd","prevStart","curStart","property","isKeyNavigate","previousValue_1","updateCustomValueCallback","changeData","comboProps","isEscape","searchItem","__extends$4","__decorate$4","AutoComplete","_this_1","isFiltered","searchList","mapping","suggestionCount","filterAction","isNoDataElement","minLength","postBackAction","fieldsSettings","itemCreated","highlight","isHtmlElement","charCodeAt","itemCreated_1","showPopupButton","checkFields_1_1","_this_2","atcProps","isHighlight","FLOATLINE","FLOATTEXT","LABELTOP","LABELBOTTOM","createFloatLabel","overAllWrapper","searchWrapper","floatLinelement","encodePlaceholder","updateFloatLabelState","componentWrapper","placeholderElement","floatLine","placeholderText","setPlaceHolder","floatLabelFocus","floatLabelBlur","spanElement","hiddenInput","__extends$5","__decorate$5","FOCUS","DISABLED$1","OVER_ALL_WRAPPER","ELEMENT_WRAPPER","ELEMENT_MOBILE_WRAPPER","HIDE_LIST","DELIMITER_VIEW","CHIP_WRAPPER$1","CHIP$1","CHIP_CONTENT$1","CHIP_CLOSE$1","CHIP_SELECTED","SEARCHBOX_WRAPPER","DELIMITER_VIEW_WRAPPER","ZERO_SIZE","REMAIN_WRAPPER$1","CLOSEICON_CLASS$1","DELIMITER_WRAPPER","POPUP_WRAPPER","INPUT_ELEMENT","RTL_CLASS","CLOSE_ICON_HIDE","MOBILE_CHIP","FOOTER$1","HEADER$1","DISABLE_ICON","SPINNER_CLASS$1","HIDDEN_ELEMENT","dropdownIcon","TOTAL_COUNT_WRAPPER$1","BOX_ELEMENT","FILTERPARENT","CUSTOM_WIDTH","FILTERINPUT","MultiSelect","previousFilterText","selectAllEventData","selectAllEventEle","resetMainList","resetFilteredData","scrollFocusStatus","keyDownStatus","enableRTL","enableGroupCheckBox","prevOnChange","isProtectedOnChange","enableSelectionOrder","hideSelectedItem","closePopupOnSelect","updateHTMLAttribute","popupWrapper","refreshPlaceHolder","containerAttr","updateReadonly","updateCssClass","updateOldPropCssClass","onPopupShown","focusAtFirstListItem","updateListItems","mainList","updateAriaActiveDescendant","isFirstClick","loadTemplate","mainListItems","findGroupStart","deselectHeader","refreshListItems","valueEle","addListFocus","focusAtLastListItem","updateListARIA","disableStatus","ensureAriaDisabled","status","removelastSelection","chipCollectionWrapper","tempValues","removeChipSelection","updateDelimeter","makeTextBoxEmpty","refreshSelection","checkPlaceholderSize","targetInputElement","getForQuery","predicate","or","adaptor","proxy","checkEle","presentItemValue","addNonPresentItems","updateActionList","mainData","mainListCollection","remoteCustomValue","checkForCustomValue","tempQuery","unwireListEvents","setInitialValue","selectAllAction","setDynValue","initialTextUpdate","initialValueUpdate","initialUpdate","updateValueState","previousElementSibling","nextElementSibling","hideGroupItem","ariaValue","checkMaxSelection","element1","temp1","groupItemLength","listItem","searchCount","searchActiveCount","maximumSelectionLength","openClick","openOnClick","keyUp","char","isWordCharacter","expandTextbox","search","remoteFilterAction","dataUpdater","backCommand","dataChecks","customData","random","JSON","parse","stringify","wrapperClick","isDocClickFromCheck","addTagOnBlur","listLiElement","allowChipAddition","updateListSelection","updateDelimView","focused","removeChipFocus","refreshInputHight","createSpanElement","elementWidth","clientWidth","paddingRight","dropIcon","marginRight","setPlaceholderSize","validateValues","sort","newVal","oldVal","initStatus","updateTempValue","getPagingCount","collection","focusInHandler","showDelimWrapper","viewWrapper","delimiterWrapper","hideDelimWrapper","size","mobFilter","calcPopupWidth","checkTextLength","popupKeyActions","updateAriaAttribute","homeNavigation","isHome","scrollEle","onKeyDown","altKey","arrowUp","arrowDown","selectByKey","spaceKeySelection","escapeAction","keyNavigation","checkBackCommand","moveByList","focuseElem","focusFirstListItem","selectAllParent","li_1","moveBy","removeSelectedChip","selectListByKey","hideOverAllClear","limit","selectAllItem","selectAllCheckBox","selectedElem","addChipSelection","moveByTop","filterInputClassName","updateCheck","chipClick","elem","onChipRemove","customVal","setFloatLabelType","removeAllItems","isClearAll","mainElement","removeVal","invokeCheckboxSelection","updateMainList","updateChipStatus","isSelectAll","targetEle","element_1","val_1","removeIndex","hideElement","targetEle_1","clearAllCallback","element2","addValue","addListSelection","addChip","dispatchSelect","isNotTrigger","val_2","isServerRendered","updateListSelectEventCallback","getChip","closeElements","onMobileChipInteraction","chipElem","multiCompiler","multiselectTemplate","encodeHtmlEntities","setClass","classes","mouseOut","fieldProperty","listCurrentOptions","checkboxFilter","overAllHeight","selectAllHeight","unwireScrollEvents","checkboxFilterInput","wireScrollEvents","onListMouseDown","textVal","delim","valueLength","hiddenElementContent","valueItem","listValue","updateWrapperText","addValidInputClass","removeListSelection","indexItem","noDataEle","isDynamicGroupItemUpdate","isReactTemplateUpdate","isAngularTemplateUpdate","temp_1","data_1","selectItems","mainlist","addListHover","ariaCheck","delimChar","headerLi","liChecked","liUnchecked","groupValues","findGroupAttrtibutes","updateCheckBox","checked","unChecked","groupHeader","filterClear","wrapperType","wrapperData","raminElement","remainCompildTemp","checkClearIconWidth","totalWidth","updateRemainWidth","updateRemainingText","remainTemp","totalTemp","newTemp","selectionLimit","textboxValueUpdate","beforeSelectArgs","preventSelectEvent","count_1","updatedataValueItems","updateHiddenElement","hiddenValue","wrapperText","isRemoveAll","onLoadSelect","updateVal","dropDownIcon","reInitializePoup","msProps","mainLiLength","liLength","spellcheck","tabindex","checkInitialValue","isData","optionsElement","valueCol","textCol","optionsLen","opt","checkAutoFocus","ICON","CHECKBOXFRAME$1","CHECK$1","CHECKBOXWRAP$1","INDETERMINATE","searchBackIcon","FOCUS$1","CheckBoxSelection","activeLi","activeEle","listSelection","setSelectAll","setDeviceSearchBox","getFocus","setReorder","getActiveList","checboxCreate","setPopupFullScreen","checkboxEle","frameElm","checkboxWrapper","selectAll$$1","validateCheckNode","checkWrap","isCheck","isPrevent","activeLiCount","remLi","ulEle_1","activeListItems","__extends$6","__decorate$6","SelectionSettings","ToolbarSettings","ListBox","isDataSourceUpdate","ListBox_1","inputString","initLoad","isCustomFiltering","initialSelectedOptions","inputFormName","initWrapper","hiddenSelect","groupHdrs","selectionSettings","updateSelectionSettings","showCheckbox","l10nSelect","checkBoxSelectionModule","initDraggable","allowDragAndDrop","scope","itemClass","dragStart","triggerDragStart","drag","triggerDrag","beforeDrop","beforeDragEnd","drop","dragEnd","placeHolder","helper","sender","refEle","jsonData","initToolbar","pos","toolbarSettings","prevScope","toolElem","createButtons","updateToolBarState","tBListBox","getElementById","btn","title","moveFrom","moveAllTo","moveAllFrom","required","setHeight","spinner","refreshClearIcon","KeyUp","listBoxClasses","searchEle","filterElem","txtLength","noRecElem","filterWireEvents","inputSearch","initToolbarAndStyles","setCheckboxPosition","setFiltering","scopedLB","badge","getDragArgs","dragSelected","isIos","overflow","dragEventArgs","allowDragAll","scrollParent","boundRect","scrollMoved","stopTimer","clientY","timer","setInterval","setScrollDown","scrollElem","scrollPixel","isScrollDown","clearInterval","dragValue","droppedElement","getDataByValues","customDraggedItem","liColl","droppedData","selectedOptions","dropValue","listObj","getArgs","sourceArgs","previousData","destArgs","dragArgs","source","previousIndex","currentIndex","sourceArgs1","destination","targetListObj","ul_1","toSortIdx_1","toIdx_1","getCurIdx","rIdx","jsonIdx","sIdx","idx","jsonIdx_1","sIdx_1","fLiColl_1","currIdx_1","ul_2","fListData_1","fSortData_1","srcIdx","jsonSrcIdx","sortIdx","destIdx","liCollElem_1","removeSelected","sourceElem","sortable","placeHolderElement","dragArgs1","liCollElem","destElem","elems","triggerBeforeItemRender","curData","enableItems","getSelectedItems","updateSelectedOptions","selElems","triggerChange","addItems","removeItems","removeItem","objValue","dupData","itemIdx","removeIdxes","removeLiIdxes","k","updateLiCollection","getElemByValue","moveUpDown","moveTop","moveBottom","targetId","tlistbox","getScopedListBox","moveData","moveAllData","getDataList","getSortedList","sortData","liEle","getElementsByTagName","dataValue1","_loop_2","dataValue2","this_2","ulList","mainCount","ulEleCount","listindex","valueindex","form","keyDownHandler","focusOutHandler","wireToolbarEvent","formResetHandler","getToolElem","toolbarClickHandler","unwireEvents","clearFilterIconElem","selectHandler","liItems","isKey","isSelect","currSelIdx","selectedLi","metaKey","shiftKey","min","prevSelIdx","max","liDataValue_1","value1","values","selectedLis","getDataByElements","getDataByElems","toolbarAction","moveItemTo","moveItemFrom","moveAllItemTo","moveAllItemFrom","isUp","isTop","isBottom","tempItems","reverse","jsonToIdx","fListBox","tListBox","dataIdx","tListData","tSortData","fliCollections","dataLiIdx","tliCollections","isRefresh","rLiCollection_1","n1","n2","toColl","tJsonData","selectNextList","inst","childCnt","liIdx","validIdx","getValidIndex","Number","fromIdx","toIdx","cbox","getGrabbedItems","grabbItems","isDragEnd","stopPropagation","code","upDownKeyHandler","ul","defaultIdx","fliIdx","fli","cli","selectedidx","sidx","eidx","eventArgsData_1","cul","updateSelectTag","clearSelection","dvalue_1","isText","liselect","getSelectTag","checkDisabledState","listObj_1","wrap_1","listWrap","checkboxPosition","liCollLen","l10nShow","l10nSel","__extends$7","__decorate$7","Mention","suffixText","allowSpaces","mentionChar","showMentionChar","cssClass$$1","isListResetted","isCollided","lineBreak","isSelector","checkAndUpdateInternalComponent","isContentEditable","elementValue","onKeyUp","hideWaitingSpinner","spinnerTemplate","spinnerTemplateElement","isVue","showWaitingSpinner","setSpinnerTemplate","isUpDownKey","rangetextContent","isRteImage","range","getCurrentRange","startContainer","currentRange","getTextRange","lastWordRange","getLastLetter","lastTwoLetters","Regex","charRegex","isMatchedText","charAt","substring","lastIndexOf","didPopupOpenByTypingInitialChar","isMatched","ownerDocument","getSelection","getRangeAt","setDataIndex","startPos","workingNodeContent","selectStartOffset","startOffset","words","wordCnt","popupEle_1","coordinates_1","initializePopup","popupLeft_1","popupHeight_1","getTriggerCharPosition","getCoordinates","cssText","coordinates","mostRecentTriggerCharPos","actionOnScroll","div","span","globalRange","computed","selectedNodePosition","createRange","setStart","setEnd","endOffset","collapse","getClientRects","doc","windowLeft","pageXOffset","clientLeft","windowTop","pageYOffset","clientTop","Node","TEXT_NODE","span_1","textNodeWidth","fontSize","offsetLeft","isSelectCancel","selectLi","displayTemplate","setDisplayTemplate","updateMentionValue","textSuffix","endPos","mentionVal","myField","currentTriggerSnippet","commonAncestorContainer","deleteContents","frag","createDocumentFragment","lastNode","insertNode","cloneRange","setStartAfter","removeAllRanges","addRange","pointerType","event_1","CustomEvent","detail","click","showChar","displayTempElement","displayCompTemp","renderTemplates","callBack","spinnerCompTemp","detachMentionChanges","positionX","positionY"],"sources":["C:/Users/mrand/OneDrive/Documents/softwareDev/quickLinks/node_modules/@syncfusion/ej2-dropdowns/dist/es6/ej2-dropdowns.es5.js"],"sourcesContent":["import { Animation, Browser, ChildProperty, Complex, Component, Event, EventHandler, KeyboardEvents, L10n, NotifyPropertyChanges, Property, SanitizeHtmlHelper, Touch, addClass, append, attributes, classList, closest, compile, createElement, debounce, detach, extend, formatUnit, getComponent, getUniqueID, getValue, isNullOrUndefined, isUndefined, matches, prepend, remove, removeClass, rippleEffect, select, selectAll, setStyleAttribute, setValue } from '@syncfusion/ej2-base';\nimport { DataManager, DataUtil, JsonAdaptor, Predicate, Query } from '@syncfusion/ej2-data';\nimport { ListBase, Sortable, cssClass, moveTo } from '@syncfusion/ej2-lists';\nimport { Popup, createSpinner, getZindexPartial, hideSpinner, isCollide, showSpinner } from '@syncfusion/ej2-popups';\nimport { Input, TextBox } from '@syncfusion/ej2-inputs';\nimport { Skeleton } from '@syncfusion/ej2-notifications';\nimport { Button, createCheckBox } from '@syncfusion/ej2-buttons';\nimport { TreeView } from '@syncfusion/ej2-navigations';\n\n/**\n * IncrementalSearch module file\n */\nvar queryString = '';\nvar prevString = '';\nvar tempQueryString = '';\nvar matches$1 = [];\nvar activeClass = 'e-active';\nvar prevElementId = '';\n/**\n * Search and focus the list item based on key code matches with list text content\n *\n * @param  { number } keyCode - Specifies the key code which pressed on keyboard events.\n * @param  { HTMLElement[]} items - Specifies an array of HTMLElement, from which matches find has done.\n * @param { number } selectedIndex - Specifies the selected item in list item, so that search will happen\n * after selected item otherwise it will do from initial.\n * @param  { boolean } ignoreCase - Specifies the case consideration when search has done.\n * @param {string} elementId - Specifies the list element ID.\n * @returns {Element} Returns list item based on key code matches with list text content.\n */\nfunction incrementalSearch(keyCode, items, selectedIndex, ignoreCase, elementId, queryStringUpdated, currentValue, isVirtual, refresh) {\n    if (!queryStringUpdated || queryString === '') {\n        if (tempQueryString != '') {\n            queryString = tempQueryString + String.fromCharCode(keyCode);\n            tempQueryString = '';\n        }\n        else {\n            queryString += String.fromCharCode(keyCode);\n        }\n    }\n    else if (queryString == prevString) {\n        tempQueryString = String.fromCharCode(keyCode);\n    }\n    if (isVirtual) {\n        setTimeout(function () {\n            tempQueryString = '';\n        }, 700);\n        setTimeout(function () {\n            queryString = '';\n        }, 3000);\n    }\n    else {\n        setTimeout(function () {\n            queryString = '';\n        }, 1000);\n    }\n    var index;\n    queryString = ignoreCase ? queryString.toLowerCase() : queryString;\n    if (prevElementId === elementId && prevString === queryString && !refresh) {\n        for (var i = 0; i < matches$1.length; i++) {\n            if (matches$1[i].classList.contains(activeClass)) {\n                index = i;\n                break;\n            }\n            if (currentValue && matches$1[i].textContent.toLowerCase() === currentValue.toLowerCase()) {\n                index = i;\n                break;\n            }\n        }\n        index = index + 1;\n        if (isVirtual) {\n            return matches$1[index] && matches$1.length - 1 != index ? matches$1[index] : matches$1[matches$1.length];\n        }\n        return matches$1[index] ? matches$1[index] : matches$1[0];\n    }\n    else {\n        var listItems = items;\n        var strLength = queryString.length;\n        var text = void 0;\n        var item = void 0;\n        selectedIndex = selectedIndex ? selectedIndex + 1 : 0;\n        var i = selectedIndex;\n        matches$1 = [];\n        do {\n            if (i === listItems.length) {\n                i = -1;\n            }\n            if (i === -1) {\n                index = 0;\n            }\n            else {\n                index = i;\n            }\n            item = listItems[index];\n            text = ignoreCase ? item.innerText.toLowerCase() : item.innerText;\n            if (text.substr(0, strLength) === queryString) {\n                matches$1.push(listItems[index]);\n            }\n            i++;\n        } while (i !== selectedIndex);\n        prevString = queryString;\n        prevElementId = elementId;\n        if (isVirtual) {\n            var indexUpdated = false;\n            for (var i_1 = 0; i_1 < matches$1.length; i_1++) {\n                if (currentValue && matches$1[i_1].textContent.toLowerCase() === currentValue.toLowerCase()) {\n                    index = i_1;\n                    indexUpdated = true;\n                    break;\n                }\n            }\n            if (currentValue && indexUpdated) {\n                index = index + 1;\n            }\n            return matches$1[index] ? matches$1[index] : matches$1[0];\n        }\n        return matches$1[0];\n    }\n}\n/**\n * Search the list item based on given input value matches with search type.\n *\n * @param {string} inputVal - Specifies the given input value.\n * @param {HTMLElement[]} items - Specifies the list items.\n * @param {SearchType} searchType - Specifies the filter type.\n * @param {boolean} ignoreCase - Specifies the case sensitive option for search operation.\n * @returns {Element | number} Returns the search matched items.\n */\nfunction Search(inputVal, items, searchType, ignoreCase, dataSource, fields, type) {\n    var listItems = items;\n    ignoreCase = ignoreCase !== undefined && ignoreCase !== null ? ignoreCase : true;\n    var itemData = { item: null, index: null };\n    if (inputVal && inputVal.length) {\n        var strLength = inputVal.length;\n        var queryStr = ignoreCase ? inputVal.toLocaleLowerCase() : inputVal;\n        queryStr = escapeCharRegExp(queryStr);\n        var _loop_1 = function (i, itemsData) {\n            var item = itemsData[i];\n            var text = void 0;\n            var filterValue;\n            if (items && dataSource) {\n                var checkField_1 = item;\n                var fieldValue_1 = fields.text.split('.');\n                dataSource.filter(function (data) {\n                    Array.prototype.slice.call(fieldValue_1).forEach(function (value) {\n                        /* eslint-disable security/detect-object-injection */\n                        if (type === 'object' && (!data.isHeader && checkField_1.textContent.toString().indexOf(data[value]) !== -1) && checkField_1.getAttribute('data-value') === data[fields.value].toString() || type === 'string' && checkField_1.textContent.toString().indexOf(data) !== -1) {\n                            filterValue = type === 'object' ? data[value] : data;\n                        }\n                    });\n                });\n            }\n            text = dataSource && filterValue ? (ignoreCase ? filterValue.toString().toLocaleLowerCase() : filterValue).replace(/^\\s+|\\s+$/g, '') : (ignoreCase ? item.textContent.toLocaleLowerCase() : item.textContent).replace(/^\\s+|\\s+$/g, '');\n            /* eslint-disable security/detect-non-literal-regexp */\n            if ((searchType === 'Equal' && text === queryStr) || (searchType === 'StartsWith' && text.substr(0, strLength) === queryStr) || (searchType === 'EndsWith' && text.substr(text.length - queryStr.length) === queryStr) || (searchType === 'Contains' && new RegExp(queryStr, \"g\").test(text))) {\n                itemData.item = item;\n                itemData.index = i;\n                return { value: { item: item, index: i } };\n            }\n        };\n        for (var i = 0, itemsData = listItems; i < itemsData.length; i++) {\n            var state_1 = _loop_1(i, itemsData);\n            if (typeof state_1 === \"object\")\n                return state_1.value;\n        }\n        return itemData;\n        /* eslint-enable security/detect-non-literal-regexp */\n    }\n    return itemData;\n}\n/* eslint-enable security/detect-object-injection */\nfunction escapeCharRegExp(value) {\n    return value.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n}\nfunction resetIncrementalSearchValues(elementId) {\n    if (prevElementId === elementId) {\n        prevElementId = '';\n        prevString = '';\n        queryString = '';\n        matches$1 = [];\n    }\n}\n\n/**\n * Function helps to find which highlightSearch is to call based on your data.\n *\n * @param  {HTMLElement} element - Specifies an li element.\n * @param  {string} query - Specifies the string to be highlighted.\n * @param  {boolean} ignoreCase - Specifies the ignoreCase option.\n * @param  {HightLightType} type - Specifies the type of highlight.\n * @returns {void}\n */\nfunction highlightSearch(element, query, ignoreCase, type) {\n    if (query === '') {\n        return;\n    }\n    else {\n        var ignoreRegex = ignoreCase ? 'gim' : 'gm';\n        // eslint-disable-next-line\n        query = /^[a-zA-Z0-9- ]*$/.test(query) ? query : query.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&');\n        var replaceQuery = type === 'StartsWith' ? '^(' + query + ')' : type === 'EndsWith' ?\n            '(' + query + ')$' : '(' + query + ')';\n        // eslint-disable-next-line security/detect-non-literal-regexp\n        findTextNode(element, new RegExp(replaceQuery, ignoreRegex));\n    }\n}\n/* eslint-enable jsdoc/require-param, valid-jsdoc */\n/**\n *\n * @param {HTMLElement} element - Specifies the element.\n * @param {RegExp} pattern - Specifies the regex to match the searched text.\n * @returns {void}\n */\nfunction findTextNode(element, pattern) {\n    for (var index = 0; element.childNodes && (index < element.childNodes.length); index++) {\n        if (element.childNodes[index].nodeType === 3 && element.childNodes[index].textContent.trim() !== '') {\n            var value = element.childNodes[index].nodeValue.trim().replace(pattern, '<span class=\"e-highlight\">$1</span>');\n            element.childNodes[index].nodeValue = '';\n            element.innerHTML = element.innerHTML.trim() + value;\n            break;\n        }\n        else {\n            findTextNode(element.childNodes[index], pattern);\n        }\n    }\n}\n/**\n * Function helps to remove highlighted element based on your data.\n *\n * @param  {HTMLElement} content - Specifies an content element.\n * @returns {void}\n */\nfunction revertHighlightSearch(content) {\n    var contentElement = content.querySelectorAll('.e-highlight');\n    for (var i = contentElement.length - 1; i >= 0; i--) {\n        var parent_1 = contentElement[i].parentNode;\n        var text = document.createTextNode(contentElement[i].textContent);\n        parent_1.replaceChild(text, contentElement[i]);\n    }\n}\n\nvar __assign = (undefined && undefined.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar VirtualScroll = /** @__PURE__ @class */ (function () {\n    function VirtualScroll(parent) {\n        var _this = this;\n        this.sentinelInfo = {\n            'up': {\n                check: function (rect, info) {\n                    var top = rect.top - _this.containerElementRect.top;\n                    info.entered = top >= 0;\n                    return top + (_this.parent.listItemHeight * _this.parent.virtualItemCount / 2) >= 0;\n                },\n                axis: 'Y'\n            },\n            'down': {\n                check: function (rect, info) {\n                    var cHeight = _this.parent.popupContentElement.clientHeight;\n                    var top = rect.bottom;\n                    info.entered = rect.bottom <= _this.containerElementRect.bottom;\n                    return top - (_this.parent.listItemHeight * _this.parent.virtualItemCount / 2) <= _this.parent.listItemHeight * _this.parent.virtualItemCount / 2;\n                }, axis: 'Y'\n            }\n        };\n        this.parent = parent;\n        this.removeEventListener();\n        this.addEventListener();\n    }\n    VirtualScroll.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on('observe', this.observe, this);\n        this.parent.on('setGeneratedData', this.setGeneratedData, this);\n        this.parent.on('dataProcessAsync', this.dataProcessAsync, this);\n        this.parent.on('setCurrentViewDataAsync', this.setCurrentViewDataAsync, this);\n        this.parent.on('bindScrollEvent', this.bindScrollEvent, this);\n    };\n    VirtualScroll.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off('observe', this.observe);\n        this.parent.off('setGeneratedData', this.setGeneratedData);\n        this.parent.off('dataProcessAsync', this.dataProcessAsync);\n        this.parent.off('setCurrentViewDataAsync', this.setCurrentViewDataAsync);\n        this.parent.off('bindScrollEvent', this.bindScrollEvent);\n    };\n    VirtualScroll.prototype.bindScrollEvent = function (component) {\n        var _this = this;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        this.component = component.component;\n        this.observe(function (scrollArgs) { return _this.scrollListener(scrollArgs); });\n    };\n    VirtualScroll.prototype.observe = function (callback) {\n        this.containerElementRect = this.parent.popupContentElement.getBoundingClientRect();\n        EventHandler.add(this.parent.popupContentElement, 'wheel mousedown', this.popupScrollHandler, this);\n        this.touchModule = new Touch(this.parent.popupContentElement, {\n            scroll: this.popupScrollHandler.bind(this)\n        });\n        EventHandler.add(this.parent.popupContentElement, 'scroll', this.virtualScrollHandler(callback), this);\n    };\n    VirtualScroll.prototype.getModuleName = function () {\n        return 'VirtualScroll';\n    };\n    VirtualScroll.prototype.popupScrollHandler = function (e) {\n        this.parent.isMouseScrollAction = true;\n        this.parent.isPreventScrollAction = false;\n    };\n    VirtualScroll.prototype.getPageQuery = function (query, virtualStartIndex, virtualEndIndex) {\n        if (virtualEndIndex !== 0 && !this.parent.allowFiltering && this.component !== 'autocomplete') {\n            query = query.skip(virtualStartIndex);\n        }\n        return query;\n    };\n    VirtualScroll.prototype.setGeneratedData = function (qStartIndex, recentlyGeneratedData) {\n        var loopIteration = 0;\n        var endIndex = this.parent.listData.length + this.parent.virtualItemStartIndex;\n        for (var i = this.parent.virtualItemStartIndex; i < endIndex; i++) {\n            var alreadyAddedData = this.parent.generatedDataObject[i];\n            if (!alreadyAddedData) {\n                if (recentlyGeneratedData !== null && this.parent.listData.slice(loopIteration, loopIteration + 1).length > 0) {\n                    var slicedData = this.parent.listData.slice(loopIteration, loopIteration + 1);\n                    if (slicedData.length > 0) {\n                        // Safely assign slicedData to this.parent.generatedDataObject[i]\n                        this.parent.generatedDataObject[i] = slicedData;\n                    }\n                }\n            }\n            loopIteration++;\n        }\n    };\n    VirtualScroll.prototype.generateAndExecuteQueryAsync = function (query, virtualItemStartIndex, virtualItemEndIndex, isQueryGenerated) {\n        if (virtualItemStartIndex === void 0) { virtualItemStartIndex = 0; }\n        if (virtualItemEndIndex === void 0) { virtualItemEndIndex = 0; }\n        if (isQueryGenerated === void 0) { isQueryGenerated = false; }\n        var dataSource = this.parent.dataSource;\n        if (!isQueryGenerated) {\n            if (!isNullOrUndefined(this.parent.query)) {\n                var newQuery = this.removeSkipAndTakeEvents(this.parent.query.clone());\n                query = this.getPageQuery(newQuery, virtualItemStartIndex, virtualItemEndIndex);\n            }\n            else {\n                query = this.getPageQuery(query, virtualItemStartIndex, virtualItemEndIndex);\n            }\n        }\n        var tempCustomFilter = this.parent.isCustomFilter;\n        if (this.component === 'combobox') {\n            var totalData = 0;\n            if (this.parent.dataSource instanceof DataManager) {\n                totalData = this.parent.dataSource.dataSource.json.length;\n            }\n            else if (this.parent.dataSource && this.parent.dataSource.length > 0) {\n                totalData = this.parent.dataSource.length;\n            }\n            if (totalData > 0) {\n                this.parent.isCustomFilter = (totalData == this.parent.totalItemCount && this.parent.queryString != this.parent.typedString) ? true : this.parent.isCustomFilter;\n            }\n        }\n        this.parent.resetList(dataSource, this.parent.fields, query);\n        this.parent.isCustomFilter = tempCustomFilter;\n    };\n    VirtualScroll.prototype.removeSkipAndTakeEvents = function (query) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        query.queries = query.queries.filter(function (event) {\n            return event.fn !== 'onSkip' && event.fn !== 'onTake';\n        });\n        return query;\n    };\n    VirtualScroll.prototype.setCurrentViewDataAsync = function () {\n        // eslint-disable-next-line\n        var currentData = [];\n        for (var i = this.parent.viewPortInfo.startIndex; i < this.parent.viewPortInfo.endIndex; i++) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var alreadyAddedData = this.parent.generatedDataObject[i];\n            if (alreadyAddedData) {\n                currentData.push(alreadyAddedData[0]);\n            }\n        }\n        this.parent.renderItems(currentData, this.parent.fields);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var virtualTrackElement = this.parent.list.getElementsByClassName('e-virtual-ddl')[0];\n        if (virtualTrackElement) {\n            (virtualTrackElement).style = this.parent.GetVirtualTrackHeight();\n        }\n        this.parent.UpdateSkeleton();\n        this.parent.liCollections = this.parent.list.querySelectorAll('.e-list-item');\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var virtualContentElement = this.parent.list.getElementsByClassName('e-virtual-ddl-content')[0];\n        if (virtualContentElement) {\n            (virtualContentElement).style = this.parent.getTransformValues();\n        }\n        if (this.parent.fields.groupBy) {\n            this.parent.scrollStop();\n        }\n    };\n    VirtualScroll.prototype.generateQueryAndSetQueryIndexAsync = function (query, isPopupOpen) {\n        var isStartIndexInitialised = false;\n        var queryStartIndex = 0;\n        var queryEndIndex = 0;\n        var sortedDataStartIndex = 0;\n        var vEndIndex = this.parent && this.parent.viewPortInfo.endIndex !== 0 ? this.parent.viewPortInfo.endIndex : sortedDataStartIndex + this.parent.getItems().length;\n        if (!isPopupOpen && vEndIndex !== 0) {\n            for (var i = this.parent.viewPortInfo.startIndex; i <= vEndIndex; i++) {\n                if (!(i in this.parent.generatedDataObject)) {\n                    if (!isStartIndexInitialised) {\n                        isStartIndexInitialised = true;\n                        queryStartIndex = queryEndIndex = i;\n                    }\n                    else {\n                        queryEndIndex = i === vEndIndex ? i : i + 1;\n                    }\n                }\n            }\n        }\n        if (isStartIndexInitialised && !((this.parent.totalItemCount == queryStartIndex) && (this.parent.totalItemCount == queryEndIndex))) {\n            this.parent.virtualItemStartIndex = queryStartIndex;\n            this.parent.virtualItemEndIndex = queryEndIndex;\n            this.generateAndExecuteQueryAsync(query, queryStartIndex, queryEndIndex);\n        }\n        this.setCurrentViewDataAsync();\n    };\n    VirtualScroll.prototype.dataProcessAsync = function (isOpenPopup) {\n        this.parent.selectedValueInfo = null;\n        this.parent.virtualItemStartIndex = this.parent.viewPortInfo.startIndex;\n        this.parent.virtualItemEndIndex = this.parent.viewPortInfo.endIndex;\n        this.generateQueryAndSetQueryIndexAsync(new Query(), isOpenPopup);\n    };\n    VirtualScroll.prototype.virtualScrollRefreshAsync = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        this.parent.isCustomFilter = (!(this.parent.isTyped || (this.component === 'combobox' && this.parent.allowFiltering && this.parent.queryString != this.parent.typedString) || (!isNullOrUndefined(this.parent.filterInput) && !isNullOrUndefined(this.parent.filterInput.value) && this.parent.filterInput.value !== '') && this.component !== 'combobox') && !(this.component === 'autocomplete' && this.parent.value != null)) || this.parent.isCustomFilter;\n                        if (this.parent.allowFiltering || this.component === 'autocomplete') {\n                            if (!isNullOrUndefined(this.parent.typedString) && !(this.component === 'combobox' && !isNullOrUndefined(this.parent.typedString) && this.parent.allowFiltering)) {\n                                if (this.parent.viewPortInfo.endIndex >= this.parent.dataCount) {\n                                    this.parent.viewPortInfo.endIndex = this.parent.dataCount;\n                                }\n                                if (this.parent.viewPortInfo.startIndex >= this.parent.dataCount) {\n                                    this.parent.viewPortInfo.startIndex = this.parent.dataCount - this.parent.itemCount;\n                                }\n                            }\n                            else {\n                                this.parent.getSkeletonCount(true);\n                                if (this.component === 'combobox') {\n                                    this.parent.skeletonCount = this.parent.totalItemCount != 0 && this.parent.totalItemCount < (this.parent.itemCount * 2) ? 0 : this.parent.skeletonCount;\n                                }\n                            }\n                        }\n                        return [4 /*yield*/, this.dataProcessAsync()];\n                    case 1:\n                        _a.sent();\n                        if (this.parent.keyboardEvent != null) {\n                            this.parent.handleVirtualKeyboardActions(this.parent.keyboardEvent, this.parent.pageCount);\n                        }\n                        this.parent.isCustomFilter = false;\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    VirtualScroll.prototype.scrollListener = function (scrollArgs) {\n        var _this = this;\n        if (!this.parent.isPreventScrollAction) {\n            var info = scrollArgs.sentinel;\n            var pStartIndex = this.parent.previousStartIndex;\n            this.parent.viewPortInfo = this.getInfoFromView(scrollArgs.direction, info, scrollArgs.offset, false);\n            this.parent.isUpwardScrolling = false;\n            if (this.parent.previousStartIndex !== pStartIndex && !this.parent.isKeyBoardAction) {\n                this.parent.isScrollActionTriggered = false;\n                this.parent.currentPageNumber = this.parent.viewPortInfo.currentPageNumber;\n                this.parent.virtualListInfo = __assign({}, this.parent.viewPortInfo);\n                this.parent.isPreventKeyAction = true;\n                this.parent.isVirtualScrolling = true;\n                setTimeout(function () {\n                    _this.parent.pageCount = _this.parent.getPageCount();\n                    _this.virtualScrollRefreshAsync().then(function () {\n                        if (_this.parent.popupObj) {\n                            _this.parent.list = _this.parent.popupObj.element.querySelector('.' + 'e-content') || select('.' + 'e-content');\n                            _this.parent.updateSelectionList();\n                            _this.parent.liCollections = _this.parent.getItems();\n                        }\n                        _this.parent.isKeyBoardAction = false;\n                        _this.parent.isVirtualScrolling = false;\n                        _this.parent.isPreventKeyAction = false;\n                    });\n                }, 5);\n            }\n            else if (this.parent.isScrollActionTriggered) {\n                this.parent.isPreventKeyAction = false;\n                this.parent.isScrollActionTriggered = false;\n                var virtualListCount = this.parent.list.querySelectorAll('.e-virtual-list').length;\n                var listElement = this.parent.list.querySelector('.' + 'e-list-item');\n                var translateY = scrollArgs.offset.top - (listElement.offsetHeight * virtualListCount);\n                this.parent.list.getElementsByClassName('e-virtual-ddl-content')[0].style.transform = \"translate(0px,\" + translateY + \"px)\";\n            }\n            this.parent.previousInfo = this.parent.viewPortInfo;\n        }\n    };\n    VirtualScroll.prototype.getPageCount = function (popupElement, returnExactCount) {\n        if (returnExactCount === void 0) { returnExactCount = false; }\n        var list = popupElement && popupElement.querySelector('.e-content');\n        if (list) {\n            var liHeight = list.classList.contains('e-nodata') ? null : getComputedStyle(list.querySelectorAll('.e-list-item')[0], null).getPropertyValue('height');\n            var pageCount = list.getBoundingClientRect().height / parseInt(liHeight, 10);\n            return returnExactCount ? pageCount : Math.round(pageCount);\n        }\n        return 0;\n    };\n    \n    VirtualScroll.prototype.getRowHeight = function () {\n        return (isNullOrUndefined(this.parent.liCollections) || this.parent.liCollections.length == 0) ? 0 : Math.ceil(this.parent.liCollections[0].getBoundingClientRect().height);\n    };\n    VirtualScroll.prototype.getInfoFromView = function (direction, info, e, isscrollAction) {\n        var infoType = {\n            direction: direction, sentinelInfo: info, offsets: e,\n            startIndex: this.parent.previousStartIndex, endIndex: this.parent.previousEndIndex\n        };\n        var vHeight = this.parent.popupContentElement.getBoundingClientRect().height;\n        //Row Start and End Index calculation\n        var rowHeight = this.parent.listItemHeight;\n        var exactTopIndex = e.top / rowHeight;\n        var infoViewIndices = vHeight / rowHeight;\n        var exactEndIndex = exactTopIndex + infoViewIndices;\n        var pageSizeBy4 = this.parent.virtualItemCount / 4;\n        var totalItemCount = this.parent.totalItemCount;\n        if (infoType.direction === 'down') {\n            var sIndex = Math.round(exactEndIndex) - Math.round((pageSizeBy4));\n            if (isNullOrUndefined(infoType.startIndex) || (exactEndIndex >\n                (infoType.startIndex + Math.round((this.parent.virtualItemCount / 2 + pageSizeBy4)))\n                && infoType.endIndex !== totalItemCount)) {\n                infoType.startIndex = sIndex >= 0 ? Math.round(sIndex) : 0;\n                infoType.startIndex = infoType.startIndex > exactTopIndex ? Math.floor(exactTopIndex) : infoType.startIndex;\n                var eIndex = infoType.startIndex + this.parent.virtualItemCount;\n                infoType.startIndex = eIndex < exactEndIndex ? (Math.ceil(exactEndIndex) - this.parent.virtualItemCount)\n                    : infoType.startIndex;\n                infoType.endIndex = eIndex < totalItemCount ? eIndex : totalItemCount;\n                infoType.startIndex = eIndex >= totalItemCount ? (infoType.endIndex - this.parent.virtualItemCount > 0 ? infoType.endIndex - this.parent.virtualItemCount : 0) : infoType.startIndex;\n                infoType.currentPageNumber = Math.ceil(infoType.endIndex / this.parent.virtualItemCount);\n            }\n        }\n        else if (infoType.direction === 'up') {\n            if (infoType.startIndex && infoType.endIndex) {\n                var loadAtIndex = Math.round(((infoType.startIndex * rowHeight) + (pageSizeBy4 * rowHeight)) / rowHeight);\n                if (exactTopIndex < loadAtIndex) {\n                    var idxAddedToExactTop = (pageSizeBy4) > infoViewIndices ? pageSizeBy4 :\n                        (infoViewIndices + infoViewIndices / 4);\n                    var eIndex = Math.round(exactTopIndex + idxAddedToExactTop);\n                    infoType.endIndex = eIndex < totalItemCount ? eIndex : totalItemCount;\n                    var sIndex = infoType.endIndex - this.parent.virtualItemCount;\n                    infoType.startIndex = sIndex > 0 ? sIndex : 0;\n                    infoType.endIndex = sIndex < 0 ? this.parent.virtualItemCount : infoType.endIndex;\n                    infoType.currentPageNumber = Math.ceil(infoType.startIndex / this.parent.virtualItemCount);\n                }\n            }\n        }\n        if (!isscrollAction) {\n            this.parent.previousStartIndex = infoType.startIndex;\n            this.parent.startIndex = infoType.startIndex;\n            this.parent.previousEndIndex = infoType.endIndex;\n        }\n        else {\n            this.parent.scrollPreStartIndex = infoType.startIndex;\n        }\n        return infoType;\n    };\n    VirtualScroll.prototype.virtualScrollHandler = function (callback) {\n        var _this = this;\n        var delay = Browser.info.name === 'chrome' ? 200 : 100;\n        var prevTop = 0;\n        var debounced100 = debounce(callback, delay);\n        var debounced50 = debounce(callback, 50);\n        return function (e) {\n            var top = e.target.scrollTop;\n            var left = e.target.scrollLeft;\n            var direction = prevTop < top && !_this.parent.isUpwardScrolling ? 'down' : 'up';\n            prevTop = top;\n            var current = _this.sentinelInfo[direction];\n            var pstartIndex = _this.parent.scrollPreStartIndex;\n            var scrollOffsetargs = {\n                top: top,\n                left: left\n            };\n            if (_this.parent.list.querySelectorAll('.e-virtual-list').length > 0) {\n                var infoview = _this.getInfoFromView(direction, current, scrollOffsetargs, true);\n                if (_this.parent.scrollPreStartIndex != pstartIndex && !_this.parent.isPreventScrollAction) {\n                    _this.parent.isScrollActionTriggered = true;\n                    var virtualPoup = (_this.parent.list.querySelector('.e-virtual-ddl-content'));\n                    virtualPoup.style.transform = \"translate(0px,\" + top + \"px)\";\n                }\n            }\n            var debounceFunction = debounced100;\n            if (current.axis === 'X') {\n                debounceFunction = debounced50;\n            }\n            debounceFunction({ direction: direction, sentinel: current, offset: { top: top, left: left },\n                focusElement: document.activeElement });\n        };\n    };\n    VirtualScroll.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    return VirtualScroll;\n}());\n\n/**\n * Common source\n */\n\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar FieldSettings = /** @__PURE__ @class */ (function (_super) {\n    __extends(FieldSettings, _super);\n    function FieldSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], FieldSettings.prototype, \"text\", void 0);\n    __decorate([\n        Property()\n    ], FieldSettings.prototype, \"value\", void 0);\n    __decorate([\n        Property()\n    ], FieldSettings.prototype, \"iconCss\", void 0);\n    __decorate([\n        Property()\n    ], FieldSettings.prototype, \"groupBy\", void 0);\n    __decorate([\n        Property()\n    ], FieldSettings.prototype, \"htmlAttributes\", void 0);\n    return FieldSettings;\n}(ChildProperty));\nvar dropDownBaseClasses = {\n    root: 'e-dropdownbase',\n    rtl: 'e-rtl',\n    content: 'e-content',\n    selected: 'e-active',\n    hover: 'e-hover',\n    noData: 'e-nodata',\n    fixedHead: 'e-fixed-head',\n    focus: 'e-item-focus',\n    li: 'e-list-item',\n    group: 'e-list-group-item',\n    disabled: 'e-disabled',\n    grouping: 'e-dd-group'\n};\nvar ITEMTEMPLATE_PROPERTY = 'ItemTemplate';\nvar DISPLAYTEMPLATE_PROPERTY = 'DisplayTemplate';\nvar SPINNERTEMPLATE_PROPERTY = 'SpinnerTemplate';\nvar VALUETEMPLATE_PROPERTY = 'ValueTemplate';\nvar GROUPTEMPLATE_PROPERTY = 'GroupTemplate';\nvar HEADERTEMPLATE_PROPERTY = 'HeaderTemplate';\nvar FOOTERTEMPLATE_PROPERTY = 'FooterTemplate';\nvar NORECORDSTEMPLATE_PROPERTY = 'NoRecordsTemplate';\nvar ACTIONFAILURETEMPLATE_PROPERTY = 'ActionFailureTemplate';\nvar HIDE_GROUPLIST = 'e-hide-group-header';\n/**\n * DropDownBase component will generate the list items based on given data and act as base class to drop-down related components\n */\nvar DropDownBase = /** @__PURE__ @class */ (function (_super) {\n    __extends(DropDownBase, _super);\n    /**\n     * * Constructor for DropDownBase class\n     *\n     * @param {DropDownBaseModel} options - Specifies the DropDownBase model.\n     * @param {string | HTMLElement} element - Specifies the element to render as component.\n     * @private\n     */\n    function DropDownBase(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        _this.preventChange = false;\n        _this.isAngular = false;\n        _this.isPreventChange = false;\n        _this.isDynamicDataChange = false;\n        _this.addedNewItem = false;\n        _this.isAddNewItemTemplate = false;\n        _this.isRequesting = false;\n        _this.isVirtualizationEnabled = false;\n        _this.isAllowFiltering = false;\n        _this.virtualizedItemsCount = 0;\n        _this.totalItemCount = 0;\n        _this.dataCount = 0;\n        _this.isRemoteDataUpdated = false;\n        _this.isIncrementalRequest = false;\n        _this.itemCount = 10;\n        return _this;\n    }\n    DropDownBase.prototype.getPropObject = function (prop, newProp, oldProp) {\n        var newProperty = new Object();\n        var oldProperty = new Object();\n        var propName = function (prop) {\n            return prop;\n        };\n        newProperty[propName(prop)] = newProp[propName(prop)];\n        oldProperty[propName(prop)] = oldProp[propName(prop)];\n        var data = new Object();\n        data.newProperty = newProperty;\n        data.oldProperty = oldProperty;\n        return data;\n    };\n    DropDownBase.prototype.getValueByText = function (text, ignoreCase, ignoreAccent) {\n        var value = null;\n        if (!isNullOrUndefined(this.listData)) {\n            if (ignoreCase) {\n                value = this.checkValueCase(text, true, ignoreAccent);\n            }\n            else {\n                value = this.checkValueCase(text, false, ignoreAccent);\n            }\n        }\n        return value;\n    };\n    DropDownBase.prototype.checkValueCase = function (text, ignoreCase, ignoreAccent, isTextByValue) {\n        var _this = this;\n        var value = null;\n        if (isTextByValue) {\n            value = text;\n        }\n        var dataSource = this.listData;\n        var fields = this.fields;\n        var type = this.typeOfData(dataSource).typeof;\n        if (type === 'string' || type === 'number' || type === 'boolean') {\n            for (var _i = 0, dataSource_1 = dataSource; _i < dataSource_1.length; _i++) {\n                var item = dataSource_1[_i];\n                if (!isNullOrUndefined(item)) {\n                    if (ignoreAccent) {\n                        value = this.checkingAccent(String(item), text, ignoreCase);\n                    }\n                    else {\n                        if (ignoreCase) {\n                            if (this.checkIgnoreCase(String(item), text)) {\n                                value = this.getItemValue(String(item), text, ignoreCase);\n                            }\n                        }\n                        else {\n                            if (this.checkNonIgnoreCase(String(item), text)) {\n                                value = this.getItemValue(String(item), text, ignoreCase, isTextByValue);\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        else {\n            if (ignoreCase) {\n                dataSource.filter(function (item) {\n                    var itemValue = getValue(fields.value, item);\n                    if (!isNullOrUndefined(itemValue) && _this.checkIgnoreCase(getValue(fields.text, item).toString(), text)) {\n                        value = getValue(fields.value, item);\n                    }\n                });\n            }\n            else {\n                if (isTextByValue) {\n                    var compareValue_1 = null;\n                    compareValue_1 = value;\n                    dataSource.filter(function (item) {\n                        var itemValue = getValue(fields.value, item);\n                        if (!isNullOrUndefined(itemValue) && !isNullOrUndefined(value) && itemValue.toString() === compareValue_1.toString()) {\n                            value = getValue(fields.text, item);\n                        }\n                    });\n                }\n                else {\n                    dataSource.filter(function (item) {\n                        if (_this.checkNonIgnoreCase(getValue(fields.text, item), text)) {\n                            value = getValue(fields.value, item);\n                        }\n                    });\n                }\n            }\n        }\n        return value;\n    };\n    DropDownBase.prototype.checkingAccent = function (item, text, ignoreCase) {\n        var dataItem = DataUtil.ignoreDiacritics(String(item));\n        var textItem = DataUtil.ignoreDiacritics(text.toString());\n        var value = null;\n        if (ignoreCase) {\n            if (this.checkIgnoreCase(dataItem, textItem)) {\n                value = this.getItemValue(String(item), text, ignoreCase);\n            }\n        }\n        else {\n            if (this.checkNonIgnoreCase(String(item), text)) {\n                value = this.getItemValue(String(item), text, ignoreCase);\n            }\n        }\n        return value;\n    };\n    DropDownBase.prototype.checkIgnoreCase = function (item, text) {\n        return String(item).toLowerCase() === text.toString().toLowerCase() ? true : false;\n    };\n    DropDownBase.prototype.checkNonIgnoreCase = function (item, text) {\n        return String(item) === text.toString() ? true : false;\n    };\n    DropDownBase.prototype.getItemValue = function (dataItem, typedText, ignoreCase, isTextByValue) {\n        var value = null;\n        var dataSource = this.listData;\n        var type = this.typeOfData(dataSource).typeof;\n        if (isTextByValue) {\n            value = dataItem.toString();\n        }\n        else {\n            if (ignoreCase) {\n                value = type === 'string' ? String(dataItem) : this.getFormattedValue(String(dataItem));\n            }\n            else {\n                value = type === 'string' ? typedText : this.getFormattedValue(typedText);\n            }\n        }\n        return value;\n    };\n    DropDownBase.prototype.templateCompiler = function (baseTemplate) {\n        var checkTemplate = false;\n        if (typeof baseTemplate !== 'function' && baseTemplate) {\n            try {\n                checkTemplate = (selectAll(baseTemplate, document).length) ? true : false;\n            }\n            catch (exception) {\n                checkTemplate = false;\n            }\n        }\n        return checkTemplate;\n    };\n    DropDownBase.prototype.l10nUpdate = function (actionFailure) {\n        var ele = this.getModuleName() === 'listbox' ? this.ulElement : this.list;\n        if (this.noRecordsTemplate !== 'No records found' || this.actionFailureTemplate !== 'Request failed') {\n            var template = actionFailure ? this.actionFailureTemplate : this.noRecordsTemplate;\n            var compiledString = void 0;\n            var templateId = actionFailure ? this.actionFailureTemplateId : this.noRecordsTemplateId;\n            ele.innerHTML = '';\n            var tempaltecheck = this.templateCompiler(template);\n            if (typeof template !== 'function' && tempaltecheck) {\n                compiledString = compile(select(template, document).innerHTML.trim());\n            }\n            else {\n                compiledString = compile(template);\n            }\n            var templateName = actionFailure ? 'actionFailureTemplate' : 'noRecordsTemplate';\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            var noDataElement = void 0;\n            if ((this.isReact) && typeof template === 'function') {\n                noDataElement = compiledString({}, this, templateName, templateId, this.isStringTemplate, null);\n            }\n            else {\n                noDataElement = compiledString({}, this, templateName, templateId, this.isStringTemplate, null, ele);\n            }\n            if (noDataElement && noDataElement.length > 0) {\n                for (var i = 0; i < noDataElement.length; i++) {\n                    if (this.getModuleName() === 'listbox' && templateName === 'noRecordsTemplate') {\n                        if (noDataElement[i].nodeName === '#text') {\n                            var liElem = this.createElement('li');\n                            liElem.textContent = noDataElement[i].textContent;\n                            liElem.classList.add('e-list-nrt');\n                            liElem.setAttribute('role', 'option');\n                            ele.appendChild(liElem);\n                        }\n                        else {\n                            noDataElement[i].classList.add('e-list-nr-template');\n                            ele.appendChild(noDataElement[i]);\n                        }\n                    }\n                    else {\n                        if (noDataElement[i] instanceof HTMLElement) {\n                            ele.appendChild(noDataElement[i]);\n                        }\n                    }\n                }\n            }\n            this.renderReactTemplates();\n        }\n        else {\n            var l10nLocale = { noRecordsTemplate: 'No records found', actionFailureTemplate: 'Request failed' };\n            var componentLocale = new L10n(this.getLocaleName(), {}, this.locale);\n            if (componentLocale.getConstant('actionFailureTemplate') !== '' || componentLocale.getConstant('noRecordsTemplate') !== '') {\n                this.l10n = componentLocale;\n            }\n            else {\n                this.l10n = new L10n(this.getModuleName() === 'listbox' ? 'listbox' :\n                    this.getModuleName() === 'mention' ? 'mention' : 'dropdowns', l10nLocale, this.locale);\n            }\n            var content = actionFailure ?\n                this.l10n.getConstant('actionFailureTemplate') : this.l10n.getConstant('noRecordsTemplate');\n            if (this.getModuleName() === 'listbox') {\n                var liElem = this.createElement('li');\n                liElem.textContent = content;\n                ele.appendChild(liElem);\n                liElem.classList.add('e-list-nrt');\n                liElem.setAttribute('role', 'option');\n            }\n            else {\n                if (!isNullOrUndefined(ele)) {\n                    ele.innerHTML = content;\n                }\n            }\n        }\n    };\n    DropDownBase.prototype.getLocaleName = function () {\n        return 'drop-down-base';\n    };\n    DropDownBase.prototype.getTextByValue = function (value) {\n        var text = this.checkValueCase(value, false, false, true);\n        return text;\n    };\n    DropDownBase.prototype.getFormattedValue = function (value) {\n        if (this.listData && this.listData.length) {\n            var item = void 0;\n            if (this.properties.allowCustomValue && this.properties.value && this.properties.value instanceof Array && this.properties.value.length > 0) {\n                item = this.typeOfData(this.properties.value);\n            }\n            else {\n                item = this.typeOfData(this.listData);\n            }\n            if (typeof getValue((this.fields.value ? this.fields.value : 'value'), item.item) === 'number'\n                || item.typeof === 'number') {\n                return parseFloat(value);\n            }\n            if (typeof getValue((this.fields.value ? this.fields.value : 'value'), item.item) === 'boolean'\n                || item.typeof === 'boolean') {\n                return ((value === 'true') || ('' + value === 'true'));\n            }\n        }\n        return value;\n    };\n    /**\n     * Sets RTL to dropdownbase wrapper\n     *\n     * @returns {void}\n     */\n    DropDownBase.prototype.setEnableRtl = function () {\n        if (!isNullOrUndefined(this.enableRtlElements)) {\n            if (this.list) {\n                this.enableRtlElements.push(this.list);\n            }\n            if (this.enableRtl) {\n                addClass(this.enableRtlElements, dropDownBaseClasses.rtl);\n            }\n            else {\n                removeClass(this.enableRtlElements, dropDownBaseClasses.rtl);\n            }\n        }\n    };\n    /**\n     * Initialize the Component.\n     *\n     * @returns {void}\n     */\n    DropDownBase.prototype.initialize = function (e) {\n        this.bindEvent = true;\n        this.actionFailureTemplateId = \"\" + this.element.id + ACTIONFAILURETEMPLATE_PROPERTY;\n        if (this.element.tagName === 'UL') {\n            var jsonElement = ListBase.createJsonFromElement(this.element);\n            this.setProperties({ fields: { text: 'text', value: 'text' } }, true);\n            this.resetList(jsonElement, this.fields);\n        }\n        else if (this.element.tagName === 'SELECT') {\n            var dataSource = this.dataSource instanceof Array ? (this.dataSource.length > 0 ? true : false)\n                : !isNullOrUndefined(this.dataSource) ? true : false;\n            if (!dataSource) {\n                this.renderItemsBySelect();\n            }\n            else if (this.isDynamicDataChange) {\n                this.setListData(this.dataSource, this.fields, this.query);\n            }\n        }\n        else {\n            this.setListData(this.dataSource, this.fields, this.query, e);\n        }\n    };\n    /**\n     * Get the properties to be maintained in persisted state.\n     *\n     * @returns {string} Returns the persisted data of the component.\n     */\n    DropDownBase.prototype.getPersistData = function () {\n        return this.addOnPersist([]);\n    };\n    /**\n     * Sets the enabled state to DropDownBase.\n     *\n     * @param {string} value - Specifies the attribute values to add on the input element.\n     * @returns {void}\n     */\n    DropDownBase.prototype.updateDataAttribute = function (value) {\n        var invalidAttr = ['class', 'style', 'id', 'type', 'aria-expanded', 'aria-autocomplete', 'aria-readonly'];\n        var attr = {};\n        for (var a = 0; a < this.element.attributes.length; a++) {\n            if (invalidAttr.indexOf(this.element.attributes[a].name) === -1 &&\n                !(this.getModuleName() === 'dropdownlist' && this.element.attributes[a].name === 'readonly')) {\n                attr[this.element.attributes[a].name] = this.element.getAttribute(this.element.attributes[a].name);\n            }\n        }\n        extend(attr, value, attr);\n        this.setProperties({ htmlAttributes: attr }, true);\n    };\n    DropDownBase.prototype.renderItemsBySelect = function () {\n        var element = this.element;\n        var fields = { value: 'value', text: 'text' };\n        var jsonElement = [];\n        var group = element.querySelectorAll('select>optgroup');\n        var option = element.querySelectorAll('select>option');\n        this.getJSONfromOption(jsonElement, option, fields);\n        if (group.length) {\n            for (var i = 0; i < group.length; i++) {\n                var item = group[i];\n                var optionGroup = {};\n                optionGroup[fields.text] = item.label;\n                optionGroup.isHeader = true;\n                var child = item.querySelectorAll('option');\n                jsonElement.push(optionGroup);\n                this.getJSONfromOption(jsonElement, child, fields);\n            }\n            element.querySelectorAll('select>option');\n        }\n        this.updateFields(fields.text, fields.value, this.fields.groupBy, this.fields.htmlAttributes, this.fields.iconCss);\n        this.resetList(jsonElement, fields);\n    };\n    DropDownBase.prototype.updateFields = function (text, value, groupBy, htmlAttributes, iconCss) {\n        var field = {\n            'fields': {\n                text: text,\n                value: value,\n                groupBy: !isNullOrUndefined(groupBy) ? groupBy : this.fields && this.fields.groupBy,\n                htmlAttributes: !isNullOrUndefined(htmlAttributes) ? htmlAttributes : this.fields && this.fields.htmlAttributes,\n                iconCss: !isNullOrUndefined(iconCss) ? iconCss : this.fields && this.fields.iconCss\n            }\n        };\n        this.setProperties(field, true);\n    };\n    DropDownBase.prototype.getJSONfromOption = function (items, options, fields) {\n        for (var _i = 0, options_1 = options; _i < options_1.length; _i++) {\n            var option = options_1[_i];\n            var json = {};\n            json[fields.text] = option.innerText;\n            json[fields.value] = !isNullOrUndefined(option.getAttribute(fields.value)) ?\n                option.getAttribute(fields.value) : option.innerText;\n            items.push(json);\n        }\n    };\n    /**\n     * Execute before render the list items\n     *\n     * @private\n     * @returns {void}\n     */\n    DropDownBase.prototype.preRender = function () {\n        // there is no event handler\n        this.scrollTimer = -1;\n        this.enableRtlElements = [];\n        this.isRequested = false;\n        this.isDataFetched = false;\n        this.itemTemplateId = \"\" + this.element.id + ITEMTEMPLATE_PROPERTY;\n        this.displayTemplateId = \"\" + this.element.id + DISPLAYTEMPLATE_PROPERTY;\n        this.spinnerTemplateId = \"\" + this.element.id + SPINNERTEMPLATE_PROPERTY;\n        this.valueTemplateId = \"\" + this.element.id + VALUETEMPLATE_PROPERTY;\n        this.groupTemplateId = \"\" + this.element.id + GROUPTEMPLATE_PROPERTY;\n        this.headerTemplateId = \"\" + this.element.id + HEADERTEMPLATE_PROPERTY;\n        this.footerTemplateId = \"\" + this.element.id + FOOTERTEMPLATE_PROPERTY;\n        this.noRecordsTemplateId = \"\" + this.element.id + NORECORDSTEMPLATE_PROPERTY;\n    };\n    /**\n     * Creates the list items of DropDownBase component.\n     *\n     * @param {Object[] | string[] | number[] | DataManager | boolean[]} dataSource - Specifies the data to generate the list.\n     * @param {FieldSettingsModel} fields - Maps the columns of the data table and binds the data to the component.\n     * @param {Query} query - Accepts the external Query that execute along with data processing.\n     * @returns {void}\n     */\n    DropDownBase.prototype.setListData = function (dataSource, fields, query, event) {\n        var _this = this;\n        fields = fields ? fields : this.fields;\n        var ulElement;\n        this.isActive = true;\n        var eventArgs = { cancel: false, data: dataSource, query: query };\n        this.isPreventChange = this.isAngular && this.preventChange ? true : this.isPreventChange;\n        if (!this.isRequesting) {\n            this.trigger('actionBegin', eventArgs, function (eventArgs) {\n                if (!eventArgs.cancel) {\n                    _this.isRequesting = true;\n                    _this.showSpinner();\n                    if (dataSource instanceof DataManager && !_this.virtualGroupDataSource) {\n                        _this.isRequested = true;\n                        if (_this.isDataFetched) {\n                            _this.emptyDataRequest(fields);\n                            return;\n                        }\n                        eventArgs.data.executeQuery(_this.getQuery(eventArgs.query)).then(function (e) {\n                            _this.isPreventChange = _this.isAngular && _this.preventChange ? true : _this.isPreventChange;\n                            _this.trigger('actionComplete', e, function (e) {\n                                if (!_this.virtualGroupDataSource && _this.isVirtualizationEnabled) {\n                                    _this.isRemoteDataUpdated = true;\n                                    if ((_this.getModuleName() === 'combobox' && _this.isAllowFiltering && _this.isVirtualizationEnabled && e.result)) {\n                                        e.result = e.result.result;\n                                    }\n                                    if (e.result.length > 0) {\n                                        var dataSource_2 = e.result;\n                                        if (_this.isVirtualizationEnabled && _this.fields.groupBy) {\n                                            var data = new DataManager(dataSource_2).executeLocal(new Query().group(_this.fields.groupBy));\n                                            _this.virtualGroupDataSource = data.records;\n                                        }\n                                        else {\n                                            _this.virtualGroupDataSource = dataSource_2;\n                                            _this.hideSpinner();\n                                            _this.isRequested = false;\n                                            _this.isRequesting = false;\n                                            _this.setListData(dataSource_2, fields, query, event);\n                                            return;\n                                        }\n                                    }\n                                    _this.hideSpinner();\n                                    _this.isRequested = false;\n                                    _this.isRequesting = false;\n                                    _this.updatePopupState();\n                                    return;\n                                }\n                                if (!e.cancel) {\n                                    _this.isRequesting = false;\n                                    var listItems = e.result;\n                                    if (_this.isIncrementalRequest) {\n                                        ulElement = _this.renderItems(listItems, fields);\n                                        return;\n                                    }\n                                    if (listItems.length === 0) {\n                                        _this.isDataFetched = true;\n                                    }\n                                    _this.dataCount = e.count;\n                                    _this.totalItemCount = e.count;\n                                    ulElement = _this.renderItems(listItems, fields);\n                                    _this.onActionComplete(ulElement, listItems, e);\n                                    if (_this.groupTemplate) {\n                                        _this.renderGroupTemplate(ulElement);\n                                    }\n                                    _this.isRequested = false;\n                                    _this.bindChildItems(listItems, ulElement, fields, e);\n                                }\n                            });\n                        }).catch(function (e) {\n                            _this.isRequested = false;\n                            _this.isRequesting = false;\n                            _this.onActionFailure(e);\n                            _this.hideSpinner();\n                        });\n                    }\n                    else {\n                        _this.isRequesting = false;\n                        var listItems = void 0;\n                        if (_this.isVirtualizationEnabled && !_this.virtualGroupDataSource && _this.fields.groupBy) {\n                            var data = new DataManager(_this.dataSource).executeLocal(new Query().group(_this.fields.groupBy));\n                            _this.virtualGroupDataSource = data.records;\n                        }\n                        var dataManager = _this.isVirtualizationEnabled && _this.virtualGroupDataSource ? new DataManager(_this.virtualGroupDataSource) : new DataManager(eventArgs.data);\n                        listItems = (_this.getQuery(eventArgs.query)).executeLocal(dataManager);\n                        if (_this.isVirtualizationEnabled && _this.getModuleName() === 'autocomplete' && (listItems.count != 0 && listItems.count < (_this.itemCount * 2))) {\n                            var newQuery = _this.getQuery(eventArgs.query);\n                            if (newQuery) {\n                                for (var queryElements = 0; queryElements < newQuery.queries.length; queryElements++) {\n                                    if (newQuery.queries[queryElements].fn === 'onTake') {\n                                        newQuery.queries[queryElements].e.nos = listItems.count;\n                                        listItems = (newQuery).executeLocal(dataManager);\n                                        break;\n                                    }\n                                }\n                            }\n                        }\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        _this.dataCount = listItems.count;\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        _this.totalItemCount = listItems.count;\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        listItems = _this.isVirtualizationEnabled ? listItems.result : listItems;\n                        var localDataArgs = { cancel: false, result: listItems };\n                        _this.isPreventChange = _this.isAngular && _this.preventChange ? true : _this.isPreventChange;\n                        _this.trigger('actionComplete', localDataArgs, function (localDataArgs) {\n                            if (_this.isIncrementalRequest) {\n                                ulElement = _this.renderItems(localDataArgs.result, fields);\n                                return;\n                            }\n                            if (!localDataArgs.cancel) {\n                                ulElement = _this.renderItems(localDataArgs.result, fields);\n                                _this.onActionComplete(ulElement, localDataArgs.result, event);\n                                if (_this.groupTemplate) {\n                                    _this.renderGroupTemplate(ulElement);\n                                }\n                                _this.bindChildItems(localDataArgs.result, ulElement, fields);\n                                setTimeout(function () {\n                                    if (_this.getModuleName() === 'multiselect' && _this.itemTemplate != null && (ulElement.childElementCount > 0 && (ulElement.children[0].childElementCount > 0 || (_this.fields.groupBy && ulElement.children[1] && ulElement.children[1].childElementCount > 0)))) {\n                                        _this.updateDataList();\n                                    }\n                                });\n                            }\n                        });\n                    }\n                }\n            });\n        }\n    };\n    DropDownBase.prototype.updatePopupState = function () {\n        // Used this method in component side.\n    };\n    DropDownBase.prototype.updateRemoteData = function () {\n        this.setListData(this.dataSource, this.fields, this.query);\n    };\n    DropDownBase.prototype.bindChildItems = function (listItems, ulElement, fields, e) {\n        var _this = this;\n        if (listItems.length >= 100 && this.getModuleName() === 'autocomplete') {\n            setTimeout(function () {\n                var childNode = _this.remainingItems(_this.sortedData, fields);\n                append(childNode, ulElement);\n                _this.liCollections = _this.list.querySelectorAll('.' + dropDownBaseClasses.li);\n                _this.updateListValues();\n                _this.raiseDataBound(listItems, e);\n            }, 0);\n        }\n        else {\n            this.raiseDataBound(listItems, e);\n        }\n    };\n    DropDownBase.prototype.updateListValues = function () {\n        // Used this method in component side.\n    };\n    DropDownBase.prototype.findListElement = function (list, findNode, attribute, value) {\n        var liElement = null;\n        if (list) {\n            var listArr = [].slice.call(list.querySelectorAll(findNode));\n            for (var index = 0; index < listArr.length; index++) {\n                if (listArr[index].getAttribute(attribute) === (value + '')) {\n                    liElement = listArr[index];\n                    break;\n                }\n            }\n        }\n        return liElement;\n    };\n    DropDownBase.prototype.raiseDataBound = function (listItems, e) {\n        this.hideSpinner();\n        var dataBoundEventArgs = {\n            items: listItems,\n            e: e\n        };\n        this.trigger('dataBound', dataBoundEventArgs);\n    };\n    DropDownBase.prototype.remainingItems = function (dataSource, fields) {\n        var spliceData = new DataManager(dataSource).executeLocal(new Query().skip(100));\n        if (this.itemTemplate) {\n            var listElements = this.templateListItem(spliceData, fields);\n            return [].slice.call(listElements.childNodes);\n        }\n        var type = this.typeOfData(spliceData).typeof;\n        if (type === 'string' || type === 'number' || type === 'boolean') {\n            return ListBase.createListItemFromArray(this.createElement, spliceData, true, this.listOption(spliceData, fields), this);\n        }\n        return ListBase.createListItemFromJson(this.createElement, spliceData, this.listOption(spliceData, fields), 1, true, this);\n    };\n    DropDownBase.prototype.emptyDataRequest = function (fields) {\n        var listItems = [];\n        this.onActionComplete(this.renderItems(listItems, fields), listItems);\n        this.isRequested = false;\n        this.hideSpinner();\n    };\n    DropDownBase.prototype.showSpinner = function () {\n        // Used this method in component side.\n    };\n    DropDownBase.prototype.hideSpinner = function () {\n        // Used this method in component side.\n    };\n    DropDownBase.prototype.onActionFailure = function (e) {\n        this.liCollections = [];\n        this.trigger('actionFailure', e);\n        this.l10nUpdate(true);\n        if (!isNullOrUndefined(this.list)) {\n            addClass([this.list], dropDownBaseClasses.noData);\n        }\n    };\n    /* eslint-disable @typescript-eslint/no-unused-vars */\n    DropDownBase.prototype.onActionComplete = function (ulElement, list, e) {\n        /* eslint-enable @typescript-eslint/no-unused-vars */\n        this.listData = list;\n        if (this.isVirtualizationEnabled) {\n            this.notify(\"setGeneratedData\", {\n                module: \"VirtualScroll\",\n            });\n        }\n        if (this.getModuleName() !== 'listbox') {\n            ulElement.setAttribute('tabindex', '0');\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (this.isReact) {\n            this.clearTemplate(['itemTemplate', 'groupTemplate', 'actionFailureTemplate', 'noRecordsTemplate']);\n        }\n        if (!this.isVirtualizationEnabled) {\n            this.fixedHeaderElement = isNullOrUndefined(this.fixedHeaderElement) ? this.fixedHeaderElement : null;\n        }\n        if (this.getModuleName() === 'multiselect' && this.properties.allowCustomValue && this.fields.groupBy) {\n            for (var i = 0; i < ulElement.childElementCount; i++) {\n                if (ulElement.children[i].classList.contains('e-list-group-item')) {\n                    if (isNullOrUndefined(ulElement.children[i].innerHTML) || ulElement.children[i].innerHTML == \"\") {\n                        addClass([ulElement.children[i]], HIDE_GROUPLIST);\n                    }\n                }\n            }\n        }\n        if (!isNullOrUndefined(this.list)) {\n            if (!this.isVirtualizationEnabled) {\n                this.list.innerHTML = '';\n                this.list.appendChild(ulElement);\n                this.liCollections = this.list.querySelectorAll('.' + dropDownBaseClasses.li);\n                this.ulElement = this.list.querySelector('ul');\n                this.postRender(this.list, list, this.bindEvent);\n            }\n        }\n    };\n    /* eslint-disable @typescript-eslint/no-unused-vars */\n    DropDownBase.prototype.postRender = function (listElement, list, bindEvent) {\n        /* eslint-enable @typescript-eslint/no-unused-vars */\n        var focusItem = listElement.querySelector('.' + dropDownBaseClasses.li);\n        var selectedItem = listElement.querySelector('.' + dropDownBaseClasses.selected);\n        if (focusItem && !selectedItem) {\n            focusItem.classList.add(dropDownBaseClasses.focus);\n        }\n        if (list.length <= 0) {\n            this.l10nUpdate();\n            addClass([listElement], dropDownBaseClasses.noData);\n        }\n        else {\n            listElement.classList.remove(dropDownBaseClasses.noData);\n        }\n    };\n    /**\n     * Get the query to do the data operation before list item generation.\n     *\n     * @param {Query} query - Accepts the external Query that execute along with data processing.\n     * @returns {Query} Returns the query to do the data query operation.\n     */\n    DropDownBase.prototype.getQuery = function (query) {\n        return query ? query : this.query ? this.query : new Query();\n    };\n    DropDownBase.prototype.updateVirtualizationProperties = function (itemCount, filtering) {\n        this.isVirtualizationEnabled = true;\n        this.virtualizedItemsCount = itemCount;\n        this.isAllowFiltering = filtering;\n    };\n    /**\n     * To render the template content for group header element.\n     *\n     * @param {HTMLElement} listEle - Specifies the group list elements.\n     * @returns {void}\n     */\n    DropDownBase.prototype.renderGroupTemplate = function (listEle) {\n        if (this.fields.groupBy !== null && this.dataSource || this.element.querySelector('.' + dropDownBaseClasses.group)) {\n            var dataSource = this.dataSource;\n            var option = { groupTemplateID: this.groupTemplateId, isStringTemplate: this.isStringTemplate };\n            var headerItems = listEle.querySelectorAll('.' + dropDownBaseClasses.group);\n            var groupcheck = this.templateCompiler(this.groupTemplate);\n            if (typeof this.groupTemplate !== 'function' && groupcheck) {\n                var groupValue = select(this.groupTemplate, document).innerHTML.trim();\n                // eslint-disable-next-line @typescript-eslint/no-unused-vars\n                var tempHeaders = ListBase.renderGroupTemplate(groupValue, dataSource, this.fields.properties, headerItems, option, this);\n                //EJ2-55168- Group checkbox is not working with group template\n                if (this.isGroupChecking) {\n                    for (var i = 0; i < tempHeaders.length; i++) {\n                        this.notify('addItem', { module: 'CheckBoxSelection', item: tempHeaders[i] });\n                    }\n                }\n            }\n            else {\n                // eslint-disable-next-line @typescript-eslint/no-unused-vars\n                var tempHeaders = ListBase.renderGroupTemplate(this.groupTemplate, dataSource, this.fields.properties, headerItems, option, this);\n                //EJ2-55168- Group checkbox is not working with group template\n                if (this.isGroupChecking) {\n                    for (var i = 0; i < tempHeaders.length; i++) {\n                        this.notify('addItem', { module: 'CheckBoxSelection', item: tempHeaders[i] });\n                    }\n                }\n            }\n            this.renderReactTemplates();\n        }\n    };\n    /**\n     * To create the ul li list items\n     *\n     * @param {object []} dataSource - Specifies the data to generate the list.\n     * @param {FieldSettingsModel} fields - Maps the columns of the data table and binds the data to the component.\n     * @returns {HTMLElement} Return the ul li list items.\n     */\n    DropDownBase.prototype.createListItems = function (dataSource, fields) {\n        if (dataSource) {\n            if (fields.groupBy || this.element.querySelector('optgroup')) {\n                if (fields.groupBy) {\n                    if (this.sortOrder !== 'None') {\n                        dataSource = this.getSortedDataSource(dataSource);\n                    }\n                    dataSource = ListBase.groupDataSource(dataSource, fields.properties, this.sortOrder);\n                }\n                addClass([this.list], dropDownBaseClasses.grouping);\n            }\n            else {\n                dataSource = this.getSortedDataSource(dataSource);\n            }\n            var options = this.listOption(dataSource, fields);\n            var spliceData = (dataSource.length > 100) ?\n                new DataManager(dataSource).executeLocal(new Query().take(100))\n                : dataSource;\n            this.sortedData = dataSource;\n            return ListBase.createList(this.createElement, (this.getModuleName() === 'autocomplete') ? spliceData : dataSource, options, true, this);\n        }\n        return null;\n    };\n    DropDownBase.prototype.listOption = function (dataSource, fields) {\n        var iconCss = isNullOrUndefined(fields.iconCss) ? false : true;\n        var fieldValues = !isNullOrUndefined(fields.properties) ?\n            fields.properties : fields;\n        var options = (fields.text !== null || fields.value !== null) ? {\n            fields: fieldValues,\n            showIcon: iconCss, ariaAttributes: { groupItemRole: 'presentation' }\n        } : { fields: { value: 'text' } };\n        return extend({}, options, fields, true);\n    };\n    DropDownBase.prototype.setFloatingHeader = function (e) {\n        if (!isNullOrUndefined(this.list) && !this.list.classList.contains(dropDownBaseClasses.noData)) {\n            if (isNullOrUndefined(this.fixedHeaderElement)) {\n                this.fixedHeaderElement = this.createElement('div', { className: dropDownBaseClasses.fixedHead });\n                if (!isNullOrUndefined(this.list) && !this.list.querySelector('li').classList.contains(dropDownBaseClasses.group)) {\n                    this.fixedHeaderElement.style.display = 'none';\n                }\n                if (!isNullOrUndefined(this.fixedHeaderElement) && !isNullOrUndefined(this.list)) {\n                    prepend([this.fixedHeaderElement], this.list);\n                }\n                this.setFixedHeader();\n            }\n            if (!isNullOrUndefined(this.fixedHeaderElement) && this.fixedHeaderElement.style.zIndex === '0') {\n                this.setFixedHeader();\n            }\n            this.scrollStop(e);\n        }\n    };\n    DropDownBase.prototype.scrollStop = function (e, isDownkey) {\n        var target = !isNullOrUndefined(e) ? e.target : this.list;\n        var liHeight = parseInt(getComputedStyle(this.getValidLi(), null).getPropertyValue('height'), 10);\n        var topIndex = Math.round(target.scrollTop / liHeight);\n        var liCollections = this.list.querySelectorAll('li' + ':not(.e-hide-listitem)');\n        var virtualListCount = this.list.querySelectorAll('.e-virtual-list').length;\n        var count = 0;\n        var isCount = false;\n        for (var i = topIndex; i > -1; i--) {\n            var index = this.isVirtualizationEnabled ? i + virtualListCount : i;\n            if (this.isVirtualizationEnabled) {\n                var groupListLength = this.list.querySelectorAll('.e-list-group-item').length;\n                var loadedGroupList = 0;\n                if (isCount) {\n                    count++;\n                }\n                if (this.updateGroupHeader(index, liCollections, target)) {\n                    loadedGroupList++;\n                    if (count >= this.getPageCount()) {\n                        break;\n                    }\n                    if (groupListLength <= loadedGroupList) {\n                        break;\n                    }\n                }\n                if (isDownkey) {\n                    if ((!isNullOrUndefined(liCollections[index]) && liCollections[index].classList.contains(dropDownBaseClasses.selected) && this.getModuleName() !== 'autocomplete') || (!isNullOrUndefined(liCollections[index]) && liCollections[index].classList.contains(dropDownBaseClasses.focus) && this.getModuleName() === 'autocomplete')) {\n                        count++;\n                        isCount = true;\n                    }\n                }\n            }\n            else {\n                if (this.updateGroupHeader(index, liCollections, target)) {\n                    break;\n                }\n            }\n        }\n    };\n    DropDownBase.prototype.getPageCount = function (returnExactCount) {\n        var liHeight = this.list.classList.contains(dropDownBaseClasses.noData) ? null :\n            getComputedStyle(this.getItems()[0], null).getPropertyValue('height');\n        var pageCount = Math.round(this.list.getBoundingClientRect().height / parseInt(liHeight, 10));\n        return returnExactCount ? pageCount : Math.round(pageCount);\n    };\n    DropDownBase.prototype.updateGroupHeader = function (index, liCollections, target) {\n        if (!isNullOrUndefined(liCollections[index]) && liCollections[index].classList.contains(dropDownBaseClasses.group)) {\n            this.updateGroupFixedHeader(liCollections[index], target);\n            return true;\n        }\n        else {\n            this.fixedHeaderElement.style.display = 'none';\n            this.fixedHeaderElement.style.top = 'none';\n            return false;\n        }\n    };\n    DropDownBase.prototype.updateGroupFixedHeader = function (element, target) {\n        this.fixedHeaderElement.innerHTML = element.innerHTML;\n        this.fixedHeaderElement.style.position = 'fixed';\n        this.fixedHeaderElement.style.top = this.list.parentElement.offsetTop + this.list.offsetTop + 'px';\n        this.fixedHeaderElement.style.display = 'block';\n    };\n    DropDownBase.prototype.getValidLi = function () {\n        return this.liCollections[0];\n    };\n    /**\n     * To render the list items\n     *\n     * @param {object[]} listData - Specifies the list of array of data.\n     * @param {FieldSettingsModel} fields - Maps the columns of the data table and binds the data to the component.\n     * @returns {HTMLElement} Return the list items.\n     */\n    DropDownBase.prototype.renderItems = function (listData, fields) {\n        var ulElement;\n        if (this.itemTemplate && listData) {\n            var dataSource = listData;\n            if (dataSource && fields.groupBy) {\n                if (this.sortOrder !== 'None') {\n                    dataSource = this.getSortedDataSource(dataSource);\n                }\n                dataSource = ListBase.groupDataSource(dataSource, fields.properties, this.sortOrder);\n            }\n            else {\n                dataSource = this.getSortedDataSource(dataSource);\n            }\n            this.sortedData = dataSource;\n            var spliceData = (dataSource.length > 100) ?\n                new DataManager(dataSource).executeLocal(new Query().take(100))\n                : dataSource;\n            ulElement = this.templateListItem((this.getModuleName() === 'autocomplete') ? spliceData : dataSource, fields);\n            if (this.isVirtualizationEnabled) {\n                var oldUlElement = this.list.querySelector('.e-list-parent');\n                var virtualUlElement = this.list.querySelector('.e-virtual-ddl-content');\n                if ((listData.length >= this.virtualizedItemsCount && oldUlElement && virtualUlElement) || (oldUlElement && virtualUlElement && this.isAllowFiltering) || (oldUlElement && virtualUlElement && this.getModuleName() === 'autocomplete')) {\n                    virtualUlElement.replaceChild(ulElement, oldUlElement);\n                    this.updateListElements(listData);\n                }\n                else if ((!virtualUlElement)) {\n                    this.list.innerHTML = '';\n                    this.createVirtualContent();\n                    this.list.querySelector('.e-virtual-ddl-content').appendChild(ulElement);\n                    this.updateListElements(listData);\n                }\n            }\n        }\n        else {\n            ulElement = this.createListItems(listData, fields);\n            if (this.isIncrementalRequest) {\n                this.incrementalLiCollections = ulElement.querySelectorAll('.' + dropDownBaseClasses.li);\n                this.incrementalUlElement = ulElement;\n                this.incrementalListData = listData;\n                return ulElement;\n            }\n            if (this.isVirtualizationEnabled) {\n                var oldUlElement = this.list.querySelector('.e-list-parent');\n                var virtualUlElement = this.list.querySelector('.e-virtual-ddl-content');\n                if ((listData.length >= this.virtualizedItemsCount && oldUlElement && virtualUlElement) || (oldUlElement && virtualUlElement && this.isAllowFiltering) || (oldUlElement && virtualUlElement && this.getModuleName() === 'autocomplete')) {\n                    virtualUlElement.replaceChild(ulElement, oldUlElement);\n                    this.updateListElements(listData);\n                }\n                else if ((!virtualUlElement)) {\n                    this.list.innerHTML = '';\n                    this.createVirtualContent();\n                    this.list.querySelector('.e-virtual-ddl-content').appendChild(ulElement);\n                    this.updateListElements(listData);\n                }\n            }\n        }\n        return ulElement;\n    };\n    DropDownBase.prototype.createVirtualContent = function () {\n        if (!this.list.querySelector('.e-virtual-ddl-content')) {\n            this.list.appendChild(this.createElement('div', {\n                className: 'e-virtual-ddl-content',\n            }));\n        }\n    };\n    DropDownBase.prototype.updateListElements = function (listData) {\n        this.liCollections = this.list.querySelectorAll('.' + dropDownBaseClasses.li);\n        this.ulElement = this.list.querySelector('ul');\n        this.listData = listData;\n        this.postRender(this.list, listData, this.bindEvent);\n    };\n    DropDownBase.prototype.templateListItem = function (dataSource, fields) {\n        var option = this.listOption(dataSource, fields);\n        option.templateID = this.itemTemplateId;\n        option.isStringTemplate = this.isStringTemplate;\n        var itemcheck = this.templateCompiler(this.itemTemplate);\n        if (typeof this.itemTemplate !== 'function' && itemcheck) {\n            var itemValue = select(this.itemTemplate, document).innerHTML.trim();\n            return ListBase.renderContentTemplate(this.createElement, itemValue, dataSource, fields.properties, option, this);\n        }\n        else {\n            return ListBase.renderContentTemplate(this.createElement, this.itemTemplate, dataSource, fields.properties, option, this);\n        }\n    };\n    DropDownBase.prototype.typeOfData = function (items) {\n        var item = { typeof: null, item: null };\n        for (var i = 0; (!isNullOrUndefined(items) && i < items.length); i++) {\n            if (!isNullOrUndefined(items[i])) {\n                var listDataType = typeof (items[i]) === 'string' ||\n                    typeof (items[i]) === 'number' || typeof (items[i]) === 'boolean';\n                var isNullData = listDataType ? isNullOrUndefined(items[i]) :\n                    isNullOrUndefined(getValue((this.fields.value ? this.fields.value : 'value'), items[i]));\n                if (!isNullData) {\n                    return item = { typeof: typeof items[i], item: items[i] };\n                }\n            }\n        }\n        return item;\n    };\n    DropDownBase.prototype.setFixedHeader = function () {\n        if (!isNullOrUndefined(this.list)) {\n            this.list.parentElement.style.display = 'block';\n        }\n        var borderWidth = 0;\n        if (this.list && this.list.parentElement) {\n            borderWidth = parseInt(document.defaultView.getComputedStyle(this.list.parentElement, null).getPropertyValue('border-width'), 10);\n            /*Shorthand property not working in Firefox for getComputedStyle method.\n            Refer bug report https://bugzilla.mozilla.org/show_bug.cgi?id=137688\n            Refer alternate solution https://stackoverflow.com/a/41696234/9133493*/\n            if (isNaN(borderWidth)) {\n                var borderTopWidth = parseInt(document.defaultView.getComputedStyle(this.list.parentElement, null).getPropertyValue('border-top-width'), 10);\n                var borderBottomWidth = parseInt(document.defaultView.getComputedStyle(this.list.parentElement, null).getPropertyValue('border-bottom-width'), 10);\n                var borderLeftWidth = parseInt(document.defaultView.getComputedStyle(this.list.parentElement, null).getPropertyValue('border-left-width'), 10);\n                var borderRightWidth = parseInt(document.defaultView.getComputedStyle(this.list.parentElement, null).getPropertyValue('border-right-width'), 10);\n                borderWidth = (borderTopWidth + borderBottomWidth + borderLeftWidth + borderRightWidth);\n            }\n        }\n        if (!isNullOrUndefined(this.liCollections)) {\n            var liWidth = this.getValidLi().offsetWidth - borderWidth;\n            this.fixedHeaderElement.style.width = liWidth.toString() + 'px';\n        }\n        setStyleAttribute(this.fixedHeaderElement, { zIndex: 10 });\n        var firstLi = this.ulElement.querySelector('.' + dropDownBaseClasses.group + ':not(.e-hide-listitem)');\n        this.fixedHeaderElement.innerHTML = firstLi.innerHTML;\n    };\n    DropDownBase.prototype.getSortedDataSource = function (dataSource) {\n        if (dataSource && this.sortOrder !== 'None') {\n            var textField = this.fields.text ? this.fields.text : 'text';\n            if (this.typeOfData(dataSource).typeof === 'string' || this.typeOfData(dataSource).typeof === 'number'\n                || this.typeOfData(dataSource).typeof === 'boolean') {\n                textField = '';\n            }\n            dataSource = ListBase.getDataSource(dataSource, ListBase.addSorting(this.sortOrder, textField));\n        }\n        return dataSource;\n    };\n    /**\n     * Return the index of item which matched with given value in data source\n     *\n     * @param {string | number | boolean} value - Specifies given value.\n     * @returns {number} Returns the index of the item.\n     */\n    DropDownBase.prototype.getIndexByValue = function (value) {\n        var index;\n        var listItems = this.getItems();\n        for (var i = 0; i < listItems.length; i++) {\n            if (!isNullOrUndefined(value) && listItems[i].getAttribute('data-value') === value.toString()) {\n                index = i;\n                break;\n            }\n        }\n        return index;\n    };\n    /**\n     * Return the index of item which matched with given value in data source\n     *\n     * @param {string | number | boolean} value - Specifies given value.\n     * @returns {number} Returns the index of the item.\n     */\n    DropDownBase.prototype.getIndexByValueFilter = function (value) {\n        var index;\n        var listItems = this.renderItems(this.selectData, this.fields);\n        if (listItems && listItems.children) {\n            for (var i = 0; i < listItems.children.length; i++) {\n                if (!isNullOrUndefined(value) && listItems.children[i].getAttribute('data-value') === value.toString()) {\n                    index = i;\n                    break;\n                }\n            }\n        }\n        return index;\n    };\n    /**\n     * To dispatch the event manually\n     *\n     * @param {HTMLElement} element - Specifies the element to dispatch the event.\n     * @param {string} type - Specifies the name of the event.\n     * @returns {void}\n     */\n    DropDownBase.prototype.dispatchEvent = function (element, type) {\n        var evt = document.createEvent('HTMLEvents');\n        evt.initEvent(type, false, true);\n        if (element) {\n            element.dispatchEvent(evt);\n        }\n    };\n    /**\n     * To set the current fields\n     *\n     * @returns {void}\n     */\n    DropDownBase.prototype.setFields = function () {\n        if (this.fields.value && !this.fields.text) {\n            this.updateFields(this.fields.value, this.fields.value);\n        }\n        else if (!this.fields.value && this.fields.text) {\n            this.updateFields(this.fields.text, this.fields.text);\n        }\n        else if (!this.fields.value && !this.fields.text) {\n            this.updateFields('text', 'text');\n        }\n    };\n    /**\n     * reset the items list.\n     *\n     * @param {Object[] | string[] | number[] | DataManager | boolean[]} dataSource - Specifies the data to generate the list.\n     * @param {FieldSettingsModel} fields - Maps the columns of the data table and binds the data to the component.\n     * @param {Query} query - Accepts the external Query that execute along with data processing.\n     * @returns {void}\n     */\n    DropDownBase.prototype.resetList = function (dataSource, fields, query, e) {\n        if (this.list) {\n            if ((this.element.tagName === 'SELECT' && this.element.options.length > 0)\n                || (this.element.tagName === 'UL' && this.element.childNodes.length > 0)) {\n                var data = dataSource instanceof Array ? (dataSource.length > 0)\n                    : !isNullOrUndefined(dataSource);\n                if (!data && this.selectData && this.selectData.length > 0) {\n                    dataSource = this.selectData;\n                }\n            }\n            dataSource = this.getModuleName() === 'combobox' && this.selectData && dataSource instanceof Array && dataSource.length < this.selectData.length && this.addedNewItem ? this.selectData : dataSource;\n            this.addedNewItem = false;\n            this.setListData(dataSource, fields, query, e);\n        }\n    };\n    DropDownBase.prototype.updateSelectElementData = function (isFiltering) {\n        if ((isFiltering || this.isVirtualizationEnabled) && isNullOrUndefined(this.selectData) && this.listData && this.listData.length > 0) {\n            this.selectData = this.listData;\n        }\n    };\n    DropDownBase.prototype.updateSelection = function () {\n        // This is for after added the item, need to update the selected index values.\n    };\n    DropDownBase.prototype.renderList = function () {\n        // This is for render the list items.\n        this.render();\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    DropDownBase.prototype.updateDataSource = function (props) {\n        this.resetList(this.dataSource);\n        this.totalItemCount = this.dataSource instanceof DataManager ? this.dataSource.dataSource.json.length : 0;\n    };\n    DropDownBase.prototype.setUpdateInitial = function (props, newProp) {\n        this.isDataFetched = false;\n        var updateData = {};\n        for (var j = 0; props.length > j; j++) {\n            if (newProp[props[j]] && props[j] === 'fields') {\n                this.setFields();\n                updateData[props[j]] = newProp[props[j]];\n            }\n            else if (newProp[props[j]]) {\n                updateData[props[j]] = newProp[props[j]];\n            }\n        }\n        if (Object.keys(updateData).length > 0) {\n            if (Object.keys(updateData).indexOf('dataSource') === -1) {\n                updateData.dataSource = this.dataSource;\n            }\n            this.updateDataSource(updateData);\n        }\n    };\n    /**\n     * When property value changes happened, then onPropertyChanged method will execute the respective changes in this component.\n     *\n     * @param {DropDownBaseModel} newProp - Returns the dynamic property value of the component.\n     * @param {DropDownBaseModel} oldProp - Returns the previous property value of the component.\n     * @private\n     * @returns {void}\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    DropDownBase.prototype.onPropertyChanged = function (newProp, oldProp) {\n        if (this.getModuleName() === 'dropdownbase') {\n            this.setUpdateInitial(['fields', 'query', 'dataSource'], newProp);\n        }\n        this.setUpdateInitial(['sortOrder', 'itemTemplate'], newProp);\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'query':\n                case 'sortOrder':\n                case 'dataSource':\n                case 'itemTemplate':\n                    break;\n                case 'enableRtl':\n                    this.setEnableRtl();\n                    break;\n                case 'groupTemplate':\n                    this.renderGroupTemplate(this.list);\n                    if (this.ulElement && this.fixedHeaderElement) {\n                        var firstLi = this.ulElement.querySelector('.' + dropDownBaseClasses.group);\n                        this.fixedHeaderElement.innerHTML = firstLi.innerHTML;\n                    }\n                    break;\n                case 'locale':\n                    if (this.list && (!isNullOrUndefined(this.liCollections) && this.liCollections.length === 0)) {\n                        this.l10nUpdate();\n                    }\n                    break;\n                case 'zIndex':\n                    this.setProperties({ zIndex: newProp.zIndex }, true);\n                    this.setZIndex();\n                    break;\n            }\n        }\n    };\n    /**\n     * Build and render the component\n     *\n     * @param {boolean} isEmptyData - Specifies the component to initialize with list data or not.\n     * @private\n     * @returns {void}\n     */\n    DropDownBase.prototype.render = function (e, isEmptyData) {\n        if (this.getModuleName() === 'listbox') {\n            this.list = this.createElement('div', { className: dropDownBaseClasses.content, attrs: { 'tabindex': '0' } });\n        }\n        else {\n            this.list = this.createElement('div', { className: dropDownBaseClasses.content });\n        }\n        this.list.classList.add(dropDownBaseClasses.root);\n        this.setFields();\n        var rippleModel = { duration: 300, selector: '.' + dropDownBaseClasses.li };\n        this.rippleFun = rippleEffect(this.list, rippleModel);\n        var group = this.element.querySelector('select>optgroup');\n        if ((this.fields.groupBy || !isNullOrUndefined(group)) && !this.isGroupChecking) {\n            EventHandler.add(this.list, 'scroll', this.setFloatingHeader, this);\n        }\n        if (this.getModuleName() === 'dropdownbase') {\n            if (this.element.getAttribute('tabindex')) {\n                this.list.setAttribute('tabindex', this.element.getAttribute('tabindex'));\n            }\n            removeClass([this.element], dropDownBaseClasses.root);\n            this.element.style.display = 'none';\n            var wrapperElement = this.createElement('div');\n            this.element.parentElement.insertBefore(wrapperElement, this.element);\n            wrapperElement.appendChild(this.element);\n            wrapperElement.appendChild(this.list);\n        }\n        this.setEnableRtl();\n        if (!isEmptyData) {\n            this.initialize(e);\n        }\n    };\n    DropDownBase.prototype.removeScrollEvent = function () {\n        if (this.list) {\n            EventHandler.remove(this.list, 'scroll', this.setFloatingHeader);\n        }\n    };\n    /**\n     * Return the module name of this component.\n     *\n     * @private\n     * @returns {string} Return the module name of this component.\n     */\n    DropDownBase.prototype.getModuleName = function () {\n        return 'dropdownbase';\n    };\n    /* eslint-disable valid-jsdoc, jsdoc/require-returns-description */\n    /**\n     * Gets all the list items bound on this component.\n     *\n     * @returns {Element[]}\n     */\n    DropDownBase.prototype.getItems = function () {\n        return this.ulElement.querySelectorAll('.' + dropDownBaseClasses.li);\n    };\n    /* eslint-enable valid-jsdoc, jsdoc/require-returns-description */\n    /**\n     * Adds a new item to the popup list. By default, new item appends to the list as the last item,\n     * but you can insert based on the index parameter.\n     *\n     * @param { Object[] } items - Specifies an array of JSON data or a JSON data.\n     * @param { number } itemIndex - Specifies the index to place the newly added item in the popup list.\n     * @returns {void}\n     * @deprecated\n     */\n    DropDownBase.prototype.addItem = function (items, itemIndex) {\n        if (!this.list || (this.list.textContent === this.noRecordsTemplate && this.getModuleName() !== 'listbox')) {\n            this.renderList();\n        }\n        if (this.sortOrder !== 'None' && isNullOrUndefined(itemIndex)) {\n            var newList = [].slice.call(this.listData);\n            newList.push(items);\n            newList = this.getSortedDataSource(newList);\n            if (this.fields.groupBy) {\n                newList = ListBase.groupDataSource(newList, this.fields.properties, this.sortOrder);\n                itemIndex = newList.indexOf(items);\n            }\n            else {\n                itemIndex = newList.indexOf(items);\n            }\n        }\n        var itemsCount = this.getItems().length;\n        var selectedItemValue = this.list.querySelector('.' + dropDownBaseClasses.selected);\n        items = (items instanceof Array ? items : [items]);\n        var index;\n        index = (isNullOrUndefined(itemIndex) || itemIndex < 0 || itemIndex > itemsCount - 1) ? itemsCount : itemIndex;\n        var fields = this.fields;\n        if (items && fields.groupBy) {\n            items = ListBase.groupDataSource(items, fields.properties);\n        }\n        var liCollections = [];\n        for (var i = 0; i < items.length; i++) {\n            var item = items[i];\n            var isHeader = item.isHeader;\n            var li = this.createElement('li', { className: isHeader ? dropDownBaseClasses.group : dropDownBaseClasses.li, id: 'option-add-' + i });\n            var itemText = item instanceof Object ? getValue(fields.text, item) : item;\n            if (isHeader) {\n                li.innerText = itemText;\n            }\n            if (this.itemTemplate && !isHeader) {\n                var itemCheck = this.templateCompiler(this.itemTemplate);\n                var compiledString = typeof this.itemTemplate !== 'function' &&\n                    itemCheck ? compile(select(this.itemTemplate, document).innerHTML.trim()) : compile(this.itemTemplate);\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                var addItemTemplate = compiledString(item, this, 'itemTemplate', this.itemTemplateId, this.isStringTemplate, null, li);\n                if (addItemTemplate) {\n                    append(addItemTemplate, li);\n                }\n            }\n            else if (!isHeader) {\n                li.appendChild(document.createTextNode(itemText));\n            }\n            li.setAttribute('data-value', item instanceof Object ? getValue(fields.value, item) : item);\n            li.setAttribute('role', 'option');\n            this.notify('addItem', { module: 'CheckBoxSelection', item: li });\n            liCollections.push(li);\n            this.listData.push(item);\n            if (this.sortOrder === 'None' && isNullOrUndefined(itemIndex) && index === 0) {\n                index = null;\n            }\n            this.updateActionCompleteData(li, item, index);\n            //Listbox event\n            this.trigger('beforeItemRender', { element: li, item: item });\n        }\n        if (itemsCount === 0 && isNullOrUndefined(this.list.querySelector('ul'))) {\n            if (!isNullOrUndefined(this.list)) {\n                this.list.innerHTML = '';\n                this.list.classList.remove(dropDownBaseClasses.noData);\n                this.isAddNewItemTemplate = true;\n                if (!isNullOrUndefined(this.ulElement)) {\n                    this.list.appendChild(this.ulElement);\n                }\n            }\n            this.liCollections = liCollections;\n            if (!isNullOrUndefined(liCollections) && !isNullOrUndefined(this.ulElement)) {\n                append(liCollections, this.ulElement);\n            }\n            this.updateAddItemList(this.list, itemsCount);\n        }\n        else {\n            if (this.getModuleName() === 'listbox' && itemsCount === 0) {\n                this.ulElement.innerHTML = '';\n            }\n            var attr = [];\n            for (var i = 0; i < items.length; i++) {\n                var listGroupItem = this.ulElement.querySelectorAll('.e-list-group-item');\n                for (var j = 0; j < listGroupItem.length; j++) {\n                    attr[j] = listGroupItem[j].innerText;\n                }\n                if (attr.indexOf(liCollections[i].innerText) > -1 && fields.groupBy) {\n                    for (var j = 0; j < listGroupItem.length; j++) {\n                        if (attr[j] === liCollections[i].innerText) {\n                            if (this.sortOrder === 'None') {\n                                this.ulElement.insertBefore(liCollections[i + 1], listGroupItem[j + 1]);\n                            }\n                            else {\n                                this.ulElement.insertBefore(liCollections[i + 1], this.ulElement.childNodes[itemIndex]);\n                            }\n                            i = i + 1;\n                            break;\n                        }\n                    }\n                }\n                else {\n                    if (this.liCollections[index]) {\n                        this.liCollections[index].parentNode.insertBefore(liCollections[i], this.liCollections[index]);\n                    }\n                    else {\n                        this.ulElement.appendChild(liCollections[i]);\n                    }\n                }\n                var tempLi = [].slice.call(this.liCollections);\n                tempLi.splice(index, 0, liCollections[i]);\n                this.liCollections = tempLi;\n                index += 1;\n                if (this.getModuleName() === 'multiselect') {\n                    this.updateDataList();\n                }\n            }\n        }\n        if (this.getModuleName() === 'listbox' && this.isReact) {\n            this.renderReactTemplates();\n        }\n        if (selectedItemValue || itemIndex === 0) {\n            this.updateSelection();\n        }\n        this.addedNewItem = true;\n    };\n    DropDownBase.prototype.validationAttribute = function (target, hidden) {\n        var name = target.getAttribute('name') ? target.getAttribute('name') : target.getAttribute('id');\n        hidden.setAttribute('name', name);\n        target.removeAttribute('name');\n        var attributes$$1 = ['required', 'aria-required', 'form'];\n        for (var i = 0; i < attributes$$1.length; i++) {\n            if (!target.getAttribute(attributes$$1[i])) {\n                continue;\n            }\n            var attr = target.getAttribute(attributes$$1[i]);\n            hidden.setAttribute(attributes$$1[i], attr);\n            target.removeAttribute(attributes$$1[i]);\n        }\n    };\n    DropDownBase.prototype.setZIndex = function () {\n        // this is for component wise\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    DropDownBase.prototype.updateActionCompleteData = function (li, item, index) {\n        // this is for ComboBox custom value\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    DropDownBase.prototype.updateAddItemList = function (list, itemCount) {\n        // this is for multiselect add item\n    };\n    DropDownBase.prototype.updateDataList = function () {\n        // this is for multiselect update list items\n    };\n    /* eslint-disable valid-jsdoc, jsdoc/require-returns-description */\n    /**\n     * Gets the data Object that matches the given value.\n     *\n     * @param { string | number } value - Specifies the value of the list item.\n     * @returns {Object}\n     */\n    DropDownBase.prototype.getDataByValue = function (value) {\n        if (!isNullOrUndefined(this.listData)) {\n            var type = this.typeOfData(this.listData).typeof;\n            if (type === 'string' || type === 'number' || type === 'boolean') {\n                for (var _i = 0, _a = this.listData; _i < _a.length; _i++) {\n                    var item = _a[_i];\n                    if (!isNullOrUndefined(item) && item === value) {\n                        return item;\n                    }\n                }\n            }\n            else {\n                for (var _b = 0, _c = this.listData; _b < _c.length; _b++) {\n                    var item = _c[_b];\n                    if (!isNullOrUndefined(item) && getValue((this.fields.value ? this.fields.value : 'value'), item) === value) {\n                        return item;\n                    }\n                }\n            }\n        }\n        return null;\n    };\n    /* eslint-enable valid-jsdoc, jsdoc/require-returns-description */\n    /**\n     * Removes the component from the DOM and detaches all its related event handlers. It also removes the attributes and classes.\n     *\n     * @method destroy\n     * @returns {void}\n     */\n    DropDownBase.prototype.destroy = function () {\n        if (document.body.contains(this.list)) {\n            EventHandler.remove(this.list, 'scroll', this.setFloatingHeader);\n            if (!isNullOrUndefined(this.rippleFun)) {\n                this.rippleFun();\n            }\n            detach(this.list);\n        }\n        this.liCollections = null;\n        this.ulElement = null;\n        this.list = null;\n        this.enableRtlElements = null;\n        this.rippleFun = null;\n        _super.prototype.destroy.call(this);\n    };\n    __decorate([\n        Complex({ text: null, value: null, iconCss: null, groupBy: null }, FieldSettings)\n    ], DropDownBase.prototype, \"fields\", void 0);\n    __decorate([\n        Property(null)\n    ], DropDownBase.prototype, \"itemTemplate\", void 0);\n    __decorate([\n        Property(null)\n    ], DropDownBase.prototype, \"groupTemplate\", void 0);\n    __decorate([\n        Property('No records found')\n    ], DropDownBase.prototype, \"noRecordsTemplate\", void 0);\n    __decorate([\n        Property('Request failed')\n    ], DropDownBase.prototype, \"actionFailureTemplate\", void 0);\n    __decorate([\n        Property('None')\n    ], DropDownBase.prototype, \"sortOrder\", void 0);\n    __decorate([\n        Property([])\n    ], DropDownBase.prototype, \"dataSource\", void 0);\n    __decorate([\n        Property(null)\n    ], DropDownBase.prototype, \"query\", void 0);\n    __decorate([\n        Property('StartsWith')\n    ], DropDownBase.prototype, \"filterType\", void 0);\n    __decorate([\n        Property(true)\n    ], DropDownBase.prototype, \"ignoreCase\", void 0);\n    __decorate([\n        Property(1000)\n    ], DropDownBase.prototype, \"zIndex\", void 0);\n    __decorate([\n        Property(false)\n    ], DropDownBase.prototype, \"ignoreAccent\", void 0);\n    __decorate([\n        Property()\n    ], DropDownBase.prototype, \"locale\", void 0);\n    __decorate([\n        Event()\n    ], DropDownBase.prototype, \"actionBegin\", void 0);\n    __decorate([\n        Event()\n    ], DropDownBase.prototype, \"actionComplete\", void 0);\n    __decorate([\n        Event()\n    ], DropDownBase.prototype, \"actionFailure\", void 0);\n    __decorate([\n        Event()\n    ], DropDownBase.prototype, \"select\", void 0);\n    __decorate([\n        Event()\n    ], DropDownBase.prototype, \"dataBound\", void 0);\n    __decorate([\n        Event()\n    ], DropDownBase.prototype, \"created\", void 0);\n    __decorate([\n        Event()\n    ], DropDownBase.prototype, \"destroyed\", void 0);\n    DropDownBase = __decorate([\n        NotifyPropertyChanges\n    ], DropDownBase);\n    return DropDownBase;\n}(Component));\n\n/**\n * export all modules from current location\n */\n\nvar __extends$1 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$1 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n// eslint-disable-next-line @typescript-eslint/triple-slash-reference\n/// <reference path='../drop-down-base/drop-down-base-model.d.ts'/>\n// don't use space in classnames\nvar dropDownListClasses = {\n    root: 'e-dropdownlist',\n    hover: dropDownBaseClasses.hover,\n    selected: dropDownBaseClasses.selected,\n    rtl: dropDownBaseClasses.rtl,\n    li: dropDownBaseClasses.li,\n    disable: dropDownBaseClasses.disabled,\n    base: dropDownBaseClasses.root,\n    focus: dropDownBaseClasses.focus,\n    content: dropDownBaseClasses.content,\n    input: 'e-input-group',\n    inputFocus: 'e-input-focus',\n    icon: 'e-input-group-icon e-ddl-icon',\n    iconAnimation: 'e-icon-anim',\n    value: 'e-input-value',\n    device: 'e-ddl-device',\n    backIcon: 'e-input-group-icon e-back-icon e-icons',\n    filterBarClearIcon: 'e-input-group-icon e-clear-icon e-icons',\n    filterInput: 'e-input-filter',\n    filterParent: 'e-filter-parent',\n    mobileFilter: 'e-ddl-device-filter',\n    footer: 'e-ddl-footer',\n    header: 'e-ddl-header',\n    clearIcon: 'e-clear-icon',\n    clearIconHide: 'e-clear-icon-hide',\n    popupFullScreen: 'e-popup-full-page',\n    disableIcon: 'e-ddl-disable-icon',\n    hiddenElement: 'e-ddl-hidden',\n    virtualList: 'e-list-item e-virtual-list',\n};\nvar inputObject = {\n    container: null,\n    buttons: []\n};\n/**\n * The DropDownList component contains a list of predefined values from which you can\n * choose a single value.\n * ```html\n * <input type=\"text\" tabindex=\"1\" id=\"list\"> </input>\n * ```\n * ```typescript\n *   let dropDownListObj:DropDownList = new DropDownList();\n *   dropDownListObj.appendTo(\"#list\");\n * ```\n */\nvar DropDownList = /** @__PURE__ @class */ (function (_super) {\n    __extends$1(DropDownList, _super);\n    /**\n     * * Constructor for creating the DropDownList component.\n     *\n     * @param {DropDownListModel} options - Specifies the DropDownList model.\n     * @param {string | HTMLElement} element - Specifies the element to render as component.\n     * @private\n     */\n    function DropDownList(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        _this.skeletonCount = 32;\n        _this.isListSearched = false;\n        _this.preventChange = false;\n        _this.isAngular = false;\n        _this.virtualListHeight = 0;\n        _this.isVirtualScrolling = false;\n        _this.isPreventScrollAction = false;\n        _this.scrollPreStartIndex = 0;\n        _this.isScrollActionTriggered = false;\n        _this.previousStartIndex = 0;\n        _this.isMouseScrollAction = false;\n        _this.isKeyBoardAction = false;\n        _this.isUpwardScrolling = false;\n        _this.startIndex = 0;\n        _this.currentPageNumber = 0;\n        _this.pageCount = 0;\n        _this.isPreventKeyAction = false;\n        _this.generatedDataObject = {};\n        _this.incrementalQueryString = '';\n        _this.incrementalEndIndex = 0;\n        _this.incrementalStartIndex = 0;\n        _this.incrementalPreQueryString = '';\n        _this.isTouched = false;\n        _this.virtualListInfo = {\n            currentPageNumber: null,\n            direction: null,\n            sentinelInfo: {},\n            offsets: {},\n            startIndex: 0,\n            endIndex: 0,\n        };\n        _this.viewPortInfo = {\n            currentPageNumber: null,\n            direction: null,\n            sentinelInfo: {},\n            offsets: {},\n            startIndex: 0,\n            endIndex: 0,\n        };\n        _this.selectedValueInfo = {\n            currentPageNumber: null,\n            direction: null,\n            sentinelInfo: {},\n            offsets: {},\n            startIndex: 0,\n            endIndex: 0,\n        };\n        _this.IsScrollerAtEnd = function () {\n            return this.list && this.list.scrollTop + this.list.clientHeight >= this.list.scrollHeight;\n        };\n        return _this;\n    }\n    /**\n     * Initialize the event handler.\n     *\n     * @private\n     * @returns {void}\n     */\n    DropDownList.prototype.preRender = function () {\n        this.valueTempElement = null;\n        this.element.style.opacity = '0';\n        this.initializeData();\n        _super.prototype.preRender.call(this);\n        this.activeIndex = this.index;\n        this.queryString = '';\n    };\n    DropDownList.prototype.initializeData = function () {\n        this.isPopupOpen = false;\n        this.isDocumentClick = false;\n        this.isInteracted = false;\n        this.isFilterFocus = false;\n        this.beforePopupOpen = false;\n        this.initial = true;\n        this.initRemoteRender = false;\n        this.isNotSearchList = false;\n        this.isTyped = false;\n        this.isSelected = false;\n        this.preventFocus = false;\n        this.preventAutoFill = false;\n        this.isValidKey = false;\n        this.typedString = '';\n        this.isEscapeKey = false;\n        this.isPreventBlur = false;\n        this.isTabKey = false;\n        this.actionCompleteData = { isUpdated: false };\n        this.actionData = { isUpdated: false };\n        this.prevSelectPoints = {};\n        this.isSelectCustom = false;\n        this.isDropDownClick = false;\n        this.preventAltUp = false;\n        this.isCustomFilter = false;\n        this.isSecondClick = false;\n        this.previousValue = null;\n        this.keyConfigure = {\n            tab: 'tab',\n            enter: '13',\n            escape: '27',\n            end: '35',\n            home: '36',\n            down: '40',\n            up: '38',\n            pageUp: '33',\n            pageDown: '34',\n            open: 'alt+40',\n            close: 'shift+tab',\n            hide: 'alt+38',\n            space: '32'\n        };\n        this.viewPortInfo = {\n            currentPageNumber: null,\n            direction: null,\n            sentinelInfo: {},\n            offsets: {},\n            startIndex: 0,\n            endIndex: this.itemCount,\n        };\n    };\n    DropDownList.prototype.setZIndex = function () {\n        if (this.popupObj) {\n            this.popupObj.setProperties({ 'zIndex': this.zIndex });\n        }\n    };\n    DropDownList.prototype.requiredModules = function () {\n        var modules = [];\n        if (this.enableVirtualization) {\n            modules.push({ args: [this], member: 'VirtualScroll' });\n        }\n        return modules;\n    };\n    DropDownList.prototype.renderList = function (e, isEmptyData) {\n        _super.prototype.render.call(this, e, isEmptyData);\n        if (!(this.dataSource instanceof DataManager)) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            this.totalItemCount = this.dataSource && this.dataSource.length ? this.dataSource.length : 0;\n        }\n        this.unWireListEvents();\n        this.wireListEvents();\n    };\n    DropDownList.prototype.floatLabelChange = function () {\n        if (this.getModuleName() === 'dropdownlist' && this.floatLabelType === 'Auto') {\n            var floatElement = this.inputWrapper.container.querySelector('.e-float-text');\n            if (this.inputElement.value !== '' || this.isInteracted) {\n                classList(floatElement, ['e-label-top'], ['e-label-bottom']);\n            }\n            else {\n                classList(floatElement, ['e-label-bottom'], ['e-label-top']);\n            }\n        }\n    };\n    DropDownList.prototype.resetHandler = function (e) {\n        e.preventDefault();\n        this.clearAll(e);\n        if (this.enableVirtualization) {\n            this.list.scrollTop = 0;\n            this.virtualListInfo = null;\n            this.previousStartIndex = 0;\n            this.previousEndIndex = 0;\n        }\n    };\n    DropDownList.prototype.resetFocusElement = function () {\n        this.removeHover();\n        this.removeSelection();\n        this.removeFocus();\n        this.list.scrollTop = 0;\n        if (this.getModuleName() !== 'autocomplete' && !isNullOrUndefined(this.ulElement)) {\n            var li = this.ulElement.querySelector('.' + dropDownListClasses.li);\n            if (this.enableVirtualization) {\n                li = this.liCollections[this.skeletonCount];\n            }\n            if (li) {\n                li.classList.add(dropDownListClasses.focus);\n            }\n        }\n    };\n    DropDownList.prototype.clearAll = function (e, properties) {\n        this.previousItemData = (!isNullOrUndefined(this.itemData)) ? this.itemData : null;\n        if (isNullOrUndefined(properties) || (!isNullOrUndefined(properties) &&\n            (isNullOrUndefined(properties.dataSource) ||\n                (!(properties.dataSource instanceof DataManager) && properties.dataSource.length === 0)))) {\n            this.isActive = true;\n            this.resetSelection(properties);\n        }\n        var dataItem = this.getItemData();\n        if (this.previousValue === dataItem.value) {\n            return;\n        }\n        this.onChangeEvent(e);\n        this.checkAndResetCache();\n        if (this.enableVirtualization) {\n            this.updateInitialData();\n        }\n    };\n    DropDownList.prototype.resetSelection = function (properties) {\n        if (this.list) {\n            if ((!isNullOrUndefined(properties) &&\n                (isNullOrUndefined(properties.dataSource) ||\n                    (!(properties.dataSource instanceof DataManager) && properties.dataSource.length === 0)))) {\n                this.selectedLI = null;\n                this.actionCompleteData.isUpdated = false;\n                this.actionCompleteData.ulElement = null;\n                this.actionCompleteData.list = null;\n                this.resetList(properties.dataSource);\n            }\n            else {\n                if (this.allowFiltering && this.getModuleName() !== 'autocomplete'\n                    && !isNullOrUndefined(this.actionCompleteData.ulElement) && !isNullOrUndefined(this.actionCompleteData.list) &&\n                    this.actionCompleteData.list.length > 0) {\n                    this.onActionComplete(this.actionCompleteData.ulElement.cloneNode(true), this.actionCompleteData.list);\n                }\n                this.resetFocusElement();\n            }\n        }\n        if (!isNullOrUndefined(this.hiddenElement)) {\n            this.hiddenElement.innerHTML = '';\n        }\n        if (!isNullOrUndefined(this.inputElement)) {\n            this.inputElement.value = '';\n        }\n        this.value = null;\n        this.itemData = null;\n        this.text = null;\n        this.index = null;\n        this.activeIndex = null;\n        this.item = null;\n        this.queryString = '';\n        if (this.valueTempElement) {\n            detach(this.valueTempElement);\n            this.inputElement.style.display = 'block';\n            this.valueTempElement = null;\n        }\n        this.setSelection(null, null);\n        this.isSelectCustom = false;\n        this.updateIconState();\n        this.cloneElements();\n    };\n    DropDownList.prototype.setHTMLAttributes = function () {\n        if (Object.keys(this.htmlAttributes).length) {\n            for (var _i = 0, _a = Object.keys(this.htmlAttributes); _i < _a.length; _i++) {\n                var htmlAttr = _a[_i];\n                if (htmlAttr === 'class') {\n                    var updatedClassValue = (this.htmlAttributes[\"\" + htmlAttr].replace(/\\s+/g, ' ')).trim();\n                    if (updatedClassValue !== '') {\n                        addClass([this.inputWrapper.container], updatedClassValue.split(' '));\n                    }\n                }\n                else if (htmlAttr === 'disabled' && this.htmlAttributes[\"\" + htmlAttr] === 'disabled') {\n                    this.enabled = false;\n                    this.setEnable();\n                }\n                else if (htmlAttr === 'readonly' && !isNullOrUndefined(this.htmlAttributes[\"\" + htmlAttr])) {\n                    this.readonly = true;\n                    this.dataBind();\n                }\n                else if (htmlAttr === 'style') {\n                    this.inputWrapper.container.setAttribute('style', this.htmlAttributes[\"\" + htmlAttr]);\n                }\n                else if (htmlAttr === 'aria-label') {\n                    if ((this.getModuleName() === 'autocomplete' || this.getModuleName() === 'combobox') && !this.readonly) {\n                        this.inputElement.setAttribute('aria-label', this.htmlAttributes[\"\" + htmlAttr]);\n                    }\n                    else if (this.getModuleName() === 'dropdownlist') {\n                        this.inputWrapper.container.setAttribute('aria-label', this.htmlAttributes[\"\" + htmlAttr]);\n                    }\n                }\n                else {\n                    var defaultAttr = ['title', 'id', 'placeholder',\n                        'role', 'autocomplete', 'autocapitalize', 'spellcheck', 'minlength', 'maxlength'];\n                    var validateAttr = ['name', 'required'];\n                    if (this.getModuleName() === 'autocomplete' || this.getModuleName() === 'combobox') {\n                        defaultAttr.push('tabindex');\n                    }\n                    if (validateAttr.indexOf(htmlAttr) > -1 || htmlAttr.indexOf('data') === 0) {\n                        this.hiddenElement.setAttribute(htmlAttr, this.htmlAttributes[\"\" + htmlAttr]);\n                    }\n                    else if (defaultAttr.indexOf(htmlAttr) > -1) {\n                        if (htmlAttr === 'placeholder') {\n                            Input.setPlaceholder(this.htmlAttributes[\"\" + htmlAttr], this.inputElement);\n                        }\n                        else {\n                            this.inputElement.setAttribute(htmlAttr, this.htmlAttributes[\"\" + htmlAttr]);\n                        }\n                    }\n                    else {\n                        this.inputWrapper.container.setAttribute(htmlAttr, this.htmlAttributes[\"\" + htmlAttr]);\n                    }\n                }\n            }\n        }\n        if (this.getModuleName() === 'autocomplete' || this.getModuleName() === 'combobox') {\n            this.inputWrapper.container.removeAttribute('tabindex');\n        }\n    };\n    DropDownList.prototype.getAriaAttributes = function () {\n        return {\n            'aria-disabled': 'false',\n            'role': 'combobox',\n            'aria-expanded': 'false',\n            'aria-live': 'polite',\n            'aria-labelledby': this.hiddenElement.id\n        };\n    };\n    DropDownList.prototype.setEnableRtl = function () {\n        Input.setEnableRtl(this.enableRtl, [this.inputElement.parentElement]);\n        if (this.popupObj) {\n            this.popupObj.enableRtl = this.enableRtl;\n            this.popupObj.dataBind();\n        }\n    };\n    DropDownList.prototype.setEnable = function () {\n        Input.setEnabled(this.enabled, this.inputElement);\n        if (this.enabled) {\n            removeClass([this.inputWrapper.container], dropDownListClasses.disable);\n            this.inputElement.setAttribute('aria-disabled', 'false');\n            this.targetElement().setAttribute('tabindex', this.tabIndex);\n        }\n        else {\n            this.hidePopup();\n            addClass([this.inputWrapper.container], dropDownListClasses.disable);\n            this.inputElement.setAttribute('aria-disabled', 'true');\n            this.targetElement().tabIndex = -1;\n        }\n    };\n    /**\n     * Get the properties to be maintained in the persisted state.\n     *\n     * @returns {string} Returns the persisted data of the component.\n     */\n    DropDownList.prototype.getPersistData = function () {\n        return this.addOnPersist(['value']);\n    };\n    DropDownList.prototype.getLocaleName = function () {\n        return 'drop-down-list';\n    };\n    DropDownList.prototype.preventTabIndex = function (element) {\n        if (this.getModuleName() === 'dropdownlist') {\n            element.tabIndex = -1;\n        }\n    };\n    DropDownList.prototype.targetElement = function () {\n        return !isNullOrUndefined(this.inputWrapper) ? this.inputWrapper.container : null;\n    };\n    DropDownList.prototype.getNgDirective = function () {\n        return 'EJS-DROPDOWNLIST';\n    };\n    DropDownList.prototype.getElementByText = function (text) {\n        return this.getElementByValue(this.getValueByText(text));\n    };\n    DropDownList.prototype.getElementByValue = function (value) {\n        var item;\n        var listItems = this.getItems();\n        for (var _i = 0, listItems_1 = listItems; _i < listItems_1.length; _i++) {\n            var liItem = listItems_1[_i];\n            if (this.getFormattedValue(liItem.getAttribute('data-value')) === value) {\n                item = liItem;\n                break;\n            }\n        }\n        return item;\n    };\n    DropDownList.prototype.initValue = function () {\n        this.viewPortInfo.startIndex = this.virtualItemStartIndex = 0;\n        this.viewPortInfo.endIndex = this.virtualItemEndIndex = this.itemCount;\n        this.renderList();\n        if (this.dataSource instanceof DataManager) {\n            this.initRemoteRender = true;\n        }\n        else {\n            this.updateValues();\n        }\n    };\n    DropDownList.prototype.updateValues = function () {\n        this.selectedValueInfo = this.viewPortInfo;\n        if (!isNullOrUndefined(this.value)) {\n            this.setSelection(this.getElementByValue(this.value), null);\n        }\n        else if (this.text && isNullOrUndefined(this.value)) {\n            var element = this.getElementByText(this.text);\n            if (isNullOrUndefined(element)) {\n                this.setProperties({ text: null });\n                return;\n            }\n            else {\n                this.setSelection(element, null);\n            }\n        }\n        else {\n            this.setSelection(this.liCollections[this.activeIndex], null);\n        }\n        this.setHiddenValue();\n        Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);\n    };\n    DropDownList.prototype.onBlurHandler = function (e) {\n        if (!this.enabled) {\n            return;\n        }\n        var target = e.relatedTarget;\n        var currentTarget = e.target;\n        var isPreventBlur = this.isPreventBlur;\n        this.isPreventBlur = false;\n        //IE 11 - issue\n        if (isPreventBlur && !this.isDocumentClick && this.isPopupOpen && (!isNullOrUndefined(currentTarget) ||\n            !this.isFilterLayout() && isNullOrUndefined(target))) {\n            if (this.getModuleName() === 'dropdownlist' && this.allowFiltering && this.isPopupOpen) {\n                this.filterInput.focus();\n            }\n            else {\n                this.targetElement().focus();\n            }\n            return;\n        }\n        if (this.isDocumentClick || (!isNullOrUndefined(this.popupObj)\n            && document.body.contains(this.popupObj.element) &&\n            this.popupObj.element.classList.contains(dropDownListClasses.mobileFilter))) {\n            if (!this.beforePopupOpen) {\n                this.isDocumentClick = false;\n            }\n            return;\n        }\n        if (((this.getModuleName() === 'dropdownlist' && !this.isFilterFocus && target !== this.inputElement)\n            && (document.activeElement !== target || (document.activeElement === target &&\n                currentTarget.classList.contains(dropDownListClasses.inputFocus)))) ||\n            (isNullOrUndefined(target) && this.getModuleName() === 'dropdownlist' && this.allowFiltering &&\n                currentTarget !== this.inputWrapper.container) || this.getModuleName() !== 'dropdownlist' &&\n            !this.inputWrapper.container.contains(target) || this.isTabKey) {\n            this.isDocumentClick = this.isPopupOpen ? true : false;\n            this.focusOutAction(e);\n            this.isTabKey = false;\n        }\n        if (this.isRequested && !this.isPopupOpen && !this.isPreventBlur) {\n            this.isActive = false;\n            this.beforePopupOpen = false;\n        }\n    };\n    DropDownList.prototype.focusOutAction = function (e) {\n        this.isInteracted = false;\n        this.focusOut(e);\n        this.onFocusOut();\n    };\n    DropDownList.prototype.onFocusOut = function () {\n        if (!this.enabled) {\n            return;\n        }\n        if (this.isSelected) {\n            this.isSelectCustom = false;\n            this.onChangeEvent(null);\n        }\n        this.floatLabelChange();\n        this.dispatchEvent(this.hiddenElement, 'change');\n        if (this.getModuleName() === 'dropdownlist' && this.element.tagName !== 'INPUT') {\n            this.dispatchEvent(this.inputElement, 'blur');\n        }\n        if (this.inputWrapper.clearButton) {\n            addClass([this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);\n        }\n        this.trigger('blur');\n    };\n    DropDownList.prototype.onFocus = function (e) {\n        if (!this.isInteracted) {\n            this.isInteracted = true;\n            var args = { isInteracted: e ? true : false, event: e };\n            this.trigger('focus', args);\n        }\n        this.updateIconState();\n    };\n    DropDownList.prototype.resetValueHandler = function (e) {\n        var formElement = closest(this.inputElement, 'form');\n        if (formElement && e.target === formElement) {\n            var val = (this.element.tagName === this.getNgDirective()) ? null : this.inputElement.getAttribute('value');\n            this.text = val;\n        }\n    };\n    DropDownList.prototype.wireEvent = function () {\n        EventHandler.add(this.inputWrapper.container, 'mousedown', this.dropDownClick, this);\n        EventHandler.add(this.inputWrapper.container, 'focus', this.focusIn, this);\n        EventHandler.add(this.inputWrapper.container, 'keypress', this.onSearch, this);\n        EventHandler.add(window, 'resize', this.windowResize, this);\n        this.bindCommonEvent();\n    };\n    DropDownList.prototype.bindCommonEvent = function () {\n        EventHandler.add(this.targetElement(), 'blur', this.onBlurHandler, this);\n        var formElement = closest(this.inputElement, 'form');\n        if (formElement) {\n            EventHandler.add(formElement, 'reset', this.resetValueHandler, this);\n        }\n        if (!Browser.isDevice) {\n            this.keyboardModule = new KeyboardEvents(this.targetElement(), {\n                keyAction: this.keyActionHandler.bind(this), keyConfigs: this.keyConfigure, eventName: 'keydown'\n            });\n        }\n        else {\n            this.keyboardModule = new KeyboardEvents(this.targetElement(), {\n                keyAction: this.mobileKeyActionHandler.bind(this), keyConfigs: this.keyConfigure, eventName: 'keydown'\n            });\n        }\n        this.bindClearEvent();\n    };\n    DropDownList.prototype.windowResize = function () {\n        if (this.isPopupOpen) {\n            this.popupObj.refreshPosition(this.inputWrapper.container);\n        }\n    };\n    DropDownList.prototype.bindClearEvent = function () {\n        if (this.showClearButton) {\n            EventHandler.add(this.inputWrapper.clearButton, 'mousedown', this.resetHandler, this);\n        }\n    };\n    DropDownList.prototype.unBindCommonEvent = function () {\n        if (!isNullOrUndefined(this.inputWrapper) && this.targetElement()) {\n            EventHandler.remove(this.targetElement(), 'blur', this.onBlurHandler);\n        }\n        var formElement = this.inputElement && closest(this.inputElement, 'form');\n        if (formElement) {\n            EventHandler.remove(formElement, 'reset', this.resetValueHandler);\n        }\n        if (!Browser.isDevice) {\n            this.keyboardModule.destroy();\n        }\n        if (this.showClearButton) {\n            EventHandler.remove(this.inputWrapper.clearButton, 'mousedown', this.resetHandler);\n        }\n    };\n    DropDownList.prototype.updateIconState = function () {\n        if (this.showClearButton) {\n            if (this.inputElement.value !== '' && !this.readonly) {\n                removeClass([this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);\n            }\n            else {\n                addClass([this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);\n            }\n        }\n    };\n    /**\n     * Event binding for list\n     *\n     * @returns {void}\n     */\n    DropDownList.prototype.wireListEvents = function () {\n        if (!isNullOrUndefined(this.list)) {\n            EventHandler.add(this.list, 'click', this.onMouseClick, this);\n            EventHandler.add(this.list, 'mouseover', this.onMouseOver, this);\n            EventHandler.add(this.list, 'mouseout', this.onMouseLeave, this);\n        }\n    };\n    DropDownList.prototype.onSearch = function (e) {\n        if (e.charCode !== 32 && e.charCode !== 13) {\n            if (this.list === undefined) {\n                this.renderList();\n            }\n            this.searchKeyEvent = e;\n            this.onServerIncrementalSearch(e);\n        }\n    };\n    DropDownList.prototype.onServerIncrementalSearch = function (e) {\n        if (!this.isRequested && !isNullOrUndefined(this.list) &&\n            !isNullOrUndefined(this.list.querySelector('li')) && this.enabled && !this.readonly) {\n            this.incrementalSearch(e);\n        }\n    };\n    DropDownList.prototype.onMouseClick = function (e) {\n        var target = e.target;\n        this.keyboardEvent = null;\n        var li = closest(target, '.' + dropDownBaseClasses.li);\n        if (!this.isValidLI(li)) {\n            return;\n        }\n        this.setSelection(li, e);\n        if (Browser.isDevice && this.isFilterLayout()) {\n            history.back();\n        }\n        else {\n            var delay = 100;\n            this.closePopup(delay, e);\n        }\n    };\n    DropDownList.prototype.onMouseOver = function (e) {\n        var currentLi = closest(e.target, '.' + dropDownBaseClasses.li);\n        this.setHover(currentLi);\n    };\n    DropDownList.prototype.setHover = function (li) {\n        if (this.enabled && this.isValidLI(li) && !li.classList.contains(dropDownBaseClasses.hover)) {\n            this.removeHover();\n            addClass([li], dropDownBaseClasses.hover);\n        }\n    };\n    DropDownList.prototype.onMouseLeave = function () {\n        this.removeHover();\n    };\n    DropDownList.prototype.removeHover = function () {\n        if (this.list) {\n            var hoveredItem = this.list.querySelectorAll('.' + dropDownBaseClasses.hover);\n            if (hoveredItem && hoveredItem.length) {\n                removeClass(hoveredItem, dropDownBaseClasses.hover);\n            }\n        }\n    };\n    DropDownList.prototype.isValidLI = function (li) {\n        return (li && li.hasAttribute('role') && li.getAttribute('role') === 'option');\n    };\n    DropDownList.prototype.updateIncrementalInfo = function (startIndex, endIndex) {\n        this.viewPortInfo.startIndex = startIndex;\n        this.viewPortInfo.endIndex = endIndex;\n        this.updateVirtualItemIndex();\n        this.isIncrementalRequest = true;\n        this.resetList(this.dataSource, this.fields, this.query);\n        this.isIncrementalRequest = false;\n    };\n    DropDownList.prototype.updateIncrementalView = function (startIndex, endIndex) {\n        this.viewPortInfo.startIndex = startIndex;\n        this.viewPortInfo.endIndex = endIndex;\n        this.updateVirtualItemIndex();\n        this.resetList(this.dataSource, this.fields, this.query);\n        this.UpdateSkeleton();\n        this.liCollections = this.list.querySelectorAll('.' + dropDownBaseClasses.li);\n        this.ulElement = this.list.querySelector('ul');\n    };\n    DropDownList.prototype.updateIncrementalItemIndex = function (startIndex, endIndex) {\n        this.incrementalStartIndex = startIndex;\n        this.incrementalEndIndex = endIndex;\n    };\n    DropDownList.prototype.incrementalSearch = function (e) {\n        if (this.liCollections.length > 0) {\n            if (this.enableVirtualization) {\n                var updatingincrementalindex = false;\n                var queryStringUpdated = false;\n                var activeElement = this.ulElement.getElementsByClassName('e-active')[0];\n                var currentValue = activeElement ? activeElement.textContent : null;\n                if (this.incrementalQueryString == '') {\n                    this.incrementalQueryString = String.fromCharCode(e.charCode);\n                    this.incrementalPreQueryString = this.incrementalQueryString;\n                }\n                else if (String.fromCharCode(e.charCode).toLocaleLowerCase() == this.incrementalPreQueryString.toLocaleLowerCase()) {\n                    queryStringUpdated = true;\n                }\n                else {\n                    this.incrementalQueryString = String.fromCharCode(e.charCode);\n                }\n                if ((this.viewPortInfo.endIndex >= this.incrementalEndIndex && this.incrementalEndIndex <= this.totalItemCount) || this.incrementalEndIndex == 0) {\n                    updatingincrementalindex = true;\n                    this.incrementalStartIndex = this.incrementalEndIndex;\n                    if (this.incrementalEndIndex == 0) {\n                        this.incrementalEndIndex = 100 > this.totalItemCount ? this.totalItemCount : 100;\n                    }\n                    else {\n                        this.incrementalEndIndex = this.incrementalEndIndex + 100 > this.totalItemCount ? this.totalItemCount : this.incrementalEndIndex + 100;\n                    }\n                    this.updateIncrementalInfo(this.incrementalStartIndex, this.incrementalEndIndex);\n                    updatingincrementalindex = true;\n                }\n                if (this.viewPortInfo.startIndex !== 0 || updatingincrementalindex) {\n                    this.updateIncrementalView(0, this.itemCount);\n                }\n                var li = incrementalSearch(e.charCode, this.incrementalLiCollections, this.activeIndex, true, this.element.id, queryStringUpdated, currentValue, true);\n                while (isNullOrUndefined(li) && this.incrementalEndIndex < this.totalItemCount) {\n                    this.updateIncrementalItemIndex(this.incrementalEndIndex, this.incrementalEndIndex + 100 > this.totalItemCount ? this.totalItemCount : this.incrementalEndIndex + 100);\n                    this.updateIncrementalInfo(this.incrementalStartIndex, this.incrementalEndIndex);\n                    updatingincrementalindex = true;\n                    if (this.viewPortInfo.startIndex !== 0 || updatingincrementalindex) {\n                        this.updateIncrementalView(0, this.itemCount);\n                    }\n                    li = incrementalSearch(e.charCode, this.incrementalLiCollections, 0, true, this.element.id, queryStringUpdated, currentValue, true, true);\n                    if (!isNullOrUndefined(li)) {\n                        break;\n                    }\n                    if (isNullOrUndefined(li) && this.incrementalEndIndex >= this.totalItemCount) {\n                        this.updateIncrementalItemIndex(0, 100 > this.totalItemCount ? this.totalItemCount : 100);\n                        break;\n                    }\n                }\n                if (isNullOrUndefined(li) && this.incrementalEndIndex >= this.totalItemCount) {\n                    this.updateIncrementalItemIndex(0, 100 > this.totalItemCount ? this.totalItemCount : 100);\n                    this.updateIncrementalInfo(this.incrementalStartIndex, this.incrementalEndIndex);\n                    updatingincrementalindex = true;\n                    if (this.viewPortInfo.startIndex !== 0 || updatingincrementalindex) {\n                        this.updateIncrementalView(0, this.itemCount);\n                    }\n                    li = incrementalSearch(e.charCode, this.incrementalLiCollections, 0, true, this.element.id, queryStringUpdated, currentValue, true, true);\n                }\n                var index = li && this.getIndexByValue(li.getAttribute('data-value'));\n                if (!index) {\n                    for (var i = 0; i < this.incrementalLiCollections.length; i++) {\n                        if (!isNullOrUndefined(li) && !isNullOrUndefined(li.getAttribute('data-value')) && this.incrementalLiCollections[i].getAttribute('data-value') === li.getAttribute('data-value').toString()) {\n                            index = i;\n                            index = this.incrementalStartIndex + index;\n                            break;\n                        }\n                    }\n                }\n                else {\n                    index = index - this.skeletonCount;\n                }\n                if (index) {\n                    if ((!(this.viewPortInfo.startIndex >= index)) || (!(index >= this.viewPortInfo.endIndex))) {\n                        var startIndex = index - ((this.itemCount / 2) - 2) > 0 ? index - ((this.itemCount / 2) - 2) : 0;\n                        var endIndex = this.viewPortInfo.startIndex + this.itemCount > this.totalItemCount ? this.totalItemCount : this.viewPortInfo.startIndex + this.itemCount;\n                        this.updateIncrementalView(startIndex, endIndex);\n                    }\n                }\n                if (!isNullOrUndefined(li)) {\n                    var index_1 = this.getIndexByValue(li.getAttribute('data-value')) - this.skeletonCount;\n                    if (index_1 > this.itemCount / 2) {\n                        var startIndex = this.viewPortInfo.startIndex + ((this.itemCount / 2) - 2) < this.totalItemCount ? this.viewPortInfo.startIndex + ((this.itemCount / 2) - 2) : this.totalItemCount;\n                        var endIndex = this.viewPortInfo.startIndex + this.itemCount > this.totalItemCount ? this.totalItemCount : this.viewPortInfo.startIndex + this.itemCount;\n                        this.updateIncrementalView(startIndex, endIndex);\n                    }\n                    li = this.getElementByValue(li.getAttribute('data-value'));\n                    this.setSelection(li, e);\n                    this.setScrollPosition();\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    this.list.getElementsByClassName('e-virtual-ddl-content')[0].style = this.getTransformValues();\n                    if (this.enableVirtualization && !this.fields.groupBy) {\n                        var selectedLiOffsetTop = this.virtualListInfo && this.virtualListInfo.startIndex ? this.selectedLI.offsetTop + (this.virtualListInfo.startIndex * this.selectedLI.offsetHeight) : this.selectedLI.offsetTop;\n                        this.list.scrollTop = selectedLiOffsetTop - (this.list.querySelectorAll('.e-virtual-list').length * this.selectedLI.offsetHeight);\n                    }\n                    this.incrementalPreQueryString = this.incrementalQueryString;\n                }\n                else {\n                    this.updateIncrementalView(0, this.itemCount);\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    this.list.getElementsByClassName('e-virtual-ddl-content')[0].style = this.getTransformValues();\n                    this.list.scrollTop = 0;\n                }\n            }\n            else {\n                var li = incrementalSearch(e.charCode, this.liCollections, this.activeIndex, true, this.element.id);\n                if (!isNullOrUndefined(li)) {\n                    this.setSelection(li, e);\n                    this.setScrollPosition();\n                }\n            }\n        }\n    };\n    /**\n     * Hides the spinner loader.\n     *\n     * @returns {void}\n     */\n    DropDownList.prototype.hideSpinner = function () {\n        if (!isNullOrUndefined(this.spinnerElement)) {\n            hideSpinner(this.spinnerElement);\n            removeClass([this.spinnerElement], dropDownListClasses.disableIcon);\n            this.spinnerElement.innerHTML = '';\n            this.spinnerElement = null;\n        }\n    };\n    /**\n     * Shows the spinner loader.\n     *\n     * @returns {void}\n     */\n    DropDownList.prototype.showSpinner = function () {\n        if (isNullOrUndefined(this.spinnerElement)) {\n            this.spinnerElement = Browser.isDevice && !isNullOrUndefined(this.filterInputObj) && this.filterInputObj.buttons[1] ||\n                !isNullOrUndefined(this.filterInputObj) && this.filterInputObj.buttons[0] || this.inputWrapper.buttons[0];\n            addClass([this.spinnerElement], dropDownListClasses.disableIcon);\n            createSpinner({\n                target: this.spinnerElement,\n                width: Browser.isDevice ? '16px' : '14px'\n            }, this.createElement);\n            showSpinner(this.spinnerElement);\n        }\n    };\n    DropDownList.prototype.keyActionHandler = function (e) {\n        if (!this.enabled) {\n            return;\n        }\n        this.keyboardEvent = e;\n        if (this.isPreventKeyAction && this.enableVirtualization) {\n            e.preventDefault();\n        }\n        var preventAction = e.action === 'pageUp' || e.action === 'pageDown';\n        var preventHomeEnd = this.getModuleName() !== 'dropdownlist' && (e.action === 'home' || e.action === 'end');\n        this.isEscapeKey = e.action === 'escape';\n        this.isTabKey = !this.isPopupOpen && e.action === 'tab';\n        var isNavigation = (e.action === 'down' || e.action === 'up' || e.action === 'pageUp' || e.action === 'pageDown'\n            || e.action === 'home' || e.action === 'end');\n        if ((this.isEditTextBox() || preventAction || preventHomeEnd) && !this.isPopupOpen) {\n            return;\n        }\n        if (!this.readonly) {\n            var isTabAction = e.action === 'tab' || e.action === 'close';\n            if (isNullOrUndefined(this.list) && !this.isRequested && !isTabAction && e.action !== 'escape') {\n                this.searchKeyEvent = e;\n                this.renderList(e);\n                this.UpdateSkeleton();\n                this.liCollections = this.list.querySelectorAll('.' + dropDownBaseClasses.li);\n                this.ulElement = this.list.querySelector('ul');\n            }\n            if (isNullOrUndefined(this.list) || (!isNullOrUndefined(this.liCollections) &&\n                isNavigation && this.liCollections.length === 0) || this.isRequested) {\n                return;\n            }\n            if ((isTabAction && this.getModuleName() !== 'autocomplete') && this.isPopupOpen\n                || e.action === 'escape') {\n                e.preventDefault();\n            }\n            this.isSelected = e.action === 'escape' ? false : this.isSelected;\n            this.isTyped = (isNavigation || e.action === 'escape') ? false : this.isTyped;\n            switch (e.action) {\n                case 'down':\n                case 'up':\n                    this.updateUpDownAction(e);\n                    break;\n                case 'pageUp':\n                    this.pageUpSelection(this.activeIndex - this.getPageCount(), e);\n                    e.preventDefault();\n                    break;\n                case 'pageDown':\n                    this.pageDownSelection(this.activeIndex + this.getPageCount(), e);\n                    e.preventDefault();\n                    break;\n                case 'home':\n                    this.isMouseScrollAction = true;\n                    this.updateHomeEndAction(e);\n                    break;\n                case 'end':\n                    this.isMouseScrollAction = true;\n                    this.updateHomeEndAction(e);\n                    break;\n                case 'space':\n                    if (this.getModuleName() === 'dropdownlist') {\n                        if (!this.beforePopupOpen) {\n                            this.showPopup();\n                            e.preventDefault();\n                        }\n                    }\n                    break;\n                case 'open':\n                    this.showPopup(e);\n                    break;\n                case 'hide':\n                    this.preventAltUp = this.isPopupOpen;\n                    this.hidePopup(e);\n                    this.focusDropDown(e);\n                    break;\n                case 'enter':\n                    this.selectCurrentItem(e);\n                    break;\n                case 'tab':\n                    this.selectCurrentValueOnTab(e);\n                    break;\n                case 'escape':\n                case 'close':\n                    if (this.isPopupOpen) {\n                        this.hidePopup(e);\n                        this.focusDropDown(e);\n                    }\n                    break;\n            }\n        }\n    };\n    DropDownList.prototype.updateUpDownAction = function (e, isVirtualKeyAction) {\n        if (this.allowFiltering && !this.enableVirtualization && this.getModuleName() !== 'autocomplete') {\n            var value_1 = this.getItemData().value;\n            if (isNullOrUndefined(value_1)) {\n                value_1 = 'null';\n            }\n            var filterIndex = this.getIndexByValue(value_1);\n            if (!isNullOrUndefined(filterIndex)) {\n                this.activeIndex = filterIndex;\n            }\n        }\n        var focusEle = this.list.querySelector('.' + dropDownListClasses.focus);\n        if (this.isSelectFocusItem(focusEle) && !isVirtualKeyAction) {\n            this.setSelection(focusEle, e);\n            if (this.enableVirtualization && !this.fields.groupBy && this.getModuleName() !== 'combobox') {\n                var selectedLiOffsetTop = this.virtualListInfo && this.virtualListInfo.startIndex ? this.selectedLI.offsetTop + (this.virtualListInfo.startIndex * this.selectedLI.offsetHeight) : this.selectedLI.offsetTop;\n                this.list.scrollTop = selectedLiOffsetTop - (this.list.querySelectorAll('.e-virtual-list').length * this.selectedLI.offsetHeight);\n            }\n        }\n        else if (!isNullOrUndefined(this.liCollections)) {\n            var virtualIndex = this.activeIndex;\n            var index = e.action === 'down' ? this.activeIndex + 1 : this.activeIndex - 1;\n            index = isVirtualKeyAction ? virtualIndex : index;\n            var startIndex = 0;\n            if (this.getModuleName() === 'autocomplete') {\n                startIndex = e.action === 'down' && isNullOrUndefined(this.activeIndex) ? 0 : this.liCollections.length - 1;\n                index = index < 0 ? this.liCollections.length - 1 : index === this.liCollections.length ? 0 : index;\n            }\n            var nextItem = void 0;\n            if (this.getModuleName() !== 'autocomplete' || this.getModuleName() === 'autocomplete' && this.isPopupOpen) {\n                if (!this.enableVirtualization) {\n                    nextItem = isNullOrUndefined(this.activeIndex) ? this.liCollections[startIndex]\n                        : this.liCollections[index];\n                }\n                else {\n                    if (!isVirtualKeyAction) {\n                        nextItem = isNullOrUndefined(this.activeIndex) ? this.liCollections[this.skeletonCount]\n                            : this.liCollections[index];\n                        nextItem = !isNullOrUndefined(nextItem) && !nextItem.classList.contains('e-virtual-list') ? nextItem : null;\n                    }\n                    else {\n                        if (this.getModuleName() === 'autocomplete') {\n                            var value = this.getFormattedValue(this.selectedLI.getAttribute('data-value'));\n                            nextItem = this.getElementByValue(value);\n                        }\n                        else {\n                            nextItem = this.getElementByValue(this.getItemData().value);\n                        }\n                    }\n                }\n            }\n            if (!isNullOrUndefined(nextItem)) {\n                this.setSelection(nextItem, e);\n            }\n            else if (this.enableVirtualization && !this.isPopupOpen && this.getModuleName() !== 'autocomplete' && ((this.viewPortInfo.endIndex !== this.totalItemCount && e.action === 'down') || (this.viewPortInfo.startIndex !== 0 && e.action === 'up'))) {\n                if (e.action === 'down') {\n                    this.viewPortInfo.startIndex = (this.viewPortInfo.startIndex + this.itemCount) < (this.totalItemCount - this.itemCount) ? this.viewPortInfo.startIndex + this.itemCount : this.totalItemCount - this.itemCount;\n                    this.viewPortInfo.endIndex = this.viewPortInfo.startIndex + this.itemCount;\n                    this.updateVirtualItemIndex();\n                    this.isCustomFilter = this.getModuleName() === 'combobox' ? true : this.isCustomFilter;\n                    this.resetList(this.dataSource, this.fields, this.query);\n                    this.isCustomFilter = this.getModuleName() === 'combobox' ? false : this.isCustomFilter;\n                    var value_2 = this.liCollections[0].getAttribute('data-value') !== \"null\" ? this.getFormattedValue(this.liCollections[0].getAttribute('data-value')) : null;\n                    var selectedData = this.getDataByValue(value_2);\n                    if (selectedData) {\n                        this.itemData = selectedData;\n                    }\n                }\n                else if (e.action === 'up') {\n                    this.viewPortInfo.startIndex = (this.viewPortInfo.startIndex - this.itemCount) > 0 ? this.viewPortInfo.startIndex - this.itemCount : 0;\n                    this.viewPortInfo.endIndex = this.viewPortInfo.startIndex + this.itemCount;\n                    this.updateVirtualItemIndex();\n                    this.isCustomFilter = this.getModuleName() === 'combobox' ? true : this.isCustomFilter;\n                    this.resetList(this.dataSource, this.fields, this.query);\n                    this.isCustomFilter = this.getModuleName() === 'combobox' ? false : this.isCustomFilter;\n                    var value_3 = this.liCollections[this.liCollections.length - 1].getAttribute('data-value') !== \"null\" ? this.getFormattedValue(this.liCollections[this.liCollections.length - 1].getAttribute('data-value')) : null;\n                    var selectedData = this.getDataByValue(value_3);\n                    if (selectedData) {\n                        this.itemData = selectedData;\n                    }\n                }\n                this.UpdateSkeleton();\n                this.liCollections = this.list.querySelectorAll('.' + dropDownBaseClasses.li);\n                this.ulElement = this.list.querySelector('ul');\n                this.handleVirtualKeyboardActions(e, this.pageCount);\n            }\n        }\n        if (this.allowFiltering && !this.enableVirtualization && this.getModuleName() !== 'autocomplete') {\n            var value_4 = this.getItemData().value;\n            var filterIndex = this.getIndexByValueFilter(value_4);\n            if (!isNullOrUndefined(filterIndex)) {\n                this.activeIndex = filterIndex;\n            }\n        }\n        if (this.allowFiltering && this.getModuleName() === 'dropdownlist') {\n            if (!isNullOrUndefined(this.ulElement) && !isNullOrUndefined(this.ulElement.getElementsByClassName('e-item-focus')[0])) {\n                attributes(this.filterInput, { 'aria-activedescendant': this.ulElement.getElementsByClassName('e-item-focus')[0].id });\n            }\n            else if (!isNullOrUndefined(this.ulElement) && !isNullOrUndefined(this.ulElement.getElementsByClassName('e-active')[0])) {\n                attributes(this.filterInput, { 'aria-activedescendant': this.ulElement.getElementsByClassName('e-active')[0].id });\n            }\n        }\n        e.preventDefault();\n    };\n    DropDownList.prototype.updateVirtualItemIndex = function () {\n        this.virtualItemStartIndex = this.viewPortInfo.startIndex;\n        this.virtualItemEndIndex = this.viewPortInfo.endIndex;\n        this.virtualListInfo = this.viewPortInfo;\n    };\n    DropDownList.prototype.updateHomeEndAction = function (e, isVirtualKeyAction) {\n        if (this.getModuleName() === 'dropdownlist') {\n            var findLi = 0;\n            if (e.action === 'home') {\n                findLi = 0;\n                if (this.enableVirtualization && this.isPopupOpen) {\n                    findLi = this.skeletonCount;\n                }\n                else if (this.enableVirtualization && !this.isPopupOpen && this.viewPortInfo.startIndex !== 0) {\n                    this.viewPortInfo.startIndex = 0;\n                    this.viewPortInfo.endIndex = this.itemCount;\n                    this.updateVirtualItemIndex();\n                    this.resetList(this.dataSource, this.fields, this.query);\n                }\n            }\n            else {\n                if (this.enableVirtualization && !this.isPopupOpen && this.viewPortInfo.endIndex !== this.totalItemCount) {\n                    this.viewPortInfo.startIndex = this.totalItemCount - this.itemCount;\n                    this.viewPortInfo.endIndex = this.totalItemCount;\n                    this.updateVirtualItemIndex();\n                    this.resetList(this.dataSource, this.fields, this.query);\n                }\n                findLi = this.getItems().length - 1;\n            }\n            e.preventDefault();\n            if (this.activeIndex === findLi) {\n                if (isVirtualKeyAction) {\n                    this.setSelection(this.liCollections[findLi], e);\n                }\n                return;\n            }\n            this.setSelection(this.liCollections[findLi], e);\n        }\n    };\n    DropDownList.prototype.selectCurrentValueOnTab = function (e) {\n        if (this.getModuleName() === 'autocomplete') {\n            this.selectCurrentItem(e);\n        }\n        else {\n            if (this.isPopupOpen) {\n                this.hidePopup(e);\n                this.focusDropDown(e);\n            }\n        }\n    };\n    DropDownList.prototype.mobileKeyActionHandler = function (e) {\n        if (!this.enabled) {\n            return;\n        }\n        if ((this.isEditTextBox()) && !this.isPopupOpen) {\n            return;\n        }\n        if (!this.readonly) {\n            if (this.list === undefined && !this.isRequested) {\n                this.searchKeyEvent = e;\n                this.renderList();\n            }\n            if (isNullOrUndefined(this.list) || (!isNullOrUndefined(this.liCollections) &&\n                this.liCollections.length === 0) || this.isRequested) {\n                return;\n            }\n            if (e.action === 'enter') {\n                this.selectCurrentItem(e);\n            }\n        }\n    };\n    DropDownList.prototype.handleVirtualKeyboardActions = function (e, pageCount) {\n        switch (e.action) {\n            case 'down':\n            case 'up':\n                if (this.itemData != null || this.getModuleName() === 'autocomplete') {\n                    this.updateUpDownAction(e, true);\n                }\n                break;\n            case 'pageUp':\n                var count = (pageCount * 2) - 4;\n                this.activeIndex = Math.round(count);\n                this.pageUpSelection(this.activeIndex - this.getPageCount(), e, true);\n                e.preventDefault();\n                break;\n            case 'pageDown':\n                this.activeIndex = 1;\n                this.pageDownSelection(this.activeIndex + this.getPageCount(), e, true);\n                e.preventDefault();\n                break;\n            case 'home':\n                this.isMouseScrollAction = true;\n                this.updateHomeEndAction(e, true);\n                break;\n            case 'end':\n                this.isMouseScrollAction = true;\n                this.updateHomeEndAction(e, true);\n                break;\n        }\n        this.keyboardEvent = null;\n    };\n    DropDownList.prototype.selectCurrentItem = function (e) {\n        if (this.isPopupOpen) {\n            var li = this.list.querySelector('.' + dropDownListClasses.focus);\n            if (li) {\n                this.setSelection(li, e);\n                this.isTyped = false;\n            }\n            if (this.isSelected) {\n                this.isSelectCustom = false;\n                this.onChangeEvent(e);\n            }\n            this.hidePopup(e);\n            this.focusDropDown(e);\n        }\n        else {\n            this.showPopup();\n        }\n    };\n    DropDownList.prototype.isSelectFocusItem = function (element) {\n        return !isNullOrUndefined(element);\n    };\n    DropDownList.prototype.pageUpSelection = function (steps, event, isVirtualKeyAction) {\n        var previousItem = steps >= 0 ? this.liCollections[steps + 1] : this.liCollections[0];\n        if ((this.enableVirtualization && this.activeIndex == null) || isVirtualKeyAction) {\n            previousItem = steps >= 0 ? this.liCollections[steps + this.skeletonCount + 1] : this.liCollections[0];\n        }\n        if (!isNullOrUndefined(previousItem) && previousItem.classList.contains('e-virtual-list')) {\n            previousItem = this.liCollections[this.skeletonCount];\n        }\n        this.PageUpDownSelection(previousItem, event);\n        if (this.allowFiltering && this.getModuleName() === 'dropdownlist') {\n            if (!isNullOrUndefined(this.ulElement) && !isNullOrUndefined(this.ulElement.getElementsByClassName('e-item-focus')[0])) {\n                attributes(this.filterInput, { 'aria-activedescendant': this.ulElement.getElementsByClassName('e-item-focus')[0].id });\n            }\n            else if (!isNullOrUndefined(this.ulElement) && !isNullOrUndefined(this.ulElement.getElementsByClassName('e-active')[0])) {\n                attributes(this.filterInput, { 'aria-activedescendant': this.ulElement.getElementsByClassName('e-active')[0].id });\n            }\n        }\n    };\n    DropDownList.prototype.PageUpDownSelection = function (previousItem, event) {\n        if (this.enableVirtualization) {\n            if (!isNullOrUndefined(previousItem) && ((this.getModuleName() !== 'autocomplete' && !previousItem.classList.contains('e-active')) || (this.getModuleName() === 'autocomplete' && !previousItem.classList.contains('e-item-focus')))) {\n                this.setSelection(previousItem, event);\n            }\n        }\n        else {\n            this.setSelection(previousItem, event);\n        }\n    };\n    DropDownList.prototype.pageDownSelection = function (steps, event, isVirtualKeyAction) {\n        var list = this.getItems();\n        var previousItem = steps <= list.length ? this.liCollections[steps - 1] : this.liCollections[list.length - 1];\n        if ((this.enableVirtualization && this.activeIndex == null) || isVirtualKeyAction) {\n            previousItem = steps <= list.length ? this.liCollections[steps + this.skeletonCount - 1] : this.liCollections[list.length - 1];\n        }\n        this.PageUpDownSelection(previousItem, event);\n        if (this.allowFiltering && this.getModuleName() === 'dropdownlist') {\n            if (!isNullOrUndefined(this.ulElement) && !isNullOrUndefined(this.ulElement.getElementsByClassName('e-item-focus')[0])) {\n                attributes(this.filterInput, { 'aria-activedescendant': this.ulElement.getElementsByClassName('e-item-focus')[0].id });\n            }\n            else if (!isNullOrUndefined(this.ulElement) && !isNullOrUndefined(this.ulElement.getElementsByClassName('e-active')[0])) {\n                attributes(this.filterInput, { 'aria-activedescendant': this.ulElement.getElementsByClassName('e-active')[0].id });\n            }\n        }\n    };\n    DropDownList.prototype.unWireEvent = function () {\n        if (!isNullOrUndefined(this.inputWrapper)) {\n            EventHandler.remove(this.inputWrapper.container, 'mousedown', this.dropDownClick);\n            EventHandler.remove(this.inputWrapper.container, 'keypress', this.onSearch);\n            EventHandler.remove(this.inputWrapper.container, 'focus', this.focusIn);\n            EventHandler.remove(window, 'resize', this.windowResize);\n        }\n        this.unBindCommonEvent();\n    };\n    /**\n     * Event un binding for list items.\n     *\n     * @returns {void}\n     */\n    DropDownList.prototype.unWireListEvents = function () {\n        if (this.list) {\n            EventHandler.remove(this.list, 'click', this.onMouseClick);\n            EventHandler.remove(this.list, 'mouseover', this.onMouseOver);\n            EventHandler.remove(this.list, 'mouseout', this.onMouseLeave);\n        }\n    };\n    DropDownList.prototype.checkSelector = function (id) {\n        return '[id=\"' + id.replace(/(:|\\.|\\[|\\]|,|=|@|\\\\|\\/|#)/g, '\\\\$1') + '\"]';\n    };\n    DropDownList.prototype.onDocumentClick = function (e) {\n        var target = e.target;\n        if (!(!isNullOrUndefined(this.popupObj) && closest(target, this.checkSelector(this.popupObj.element.id))) &&\n            !isNullOrUndefined(this.inputWrapper) && !this.inputWrapper.container.contains(e.target)) {\n            if (this.inputWrapper.container.classList.contains(dropDownListClasses.inputFocus) || this.isPopupOpen) {\n                this.isDocumentClick = true;\n                var isActive = this.isRequested;\n                this.hidePopup(e);\n                this.isInteracted = false;\n                if (!isActive) {\n                    this.onFocusOut();\n                    this.inputWrapper.container.classList.remove(dropDownListClasses.inputFocus);\n                }\n            }\n        }\n        else if (target !== this.inputElement && !(this.allowFiltering && target === this.filterInput)\n            && !(this.getModuleName() === 'combobox' &&\n                !this.allowFiltering && Browser.isDevice && target === this.inputWrapper.buttons[0])) {\n            this.isPreventBlur = (Browser.isIE || Browser.info.name === 'edge') && (document.activeElement === this.targetElement() ||\n                document.activeElement === this.filterInput);\n            e.preventDefault();\n        }\n    };\n    DropDownList.prototype.activeStateChange = function () {\n        if (this.isDocumentClick) {\n            this.hidePopup();\n            this.onFocusOut();\n            this.inputWrapper.container.classList.remove(dropDownListClasses.inputFocus);\n        }\n    };\n    DropDownList.prototype.focusDropDown = function (e) {\n        if (!this.initial && this.isFilterLayout()) {\n            this.focusIn(e);\n        }\n    };\n    DropDownList.prototype.dropDownClick = function (e) {\n        if (e.which === 3 || e.button === 2) {\n            return;\n        }\n        this.keyboardEvent = null;\n        if (this.targetElement().classList.contains(dropDownListClasses.disable) || this.inputWrapper.clearButton === e.target) {\n            return;\n        }\n        var target = e.target;\n        if (target !== this.inputElement && !(this.allowFiltering && target === this.filterInput) && this.getModuleName() !== 'combobox') {\n            e.preventDefault();\n        }\n        if (!this.readonly) {\n            if (this.isPopupOpen) {\n                this.hidePopup(e);\n                if (this.isFilterLayout()) {\n                    this.focusDropDown(e);\n                }\n            }\n            else {\n                this.focusIn(e);\n                this.floatLabelChange();\n                this.queryString = this.inputElement.value.trim() === '' ? null : this.inputElement.value;\n                this.isDropDownClick = true;\n                this.showPopup(e);\n            }\n            // eslint-disable-next-line @typescript-eslint/no-this-alias\n            var proxy_1 = this;\n            // eslint-disable-next-line max-len\n            var duration = (this.element.tagName === this.getNgDirective() && this.itemTemplate) ? 500 : 100;\n            if (!this.isSecondClick) {\n                setTimeout(function () {\n                    proxy_1.cloneElements();\n                    proxy_1.isSecondClick = true;\n                }, duration);\n            }\n        }\n        else {\n            this.focusIn(e);\n        }\n    };\n    DropDownList.prototype.cloneElements = function () {\n        if (this.list) {\n            var ulElement = this.list.querySelector('ul');\n            if (ulElement) {\n                ulElement = ulElement.cloneNode ? ulElement.cloneNode(true) : ulElement;\n                this.actionCompleteData.ulElement = ulElement;\n            }\n        }\n    };\n    DropDownList.prototype.updateSelectedItem = function (li, e, preventSelect, isSelection) {\n        var _this = this;\n        this.removeSelection();\n        li.classList.add(dropDownBaseClasses.selected);\n        this.removeHover();\n        var value = li.getAttribute('data-value') !== \"null\" ? this.getFormattedValue(li.getAttribute('data-value')) : null;\n        var selectedData = this.getDataByValue(value);\n        if (!this.initial && !preventSelect && !isNullOrUndefined(e)) {\n            var items = this.detachChanges(selectedData);\n            this.isSelected = true;\n            var eventArgs = {\n                e: e,\n                item: li,\n                itemData: items,\n                isInteracted: e ? true : false,\n                cancel: false\n            };\n            this.trigger('select', eventArgs, function (eventArgs) {\n                if (eventArgs.cancel) {\n                    li.classList.remove(dropDownBaseClasses.selected);\n                }\n                else {\n                    _this.selectEventCallback(li, e, preventSelect, selectedData, value);\n                    if (isSelection) {\n                        _this.setSelectOptions(li, e);\n                    }\n                }\n            });\n        }\n        else {\n            this.selectEventCallback(li, e, preventSelect, selectedData, value);\n            if (isSelection) {\n                this.setSelectOptions(li, e);\n            }\n        }\n    };\n    DropDownList.prototype.selectEventCallback = function (li, e, preventSelect, selectedData, value) {\n        this.previousItemData = (!isNullOrUndefined(this.itemData)) ? this.itemData : null;\n        if (this.itemData != selectedData) {\n            this.previousValue = (!isNullOrUndefined(this.itemData)) ? typeof this.itemData == \"object\" ? this.checkFieldValue(this.itemData, this.fields.value.split('.')) : this.itemData : null;\n        }\n        this.item = li;\n        this.itemData = selectedData;\n        var focusedItem = this.list.querySelector('.' + dropDownBaseClasses.focus);\n        if (focusedItem) {\n            removeClass([focusedItem], dropDownBaseClasses.focus);\n        }\n        li.setAttribute('aria-selected', 'true');\n        if (isNullOrUndefined(value)) {\n            value = 'null';\n        }\n        if (this.allowFiltering && !this.enableVirtualization && this.getModuleName() !== 'autocomplete') {\n            var filterIndex = this.getIndexByValueFilter(value);\n            if (!isNullOrUndefined(filterIndex)) {\n                this.activeIndex = filterIndex;\n            }\n            else {\n                this.activeIndex = this.getIndexByValue(value);\n            }\n        }\n        else {\n            this.activeIndex = this.getIndexByValue(value);\n        }\n    };\n    DropDownList.prototype.activeItem = function (li) {\n        if (this.isValidLI(li) && !li.classList.contains(dropDownBaseClasses.selected)) {\n            this.removeSelection();\n            li.classList.add(dropDownBaseClasses.selected);\n            this.removeHover();\n            li.setAttribute('aria-selected', 'true');\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    DropDownList.prototype.setValue = function (e) {\n        var dataItem = this.getItemData();\n        if (dataItem.value === null) {\n            Input.setValue(null, this.inputElement, this.floatLabelType, this.showClearButton);\n        }\n        else {\n            Input.setValue(dataItem.text, this.inputElement, this.floatLabelType, this.showClearButton);\n        }\n        if (this.valueTemplate && this.itemData !== null) {\n            this.setValueTemplate();\n        }\n        else if (!isNullOrUndefined(this.valueTempElement) && this.inputElement.previousSibling === this.valueTempElement) {\n            detach(this.valueTempElement);\n            this.inputElement.style.display = 'block';\n        }\n        if (!isNullOrUndefined(dataItem.value) && !this.enableVirtualization && this.allowFiltering) {\n            this.activeIndex = this.getIndexByValueFilter(dataItem.value);\n        }\n        var clearIcon = dropDownListClasses.clearIcon;\n        var isFilterElement = this.isFiltering() && this.filterInput && (this.getModuleName() === 'combobox');\n        var clearElement = isFilterElement && this.filterInput.parentElement.querySelector('.' + clearIcon);\n        if (this.isFiltering() && clearElement) {\n            clearElement.style.removeProperty('visibility');\n        }\n        if (this.previousValue === dataItem.value) {\n            this.isSelected = false;\n            return true;\n        }\n        else {\n            this.isSelected = !this.initial ? true : false;\n            this.isSelectCustom = false;\n            if (this.getModuleName() === 'dropdownlist') {\n                this.updateIconState();\n            }\n            return false;\n        }\n    };\n    DropDownList.prototype.setSelection = function (li, e) {\n        var _this = this;\n        if (this.isValidLI(li) && (!li.classList.contains(dropDownBaseClasses.selected) || (this.isPopupOpen && this.isSelected\n            && li.classList.contains(dropDownBaseClasses.selected)))) {\n            this.updateSelectedItem(li, e, false, true);\n        }\n        else {\n            this.setSelectOptions(li, e);\n            if (this.enableVirtualization) {\n                var fields = (this.fields.value) ? this.fields.value : '';\n                if (this.dataSource instanceof DataManager) {\n                    this.dataSource.executeQuery(new Query().where(new Predicate(fields, 'equal', this.value)))\n                        .then(function (e) {\n                        if (e.result.length > 0) {\n                            _this.itemData = e.result[0];\n                            var dataItem = _this.getItemData();\n                            if ((_this.value === dataItem.value && _this.text !== dataItem.text) || (_this.value !== dataItem.value && _this.text === dataItem.text)) {\n                                _this.setProperties({ 'text': dataItem.text, 'value': dataItem.value });\n                            }\n                        }\n                    });\n                }\n                else {\n                    var getItem = new DataManager(this.dataSource).executeLocal(new Query().where(new Predicate(fields, 'equal', this.value)));\n                    if (getItem && getItem.length > 0) {\n                        this.itemData = getItem[0];\n                        var dataItem = this.getItemData();\n                        if ((this.value === dataItem.value && this.text !== dataItem.text) || (this.value !== dataItem.value && this.text === dataItem.text)) {\n                            this.setProperties({ 'text': dataItem.text, 'value': dataItem.value });\n                        }\n                    }\n                }\n            }\n        }\n    };\n    DropDownList.prototype.setSelectOptions = function (li, e) {\n        if (this.list) {\n            this.removeHover();\n        }\n        this.previousSelectedLI = (!isNullOrUndefined(this.selectedLI)) ? this.selectedLI : null;\n        this.selectedLI = li;\n        if (this.setValue(e)) {\n            return;\n        }\n        if ((!this.isPopupOpen && !isNullOrUndefined(li)) || (this.isPopupOpen && !isNullOrUndefined(e) &&\n            (e.type !== 'keydown' || e.type === 'keydown' && e.action === 'enter'))) {\n            this.isSelectCustom = false;\n            this.onChangeEvent(e);\n        }\n        if (this.isPopupOpen && !isNullOrUndefined(this.selectedLI) && this.itemData !== null && (!e || e.type !== 'click')) {\n            this.setScrollPosition(e);\n        }\n        if (Browser.info.name !== 'mozilla') {\n            if (this.targetElement()) {\n                attributes(this.targetElement(), { 'aria-describedby': this.inputElement.id !== '' ? this.inputElement.id : this.element.id });\n                this.targetElement().removeAttribute('aria-live');\n            }\n        }\n        if (this.isPopupOpen && !isNullOrUndefined(this.ulElement) && !isNullOrUndefined(this.ulElement.getElementsByClassName('e-item-focus')[0])) {\n            attributes(this.targetElement(), { 'aria-activedescendant': this.ulElement.getElementsByClassName('e-item-focus')[0].id });\n        }\n        else if (this.isPopupOpen && !isNullOrUndefined(this.ulElement) && !isNullOrUndefined(this.ulElement.getElementsByClassName('e-active')[0])) {\n            attributes(this.targetElement(), { 'aria-activedescendant': this.ulElement.getElementsByClassName('e-active')[0].id });\n        }\n    };\n    DropDownList.prototype.dropdownCompiler = function (dropdownTemplate) {\n        var checkTemplate = false;\n        if (typeof dropdownTemplate !== 'function' && dropdownTemplate) {\n            try {\n                checkTemplate = (document.querySelectorAll(dropdownTemplate).length) ? true : false;\n            }\n            catch (exception) {\n                checkTemplate = false;\n            }\n        }\n        return checkTemplate;\n    };\n    DropDownList.prototype.setValueTemplate = function () {\n        var compiledString;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (this.isReact) {\n            this.clearTemplate(['valueTemplate']);\n            if (this.valueTempElement) {\n                detach(this.valueTempElement);\n                this.inputElement.style.display = 'block';\n                this.valueTempElement = null;\n            }\n        }\n        if (!this.valueTempElement) {\n            this.valueTempElement = this.createElement('span', { className: dropDownListClasses.value });\n            this.inputElement.parentElement.insertBefore(this.valueTempElement, this.inputElement);\n            this.inputElement.style.display = 'none';\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (!this.isReact) {\n            this.valueTempElement.innerHTML = '';\n        }\n        var valuecheck = this.dropdownCompiler(this.valueTemplate);\n        if (typeof this.valueTemplate !== 'function' && valuecheck) {\n            compiledString = compile(document.querySelector(this.valueTemplate).innerHTML.trim());\n        }\n        else {\n            compiledString = compile(this.valueTemplate);\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var valueCompTemp = compiledString(this.itemData, this, 'valueTemplate', this.valueTemplateId, this.isStringTemplate, null, this.valueTempElement);\n        if (valueCompTemp && valueCompTemp.length > 0) {\n            append(valueCompTemp, this.valueTempElement);\n        }\n        this.renderReactTemplates();\n    };\n    DropDownList.prototype.removeSelection = function () {\n        if (this.list) {\n            var selectedItems = this.list.querySelectorAll('.' + dropDownBaseClasses.selected);\n            if (selectedItems.length) {\n                removeClass(selectedItems, dropDownBaseClasses.selected);\n                selectedItems[0].removeAttribute('aria-selected');\n            }\n        }\n    };\n    DropDownList.prototype.getItemData = function () {\n        var fields = this.fields;\n        var dataItem = null;\n        dataItem = this.itemData;\n        var dataValue;\n        var dataText;\n        if (!isNullOrUndefined(dataItem)) {\n            dataValue = getValue(fields.value, dataItem);\n            dataText = getValue(fields.text, dataItem);\n        }\n        var value = (!isNullOrUndefined(dataItem) &&\n            !isUndefined(dataValue) ? dataValue : dataItem);\n        var text = (!isNullOrUndefined(dataItem) &&\n            !isUndefined(dataValue) ? dataText : dataItem);\n        return { value: value, text: text };\n    };\n    /**\n     * To trigger the change event for list.\n     *\n     * @param {MouseEvent | KeyboardEvent | TouchEvent} eve - Specifies the event arguments.\n     * @returns {void}\n     */\n    DropDownList.prototype.onChangeEvent = function (eve) {\n        var dataItem = this.getItemData();\n        var index = this.isSelectCustom ? null : this.activeIndex;\n        this.setProperties({ 'index': index, 'text': dataItem.text, 'value': dataItem.value }, true);\n        this.detachChangeEvent(eve);\n    };\n    DropDownList.prototype.detachChanges = function (value) {\n        var items;\n        if (typeof value === 'string' ||\n            typeof value === 'boolean' ||\n            typeof value === 'number') {\n            items = Object.defineProperties({}, {\n                value: {\n                    value: value,\n                    enumerable: true\n                },\n                text: {\n                    value: value,\n                    enumerable: true\n                }\n            });\n        }\n        else {\n            items = value;\n        }\n        return items;\n    };\n    DropDownList.prototype.detachChangeEvent = function (eve) {\n        this.isSelected = false;\n        this.previousValue = this.value;\n        this.activeIndex = this.index;\n        this.typedString = !isNullOrUndefined(this.text) ? this.text : '';\n        if (!this.initial) {\n            var items = this.detachChanges(this.itemData);\n            var preItems = void 0;\n            if (typeof this.previousItemData === 'string' ||\n                typeof this.previousItemData === 'boolean' ||\n                typeof this.previousItemData === 'number') {\n                preItems = Object.defineProperties({}, {\n                    value: {\n                        value: this.previousItemData,\n                        enumerable: true\n                    },\n                    text: {\n                        value: this.previousItemData,\n                        enumerable: true\n                    }\n                });\n            }\n            else {\n                preItems = this.previousItemData;\n            }\n            this.setHiddenValue();\n            var eventArgs = {\n                e: eve,\n                item: this.item,\n                itemData: items,\n                previousItem: this.previousSelectedLI,\n                previousItemData: preItems,\n                isInteracted: eve ? true : false,\n                value: this.value,\n                element: this.element,\n                event: eve\n            };\n            if (this.isAngular && this.preventChange) {\n                this.preventChange = false;\n            }\n            else {\n                this.trigger('change', eventArgs);\n            }\n        }\n        if ((isNullOrUndefined(this.value) || this.value === '') && this.floatLabelType !== 'Always') {\n            removeClass([this.inputWrapper.container], 'e-valid-input');\n        }\n    };\n    DropDownList.prototype.setHiddenValue = function () {\n        if (!isNullOrUndefined(this.value)) {\n            if (this.hiddenElement.querySelector('option')) {\n                var selectedElement = this.hiddenElement.querySelector('option');\n                selectedElement.textContent = this.text;\n                selectedElement.setAttribute('value', this.value.toString());\n            }\n            else {\n                if (!isNullOrUndefined(this.hiddenElement)) {\n                    this.hiddenElement.innerHTML = '<option selected>' + this.text + '</option>';\n                    var selectedElement = this.hiddenElement.querySelector('option');\n                    selectedElement.setAttribute('value', this.value.toString());\n                }\n            }\n        }\n        else {\n            this.hiddenElement.innerHTML = '';\n        }\n    };\n    /**\n     * Filter bar implementation\n     *\n     * @param {KeyboardEventArgs} e - Specifies the event arguments.\n     * @returns {void}\n     */\n    DropDownList.prototype.onFilterUp = function (e) {\n        if (!(e.ctrlKey && e.keyCode === 86) && (this.isValidKey || e.keyCode === 40 || e.keyCode === 38)) {\n            this.isValidKey = false;\n            switch (e.keyCode) {\n                case 38: //up arrow\n                case 40: //down arrow\n                    if (this.getModuleName() === 'autocomplete' && !this.isPopupOpen && !this.preventAltUp && !this.isRequested) {\n                        this.preventAutoFill = true;\n                        this.searchLists(e);\n                    }\n                    else {\n                        this.preventAutoFill = false;\n                    }\n                    this.preventAltUp = false;\n                    if (this.getModuleName() === 'autocomplete' && !isNullOrUndefined(this.ulElement) && !isNullOrUndefined(this.ulElement.getElementsByClassName('e-item-focus')[0])) {\n                        attributes(this.targetElement(), { 'aria-activedescendant': this.ulElement.getElementsByClassName('e-item-focus')[0].id });\n                    }\n                    e.preventDefault();\n                    break;\n                case 46: //delete\n                case 8: //backspace\n                    this.typedString = this.filterInput.value;\n                    if (!this.isPopupOpen && this.typedString !== '' || this.isPopupOpen && this.queryString.length > 0) {\n                        this.preventAutoFill = true;\n                        this.searchLists(e);\n                    }\n                    else if (this.typedString === '' && this.queryString === '' && this.getModuleName() !== 'autocomplete') {\n                        this.preventAutoFill = true;\n                        this.searchLists(e);\n                    }\n                    else if (this.typedString === '') {\n                        if (this.list) {\n                            this.resetFocusElement();\n                        }\n                        this.activeIndex = null;\n                        if (this.getModuleName() !== 'dropdownlist') {\n                            this.preventAutoFill = true;\n                            this.searchLists(e);\n                            if (this.getModuleName() === 'autocomplete') {\n                                this.hidePopup();\n                            }\n                        }\n                    }\n                    e.preventDefault();\n                    break;\n                default:\n                    this.typedString = this.filterInput.value;\n                    this.preventAutoFill = false;\n                    this.searchLists(e);\n                    if ((this.enableVirtualization && this.getModuleName() !== 'autocomplete') || (this.getModuleName() === 'autocomplete' && !(this.dataSource instanceof DataManager)) || (this.getModuleName() === 'autocomplete' && (this.dataSource instanceof DataManager) && this.totalItemCount != 0)) {\n                        this.getFilteringSkeletonCount();\n                    }\n                    break;\n            }\n        }\n        else {\n            this.isValidKey = false;\n        }\n    };\n    DropDownList.prototype.getFilteringSkeletonCount = function () {\n        var difference = this.dataCount - this.viewPortInfo.endIndex;\n        var currentSkeletonCount = this.skeletonCount;\n        this.getSkeletonCount(true);\n        this.skeletonCount = this.dataCount > this.itemCount * 2 ? this.skeletonCount : difference > this.skeletonCount ? this.skeletonCount : difference > 0 ? difference : 0;\n        var skeletonUpdated = true;\n        if (this.getModuleName() === 'autocomplete' && (this.totalItemCount != 0 && this.totalItemCount < (this.itemCount * 2))) {\n            this.skeletonCount = 0;\n            skeletonUpdated = false;\n        }\n        if (!this.list.classList.contains(dropDownBaseClasses.noData)) {\n            var isSkeletonCountChange = currentSkeletonCount !== this.skeletonCount;\n            if (currentSkeletonCount !== this.skeletonCount && skeletonUpdated) {\n                this.UpdateSkeleton(true, Math.abs(currentSkeletonCount - this.skeletonCount));\n            }\n            else {\n                this.UpdateSkeleton();\n            }\n            this.liCollections = this.list.querySelectorAll('.e-list-item');\n            if ((this.list.getElementsByClassName('e-virtual-ddl').length > 0)) {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                this.list.getElementsByClassName('e-virtual-ddl')[0].style = this.GetVirtualTrackHeight();\n            }\n            if (this.list.getElementsByClassName('e-virtual-ddl-content').length > 0) {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                this.list.getElementsByClassName('e-virtual-ddl-content')[0].style = this.getTransformValues();\n            }\n        }\n    };\n    DropDownList.prototype.getSkeletonCount = function (retainSkeleton) {\n        this.virtualListHeight = this.listHeight != null ? parseInt(this.listHeight, 10) : this.virtualListHeight;\n        var actualCount = this.virtualListHeight > 0 ? Math.floor(this.virtualListHeight / this.listItemHeight) : 0;\n        this.skeletonCount = actualCount * 2 < this.itemCount ? this.itemCount : actualCount * 2;\n        this.itemCount = retainSkeleton ? this.itemCount : this.skeletonCount;\n        this.skeletonCount = Math.floor(this.skeletonCount / 2) + 2;\n    };\n    DropDownList.prototype.onFilterDown = function (e) {\n        switch (e.keyCode) {\n            case 13: //enter\n                break;\n            case 40: //down arrow\n            case 38: //up arrow\n                this.queryString = this.filterInput.value;\n                e.preventDefault();\n                break;\n            case 9: //tab\n                if (this.isPopupOpen && this.getModuleName() !== 'autocomplete') {\n                    e.preventDefault();\n                }\n                break;\n            default:\n                this.prevSelectPoints = this.getSelectionPoints();\n                this.queryString = this.filterInput.value;\n                break;\n        }\n    };\n    DropDownList.prototype.removeFillSelection = function () {\n        if (this.isInteracted) {\n            var selection = this.getSelectionPoints();\n            this.inputElement.setSelectionRange(selection.end, selection.end);\n        }\n    };\n    DropDownList.prototype.getQuery = function (query) {\n        var filterQuery;\n        if (!this.isCustomFilter && this.allowFiltering && this.filterInput) {\n            filterQuery = query ? query.clone() : this.query ? this.query.clone() : new Query();\n            var filterType = this.typedString === '' ? 'contains' : this.filterType;\n            var dataType = this.typeOfData(this.dataSource).typeof;\n            if (!(this.dataSource instanceof DataManager) && dataType === 'string' || dataType === 'number') {\n                filterQuery.where('', filterType, this.typedString, this.ignoreCase, this.ignoreAccent);\n            }\n            else {\n                var fields = (this.fields.text) ? this.fields.text : '';\n                filterQuery.where(fields, filterType, this.typedString, this.ignoreCase, this.ignoreAccent);\n            }\n        }\n        else {\n            filterQuery = query ? query.clone() : this.query ? this.query.clone() : new Query();\n        }\n        if (this.enableVirtualization && (this.viewPortInfo.endIndex != 0) && (!(this.dataSource instanceof DataManager) || (this.dataSource instanceof DataManager && this.virtualGroupDataSource))) {\n            var takeValue = this.getTakeValue();\n            var alreadySkipAdded = false;\n            if (filterQuery) {\n                for (var queryElements = 0; queryElements < filterQuery.queries.length; queryElements++) {\n                    if (filterQuery.queries[queryElements].fn === 'onSkip') {\n                        alreadySkipAdded = true;\n                        break;\n                    }\n                }\n            }\n            if (this.allowFiltering || !this.isPopupOpen || !alreadySkipAdded) {\n                filterQuery.skip(this.virtualItemStartIndex);\n            }\n            if (this.isIncrementalRequest) {\n                filterQuery.take(this.incrementalEndIndex);\n            }\n            else {\n                filterQuery.take(takeValue);\n            }\n            filterQuery.requiresCount();\n        }\n        return filterQuery;\n    };\n    DropDownList.prototype.getSelectionPoints = function () {\n        var input = this.inputElement;\n        return { start: Math.abs(input.selectionStart), end: Math.abs(input.selectionEnd) };\n    };\n    DropDownList.prototype.searchLists = function (e) {\n        var _this = this;\n        this.isTyped = true;\n        this.activeIndex = null;\n        this.isListSearched = true;\n        if (this.filterInput.parentElement.querySelector('.' + dropDownListClasses.clearIcon)) {\n            var clearElement = this.filterInput.parentElement.querySelector('.' + dropDownListClasses.clearIcon);\n            clearElement.style.visibility = this.filterInput.value === '' ? 'hidden' : 'visible';\n        }\n        this.isDataFetched = false;\n        if (this.isFiltering()) {\n            this.checkAndResetCache();\n            var eventArgs_1 = {\n                preventDefaultAction: false,\n                text: this.filterInput.value,\n                updateData: function (dataSource, query, fields) {\n                    if (eventArgs_1.cancel) {\n                        return;\n                    }\n                    _this.isCustomFilter = true;\n                    _this.filteringAction(dataSource, query, fields);\n                },\n                baseEventArgs: e,\n                cancel: false\n            };\n            this.trigger('filtering', eventArgs_1, function (eventArgs) {\n                if (!eventArgs.cancel && !_this.isCustomFilter && !eventArgs.preventDefaultAction) {\n                    _this.filteringAction(_this.dataSource, null, _this.fields);\n                }\n            });\n        }\n    };\n    /**\n     * To filter the data from given data source by using query\n     *\n     * @param {Object[] | DataManager } dataSource - Set the data source to filter.\n     * @param {Query} query - Specify the query to filter the data.\n     * @param {FieldSettingsModel} fields - Specify the fields to map the column in the data table.\n     * @returns {void}\n     * @deprecated\n     */\n    DropDownList.prototype.filter = function (dataSource, query, fields) {\n        this.isCustomFilter = true;\n        this.filteringAction(dataSource, query, fields);\n    };\n    DropDownList.prototype.filteringAction = function (dataSource, query, fields) {\n        if (!isNullOrUndefined(this.filterInput)) {\n            this.beforePopupOpen = (!this.isPopupOpen && this.getModuleName() === 'combobox' && this.filterInput.value === '') ?\n                false : true;\n            var isNoData = this.list.classList.contains(dropDownBaseClasses.noData);\n            if (this.filterInput.value.trim() === '' && !this.itemTemplate) {\n                this.actionCompleteData.isUpdated = false;\n                this.isTyped = false;\n                if (!isNullOrUndefined(this.actionCompleteData.ulElement) && !isNullOrUndefined(this.actionCompleteData.list)) {\n                    if (this.enableVirtualization) {\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        this.totalItemCount = this.dataSource && this.dataSource.length ? this.dataSource.length : 0;\n                        this.resetList(dataSource, fields, query);\n                        if (isNoData && !this.list.classList.contains(dropDownBaseClasses.noData)) {\n                            if (!this.list.querySelector('.e-virtual-ddl-content')) {\n                                this.list.appendChild(this.createElement('div', {\n                                    className: 'e-virtual-ddl-content',\n                                    styles: this.getTransformValues()\n                                })).appendChild(this.list.querySelector('.e-list-parent'));\n                            }\n                            if (!this.list.querySelector('.e-virtual-ddl')) {\n                                var virualElement = this.createElement('div', {\n                                    id: this.element.id + '_popup', className: 'e-virtual-ddl', styles: this.GetVirtualTrackHeight()\n                                });\n                                document.getElementsByClassName('e-popup')[0].querySelector('.e-dropdownbase').appendChild(virualElement);\n                            }\n                        }\n                    }\n                    this.onActionComplete(this.actionCompleteData.ulElement, this.actionCompleteData.list);\n                }\n                this.isTyped = true;\n                if (!isNullOrUndefined(this.itemData) && this.getModuleName() === 'dropdownlist') {\n                    this.focusIndexItem();\n                    this.setScrollPosition();\n                }\n                this.isNotSearchList = true;\n            }\n            else {\n                this.isNotSearchList = false;\n                query = (this.filterInput.value.trim() === '') ? null : query;\n                if (this.enableVirtualization && this.isFiltering() && this.isTyped) {\n                    this.isPreventScrollAction = true;\n                    this.list.scrollTop = 0;\n                    this.previousStartIndex = 0;\n                    this.virtualListInfo = null;\n                }\n                this.resetList(dataSource, fields, query);\n                if (this.enableVirtualization && isNoData && !this.list.classList.contains(dropDownBaseClasses.noData)) {\n                    if (!this.list.querySelector('.e-virtual-ddl-content')) {\n                        this.list.appendChild(this.createElement('div', {\n                            className: 'e-virtual-ddl-content',\n                            styles: this.getTransformValues()\n                        })).appendChild(this.list.querySelector('.e-list-parent'));\n                    }\n                    if (!this.list.querySelector('.e-virtual-ddl')) {\n                        var virualElement = this.createElement('div', {\n                            id: this.element.id + '_popup', className: 'e-virtual-ddl', styles: this.GetVirtualTrackHeight()\n                        });\n                        document.getElementsByClassName('e-popup')[0].querySelector('.e-dropdownbase').appendChild(virualElement);\n                    }\n                }\n            }\n            if (this.enableVirtualization) {\n                this.getFilteringSkeletonCount();\n            }\n            this.renderReactTemplates();\n        }\n    };\n    DropDownList.prototype.setSearchBox = function (popupElement) {\n        if (this.isFiltering()) {\n            var parentElement = popupElement.querySelector('.' + dropDownListClasses.filterParent) ?\n                popupElement.querySelector('.' + dropDownListClasses.filterParent) : this.createElement('span', {\n                className: dropDownListClasses.filterParent\n            });\n            this.filterInput = this.createElement('input', {\n                attrs: { type: 'text' },\n                className: dropDownListClasses.filterInput\n            });\n            this.element.parentNode.insertBefore(this.filterInput, this.element);\n            var backIcon = false;\n            if (Browser.isDevice) {\n                backIcon = true;\n            }\n            this.filterInputObj = Input.createInput({\n                element: this.filterInput,\n                buttons: backIcon ?\n                    [dropDownListClasses.backIcon, dropDownListClasses.filterBarClearIcon] : [dropDownListClasses.filterBarClearIcon],\n                properties: { placeholder: this.filterBarPlaceholder }\n            }, this.createElement);\n            if (!isNullOrUndefined(this.cssClass)) {\n                if (this.cssClass.split(' ').indexOf('e-outline') !== -1) {\n                    addClass([this.filterInputObj.container], 'e-outline');\n                }\n                else if (this.cssClass.split(' ').indexOf('e-filled') !== -1) {\n                    addClass([this.filterInputObj.container], 'e-filled');\n                }\n            }\n            append([this.filterInputObj.container], parentElement);\n            prepend([parentElement], popupElement);\n            attributes(this.filterInput, {\n                'aria-disabled': 'false',\n                'role': 'combobox',\n                'autocomplete': 'off',\n                'autocapitalize': 'off',\n                'spellcheck': 'false'\n            });\n            this.clearIconElement = this.filterInput.parentElement.querySelector('.' + dropDownListClasses.clearIcon);\n            if (!Browser.isDevice && this.clearIconElement) {\n                EventHandler.add(this.clearIconElement, 'click', this.clearText, this);\n                this.clearIconElement.style.visibility = 'hidden';\n            }\n            if (!Browser.isDevice) {\n                this.searchKeyModule = new KeyboardEvents(this.filterInput, {\n                    keyAction: this.keyActionHandler.bind(this),\n                    keyConfigs: this.keyConfigure,\n                    eventName: 'keydown'\n                });\n            }\n            else {\n                this.searchKeyModule = new KeyboardEvents(this.filterInput, {\n                    keyAction: this.mobileKeyActionHandler.bind(this),\n                    keyConfigs: this.keyConfigure,\n                    eventName: 'keydown'\n                });\n            }\n            EventHandler.add(this.filterInput, 'input', this.onInput, this);\n            EventHandler.add(this.filterInput, 'keyup', this.onFilterUp, this);\n            EventHandler.add(this.filterInput, 'keydown', this.onFilterDown, this);\n            EventHandler.add(this.filterInput, 'blur', this.onBlurHandler, this);\n            EventHandler.add(this.filterInput, 'paste', this.pasteHandler, this);\n            return this.filterInputObj;\n        }\n        else {\n            return inputObject;\n        }\n    };\n    DropDownList.prototype.onInput = function (e) {\n        this.isValidKey = true;\n        if (this.getModuleName() === 'combobox') {\n            this.updateIconState();\n        }\n        // For filtering works in mobile firefox.\n        if (Browser.isDevice && Browser.info.name === 'mozilla') {\n            this.typedString = this.filterInput.value;\n            this.preventAutoFill = true;\n            this.searchLists(e);\n        }\n    };\n    DropDownList.prototype.pasteHandler = function (e) {\n        var _this = this;\n        setTimeout(function () {\n            _this.typedString = _this.filterInput.value;\n            _this.searchLists(e);\n        });\n    };\n    DropDownList.prototype.onActionFailure = function (e) {\n        _super.prototype.onActionFailure.call(this, e);\n        if (this.beforePopupOpen) {\n            this.renderPopup();\n        }\n    };\n    DropDownList.prototype.UpdateSkeleton = function (isSkeletonCountChange, skeletonCount) {\n        var isContainSkeleton = this.list.querySelector('.e-virtual-ddl-content');\n        var isContainVirtualList = this.list.querySelector('.e-virtual-list');\n        if (isContainSkeleton && (!isContainVirtualList || isSkeletonCountChange) && this.enableVirtualization) {\n            var totalSkeletonCount = isSkeletonCountChange ? skeletonCount : this.skeletonCount;\n            for (var i = 0; i < totalSkeletonCount; i++) {\n                var liElement = this.createElement('li', { className: dropDownListClasses.virtualList, styles: 'overflow: inherit' });\n                if (this.enableVirtualization && this.itemTemplate) {\n                    liElement.style.height = this.listItemHeight + 'px';\n                }\n                var skeleton = new Skeleton({\n                    shape: \"Text\",\n                    height: \"10px\",\n                    width: \"95%\",\n                    cssClass: \"e-skeleton-text\",\n                });\n                skeleton.appendTo(this.createElement('div'));\n                liElement.appendChild(skeleton.element);\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                isContainSkeleton.firstChild.insertBefore(liElement, isContainSkeleton.firstChild.children[0]);\n            }\n        }\n    };\n    DropDownList.prototype.getTakeValue = function () {\n        return this.allowFiltering && this.getModuleName() === 'dropdownlist' && Browser.isDevice ? Math.round(window.outerHeight / this.listItemHeight) : this.itemCount;\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    DropDownList.prototype.onActionComplete = function (ulElement, list, e, isUpdated) {\n        var _this = this;\n        if (this.dataSource instanceof DataManager && !isNullOrUndefined(e) && !this.virtualGroupDataSource) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            this.totalItemCount = e.count;\n        }\n        if (this.isNotSearchList && !this.enableVirtualization) {\n            this.isNotSearchList = false;\n            return;\n        }\n        var tempItemCount = this.itemCount;\n        if (this.isActive || !isNullOrUndefined(ulElement)) {\n            var selectedItem = this.selectedLI ? this.selectedLI.cloneNode(true) : null;\n            _super.prototype.onActionComplete.call(this, ulElement, list, e);\n            this.skeletonCount = this.totalItemCount != 0 && this.totalItemCount < (this.itemCount * 2) ? 0 : this.skeletonCount;\n            this.updateSelectElementData(this.allowFiltering);\n            if (this.isRequested && !isNullOrUndefined(this.searchKeyEvent) && this.searchKeyEvent.type === 'keydown') {\n                this.isRequested = false;\n                this.keyActionHandler(this.searchKeyEvent);\n                this.searchKeyEvent = null;\n            }\n            if (this.isRequested && !isNullOrUndefined(this.searchKeyEvent)) {\n                this.incrementalSearch(this.searchKeyEvent);\n                this.searchKeyEvent = null;\n            }\n            if (!this.enableVirtualization) {\n                this.list.scrollTop = 0;\n            }\n            if (!isNullOrUndefined(ulElement)) {\n                attributes(ulElement, { 'id': this.element.id + '_options', 'role': 'listbox', 'aria-hidden': 'false', 'aria-label': 'listbox' });\n            }\n            if (this.initRemoteRender) {\n                this.initial = true;\n                this.activeIndex = this.index;\n                this.initRemoteRender = false;\n                if (this.value && this.dataSource instanceof DataManager) {\n                    var checkField_1 = isNullOrUndefined(this.fields.value) ? this.fields.text : this.fields.value;\n                    var fieldValue_1 = this.fields.value.split('.');\n                    var checkVal = list.some(function (x) {\n                        return isNullOrUndefined(x[checkField_1]) && fieldValue_1.length > 1 ?\n                            _this.checkFieldValue(x, fieldValue_1) === _this.value : x[checkField_1] === _this.value;\n                    });\n                    if (!checkVal) {\n                        this.dataSource.executeQuery(this.getQuery(this.query).where(new Predicate(checkField_1, 'equal', this.value)))\n                            .then(function (e) {\n                            if (e.result.length > 0) {\n                                _this.addItem(e.result, list.length);\n                                _this.updateValues();\n                            }\n                            else {\n                                _this.updateValues();\n                            }\n                        });\n                    }\n                    else {\n                        this.updateValues();\n                    }\n                }\n                else {\n                    this.updateValues();\n                }\n                this.initial = false;\n            }\n            else if (this.getModuleName() === 'autocomplete' && this.value) {\n                this.setInputValue();\n            }\n            if (this.getModuleName() !== 'autocomplete' && this.isFiltering() && !this.isTyped) {\n                if (!this.actionCompleteData.isUpdated || ((!this.isCustomFilter\n                    && !this.isFilterFocus) || (isNullOrUndefined(this.itemData) && this.allowFiltering)\n                    && ((this.dataSource instanceof DataManager)\n                        || (!isNullOrUndefined(this.dataSource) && !isNullOrUndefined(this.dataSource.length) &&\n                            this.dataSource.length !== 0)))) {\n                    if (this.itemTemplate && this.element.tagName === 'EJS-COMBOBOX' && this.allowFiltering) {\n                        setTimeout(function () {\n                            _this.updateActionCompleteDataValues(ulElement, list);\n                        }, 0);\n                    }\n                    else {\n                        this.updateActionCompleteDataValues(ulElement, list);\n                    }\n                }\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                if ((this.allowCustom || (this.allowFiltering && !this.isValueInList(list, this.value) && this.dataSource instanceof DataManager)) && !this.enableVirtualization) {\n                    this.addNewItem(list, selectedItem);\n                }\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                else if ((this.allowCustom || (this.allowFiltering && this.isValueInList(list, this.value))) && !this.enableVirtualization) {\n                    this.addNewItem(list, selectedItem);\n                }\n                if (!isNullOrUndefined(this.itemData) || (isNullOrUndefined(this.itemData) && this.enableVirtualization)) {\n                    this.focusIndexItem();\n                }\n                if (this.enableVirtualization) {\n                    this.updateActionCompleteDataValues(ulElement, list);\n                }\n            }\n            else if (this.enableVirtualization && this.getModuleName() !== 'autocomplete' && !this.isFiltering()) {\n                var value = this.getItemData().value;\n                this.activeIndex = this.getIndexByValue(value);\n                var element = this.findListElement(this.list, 'li', 'data-value', value);\n                this.selectedLI = element;\n            }\n            else if (this.enableVirtualization && this.getModuleName() === 'autocomplete') {\n                this.activeIndex = this.skeletonCount;\n            }\n            if (this.beforePopupOpen) {\n                this.renderPopup(e);\n                if (this.enableVirtualization) {\n                    if (!this.list.querySelector('.e-virtual-list')) {\n                        this.UpdateSkeleton();\n                        this.liCollections = this.list.querySelectorAll('.e-list-item');\n                    }\n                }\n                if (this.enableVirtualization && tempItemCount != this.itemCount) {\n                    this.resetList(this.dataSource, this.fields);\n                }\n            }\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    DropDownList.prototype.isValueInList = function (list, valueToFind) {\n        if (Array.isArray(list)) {\n            for (var i = 0; i < list.length; i++) {\n                if (list[i] === valueToFind) {\n                    return true;\n                }\n            }\n        }\n        else if (typeof list === 'object' && list !== null) {\n            for (var key in list) {\n                if (Object.prototype.hasOwnProperty.call(list, key) && list[key] === valueToFind) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    DropDownList.prototype.checkFieldValue = function (list, fieldValue) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var checkField = list;\n        fieldValue.forEach(function (value) {\n            checkField = checkField[value];\n        });\n        return checkField;\n    };\n    DropDownList.prototype.updateActionCompleteDataValues = function (ulElement, list) {\n        this.actionCompleteData = { ulElement: ulElement.cloneNode(true), list: list, isUpdated: true };\n        if (this.actionData.list !== this.actionCompleteData.list && this.actionCompleteData.ulElement && this.actionCompleteData.list) {\n            this.actionData = this.actionCompleteData;\n        }\n    };\n    DropDownList.prototype.addNewItem = function (listData, newElement) {\n        var _this = this;\n        if (!isNullOrUndefined(this.itemData) && !isNullOrUndefined(newElement)) {\n            var value_5 = this.getItemData().value;\n            var isExist = listData.some(function (data) {\n                return (((typeof data === 'string' || typeof data === 'number') && data === value_5) ||\n                    (getValue(_this.fields.value, data) === value_5));\n            });\n            if (!isExist) {\n                this.addItem(this.itemData);\n            }\n        }\n    };\n    DropDownList.prototype.updateActionCompleteData = function (li, item, index) {\n        var _this = this;\n        if (this.getModuleName() !== 'autocomplete' && this.actionCompleteData.ulElement) {\n            if (this.itemTemplate && this.element.tagName === 'EJS-COMBOBOX' && this.allowFiltering) {\n                setTimeout(function () {\n                    _this.actionCompleteDataUpdate(li, item, index);\n                }, 0);\n            }\n            else {\n                this.actionCompleteDataUpdate(li, item, index);\n            }\n        }\n    };\n    DropDownList.prototype.actionCompleteDataUpdate = function (li, item, index) {\n        if (index !== null) {\n            this.actionCompleteData.ulElement.\n                insertBefore(li.cloneNode(true), this.actionCompleteData.ulElement.childNodes[index]);\n        }\n        else {\n            this.actionCompleteData.ulElement.appendChild(li.cloneNode(true));\n        }\n        if (this.isFiltering() && this.actionCompleteData.list.indexOf(item) < 0) {\n            this.actionCompleteData.list.push(item);\n        }\n    };\n    DropDownList.prototype.focusIndexItem = function () {\n        var value = this.getItemData().value;\n        this.activeIndex = this.getIndexByValue(value);\n        var element = this.findListElement(this.list, 'li', 'data-value', value);\n        this.selectedLI = element;\n        this.activeItem(element);\n        if (!(this.enableVirtualization && isNullOrUndefined(element))) {\n            this.removeFocus();\n        }\n    };\n    DropDownList.prototype.updateSelection = function () {\n        var selectedItem = this.list.querySelector('.' + dropDownBaseClasses.selected);\n        if (selectedItem) {\n            this.setProperties({ 'index': this.getIndexByValue(selectedItem.getAttribute('data-value')) });\n            this.activeIndex = this.index;\n        }\n        else {\n            this.removeFocus();\n            this.list.querySelector('.' + dropDownBaseClasses.li).classList.add(dropDownListClasses.focus);\n        }\n    };\n    DropDownList.prototype.updateSelectionList = function () {\n        var selectedItem = this.list && this.list.querySelector('.' + 'e-active');\n        if (!selectedItem && !isNullOrUndefined(this.value)) {\n            var findEle = this.findListElement(this.list, 'li', 'data-value', this.value);\n            if (findEle) {\n                findEle.classList.add('e-active');\n            }\n        }\n    };\n    DropDownList.prototype.checkAndResetCache = function () {\n        if (this.enableVirtualization) {\n            this.generatedDataObject = {};\n            this.virtualItemStartIndex = this.virtualItemEndIndex = 0;\n            this.viewPortInfo = { currentPageNumber: null,\n                direction: null,\n                sentinelInfo: {},\n                offsets: {},\n                startIndex: 0,\n                endIndex: this.itemCount, };\n            this.selectedValueInfo = null;\n        }\n    };\n    DropDownList.prototype.removeFocus = function () {\n        var highlightedItem = this.list.querySelectorAll('.' + dropDownListClasses.focus);\n        if (highlightedItem && highlightedItem.length) {\n            removeClass(highlightedItem, dropDownListClasses.focus);\n        }\n    };\n    DropDownList.prototype.getTransformValues = function () {\n        var translateY = this.viewPortInfo.startIndex * this.listItemHeight;\n        translateY = translateY - (this.skeletonCount * this.listItemHeight);\n        translateY = this.viewPortInfo.startIndex === 0 && this.listData && this.listData.length === 0 ? 0 : translateY;\n        var styleText = \"transform: translate(0px, \" + translateY + \"px);\";\n        return styleText;\n    };\n    DropDownList.prototype.GetVirtualTrackHeight = function () {\n        var height = this.totalItemCount === this.viewPortInfo.endIndex ? this.totalItemCount * this.listItemHeight - this.itemCount * this.listItemHeight : this.totalItemCount * this.listItemHeight;\n        var heightDimension = \"height: \" + (height - this.itemCount * this.listItemHeight) + \"px;\";\n        if (this.getModuleName() === 'autocomplete' && this.skeletonCount === 0) {\n            return \"height: 0px;\";\n        }\n        return heightDimension;\n    };\n    DropDownList.prototype.renderPopup = function (e) {\n        var _this = this;\n        if (this.popupObj && document.body.contains(this.popupObj.element)) {\n            this.refreshPopup();\n            return;\n        }\n        var args = { cancel: false };\n        this.trigger('beforeOpen', args, function (args) {\n            if (!args.cancel) {\n                var popupEle = _this.createElement('div', {\n                    id: _this.element.id + '_popup', className: 'e-ddl e-popup ' + (_this.cssClass !== null ? _this.cssClass : '')\n                });\n                popupEle.setAttribute('aria-label', _this.element.id);\n                popupEle.setAttribute('role', 'dialog');\n                var searchBox = _this.setSearchBox(popupEle);\n                _this.listHeight = formatUnit(_this.popupHeight);\n                if (_this.headerTemplate) {\n                    _this.setHeaderTemplate(popupEle);\n                }\n                append([_this.list], popupEle);\n                if (_this.footerTemplate) {\n                    _this.setFooterTemplate(popupEle);\n                }\n                document.body.appendChild(popupEle);\n                popupEle.style.top = '0px';\n                if (_this.enableVirtualization && _this.itemTemplate) {\n                    var listitems = popupEle.querySelectorAll('li.e-list-item:not(.e-virtual-list)');\n                    _this.listItemHeight = listitems.length > 0 ? Math.ceil(listitems[0].getBoundingClientRect().height) : 0;\n                }\n                if (_this.enableVirtualization && !_this.list.classList.contains(dropDownBaseClasses.noData)) {\n                    if (!_this.list.querySelector('.e-virtual-ddl-content')) {\n                        _this.list.appendChild(_this.createElement('div', {\n                            className: 'e-virtual-ddl-content',\n                            styles: _this.getTransformValues()\n                        })).appendChild(_this.list.querySelector('.e-list-parent'));\n                    }\n                    else {\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        _this.list.getElementsByClassName('e-virtual-ddl-content')[0].style = _this.getTransformValues();\n                    }\n                    _this.UpdateSkeleton();\n                    _this.liCollections = _this.list.querySelectorAll('.' + dropDownBaseClasses.li);\n                    _this.virtualItemCount = _this.itemCount;\n                    if (!_this.list.querySelector('.e-virtual-ddl')) {\n                        var virualElement = _this.createElement('div', {\n                            id: _this.element.id + '_popup', className: 'e-virtual-ddl', styles: _this.GetVirtualTrackHeight()\n                        });\n                        popupEle.querySelector('.e-dropdownbase').appendChild(virualElement);\n                    }\n                    else {\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        _this.list.getElementsByClassName('e-virtual-ddl')[0].style = _this.GetVirtualTrackHeight();\n                    }\n                }\n                popupEle.style.visibility = 'hidden';\n                if (_this.popupHeight !== 'auto') {\n                    _this.searchBoxHeight = 0;\n                    if (!isNullOrUndefined(searchBox.container) && _this.getModuleName() !== 'combobox' && _this.getModuleName() !== 'autocomplete') {\n                        _this.searchBoxHeight = (searchBox.container.parentElement).getBoundingClientRect().height;\n                        _this.listHeight = (parseInt(_this.listHeight, 10) - (_this.searchBoxHeight)).toString() + 'px';\n                    }\n                    if (_this.headerTemplate) {\n                        _this.header = _this.header ? _this.header : popupEle.querySelector('.e-ddl-header');\n                        var height = Math.round(_this.header.getBoundingClientRect().height);\n                        _this.listHeight = (parseInt(_this.listHeight, 10) - (height + _this.searchBoxHeight)).toString() + 'px';\n                    }\n                    if (_this.footerTemplate) {\n                        _this.footer = _this.footer ? _this.footer : popupEle.querySelector('.e-ddl-footer');\n                        var height = Math.round(_this.footer.getBoundingClientRect().height);\n                        _this.listHeight = (parseInt(_this.listHeight, 10) - (height + _this.searchBoxHeight)).toString() + 'px';\n                    }\n                    _this.list.style.maxHeight = (parseInt(_this.listHeight, 10) - 2).toString() + 'px'; // due to box-sizing property\n                    popupEle.style.maxHeight = formatUnit(_this.popupHeight);\n                }\n                else {\n                    popupEle.style.height = 'auto';\n                }\n                var offsetValue = 0;\n                var left = void 0;\n                _this.isPreventScrollAction = true;\n                if (!isNullOrUndefined(_this.selectedLI) && (!isNullOrUndefined(_this.activeIndex) && _this.activeIndex >= 0)) {\n                    _this.setScrollPosition();\n                }\n                else if (_this.enableVirtualization) {\n                    _this.setScrollPosition();\n                }\n                else {\n                    _this.list.scrollTop = 0;\n                }\n                if (Browser.isDevice && (!_this.allowFiltering && (_this.getModuleName() === 'dropdownlist' ||\n                    (_this.isDropDownClick && _this.getModuleName() === 'combobox')))) {\n                    offsetValue = _this.getOffsetValue(popupEle);\n                    var firstItem = _this.isEmptyList() ? _this.list : _this.liCollections[0];\n                    if (!isNullOrUndefined(_this.inputElement)) {\n                        left = -(parseInt(getComputedStyle(firstItem).textIndent, 10) -\n                            parseInt(getComputedStyle(_this.inputElement).paddingLeft, 10) +\n                            parseInt(getComputedStyle(_this.inputElement.parentElement).borderLeftWidth, 10));\n                    }\n                }\n                _this.createPopup(popupEle, offsetValue, left);\n                _this.popupContentElement = _this.popupObj.element.querySelector('.e-content');\n                _this.getFocusElement();\n                _this.checkCollision(popupEle);\n                if (Browser.isDevice) {\n                    _this.popupObj.element.classList.add(dropDownListClasses.device);\n                    if (_this.getModuleName() === 'dropdownlist' || (_this.getModuleName() === 'combobox'\n                        && !_this.allowFiltering && _this.isDropDownClick)) {\n                        _this.popupObj.collision = { X: 'fit', Y: 'fit' };\n                    }\n                    if (_this.isFilterLayout()) {\n                        _this.popupObj.element.classList.add(dropDownListClasses.mobileFilter);\n                        _this.popupObj.position = { X: 0, Y: 0 };\n                        _this.popupObj.dataBind();\n                        attributes(_this.popupObj.element, { style: 'left:0px;right:0px;top:0px;bottom:0px;' });\n                        addClass([document.body, _this.popupObj.element], dropDownListClasses.popupFullScreen);\n                        _this.setSearchBoxPosition();\n                        _this.backIconElement = searchBox.container.querySelector('.e-back-icon');\n                        _this.clearIconElement = searchBox.container.querySelector('.' + dropDownListClasses.clearIcon);\n                        EventHandler.add(_this.backIconElement, 'click', _this.clickOnBackIcon, _this);\n                        EventHandler.add(_this.clearIconElement, 'click', _this.clearText, _this);\n                    }\n                }\n                popupEle.style.visibility = 'visible';\n                addClass([popupEle], 'e-popup-close');\n                var scrollParentElements = _this.popupObj.getScrollableParent(_this.inputWrapper.container);\n                for (var _i = 0, scrollParentElements_1 = scrollParentElements; _i < scrollParentElements_1.length; _i++) {\n                    var element = scrollParentElements_1[_i];\n                    EventHandler.add(element, 'scroll', _this.scrollHandler, _this);\n                }\n                if (!isNullOrUndefined(_this.list)) {\n                    _this.unWireListEvents();\n                    _this.wireListEvents();\n                }\n                _this.selectedElementID = _this.selectedLI ? _this.selectedLI.id : null;\n                if (_this.enableVirtualization) {\n                    _this.notify(\"bindScrollEvent\", {\n                        module: \"VirtualScroll\",\n                        component: _this.getModuleName(),\n                        enable: _this.enableVirtualization,\n                    });\n                    setTimeout(function () {\n                        if (_this.value || _this.list.querySelector('.e-active')) {\n                            _this.updateSelectionList();\n                            if (_this.selectedValueInfo && _this.viewPortInfo && _this.viewPortInfo.offsets.top) {\n                                _this.list.scrollTop = _this.viewPortInfo.offsets.top;\n                            }\n                            else {\n                                _this.scrollBottom(true, true);\n                            }\n                        }\n                    }, 5);\n                }\n                attributes(_this.targetElement(), { 'aria-expanded': 'true', 'aria-owns': _this.element.id + '_popup', 'aria-controls': _this.element.id });\n                _this.inputElement.setAttribute('aria-expanded', 'true');\n                _this.inputElement.setAttribute('aria-controls', _this.element.id);\n                var inputParent = _this.isFiltering() ? _this.filterInput.parentElement : _this.inputWrapper.container;\n                addClass([inputParent], [dropDownListClasses.inputFocus]);\n                var animModel = { name: 'FadeIn', duration: 100 };\n                _this.beforePopupOpen = true;\n                var popupInstance = _this.popupObj;\n                var eventArgs = { popup: popupInstance, event: e, cancel: false, animation: animModel };\n                _this.trigger('open', eventArgs, function (eventArgs) {\n                    if (!eventArgs.cancel) {\n                        if (!isNullOrUndefined(_this.inputWrapper)) {\n                            addClass([_this.inputWrapper.container], [dropDownListClasses.iconAnimation]);\n                        }\n                        _this.renderReactTemplates();\n                        if (!isNullOrUndefined(_this.popupObj)) {\n                            _this.popupObj.show(new Animation(eventArgs.animation), (_this.zIndex === 1000) ? _this.element : null);\n                        }\n                    }\n                    else {\n                        _this.beforePopupOpen = false;\n                        _this.destroyPopup();\n                    }\n                });\n            }\n            else {\n                _this.beforePopupOpen = false;\n            }\n        });\n    };\n    DropDownList.prototype.checkCollision = function (popupEle) {\n        if (!Browser.isDevice || (Browser.isDevice && !(this.getModuleName() === 'dropdownlist' || this.isDropDownClick))) {\n            var collision = isCollide(popupEle);\n            if (collision.length > 0) {\n                popupEle.style.marginTop = -parseInt(getComputedStyle(popupEle).marginTop, 10) + 'px';\n            }\n            this.popupObj.resolveCollision();\n        }\n    };\n    DropDownList.prototype.getOffsetValue = function (popupEle) {\n        var popupStyles = getComputedStyle(popupEle);\n        var borderTop = parseInt(popupStyles.borderTopWidth, 10);\n        var borderBottom = parseInt(popupStyles.borderBottomWidth, 10);\n        return this.setPopupPosition(borderTop + borderBottom);\n    };\n    DropDownList.prototype.createPopup = function (element, offsetValue, left) {\n        var _this = this;\n        this.popupObj = new Popup(element, {\n            width: this.setWidth(), targetType: 'relative',\n            relateTo: this.inputWrapper.container,\n            collision: this.enableRtl ? { X: 'fit', Y: 'flip' } : { X: 'flip', Y: 'flip' }, offsetY: offsetValue,\n            enableRtl: this.enableRtl, offsetX: left,\n            position: this.enableRtl ? { X: 'right', Y: 'bottom' } : { X: 'left', Y: 'bottom' },\n            zIndex: this.zIndex,\n            close: function () {\n                if (!_this.isDocumentClick) {\n                    _this.focusDropDown();\n                }\n                // eslint-disable-next-line\n                if (_this.isReact) {\n                    _this.clearTemplate(['headerTemplate', 'footerTemplate']);\n                }\n                _this.isNotSearchList = false;\n                _this.isDocumentClick = false;\n                _this.destroyPopup();\n                if (_this.isFiltering() && _this.actionCompleteData.list && _this.actionCompleteData.list[0]) {\n                    _this.isActive = true;\n                    if (_this.enableVirtualization) {\n                        _this.onActionComplete(_this.ulElement, _this.listData, null, true);\n                    }\n                    else {\n                        _this.onActionComplete(_this.actionCompleteData.ulElement, _this.actionCompleteData.list, null, true);\n                    }\n                }\n            },\n            open: function () {\n                EventHandler.add(document, 'mousedown', _this.onDocumentClick, _this);\n                _this.isPopupOpen = true;\n                var actionList = _this.actionCompleteData && _this.actionCompleteData.ulElement &&\n                    _this.actionCompleteData.ulElement.querySelector('li');\n                var ulElement = _this.list.querySelector('ul li');\n                if (!isNullOrUndefined(_this.ulElement) && !isNullOrUndefined(_this.ulElement.getElementsByClassName('e-item-focus')[0])) {\n                    attributes(_this.targetElement(), { 'aria-activedescendant': _this.ulElement.getElementsByClassName('e-item-focus')[0].id });\n                }\n                else if (!isNullOrUndefined(_this.ulElement) && !isNullOrUndefined(_this.ulElement.getElementsByClassName('e-active')[0])) {\n                    attributes(_this.targetElement(), { 'aria-activedescendant': _this.ulElement.getElementsByClassName('e-active')[0].id });\n                }\n                if (_this.isFiltering() && _this.itemTemplate && (_this.element.tagName === _this.getNgDirective()) &&\n                    (actionList && ulElement && actionList.textContent !== ulElement.textContent) &&\n                    _this.element.tagName !== 'EJS-COMBOBOX') {\n                    _this.cloneElements();\n                }\n                if (_this.isFilterLayout()) {\n                    removeClass([_this.inputWrapper.container], [dropDownListClasses.inputFocus]);\n                    _this.isFilterFocus = true;\n                    _this.filterInput.focus();\n                    if (_this.inputWrapper.clearButton) {\n                        addClass([_this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);\n                    }\n                }\n                _this.activeStateChange();\n            },\n            targetExitViewport: function () {\n                if (!Browser.isDevice) {\n                    _this.hidePopup();\n                }\n            }\n        });\n    };\n    DropDownList.prototype.isEmptyList = function () {\n        return !isNullOrUndefined(this.liCollections) && this.liCollections.length === 0;\n    };\n    DropDownList.prototype.getFocusElement = function () {\n        // combo-box used this method\n    };\n    DropDownList.prototype.isFilterLayout = function () {\n        return this.getModuleName() === 'dropdownlist' && this.allowFiltering;\n    };\n    DropDownList.prototype.scrollHandler = function () {\n        if (Browser.isDevice && ((this.getModuleName() === 'dropdownlist' &&\n            !this.isFilterLayout()) || (this.getModuleName() === 'combobox' && !this.allowFiltering && this.isDropDownClick))) {\n            if (this.element && !(this.isElementInViewport(this.element))) {\n                this.hidePopup();\n            }\n        }\n    };\n    DropDownList.prototype.isElementInViewport = function (element) {\n        var elementRect = element.getBoundingClientRect();\n        return (elementRect.top >= 0 && elementRect.left >= 0 && elementRect.bottom <= window.innerHeight && elementRect.right <= window.innerWidth);\n    };\n    \n    DropDownList.prototype.setSearchBoxPosition = function () {\n        var searchBoxHeight = this.filterInput.parentElement.getBoundingClientRect().height;\n        this.popupObj.element.style.maxHeight = '100%';\n        this.popupObj.element.style.width = '100%';\n        this.list.style.maxHeight = (window.innerHeight - searchBoxHeight) + 'px';\n        this.list.style.height = (window.innerHeight - searchBoxHeight) + 'px';\n        var clearElement = this.filterInput.parentElement.querySelector('.' + dropDownListClasses.clearIcon);\n        detach(this.filterInput);\n        clearElement.parentElement.insertBefore(this.filterInput, clearElement);\n    };\n    DropDownList.prototype.setPopupPosition = function (border) {\n        var offsetValue;\n        var popupOffset = border;\n        var selectedLI = this.list.querySelector('.' + dropDownListClasses.focus) || this.selectedLI;\n        var firstItem = this.isEmptyList() ? this.list : this.liCollections[0];\n        var lastItem = this.isEmptyList() ? this.list : this.liCollections[this.getItems().length - 1];\n        var liHeight = firstItem.getBoundingClientRect().height;\n        this.listItemHeight = liHeight;\n        var listHeight = this.list.offsetHeight / 2;\n        var height = isNullOrUndefined(selectedLI) ? firstItem.offsetTop : selectedLI.offsetTop;\n        var lastItemOffsetValue = lastItem.offsetTop;\n        if (lastItemOffsetValue - listHeight < height && !isNullOrUndefined(this.liCollections) &&\n            this.liCollections.length > 0 && !isNullOrUndefined(selectedLI)) {\n            var count = this.list.offsetHeight / liHeight;\n            var paddingBottom = parseInt(getComputedStyle(this.list).paddingBottom, 10);\n            offsetValue = (count - (this.liCollections.length - this.activeIndex)) * liHeight - popupOffset + paddingBottom;\n            this.list.scrollTop = selectedLI.offsetTop;\n        }\n        else if (height > listHeight && !this.enableVirtualization) {\n            offsetValue = listHeight - liHeight / 2;\n            this.list.scrollTop = height - listHeight + liHeight / 2;\n        }\n        else {\n            offsetValue = height;\n        }\n        var inputHeight = this.inputWrapper.container.offsetHeight;\n        offsetValue = offsetValue + liHeight + popupOffset - ((liHeight - inputHeight) / 2);\n        return -offsetValue;\n    };\n    DropDownList.prototype.setWidth = function () {\n        var width = formatUnit(this.popupWidth);\n        if (width.indexOf('%') > -1) {\n            var inputWidth = this.inputWrapper.container.offsetWidth * parseFloat(width) / 100;\n            width = inputWidth.toString() + 'px';\n        }\n        if (Browser.isDevice && (!this.allowFiltering && (this.getModuleName() === 'dropdownlist' ||\n            (this.isDropDownClick && this.getModuleName() === 'combobox')))) {\n            var firstItem = this.isEmptyList() ? this.list : this.liCollections[0];\n            width = (parseInt(width, 10) + (parseInt(getComputedStyle(firstItem).textIndent, 10) -\n                parseInt(getComputedStyle(this.inputElement).paddingLeft, 10) +\n                parseInt(getComputedStyle(this.inputElement.parentElement).borderLeftWidth, 10)) * 2) + 'px';\n        }\n        return width;\n    };\n    DropDownList.prototype.scrollBottom = function (isInitial, isInitialSelection, keyAction) {\n        var _this = this;\n        if (isInitialSelection === void 0) { isInitialSelection = false; }\n        if (keyAction === void 0) { keyAction = null; }\n        if (isNullOrUndefined(this.selectedLI) && this.enableVirtualization) {\n            this.selectedLI = this.list.querySelector('.' + dropDownBaseClasses.li);\n            if (!isNullOrUndefined(this.selectedLI) && this.selectedLI.classList.contains('e-virtual-list')) {\n                this.selectedLI = this.liCollections[this.skeletonCount];\n            }\n        }\n        if (!isNullOrUndefined(this.selectedLI)) {\n            this.isUpwardScrolling = false;\n            var virtualListCount = this.list.querySelectorAll('.e-virtual-list').length;\n            var lastElementValue = this.list.querySelector('li:last-of-type') ? this.list.querySelector('li:last-of-type').getAttribute('data-value') : null;\n            var selectedLiOffsetTop = this.virtualListInfo && this.virtualListInfo.startIndex ? this.selectedLI.offsetTop + (this.virtualListInfo.startIndex * this.selectedLI.offsetHeight) : this.selectedLI.offsetTop;\n            var currentOffset = this.list.offsetHeight;\n            var nextBottom = selectedLiOffsetTop - (virtualListCount * this.selectedLI.offsetHeight) + this.selectedLI.offsetHeight - this.list.scrollTop;\n            var nextOffset = this.list.scrollTop + nextBottom - currentOffset;\n            var isScrollerCHanged = false;\n            nextOffset = isInitial ? nextOffset + parseInt(getComputedStyle(this.list).paddingTop, 10) * 2 : nextOffset + parseInt(getComputedStyle(this.list).paddingTop, 10);\n            var boxRange = selectedLiOffsetTop - (virtualListCount * this.selectedLI.offsetHeight) + this.selectedLI.offsetHeight - this.list.scrollTop;\n            boxRange = this.fields.groupBy && !isNullOrUndefined(this.fixedHeaderElement) ?\n                boxRange - this.fixedHeaderElement.offsetHeight : boxRange;\n            if (this.activeIndex === 0 && !this.enableVirtualization) {\n                this.list.scrollTop = 0;\n                isScrollerCHanged = this.isKeyBoardAction;\n            }\n            else if (nextBottom > currentOffset || !(boxRange > 0 && this.list.offsetHeight > boxRange)) {\n                var currentElementValue = this.selectedLI ? this.selectedLI.getAttribute('data-value') : null;\n                var liCount = keyAction == \"pageDown\" ? this.getPageCount() - 2 : 1;\n                if (!this.enableVirtualization || this.isKeyBoardAction || isInitialSelection) {\n                    if (this.isKeyBoardAction && this.enableVirtualization && lastElementValue && currentElementValue === lastElementValue && keyAction != \"end\" && !this.isVirtualScrolling) {\n                        this.isPreventKeyAction = true;\n                        if (this.enableVirtualization && this.itemTemplate) {\n                            this.list.scrollTop += nextOffset;\n                        }\n                        else {\n                            this.list.scrollTop += this.selectedLI.offsetHeight * liCount;\n                        }\n                        this.isPreventKeyAction = this.IsScrollerAtEnd() ? false : this.isPreventKeyAction;\n                        this.isKeyBoardAction = false;\n                        this.isPreventScrollAction = false;\n                    }\n                    else if (this.enableVirtualization && keyAction == \"end\") {\n                        this.isPreventKeyAction = false;\n                        this.isKeyBoardAction = false;\n                        this.isPreventScrollAction = false;\n                        this.list.scrollTop = this.list.scrollHeight;\n                    }\n                    else {\n                        if (keyAction == \"pageDown\" && this.enableVirtualization && !this.isVirtualScrolling) {\n                            this.isPreventKeyAction = false;\n                            this.isKeyBoardAction = false;\n                            this.isPreventScrollAction = false;\n                            nextOffset = nextOffset + (this.selectedLI.offsetHeight * liCount);\n                        }\n                        this.list.scrollTop = nextOffset;\n                    }\n                }\n                else {\n                    this.list.scrollTop = this.virtualListInfo && this.virtualListInfo.startIndex ? this.virtualListInfo.startIndex * this.listItemHeight : 0;\n                }\n                isScrollerCHanged = this.isKeyBoardAction;\n                \n            }\n            this.isKeyBoardAction = isScrollerCHanged;\n            if (this.enableVirtualization && this.fields.groupBy && this.fixedHeaderElement && (keyAction == \"down\")) {\n                setTimeout(function () {\n                    _this.scrollStop(null, true);\n                }, 100);\n            }\n        }\n    };\n    DropDownList.prototype.scrollTop = function (keyAction) {\n        if (keyAction === void 0) { keyAction = null; }\n        if (!isNullOrUndefined(this.selectedLI)) {\n            var virtualListCount = this.list.querySelectorAll('.e-virtual-list').length;\n            var selectedLiOffsetTop = (this.virtualListInfo && this.virtualListInfo.startIndex) ? this.selectedLI.offsetTop + (this.virtualListInfo.startIndex * this.selectedLI.offsetHeight) : this.selectedLI.offsetTop;\n            var nextOffset = selectedLiOffsetTop - (virtualListCount * this.selectedLI.offsetHeight) - this.list.scrollTop;\n            var firstElementValue = this.list.querySelector('li.e-list-item:not(.e-virtual-list)') ? this.list.querySelector('li.e-list-item:not(.e-virtual-list)').getAttribute('data-value') : null;\n            nextOffset = this.fields.groupBy && !isNullOrUndefined(this.fixedHeaderElement) ?\n                nextOffset - this.fixedHeaderElement.offsetHeight : nextOffset;\n            var boxRange = (selectedLiOffsetTop - (virtualListCount * this.selectedLI.offsetHeight) + this.selectedLI.offsetHeight - this.list.scrollTop);\n            var isPageUpKeyAction = this.enableVirtualization && this.getModuleName() === 'autocomplete' && nextOffset <= 0;\n            if (this.activeIndex === 0 && !this.enableVirtualization) {\n                this.list.scrollTop = 0;\n            }\n            else if (nextOffset < 0 || isPageUpKeyAction) {\n                var currentElementValue = this.selectedLI ? this.selectedLI.getAttribute('data-value') : null;\n                var liCount = keyAction == \"pageUp\" ? this.getPageCount() - 2 : 1;\n                if (this.enableVirtualization && this.isKeyBoardAction && firstElementValue && currentElementValue === firstElementValue && keyAction != \"home\" && !this.isVirtualScrolling) {\n                    this.isUpwardScrolling = true;\n                    this.isPreventKeyAction = true;\n                    this.list.scrollTop -= this.selectedLI.offsetHeight * liCount;\n                    this.isPreventKeyAction = this.list.scrollTop != 0 ? this.isPreventKeyAction : false;\n                    this.isKeyBoardAction = false;\n                    this.isPreventScrollAction = false;\n                }\n                else if (this.enableVirtualization && keyAction == \"home\") {\n                    this.isPreventScrollAction = false;\n                    this.isPreventKeyAction = true;\n                    this.isKeyBoardAction = false;\n                    this.list.scrollTo(0, 0);\n                }\n                else {\n                    if (keyAction == \"pageUp\" && this.enableVirtualization && !this.isVirtualScrolling) {\n                        this.isPreventKeyAction = false;\n                        this.isKeyBoardAction = false;\n                        this.isPreventScrollAction = false;\n                        nextOffset = nextOffset - (this.selectedLI.offsetHeight * liCount);\n                    }\n                    this.list.scrollTop = this.list.scrollTop + nextOffset;\n                }\n            }\n            else if (!(boxRange > 0 && this.list.offsetHeight > boxRange)) {\n                this.list.scrollTop = this.selectedLI.offsetTop - (this.fields.groupBy && !isNullOrUndefined(this.fixedHeaderElement) ?\n                    this.fixedHeaderElement.offsetHeight : 0);\n            }\n        }\n    };\n    DropDownList.prototype.isEditTextBox = function () {\n        return false;\n    };\n    DropDownList.prototype.isFiltering = function () {\n        return this.allowFiltering;\n    };\n    DropDownList.prototype.isPopupButton = function () {\n        return true;\n    };\n    DropDownList.prototype.setScrollPosition = function (e) {\n        this.isPreventScrollAction = true;\n        if (!isNullOrUndefined(e)) {\n            switch (e.action) {\n                case 'pageDown':\n                case 'down':\n                case 'end':\n                    this.isKeyBoardAction = true;\n                    this.scrollBottom(false, false, e.action);\n                    break;\n                default:\n                    this.isKeyBoardAction = e.action == 'up' || e.action == 'pageUp' || e.action == 'open';\n                    this.scrollTop(e.action);\n                    break;\n            }\n        }\n        else {\n            this.scrollBottom(true);\n        }\n        this.isKeyBoardAction = false;\n    };\n    DropDownList.prototype.clearText = function () {\n        this.filterInput.value = this.typedString = '';\n        this.searchLists(null);\n        if (this.enableVirtualization) {\n            this.list.scrollTop = 0;\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            this.totalItemCount = this.dataCount = this.dataSource && this.dataSource.length ? this.dataSource.length : 0;\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            if (this.list.getElementsByClassName('e-virtual-ddl')[0]) {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                this.list.getElementsByClassName('e-virtual-ddl')[0].style = this.GetVirtualTrackHeight();\n            }\n            this.getSkeletonCount();\n            this.UpdateSkeleton();\n            this.liCollections = this.list.querySelectorAll('.e-list-item');\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            if (this.list.getElementsByClassName('e-virtual-ddl-content')[0]) {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                this.list.getElementsByClassName('e-virtual-ddl-content')[0].style = this.getTransformValues();\n            }\n        }\n    };\n    DropDownList.prototype.setEleWidth = function (width) {\n        if (!isNullOrUndefined(width)) {\n            if (typeof width === 'number') {\n                this.inputWrapper.container.style.width = formatUnit(width);\n            }\n            else if (typeof width === 'string') {\n                this.inputWrapper.container.style.width = (width.match(/px|%|em/)) ? (width) : (formatUnit(width));\n            }\n        }\n    };\n    DropDownList.prototype.closePopup = function (delay, e) {\n        var _this = this;\n        var isFilterValue = !isNullOrUndefined(this.filterInput) && !isNullOrUndefined(this.filterInput.value) && this.filterInput.value !== '';\n        var typedString = this.getModuleName() === 'combobox' ? this.typedString : null;\n        this.isTyped = false;\n        if (!(this.popupObj && document.body.contains(this.popupObj.element) && this.beforePopupOpen)) {\n            return;\n        }\n        this.keyboardEvent = null;\n        EventHandler.remove(document, 'mousedown', this.onDocumentClick);\n        this.isActive = false;\n        this.filterInputObj = null;\n        this.isDropDownClick = false;\n        this.preventAutoFill = false;\n        var scrollableParentElements = this.popupObj.getScrollableParent(this.inputWrapper.container);\n        for (var _i = 0, scrollableParentElements_1 = scrollableParentElements; _i < scrollableParentElements_1.length; _i++) {\n            var element = scrollableParentElements_1[_i];\n            EventHandler.remove(element, 'scroll', this.scrollHandler);\n        }\n        if (Browser.isDevice && this.isFilterLayout()) {\n            removeClass([document.body, this.popupObj.element], dropDownListClasses.popupFullScreen);\n        }\n        if (this.isFilterLayout()) {\n            if (!Browser.isDevice) {\n                this.searchKeyModule.destroy();\n                if (this.clearIconElement) {\n                    EventHandler.remove(this.clearIconElement, 'click', this.clearText);\n                }\n            }\n            if (this.backIconElement) {\n                EventHandler.remove(this.backIconElement, 'click', this.clickOnBackIcon);\n                EventHandler.remove(this.clearIconElement, 'click', this.clearText);\n            }\n            if (!isNullOrUndefined(this.filterInput)) {\n                EventHandler.remove(this.filterInput, 'input', this.onInput);\n                EventHandler.remove(this.filterInput, 'keyup', this.onFilterUp);\n                EventHandler.remove(this.filterInput, 'keydown', this.onFilterDown);\n                EventHandler.remove(this.filterInput, 'blur', this.onBlurHandler);\n                EventHandler.remove(this.filterInput, 'paste', this.pasteHandler);\n            }\n            if (this.allowFiltering && this.getModuleName() === 'dropdownlist') {\n                this.filterInput.removeAttribute('aria-activedescendant');\n            }\n            this.filterInput = null;\n        }\n        attributes(this.targetElement(), { 'aria-expanded': 'false' });\n        this.inputElement.setAttribute('aria-expanded', 'false');\n        this.targetElement().removeAttribute('aria-owns');\n        this.targetElement().removeAttribute('aria-activedescendant');\n        this.inputWrapper.container.classList.remove(dropDownListClasses.iconAnimation);\n        if (this.isFiltering()) {\n            this.actionCompleteData.isUpdated = false;\n        }\n        if (this.enableVirtualization) {\n            if ((this.value == null || this.isTyped)) {\n                this.viewPortInfo.endIndex = this.viewPortInfo && this.viewPortInfo.endIndex > 0 ? this.viewPortInfo.endIndex : this.itemCount;\n                if (this.getModuleName() === 'autocomplete' || (this.getModuleName() === 'dropdownlist' && !isNullOrUndefined(this.typedString) && this.typedString != \"\") || (this.getModuleName() === 'combobox' && this.allowFiltering && !isNullOrUndefined(this.typedString) && this.typedString != \"\")) {\n                    this.checkAndResetCache();\n                }\n            }\n            else if (this.getModuleName() === 'autocomplete') {\n                this.checkAndResetCache();\n            }\n            if ((this.getModuleName() === 'dropdownlist' || this.getModuleName() === 'combobox') && !(this.skeletonCount == 0)) {\n                this.getSkeletonCount(true);\n            }\n        }\n        this.beforePopupOpen = false;\n        var animModel = {\n            name: 'FadeOut',\n            duration: 100,\n            delay: delay ? delay : 0\n        };\n        var popupInstance = this.popupObj;\n        var eventArgs = { popup: popupInstance, cancel: false, animation: animModel, event: e || null };\n        this.trigger('close', eventArgs, function (eventArgs) {\n            if (!isNullOrUndefined(_this.popupObj) &&\n                !isNullOrUndefined(_this.popupObj.element.querySelector('.e-fixed-head'))) {\n                var fixedHeader = _this.popupObj.element.querySelector('.e-fixed-head');\n                fixedHeader.parentNode.removeChild(fixedHeader);\n                _this.fixedHeaderElement = null;\n            }\n            if (!eventArgs.cancel) {\n                if (_this.getModuleName() === 'autocomplete') {\n                    _this.rippleFun();\n                }\n                if (_this.isPopupOpen) {\n                    _this.popupObj.hide(new Animation(eventArgs.animation));\n                }\n                else {\n                    _this.destroyPopup();\n                }\n            }\n        });\n        if (this.isReact && this.isFiltering() && this.itemTemplate != null) {\n            this.actionCompleteData.ulElement = this.ulElement.cloneNode(true);\n        }\n        var dataSourceCount;\n        if (this.dataSource instanceof DataManager) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            dataSourceCount = this.virtualGroupDataSource && this.virtualGroupDataSource.length ? this.virtualGroupDataSource.length : 0;\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            dataSourceCount = this.dataSource && this.dataSource.length ? this.dataSource.length : 0;\n        }\n        if (this.enableVirtualization && this.isFiltering() && this.value != null && isFilterValue && this.totalItemCount !== dataSourceCount) {\n            this.updateInitialData();\n            this.checkAndResetCache();\n        }\n    };\n    DropDownList.prototype.updateInitialData = function () {\n        var currentData = this.selectData;\n        var ulElement = this.renderItems(currentData, this.fields);\n        this.list.scrollTop = 0;\n        this.virtualListInfo = {\n            currentPageNumber: null,\n            direction: null,\n            sentinelInfo: {},\n            offsets: {},\n            startIndex: 0,\n            endIndex: 0,\n        };\n        if (this.getModuleName() === 'combobox') {\n            this.typedString = \"\";\n        }\n        this.previousStartIndex = 0;\n        this.previousEndIndex = 0;\n        if (this.dataSource instanceof DataManager) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            this.totalItemCount = this.dataCount = this.virtualGroupDataSource && this.virtualGroupDataSource.length ? this.virtualGroupDataSource.length : 0;\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            this.totalItemCount = this.dataCount = this.dataSource && this.dataSource.length ? this.dataSource.length : 0;\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (this.list.getElementsByClassName('e-virtual-ddl')[0]) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            this.list.getElementsByClassName('e-virtual-ddl')[0].style = this.GetVirtualTrackHeight();\n        }\n        if (this.getModuleName() !== 'autocomplete' && this.totalItemCount != 0 && this.totalItemCount > (this.itemCount * 2)) {\n            this.getSkeletonCount();\n        }\n        this.UpdateSkeleton();\n        this.listData = currentData;\n        this.updateActionCompleteDataValues(ulElement, currentData);\n        this.liCollections = this.list.querySelectorAll('.e-list-item');\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (this.list.getElementsByClassName('e-virtual-ddl-content')[0]) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            this.list.getElementsByClassName('e-virtual-ddl-content')[0].style = this.getTransformValues();\n        }\n    };\n    DropDownList.prototype.destroyPopup = function () {\n        this.isPopupOpen = false;\n        this.isFilterFocus = false;\n        if (this.popupObj) {\n            this.popupObj.destroy();\n            detach(this.popupObj.element);\n        }\n    };\n    DropDownList.prototype.clickOnBackIcon = function () {\n        this.hidePopup();\n        this.focusIn();\n    };\n    /**\n     * To Initialize the control rendering\n     *\n     * @private\n     * @returns {void}\n     */\n    DropDownList.prototype.render = function () {\n        this.preselectedIndex = !isNullOrUndefined(this.index) ? this.index : null;\n        if (this.element.tagName === 'INPUT') {\n            this.inputElement = this.element;\n            if (isNullOrUndefined(this.inputElement.getAttribute('role'))) {\n                this.inputElement.setAttribute('role', 'combobox');\n            }\n            if (isNullOrUndefined(this.inputElement.getAttribute('type'))) {\n                this.inputElement.setAttribute('type', 'text');\n            }\n            this.inputElement.setAttribute('aria-expanded', 'false');\n        }\n        else {\n            this.inputElement = this.createElement('input', { attrs: { role: 'combobox', type: 'text' } });\n            if (this.element.tagName !== this.getNgDirective()) {\n                this.element.style.display = 'none';\n            }\n            this.element.parentElement.insertBefore(this.inputElement, this.element);\n            this.preventTabIndex(this.inputElement);\n        }\n        var updatedCssClassValues = this.cssClass;\n        if (!isNullOrUndefined(this.cssClass) && this.cssClass !== '') {\n            updatedCssClassValues = (this.cssClass.replace(/\\s+/g, ' ')).trim();\n        }\n        if (!isNullOrUndefined(closest(this.element, 'fieldset')) && closest(this.element, 'fieldset').disabled) {\n            this.enabled = false;\n        }\n        this.inputWrapper = Input.createInput({\n            element: this.inputElement,\n            buttons: this.isPopupButton() ? [dropDownListClasses.icon] : null,\n            floatLabelType: this.floatLabelType,\n            properties: {\n                readonly: this.getModuleName() === 'dropdownlist' ? true : this.readonly,\n                placeholder: this.placeholder,\n                cssClass: updatedCssClassValues,\n                enabled: this.enabled,\n                enableRtl: this.enableRtl,\n                showClearButton: this.showClearButton\n            }\n        }, this.createElement);\n        if (this.element.tagName === this.getNgDirective()) {\n            this.element.appendChild(this.inputWrapper.container);\n        }\n        else {\n            this.inputElement.parentElement.insertBefore(this.element, this.inputElement);\n        }\n        this.hiddenElement = this.createElement('select', {\n            attrs: { 'aria-hidden': 'true', 'aria-label': this.getModuleName(), 'tabindex': '-1', 'class': dropDownListClasses.hiddenElement }\n        });\n        prepend([this.hiddenElement], this.inputWrapper.container);\n        this.validationAttribute(this.element, this.hiddenElement);\n        this.setReadOnly();\n        this.setFields();\n        this.inputWrapper.container.style.width = formatUnit(this.width);\n        this.inputWrapper.container.classList.add('e-ddl');\n        if (this.floatLabelType === 'Auto') {\n            Input.calculateWidth(this.inputElement, this.inputWrapper.container);\n        }\n        if (!isNullOrUndefined(this.inputWrapper.buttons[0]) && this.inputWrapper.container.getElementsByClassName('e-float-text-content')[0] && this.floatLabelType !== 'Never') {\n            this.inputWrapper.container.getElementsByClassName('e-float-text-content')[0].classList.add('e-icon');\n        }\n        this.wireEvent();\n        this.tabIndex = this.element.hasAttribute('tabindex') ? this.element.getAttribute('tabindex') : '0';\n        this.element.removeAttribute('tabindex');\n        var id = this.element.getAttribute('id') ? this.element.getAttribute('id') : getUniqueID('ej2_dropdownlist');\n        this.element.id = id;\n        this.hiddenElement.id = id + '_hidden';\n        this.targetElement().setAttribute('tabindex', this.tabIndex);\n        if ((this.getModuleName() === 'autocomplete' || this.getModuleName() === 'combobox') && !this.readonly) {\n            this.inputElement.setAttribute('aria-label', this.getModuleName());\n        }\n        else if (this.getModuleName() === 'dropdownlist') {\n            attributes(this.targetElement(), { 'aria-label': this.getModuleName() });\n            this.inputElement.setAttribute('aria-label', this.getModuleName());\n            this.inputElement.setAttribute('aria-expanded', 'false');\n            this.inputElement.setAttribute('aria-controls', this.element.id + '_popups');\n        }\n        attributes(this.targetElement(), this.getAriaAttributes());\n        this.updateDataAttribute(this.htmlAttributes);\n        this.setHTMLAttributes();\n        if (this.targetElement() === this.inputElement) {\n            this.inputElement.removeAttribute('aria-labelledby');\n        }\n        if (this.value !== null || this.activeIndex !== null || this.text !== null) {\n            if (this.enableVirtualization) {\n                this.listItemHeight = this.getListHeight();\n                this.getSkeletonCount();\n                this.updateVirtualizationProperties(this.itemCount, this.allowFiltering);\n            }\n            this.initValue();\n            this.selectedValueInfo = this.viewPortInfo;\n            if (this.enableVirtualization) {\n                this.activeIndex = this.activeIndex + this.skeletonCount;\n            }\n        }\n        else if (this.element.tagName === 'SELECT' && this.element.options[0]) {\n            var selectElement = this.element;\n            this.value = selectElement.options[selectElement.selectedIndex].value;\n            this.text = isNullOrUndefined(this.value) ? null : selectElement.options[selectElement.selectedIndex].textContent;\n            this.initValue();\n        }\n        this.setEnabled();\n        this.preventTabIndex(this.element);\n        if (!this.enabled) {\n            this.targetElement().tabIndex = -1;\n        }\n        this.initial = false;\n        this.element.style.opacity = '';\n        this.inputElement.onselect = function (e) {\n            e.stopImmediatePropagation();\n        };\n        this.inputElement.onchange = function (e) {\n            e.stopImmediatePropagation();\n        };\n        if (this.element.hasAttribute('autofocus')) {\n            this.focusIn();\n        }\n        if (!isNullOrUndefined(this.text)) {\n            this.inputElement.setAttribute('value', this.text);\n        }\n        if (this.element.hasAttribute('data-val')) {\n            this.element.setAttribute('data-val', 'false');\n        }\n        var floatLabelElement = this.inputWrapper.container.getElementsByClassName('e-float-text')[0];\n        if (!isNullOrUndefined(this.element.id) && this.element.id !== '' && !isNullOrUndefined(floatLabelElement)) {\n            floatLabelElement.id = 'label_' + this.element.id.replace(/ /g, '_');\n            attributes(this.inputElement, { 'aria-labelledby': floatLabelElement.id });\n        }\n        this.renderComplete();\n        this.listItemHeight = this.getListHeight();\n        this.getSkeletonCount();\n        if (this.enableVirtualization) {\n            this.updateVirtualizationProperties(this.itemCount, this.allowFiltering);\n        }\n        this.viewPortInfo.startIndex = this.virtualItemStartIndex = 0;\n        this.viewPortInfo.endIndex = this.virtualItemEndIndex = this.viewPortInfo.startIndex > 0 ? this.viewPortInfo.endIndex : this.itemCount;\n    };\n    DropDownList.prototype.getListHeight = function () {\n        var listParent = this.createElement('div', {\n            className: 'e-dropdownbase'\n        });\n        var item = this.createElement('li', {\n            className: 'e-list-item'\n        });\n        var listParentHeight = formatUnit(this.popupHeight);\n        listParent.style.height = (parseInt(listParentHeight, 10)).toString() + 'px';\n        listParent.appendChild(item);\n        document.body.appendChild(listParent);\n        this.virtualListHeight = listParent.getBoundingClientRect().height;\n        var listItemHeight = Math.ceil(item.getBoundingClientRect().height);\n        listParent.remove();\n        return listItemHeight;\n    };\n    DropDownList.prototype.setFooterTemplate = function (popupEle) {\n        var compiledString;\n        if (this.footer) {\n            if (this.isReact && typeof this.footerTemplate === 'function') {\n                this.clearTemplate(['footerTemplate']);\n            }\n            else {\n                this.footer.innerHTML = '';\n            }\n        }\n        else {\n            this.footer = this.createElement('div');\n            addClass([this.footer], dropDownListClasses.footer);\n        }\n        var footercheck = this.dropdownCompiler(this.footerTemplate);\n        if (typeof this.footerTemplate !== 'function' && footercheck) {\n            compiledString = compile(select(this.footerTemplate, document).innerHTML.trim());\n        }\n        else {\n            compiledString = compile(this.footerTemplate);\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var footerCompTemp = compiledString({}, this, 'footerTemplate', this.footerTemplateId, this.isStringTemplate, null, this.footer);\n        if (footerCompTemp && footerCompTemp.length > 0) {\n            append(footerCompTemp, this.footer);\n        }\n        append([this.footer], popupEle);\n    };\n    DropDownList.prototype.setHeaderTemplate = function (popupEle) {\n        var compiledString;\n        if (this.header) {\n            this.header.innerHTML = '';\n        }\n        else {\n            this.header = this.createElement('div');\n            addClass([this.header], dropDownListClasses.header);\n        }\n        var headercheck = this.dropdownCompiler(this.headerTemplate);\n        if (typeof this.headerTemplate !== 'function' && headercheck) {\n            compiledString = compile(select(this.headerTemplate, document).innerHTML.trim());\n        }\n        else {\n            compiledString = compile(this.headerTemplate);\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var headerCompTemp = compiledString({}, this, 'headerTemplate', this.headerTemplateId, this.isStringTemplate, null, this.header);\n        if (headerCompTemp && headerCompTemp.length) {\n            append(headerCompTemp, this.header);\n        }\n        var contentEle = popupEle.querySelector('div.e-content');\n        popupEle.insertBefore(this.header, contentEle);\n    };\n    /**\n     * Sets the enabled state to DropDownBase.\n     *\n     * @returns {void}\n     */\n    DropDownList.prototype.setEnabled = function () {\n        this.element.setAttribute('aria-disabled', (this.enabled) ? 'false' : 'true');\n    };\n    DropDownList.prototype.setOldText = function (text) {\n        this.text = text;\n    };\n    DropDownList.prototype.setOldValue = function (value) {\n        this.value = value;\n    };\n    DropDownList.prototype.refreshPopup = function () {\n        if (!isNullOrUndefined(this.popupObj) && document.body.contains(this.popupObj.element) &&\n            ((this.allowFiltering && !(Browser.isDevice && this.isFilterLayout())) || this.getModuleName() === 'autocomplete')) {\n            removeClass([this.popupObj.element], 'e-popup-close');\n            this.popupObj.refreshPosition(this.inputWrapper.container);\n            this.popupObj.resolveCollision();\n        }\n    };\n    DropDownList.prototype.checkData = function (newProp) {\n        if (newProp.dataSource && !isNullOrUndefined(Object.keys(newProp.dataSource)) && this.itemTemplate && this.allowFiltering &&\n            !(this.isListSearched && (newProp.dataSource instanceof DataManager))) {\n            this.list = null;\n            this.actionCompleteData = { ulElement: null, list: null, isUpdated: false };\n        }\n        this.isListSearched = false;\n        var isChangeValue = Object.keys(newProp).indexOf('value') !== -1 && isNullOrUndefined(newProp.value);\n        var isChangeText = Object.keys(newProp).indexOf('text') !== -1 && isNullOrUndefined(newProp.text);\n        if (this.getModuleName() !== 'autocomplete' && this.allowFiltering && (isChangeValue || isChangeText)) {\n            this.itemData = null;\n        }\n        if (this.allowFiltering && newProp.dataSource && !isNullOrUndefined(Object.keys(newProp.dataSource))) {\n            this.actionCompleteData = { ulElement: null, list: null, isUpdated: false };\n            this.actionData = this.actionCompleteData;\n        }\n        else if (this.allowFiltering && newProp.query && !isNullOrUndefined(Object.keys(newProp.query))) {\n            this.actionCompleteData = this.getModuleName() === 'combobox' ?\n                { ulElement: null, list: null, isUpdated: false } : this.actionCompleteData;\n            this.actionData = this.actionCompleteData;\n        }\n    };\n    DropDownList.prototype.updateDataSource = function (props) {\n        if (this.inputElement.value !== '' || (!isNullOrUndefined(props) && (isNullOrUndefined(props.dataSource)\n            || (!(props.dataSource instanceof DataManager) && props.dataSource.length === 0)))) {\n            this.clearAll(null, props);\n        }\n        if ((this.fields.groupBy && props.fields) && !this.isGroupChecking && this.list) {\n            EventHandler.remove(this.list, 'scroll', this.setFloatingHeader);\n            EventHandler.add(this.list, 'scroll', this.setFloatingHeader, this);\n        }\n        if (!(!isNullOrUndefined(props) && (isNullOrUndefined(props.dataSource)\n            || (!(props.dataSource instanceof DataManager) && props.dataSource.length === 0))) || !(Array.isArray(props.dataSource) && props.dataSource.length === 0)) {\n            this.typedString = '';\n            this.resetList(this.dataSource);\n        }\n        if (!this.isCustomFilter && !this.isFilterFocus && document.activeElement !== this.filterInput) {\n            this.checkCustomValue();\n        }\n    };\n    DropDownList.prototype.checkCustomValue = function () {\n        this.itemData = this.getDataByValue(this.value);\n        var dataItem = this.getItemData();\n        this.setProperties({ 'text': dataItem.text, 'value': dataItem.value });\n    };\n    DropDownList.prototype.updateInputFields = function () {\n        if (this.getModuleName() === 'dropdownlist') {\n            Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);\n        }\n    };\n    /**\n     * Dynamically change the value of properties.\n     *\n     * @private\n     * @param {DropDownListModel} newProp - Returns the dynamic property value of the component.\n     * @param {DropDownListModel} oldProp - Returns the previous previous value of the component.\n     * @returns {void}\n     */\n    DropDownList.prototype.onPropertyChanged = function (newProp, oldProp) {\n        var _this = this;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (!isNullOrUndefined(newProp.dataSource) && !this.isTouched && (isNullOrUndefined(newProp.value) && isNullOrUndefined(newProp.index)) && !isNullOrUndefined(this.preselectedIndex)) {\n            newProp.index = this.preselectedIndex;\n        }\n        if (!isNullOrUndefined(newProp.value) || !isNullOrUndefined(newProp.index)) {\n            this.isTouched = true;\n        }\n        if (this.getModuleName() === 'dropdownlist') {\n            this.checkData(newProp);\n            this.setUpdateInitial(['fields', 'query', 'dataSource'], newProp);\n        }\n        var _loop_1 = function (prop) {\n            switch (prop) {\n                case 'query':\n                case 'dataSource':\n                    this_1.getSkeletonCount();\n                    this_1.checkAndResetCache();\n                    break;\n                case 'htmlAttributes':\n                    this_1.setHTMLAttributes();\n                    break;\n                case 'width':\n                    this_1.setEleWidth(newProp.width);\n                    Input.calculateWidth(this_1.inputElement, this_1.inputWrapper.container);\n                    break;\n                case 'placeholder':\n                    Input.setPlaceholder(newProp.placeholder, this_1.inputElement);\n                    break;\n                case 'filterBarPlaceholder':\n                    if (this_1.filterInput) {\n                        Input.setPlaceholder(newProp.filterBarPlaceholder, this_1.filterInput);\n                    }\n                    break;\n                case 'readonly':\n                    if (this_1.getModuleName() !== 'dropdownlist') {\n                        Input.setReadonly(newProp.readonly, this_1.inputElement);\n                    }\n                    this_1.setReadOnly();\n                    break;\n                case 'cssClass':\n                    this_1.setCssClass(newProp.cssClass, oldProp.cssClass);\n                    Input.calculateWidth(this_1.inputElement, this_1.inputWrapper.container);\n                    break;\n                case 'enableRtl':\n                    this_1.setEnableRtl();\n                    break;\n                case 'enabled':\n                    this_1.setEnable();\n                    break;\n                case 'text':\n                    if (newProp.text === null) {\n                        this_1.clearAll();\n                        break;\n                    }\n                    if (this_1.enableVirtualization) {\n                        this_1.updateValues();\n                        this_1.updateInputFields();\n                        this_1.notify(\"setCurrentViewDataAsync\", {\n                            module: \"VirtualScroll\",\n                        });\n                        break;\n                    }\n                    if (!this_1.list) {\n                        if (this_1.dataSource instanceof DataManager) {\n                            this_1.initRemoteRender = true;\n                        }\n                        this_1.renderList();\n                    }\n                    if (!this_1.initRemoteRender) {\n                        var li = this_1.getElementByText(newProp.text);\n                        if (!this_1.checkValidLi(li)) {\n                            if (this_1.liCollections && this_1.liCollections.length === 100 &&\n                                this_1.getModuleName() === 'autocomplete' && this_1.listData.length > 100) {\n                                this_1.setSelectionData(newProp.text, oldProp.text, 'text');\n                            }\n                            else if (newProp.text && this_1.dataSource instanceof DataManager) {\n                                var listLength_1 = this_1.getItems().length;\n                                var checkField = isNullOrUndefined(this_1.fields.text) ? this_1.fields.value : this_1.fields.text;\n                                this_1.typedString = '';\n                                this_1.dataSource.executeQuery(this_1.getQuery(this_1.query).where(new Predicate(checkField, 'equal', newProp.text)))\n                                    .then(function (e) {\n                                    if (e.result.length > 0) {\n                                        _this.addItem(e.result, listLength_1);\n                                        _this.updateValues();\n                                    }\n                                    else {\n                                        _this.setOldText(oldProp.text);\n                                    }\n                                });\n                            }\n                            else if (this_1.getModuleName() === 'autocomplete') {\n                                this_1.setInputValue(newProp, oldProp);\n                            }\n                            else {\n                                this_1.setOldText(oldProp.text);\n                            }\n                        }\n                        this_1.updateInputFields();\n                    }\n                    break;\n                case 'value':\n                    if (newProp.value === null) {\n                        this_1.clearAll();\n                        break;\n                    }\n                    if (this_1.enableVirtualization) {\n                        this_1.updateValues();\n                        this_1.updateInputFields();\n                        this_1.notify(\"setCurrentViewDataAsync\", {\n                            module: \"VirtualScroll\",\n                        });\n                        this_1.preventChange = this_1.isAngular && this_1.preventChange ? !this_1.preventChange : this_1.preventChange;\n                        break;\n                    }\n                    this_1.notify('beforeValueChange', { newProp: newProp }); // gird component value type change\n                    if (!this_1.list) {\n                        if (this_1.dataSource instanceof DataManager) {\n                            this_1.initRemoteRender = true;\n                        }\n                        this_1.renderList();\n                    }\n                    if (!this_1.initRemoteRender) {\n                        var item = this_1.getElementByValue(newProp.value);\n                        if (!this_1.checkValidLi(item)) {\n                            if (this_1.liCollections && this_1.liCollections.length === 100 &&\n                                this_1.getModuleName() === 'autocomplete' && this_1.listData.length > 100) {\n                                this_1.setSelectionData(newProp.value, oldProp.value, 'value');\n                            }\n                            else if (newProp.value && this_1.dataSource instanceof DataManager) {\n                                var listLength_2 = this_1.getItems().length;\n                                var checkField = isNullOrUndefined(this_1.fields.value) ? this_1.fields.text : this_1.fields.value;\n                                this_1.typedString = '';\n                                this_1.dataSource.executeQuery(this_1.getQuery(this_1.query).where(new Predicate(checkField, 'equal', newProp.value)))\n                                    .then(function (e) {\n                                    if (e.result.length > 0) {\n                                        _this.addItem(e.result, listLength_2);\n                                        _this.updateValues();\n                                    }\n                                    else {\n                                        _this.setOldValue(oldProp.value);\n                                    }\n                                });\n                            }\n                            else if (this_1.getModuleName() === 'autocomplete') {\n                                this_1.setInputValue(newProp, oldProp);\n                            }\n                            else {\n                                this_1.setOldValue(oldProp.value);\n                            }\n                        }\n                        this_1.updateInputFields();\n                        this_1.preventChange = this_1.isAngular && this_1.preventChange ? !this_1.preventChange : this_1.preventChange;\n                    }\n                    break;\n                case 'index':\n                    if (newProp.index === null) {\n                        this_1.clearAll();\n                        break;\n                    }\n                    if (!this_1.list) {\n                        if (this_1.dataSource instanceof DataManager) {\n                            this_1.initRemoteRender = true;\n                        }\n                        this_1.renderList();\n                    }\n                    if (!this_1.initRemoteRender && this_1.liCollections) {\n                        var element = this_1.liCollections[newProp.index];\n                        if (!this_1.checkValidLi(element)) {\n                            if (this_1.liCollections && this_1.liCollections.length === 100 &&\n                                this_1.getModuleName() === 'autocomplete' && this_1.listData.length > 100) {\n                                this_1.setSelectionData(newProp.index, oldProp.index, 'index');\n                            }\n                            else {\n                                this_1.index = oldProp.index;\n                            }\n                        }\n                        this_1.updateInputFields();\n                    }\n                    break;\n                case 'footerTemplate':\n                    if (this_1.popupObj) {\n                        this_1.setFooterTemplate(this_1.popupObj.element);\n                    }\n                    break;\n                case 'headerTemplate':\n                    if (this_1.popupObj) {\n                        this_1.setHeaderTemplate(this_1.popupObj.element);\n                    }\n                    break;\n                case 'valueTemplate':\n                    if (!isNullOrUndefined(this_1.itemData) && this_1.valueTemplate !== null) {\n                        this_1.setValueTemplate();\n                    }\n                    break;\n                case 'allowFiltering':\n                    if (this_1.allowFiltering) {\n                        this_1.actionCompleteData = {\n                            ulElement: this_1.ulElement,\n                            list: this_1.listData, isUpdated: true\n                        };\n                        this_1.actionData = this_1.actionCompleteData;\n                        this_1.updateSelectElementData(this_1.allowFiltering);\n                    }\n                    break;\n                case 'floatLabelType':\n                    Input.removeFloating(this_1.inputWrapper);\n                    Input.addFloating(this_1.inputElement, newProp.floatLabelType, this_1.placeholder, this_1.createElement);\n                    if (!isNullOrUndefined(this_1.inputWrapper.buttons[0]) && this_1.inputWrapper.container.getElementsByClassName('e-float-text-overflow')[0] && this_1.floatLabelType !== 'Never') {\n                        this_1.inputWrapper.container.getElementsByClassName('e-float-text-overflow')[0].classList.add('e-icon');\n                    }\n                    break;\n                case 'showClearButton':\n                    if (!this_1.inputWrapper.clearButton) {\n                        Input.setClearButton(newProp.showClearButton, this_1.inputElement, this_1.inputWrapper, null, this_1.createElement);\n                        this_1.bindClearEvent();\n                    }\n                    break;\n                default:\n                    {\n                        // eslint-disable-next-line max-len\n                        var ddlProps = this_1.getPropObject(prop, newProp, oldProp);\n                        _super.prototype.onPropertyChanged.call(this_1, ddlProps.newProperty, ddlProps.oldProperty);\n                    }\n                    break;\n            }\n        };\n        var this_1 = this;\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            _loop_1(prop);\n        }\n    };\n    DropDownList.prototype.checkValidLi = function (element) {\n        if (this.isValidLI(element)) {\n            this.setSelection(element, null);\n            return true;\n        }\n        return false;\n    };\n    DropDownList.prototype.setSelectionData = function (newProp, oldProp, prop) {\n        var _this = this;\n        var li;\n        this.updateListValues = function () {\n            if (prop === 'text') {\n                li = _this.getElementByText(newProp);\n                if (!_this.checkValidLi(li)) {\n                    _this.setOldText(oldProp);\n                }\n            }\n            else if (prop === 'value') {\n                li = _this.getElementByValue(newProp);\n                if (!_this.checkValidLi(li)) {\n                    _this.setOldValue(oldProp);\n                }\n            }\n            else if (prop === 'index') {\n                li = _this.liCollections[newProp];\n                if (!_this.checkValidLi(li)) {\n                    _this.index = oldProp;\n                }\n            }\n        };\n    };\n    DropDownList.prototype.updatePopupState = function () {\n        if (this.beforePopupOpen) {\n            this.beforePopupOpen = false;\n            this.showPopup();\n        }\n    };\n    DropDownList.prototype.setReadOnly = function () {\n        if (this.readonly) {\n            addClass([this.inputWrapper.container], ['e-readonly']);\n        }\n        else {\n            removeClass([this.inputWrapper.container], ['e-readonly']);\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    DropDownList.prototype.setInputValue = function (newProp, oldProp) {\n    };\n    DropDownList.prototype.setCssClass = function (newClass, oldClass) {\n        if (!isNullOrUndefined(oldClass)) {\n            oldClass = (oldClass.replace(/\\s+/g, ' ')).trim();\n        }\n        if (!isNullOrUndefined(newClass)) {\n            newClass = (newClass.replace(/\\s+/g, ' ')).trim();\n        }\n        Input.setCssClass(newClass, [this.inputWrapper.container], oldClass);\n        if (this.popupObj) {\n            Input.setCssClass(newClass, [this.popupObj.element], oldClass);\n        }\n    };\n    /**\n     * Return the module name of this component.\n     *\n     * @private\n     * @returns {string} Return the module name of this component.\n     */\n    DropDownList.prototype.getModuleName = function () {\n        return 'dropdownlist';\n    };\n    /* eslint-disable valid-jsdoc, jsdoc/require-param */\n    /**\n     * Opens the popup that displays the list of items.\n     *\n     * @returns {void}\n     */\n    DropDownList.prototype.showPopup = function (e) {\n        /* eslint-enable valid-jsdoc, jsdoc/require-param */\n        if (!this.enabled) {\n            return;\n        }\n        if (this.isReact && this.getModuleName() === 'combobox' && this.itemTemplate && this.isCustomFilter && this.isAddNewItemTemplate) {\n            this.renderList();\n            this.isAddNewItemTemplate = false;\n        }\n        if (this.isFiltering() && this.dataSource instanceof DataManager && (this.actionData.list !== this.actionCompleteData.list) &&\n            this.actionData.list && this.actionData.ulElement) {\n            this.actionCompleteData = this.actionData;\n            this.onActionComplete(this.actionCompleteData.ulElement, this.actionCompleteData.list, null, true);\n        }\n        if (this.beforePopupOpen) {\n            this.refreshPopup();\n            return;\n        }\n        this.beforePopupOpen = true;\n        if (this.isFiltering() && !this.isActive && this.actionCompleteData.list && this.actionCompleteData.list[0]) {\n            this.isActive = true;\n            this.onActionComplete(this.actionCompleteData.ulElement, this.actionCompleteData.list, null, true);\n        }\n        else if (isNullOrUndefined(this.list) || !isUndefined(this.list) && (this.list.classList.contains(dropDownBaseClasses.noData) ||\n            this.list.querySelectorAll('.' + dropDownBaseClasses.li).length <= 0)) {\n            this.renderList(e);\n        }\n        if (this.enableVirtualization && this.listData && this.listData.length) {\n            if (!isNullOrUndefined(this.value) && (this.getModuleName() === 'dropdownlist' || this.getModuleName() === 'combobox')) {\n                this.removeHover();\n            }\n            if (!this.beforePopupOpen) {\n                this.notify(\"setCurrentViewDataAsync\", {\n                    module: \"VirtualScroll\",\n                });\n            }\n        }\n        if (this.beforePopupOpen) {\n            this.invokeRenderPopup(e);\n        }\n        if (this.enableVirtualization && !this.allowFiltering && this.selectedValueInfo != null && this.selectedValueInfo.startIndex > 0 && this.value != null) {\n            this.notify(\"dataProcessAsync\", {\n                module: \"VirtualScroll\",\n                isOpen: true,\n            });\n        }\n    };\n    DropDownList.prototype.invokeRenderPopup = function (e) {\n        if (Browser.isDevice && this.isFilterLayout()) {\n            // eslint-disable-next-line @typescript-eslint/no-this-alias\n            var proxy_2 = this;\n            window.onpopstate = function () {\n                proxy_2.hidePopup();\n            };\n            history.pushState({}, '');\n        }\n        if (!isNullOrUndefined(this.list) && (!isNullOrUndefined(this.list.children[0]) ||\n            this.list.classList.contains(dropDownBaseClasses.noData))) {\n            this.renderPopup(e);\n        }\n    };\n    DropDownList.prototype.renderHightSearch = function () {\n        // update high light search\n    };\n    /* eslint-disable valid-jsdoc, jsdoc/require-param */\n    /**\n     * Hides the popup if it is in an open state.\n     *\n     * @returns {void}\n     */\n    DropDownList.prototype.hidePopup = function (e) {\n        /* eslint-enable valid-jsdoc, jsdoc/require-param */\n        if (this.isEscapeKey && this.getModuleName() === 'dropdownlist') {\n            if (!isNullOrUndefined(this.inputElement)) {\n                Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);\n            }\n            this.isEscapeKey = false;\n            if (!isNullOrUndefined(this.index)) {\n                var element = this.findListElement(this.ulElement, 'li', 'data-value', this.value);\n                this.selectedLI = this.liCollections[this.index] || element;\n                if (this.selectedLI) {\n                    this.updateSelectedItem(this.selectedLI, null, true);\n                    if (this.valueTemplate && this.itemData !== null) {\n                        this.setValueTemplate();\n                    }\n                }\n            }\n            else {\n                this.resetSelection();\n            }\n        }\n        this.closePopup(0, e);\n        var dataItem = this.getItemData();\n        var isSelectVal = !isNullOrUndefined(this.selectedLI);\n        if (isSelectVal && this.enableVirtualization && this.selectedLI.classList) {\n            isSelectVal = this.selectedLI.classList.contains('e-active');\n        }\n        if (this.inputElement && this.inputElement.value.trim() === '' && !this.isInteracted && (this.isSelectCustom ||\n            isSelectVal && this.inputElement.value !== dataItem.text)) {\n            this.isSelectCustom = false;\n            this.clearAll(e);\n        }\n    };\n    /* eslint-disable valid-jsdoc, jsdoc/require-param */\n    /**\n     * Sets the focus on the component for interaction.\n     *\n     * @returns {void}\n     */\n    DropDownList.prototype.focusIn = function (e) {\n        if (!this.enabled) {\n            return;\n        }\n        if (this.targetElement().classList.contains(dropDownListClasses.disable)) {\n            return;\n        }\n        var isFocused = false;\n        if (this.preventFocus && Browser.isDevice) {\n            this.inputWrapper.container.tabIndex = 1;\n            this.inputWrapper.container.focus();\n            this.preventFocus = false;\n            isFocused = true;\n        }\n        if (!isFocused) {\n            this.targetElement().focus();\n        }\n        addClass([this.inputWrapper.container], [dropDownListClasses.inputFocus]);\n        this.onFocus(e);\n        if (this.floatLabelType === 'Auto') {\n            Input.calculateWidth(this.inputElement, this.inputWrapper.container);\n        }\n    };\n    /**\n     * Moves the focus from the component if the component is already focused.\n     *\n     * @returns {void}\n     */\n    DropDownList.prototype.focusOut = function (e) {\n        /* eslint-enable valid-jsdoc, jsdoc/require-param */\n        if (!this.enabled) {\n            return;\n        }\n        if (!this.enableVirtualization && (this.getModuleName() === 'combobox' || this.getModuleName() === 'autocomplete')) {\n            this.isTyped = true;\n        }\n        this.hidePopup(e);\n        if (this.targetElement()) {\n            this.targetElement().blur();\n        }\n        removeClass([this.inputWrapper.container], [dropDownListClasses.inputFocus]);\n        if (this.floatLabelType === 'Auto' && this.inputElement.value === '') {\n            Input.calculateWidth(this.inputElement, this.inputWrapper.container);\n        }\n    };\n    /**\n     * Removes the component from the DOM and detaches all its related event handlers. Also it removes the attributes and classes.\n     *\n     * @method destroy\n     * @returns {void}\n     */\n    DropDownList.prototype.destroy = function () {\n        this.isActive = false;\n        resetIncrementalSearchValues(this.element.id);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (this.isReact) {\n            this.clearTemplate();\n        }\n        this.hidePopup();\n        this.unWireEvent();\n        if (this.list) {\n            this.unWireListEvents();\n        }\n        if (this.element && !this.element.classList.contains('e-' + this.getModuleName())) {\n            return;\n        }\n        if (this.inputElement) {\n            var attrArray = ['readonly', 'aria-disabled', 'placeholder', 'aria-labelledby',\n                'aria-expanded', 'autocomplete', 'aria-readonly', 'autocapitalize',\n                'spellcheck', 'aria-autocomplete', 'aria-live', 'aria-describedby', 'aria-label'];\n            for (var i = 0; i < attrArray.length; i++) {\n                this.inputElement.removeAttribute(attrArray[i]);\n            }\n            this.inputElement.setAttribute('tabindex', this.tabIndex);\n            this.inputElement.classList.remove('e-input');\n            Input.setValue('', this.inputElement, this.floatLabelType, this.showClearButton);\n        }\n        this.element.style.display = 'block';\n        if (this.inputWrapper.container.parentElement.tagName === this.getNgDirective()) {\n            detach(this.inputWrapper.container);\n        }\n        else {\n            this.inputWrapper.container.parentElement.insertBefore(this.element, this.inputWrapper.container);\n            detach(this.inputWrapper.container);\n        }\n        this.hiddenElement = null;\n        this.inputWrapper = null;\n        this.keyboardModule = null;\n        this.ulElement = null;\n        this.list = null;\n        this.popupObj = null;\n        this.popupContentElement = null;\n        this.rippleFun = null;\n        this.selectedLI = null;\n        this.liCollections = null;\n        this.item = null;\n        this.inputWrapper = null;\n        this.footer = null;\n        this.header = null;\n        this.previousSelectedLI = null;\n        this.valueTempElement = null;\n        this.actionData.ulElement = null;\n        if (this.inputElement && !isNullOrUndefined(this.inputElement.onchange)) {\n            this.inputElement.onchange = null;\n        }\n        if (this.isAngular) {\n            this.inputElement = null;\n        }\n        _super.prototype.destroy.call(this);\n    };\n    /* eslint-disable valid-jsdoc, jsdoc/require-returns-description */\n    /**\n     * Gets all the list items bound on this component.\n     *\n     * @returns {Element[]}\n     */\n    DropDownList.prototype.getItems = function () {\n        if (!this.list) {\n            if (this.dataSource instanceof DataManager) {\n                this.initRemoteRender = true;\n            }\n            this.renderList();\n        }\n        return this.ulElement ? _super.prototype.getItems.call(this) : [];\n    };\n    /**\n     * Gets the data Object that matches the given value.\n     *\n     * @param { string | number } value - Specifies the value of the list item.\n     * @returns {Object}\n     */\n    DropDownList.prototype.getDataByValue = function (value) {\n        return _super.prototype.getDataByValue.call(this, value);\n    };\n    /* eslint-enable valid-jsdoc, jsdoc/require-returns-description */\n    /**\n     * Allows you to clear the selected values from the component.\n     *\n     * @returns {void}\n     */\n    DropDownList.prototype.clear = function () {\n        this.value = null;\n    };\n    __decorate$1([\n        Property(null)\n    ], DropDownList.prototype, \"cssClass\", void 0);\n    __decorate$1([\n        Property('100%')\n    ], DropDownList.prototype, \"width\", void 0);\n    __decorate$1([\n        Property(true)\n    ], DropDownList.prototype, \"enabled\", void 0);\n    __decorate$1([\n        Property(false)\n    ], DropDownList.prototype, \"enablePersistence\", void 0);\n    __decorate$1([\n        Property('300px')\n    ], DropDownList.prototype, \"popupHeight\", void 0);\n    __decorate$1([\n        Property('100%')\n    ], DropDownList.prototype, \"popupWidth\", void 0);\n    __decorate$1([\n        Property(null)\n    ], DropDownList.prototype, \"placeholder\", void 0);\n    __decorate$1([\n        Property(null)\n    ], DropDownList.prototype, \"filterBarPlaceholder\", void 0);\n    __decorate$1([\n        Property({})\n    ], DropDownList.prototype, \"htmlAttributes\", void 0);\n    __decorate$1([\n        Property(null)\n    ], DropDownList.prototype, \"query\", void 0);\n    __decorate$1([\n        Property(null)\n    ], DropDownList.prototype, \"valueTemplate\", void 0);\n    __decorate$1([\n        Property(null)\n    ], DropDownList.prototype, \"headerTemplate\", void 0);\n    __decorate$1([\n        Property(null)\n    ], DropDownList.prototype, \"footerTemplate\", void 0);\n    __decorate$1([\n        Property(false)\n    ], DropDownList.prototype, \"allowFiltering\", void 0);\n    __decorate$1([\n        Property(false)\n    ], DropDownList.prototype, \"readonly\", void 0);\n    __decorate$1([\n        Property(false)\n    ], DropDownList.prototype, \"enableVirtualization\", void 0);\n    __decorate$1([\n        Property(null)\n    ], DropDownList.prototype, \"text\", void 0);\n    __decorate$1([\n        Property(null)\n    ], DropDownList.prototype, \"value\", void 0);\n    __decorate$1([\n        Property(null)\n    ], DropDownList.prototype, \"index\", void 0);\n    __decorate$1([\n        Property('Never')\n    ], DropDownList.prototype, \"floatLabelType\", void 0);\n    __decorate$1([\n        Property(false)\n    ], DropDownList.prototype, \"showClearButton\", void 0);\n    __decorate$1([\n        Event()\n    ], DropDownList.prototype, \"filtering\", void 0);\n    __decorate$1([\n        Event()\n    ], DropDownList.prototype, \"change\", void 0);\n    __decorate$1([\n        Event()\n    ], DropDownList.prototype, \"beforeOpen\", void 0);\n    __decorate$1([\n        Event()\n    ], DropDownList.prototype, \"open\", void 0);\n    __decorate$1([\n        Event()\n    ], DropDownList.prototype, \"close\", void 0);\n    __decorate$1([\n        Event()\n    ], DropDownList.prototype, \"blur\", void 0);\n    __decorate$1([\n        Event()\n    ], DropDownList.prototype, \"focus\", void 0);\n    DropDownList = __decorate$1([\n        NotifyPropertyChanges\n    ], DropDownList);\n    return DropDownList;\n}(DropDownBase));\n\n/**\n * export all modules from current location\n */\n\nvar __extends$2 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$2 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar RTL = 'e-rtl';\nvar DROPDOWNTREE = 'e-ddt';\nvar HIDDENELEMENT = 'e-ddt-hidden';\nvar DROPDOWNICON = 'e-input-group-icon e-ddt-icon e-icons';\nvar SHOW_CHIP = 'e-show-chip';\nvar SHOW_CLEAR = 'e-show-clear';\nvar SHOW_DD_ICON = 'e-show-dd-icon';\nvar CHIP_INPUT = 'e-chip-input';\nvar INPUTFOCUS = 'e-input-focus';\nvar INPUTGROUP = 'e-input-group';\nvar ICONANIMATION = 'e-icon-anim';\nvar CLOSEICON_CLASS = 'e-clear-icon e-icons';\nvar CHIP_WRAPPER = 'e-chips-wrapper';\nvar CHIP_COLLECTION = 'e-chips-collection';\nvar CHIP = 'e-chips';\nvar CHIP_CONTENT = 'e-chipcontent';\nvar CHIP_CLOSE = 'e-chips-close';\nvar HIDEICON = 'e-icon-hide';\nvar DDTHIDEICON = 'e-ddt-icon-hide';\nvar POPUP_CLASS = 'e-ddt e-popup';\nvar PARENTITEM = 'e-list-parent';\nvar CONTENT = 'e-popup-content';\nvar DROPDOWN = 'e-dropdown';\nvar DISABLED = 'e-disabled';\nvar ICONS = 'e-icons';\nvar CHECKALLPARENT = 'e-selectall-parent';\nvar CHECKALLHIDE = 'e-hide-selectall';\nvar BIGGER = 'e-bigger';\nvar SMALL = 'e-small';\nvar ALLTEXT = 'e-all-text';\nvar CHECKBOXFRAME = 'e-frame';\nvar CHECK = 'e-check';\nvar CHECKBOXWRAP = 'e-checkbox-wrapper';\nvar FILTERWRAP = 'e-filter-wrap';\nvar DDTICON = 'e-ddt-icon';\nvar FOOTER = 'e-ddt-footer';\nvar HEADER = 'e-ddt-header';\nvar NODATACONTAINER = 'e-ddt-nodata';\nvar NODATA = 'e-no-data';\nvar HEADERTEMPLATE = 'HeaderTemplate';\nvar FOOTERTEMPLATE = 'FooterTemplate';\nvar NORECORDSTEMPLATE = 'NoRecordsTemplate';\nvar ACTIONFAILURETEMPLATE = 'ActionFailureTemplate';\nvar CUSTOMTEMPLATE = 'CustomTemplate';\nvar REMAIN_WRAPPER = 'e-remain';\nvar OVERFLOW_VIEW = 'e-overflow';\nvar SHOW_TEXT = 'e-show-text';\nvar TOTAL_COUNT_WRAPPER = 'e-total-count';\nvar REMAIN_COUNT = 'e-wrap-count';\nvar Fields = /** @__PURE__ @class */ (function (_super) {\n    __extends$2(Fields, _super);\n    function Fields() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate$2([\n        Property('child')\n    ], Fields.prototype, \"child\", void 0);\n    __decorate$2([\n        Property([])\n    ], Fields.prototype, \"dataSource\", void 0);\n    __decorate$2([\n        Property('expanded')\n    ], Fields.prototype, \"expanded\", void 0);\n    __decorate$2([\n        Property('hasChildren')\n    ], Fields.prototype, \"hasChildren\", void 0);\n    __decorate$2([\n        Property('htmlAttributes')\n    ], Fields.prototype, \"htmlAttributes\", void 0);\n    __decorate$2([\n        Property('iconCss')\n    ], Fields.prototype, \"iconCss\", void 0);\n    __decorate$2([\n        Property('imageUrl')\n    ], Fields.prototype, \"imageUrl\", void 0);\n    __decorate$2([\n        Property('parentValue')\n    ], Fields.prototype, \"parentValue\", void 0);\n    __decorate$2([\n        Property(null)\n    ], Fields.prototype, \"query\", void 0);\n    __decorate$2([\n        Property('selectable')\n    ], Fields.prototype, \"selectable\", void 0);\n    __decorate$2([\n        Property('selected')\n    ], Fields.prototype, \"selected\", void 0);\n    __decorate$2([\n        Property(null)\n    ], Fields.prototype, \"tableName\", void 0);\n    __decorate$2([\n        Property('text')\n    ], Fields.prototype, \"text\", void 0);\n    __decorate$2([\n        Property('tooltip')\n    ], Fields.prototype, \"tooltip\", void 0);\n    __decorate$2([\n        Property('value')\n    ], Fields.prototype, \"value\", void 0);\n    return Fields;\n}(ChildProperty));\nvar TreeSettings = /** @__PURE__ @class */ (function (_super) {\n    __extends$2(TreeSettings, _super);\n    function TreeSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate$2([\n        Property(false)\n    ], TreeSettings.prototype, \"autoCheck\", void 0);\n    __decorate$2([\n        Property('Auto')\n    ], TreeSettings.prototype, \"expandOn\", void 0);\n    __decorate$2([\n        Property(false)\n    ], TreeSettings.prototype, \"loadOnDemand\", void 0);\n    return TreeSettings;\n}(ChildProperty));\n/**\n * The Dropdown Tree control allows you to select single or multiple values from hierarchical data in a tree-like structure.\n * It has several out-of-the-box features, such as data binding, check boxes, templates, filter,\n * UI customization, accessibility, and preselected values.\n * ```html\n *  <input type=\"text\" id=\"tree\"></input>\n * ```\n * ```typescript\n *  let ddtObj: DropDownTree = new DropDownTree();\n *  ddtObj.appendTo(\"#tree\");\n * ```\n */\nvar DropDownTree = /** @__PURE__ @class */ (function (_super) {\n    __extends$2(DropDownTree, _super);\n    function DropDownTree(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        _this.filterTimer = null;\n        _this.isFilteredData = false;\n        _this.isFilterRestore = false;\n        // eslint-disable-next-line\n        _this.selectedData = [];\n        _this.filterDelayTime = 300;\n        _this.isClicked = false;\n        // Specifies if the checkAll method has been called\n        _this.isCheckAllCalled = false;\n        _this.isFromFilterChange = false;\n        return _this;\n    }\n    /**\n     * Get the properties to be maintained in the persisted state.\n     *\n     * @returns {string}\n     * @hidden\n     */\n    DropDownTree.prototype.getPersistData = function () {\n        var keyEntity = ['value'];\n        return this.addOnPersist(keyEntity);\n    };\n    DropDownTree.prototype.getLocaleName = function () {\n        return 'drop-down-tree';\n    };\n    /**\n     * Initialize the event handler.\n     *\n     * @returns {void}\n     * @private\n     */\n    DropDownTree.prototype.preRender = function () {\n        this.inputFocus = false;\n        this.isPopupOpen = false;\n        this.isFirstRender = true;\n        this.isInitialized = false;\n        this.currentText = null;\n        this.currentValue = null;\n        this.oldValue = null;\n        this.removeValue = false;\n        this.selectedText = [];\n        this.treeItems = [];\n        this.dataValue = null;\n        this.isNodeSelected = false;\n        this.isDynamicChange = false;\n        this.clearIconWidth = 0;\n        this.headerTemplateId = \"\" + this.element.id + HEADERTEMPLATE;\n        this.footerTemplateId = \"\" + this.element.id + FOOTERTEMPLATE;\n        this.actionFailureTemplateId = \"\" + this.element.id + ACTIONFAILURETEMPLATE;\n        this.noRecordsTemplateId = \"\" + this.element.id + NORECORDSTEMPLATE;\n        this.customTemplateId = \"\" + this.element.id + CUSTOMTEMPLATE;\n        this.keyConfigs = {\n            escape: 'escape',\n            altUp: 'alt+uparrow',\n            altDown: 'alt+downarrow',\n            tab: 'tab',\n            shiftTab: 'shift+tab',\n            end: 'end',\n            enter: 'enter',\n            home: 'home',\n            moveDown: 'downarrow',\n            moveLeft: 'leftarrow',\n            moveRight: 'rightarrow',\n            moveUp: 'uparrow',\n            ctrlDown: 'ctrl+downarrow',\n            ctrlUp: 'ctrl+uparrow',\n            ctrlEnter: 'ctrl+enter',\n            ctrlHome: 'ctrl+home',\n            ctrlEnd: 'ctrl+end',\n            shiftDown: 'shift+downarrow',\n            shiftUp: 'shift+uparrow',\n            shiftEnter: 'shift+enter',\n            shiftHome: 'shift+home',\n            shiftEnd: 'shift+end',\n            csDown: 'ctrl+shift+downarrow',\n            csUp: 'ctrl+shift+uparrow',\n            csEnter: 'ctrl+shift+enter',\n            csHome: 'ctrl+shift+home',\n            csEnd: 'ctrl+shift+end',\n            space: 'space',\n            ctrlA: 'ctrl+A'\n        };\n    };\n    /**\n     * To Initialize the control rendering\n     *\n     * @private\n     * @returns {void}\n     */\n    DropDownTree.prototype.render = function () {\n        var isTree = select('#' + this.element.id + '_tree', document);\n        if (isTree) {\n            var popupDiv = select('#' + this.element.id + '_options', document);\n            detach(popupDiv ? popupDiv : isTree.parentElement);\n        }\n        if (this.element.tagName === 'INPUT') {\n            this.inputEle = this.element;\n            if (isNullOrUndefined(this.inputEle.getAttribute('role'))) {\n                this.inputEle.setAttribute('aria-expanded', 'false');\n                this.inputEle.setAttribute('role', 'combobox');\n                this.inputEle.setAttribute('aria-haspopup', 'tree');\n                this.inputEle.setAttribute('aria-controls', this.element.id + \"_options\");\n            }\n            if (isNullOrUndefined(this.inputEle.getAttribute('type'))) {\n                this.inputEle.setAttribute('type', 'text');\n            }\n        }\n        else {\n            this.inputEle = this.createElement('input', { attrs: { role: 'textbox', type: 'text' } });\n            this.element.parentElement.insertBefore(this.inputEle, this.element);\n        }\n        this.inputObj = Input.createInput({\n            element: this.inputEle,\n            floatLabelType: this.floatLabelType,\n            buttons: this.showDropDownIcon ? [DROPDOWNICON] : null,\n            properties: {\n                readonly: true,\n                placeholder: this.placeholder,\n                enabled: this.enabled,\n                cssClass: this.cssClass,\n                enableRtl: this.enableRtl\n            }\n        }, this.createElement);\n        this.inputWrapper = this.inputObj.container;\n        if (!this.inputWrapper.classList.contains(INPUTGROUP)) {\n            this.inputWrapper.classList.add(INPUTGROUP);\n        }\n        if (this.showDropDownIcon) {\n            this.inputWrapper.classList.add(SHOW_DD_ICON);\n        }\n        if (this.element.tagName === this.getDirective()) {\n            this.element.appendChild(this.inputWrapper);\n        }\n        this.createHiddenElement();\n        this.createClearIcon();\n        this.inputWrapper.classList.add(DROPDOWNTREE);\n        this.setElementWidth(this.width);\n        this.updateDataAttribute();\n        this.setHTMLAttributes();\n        this.setAttributes();\n        this.popupDiv = this.createElement('div', { className: CONTENT });\n        this.popupDiv.classList.add(DROPDOWN);\n        this.tree = this.createElement('div', { id: this.element.id + '_tree' });\n        this.popupDiv.appendChild(this.tree);\n        document.body.appendChild(this.popupDiv);\n        this.wireTreeEvents();\n        addClass([this.popupDiv], DDTHIDEICON);\n        this.renderTree();\n        this.isRemoteData = this.fields.dataSource instanceof DataManager;\n        if (this.allowMultiSelection || this.showCheckBox) {\n            if (this.mode !== 'Delimiter') {\n                this.createChip();\n            }\n            if (!this.wrapText && this.mode !== 'Custom') {\n                this.overFlowWrapper = this.createElement('span', { className: OVERFLOW_VIEW + ' ' + HIDEICON });\n                this.inputWrapper.insertBefore(this.overFlowWrapper, this.hiddenElement);\n                if (this.mode !== 'Box') {\n                    addClass([this.overFlowWrapper], SHOW_TEXT);\n                }\n            }\n        }\n        if (!this.isRemoteData) {\n            this.setTreeValue();\n            this.setTreeText();\n            this.updateHiddenValue();\n            this.setSelectedValue();\n            if (!this.wrapText) {\n                this.updateView();\n            }\n        }\n        this.wireEvents();\n        var firstUl = select('.' + PARENTITEM, this.treeObj.element);\n        if (firstUl && firstUl.getAttribute('aria-multiselectable')) {\n            firstUl.removeAttribute('aria-multiselectable');\n        }\n        this.oldValue = this.value;\n        this.isInitialized = true;\n        this.hasTemplate = this.itemTemplate || this.headerTemplate || this.footerTemplate || this.actionFailureTemplate\n            || this.noRecordsTemplate || this.customTemplate;\n        this.renderComplete();\n    };\n    DropDownTree.prototype.hideCheckAll = function (flag) {\n        var checkAllEle = !isNullOrUndefined(this.popupEle) ? this.popupEle.querySelector('.' + CHECKALLPARENT) : null;\n        if (!isNullOrUndefined(checkAllEle)) {\n            if (flag && !checkAllEle.classList.contains(CHECKALLHIDE)) {\n                addClass([checkAllEle], CHECKALLHIDE);\n            }\n            else if (!flag && checkAllEle.classList.contains(CHECKALLHIDE)) {\n                removeClass([checkAllEle], CHECKALLHIDE);\n            }\n        }\n    };\n    DropDownTree.prototype.renderFilter = function () {\n        this.filterContainer = this.createElement('div', {\n            id: this.element.id + '_filter_wrap',\n            className: FILTERWRAP\n        });\n        var filterInput = this.createElement('input', {\n            id: this.element.id + '_filter',\n            attrs: { autocomplete: 'off', 'aria-label': this.filterBarPlaceholder }\n        });\n        this.filterContainer.appendChild(filterInput);\n        prepend([this.filterContainer], this.popupEle);\n        this.filterObj = new TextBox({\n            value: '',\n            showClearButton: true,\n            placeholder: this.filterBarPlaceholder,\n            input: this.filterChangeHandler.bind(this)\n        });\n        this.filterObj.appendTo('#' + this.element.id + '_filter');\n    };\n    DropDownTree.prototype.filterChangeHandler = function (args) {\n        var _this = this;\n        if (!isNullOrUndefined(args.value)) {\n            window.clearTimeout(this.filterTimer);\n            this.filterTimer = window.setTimeout(function () { _this.filterHandler(args.value, args.event); }, this.filterDelayTime);\n        }\n    };\n    DropDownTree.prototype.isChildObject = function () {\n        if (typeof this.treeObj.fields.child === 'object') {\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    DropDownTree.prototype.filterHandler = function (value, event) {\n        var _this = this;\n        this.isFromFilterChange = true;\n        if (!this.isFilteredData) {\n            if (this.isRemoteData) {\n                this.treeObj.expandedNodes = [];\n            }\n            this.treeData = this.treeObj.getTreeData();\n        }\n        var filterFields = this.cloneFields(this.fields);\n        var args = {\n            cancel: false,\n            preventDefaultAction: false,\n            event: event,\n            text: value,\n            fields: filterFields\n        };\n        this.trigger('filtering', args, function (args) {\n            if (!args.cancel) {\n                var flag = false;\n                var fields = void 0;\n                _this.isFilteredData = true;\n                if (value === '') {\n                    _this.isFilteredData = false;\n                    _this.isFilterRestore = true;\n                    fields = _this.cloneFields(_this.fields);\n                }\n                else if (args.preventDefaultAction) {\n                    fields = args.fields;\n                }\n                else {\n                    if (_this.treeDataType === 1) {\n                        fields = _this.selfReferencefilter(value, args.fields);\n                    }\n                    else {\n                        if (_this.fields.dataSource instanceof DataManager) {\n                            fields = _this.remoteDataFilter(value, args.fields);\n                            fields.child = _this.fields.child;\n                            _this.treeObj.fields = _this.getTreeFields(args.fields);\n                            _this.treeObj.dataBind();\n                            flag = true;\n                        }\n                        else {\n                            fields = _this.nestedFilter(value, args.fields);\n                        }\n                    }\n                }\n                _this.hideCheckAll(_this.isFilteredData);\n                if (flag) {\n                    return;\n                }\n                if (_this.isRemoteData) {\n                    if (_this.isChildObject()) {\n                        fields.child = _this.fields.child;\n                    }\n                    else {\n                        fields = args.fields;\n                    }\n                }\n                _this.treeObj.fields = _this.getTreeFields(fields);\n                _this.treeObj.dataBind();\n                if (_this.hasTemplate && _this.portals && _this.treeObj.portals) {\n                    for (var i = 0; i < _this.treeObj.portals.length; i++) {\n                        if (_this.portals.indexOf(_this.treeObj.portals[i]) == -1) {\n                            _this.portals.push(_this.treeObj.portals[i]);\n                        }\n                    }\n                    if (_this.isReact) {\n                        _this.renderReactTemplates();\n                    }\n                }\n            }\n        });\n    };\n    DropDownTree.prototype.remoteDataFilter = function (value, filteredFields) {\n        var _this = this;\n        filteredFields.dataSource = this.treeData.map(function (item) {\n            return _this.remoteChildFilter(value, item);\n        }).filter(function (filteredChild) {\n            return !isNullOrUndefined(filteredChild);\n        });\n        return filteredFields;\n    };\n    DropDownTree.prototype.remoteChildFilter = function (value, node, isChild, isChildFiltering) {\n        var children = this.isChildObject() ? node['child'] : node[this.fields.child];\n        if (isNullOrUndefined(children)) {\n            return (this.isMatchedNode(value, node, isChild, isChildFiltering)) ? node : null;\n        }\n        var matchedChildren = [];\n        for (var i = 0; i < children.length; i++) {\n            var filteredChild = this.remoteChildFilter(value, children[i], true, true);\n            if (!isNullOrUndefined(filteredChild)) {\n                matchedChildren.push(filteredChild);\n            }\n        }\n        var filteredItems = Object.assign({}, node);\n        isChildFiltering = false;\n        if (matchedChildren.length !== 0) {\n            filteredItems.child = matchedChildren;\n        }\n        else {\n            filteredItems.child = null;\n            filteredItems = (this.isMatchedNode(value, filteredItems)) ? filteredItems : null;\n        }\n        return filteredItems;\n    };\n    DropDownTree.prototype.nestedFilter = function (value, filteredFields) {\n        // eslint-disable-next-line\n        var matchedDataSource = [];\n        for (var i = 0; i < this.treeData.length; i++) {\n            // eslint-disable-next-line\n            var filteredChild = this.nestedChildFilter(value, this.treeData[i]);\n            if (!isNullOrUndefined(filteredChild)) {\n                matchedDataSource.push(filteredChild);\n            }\n        }\n        filteredFields.dataSource = matchedDataSource;\n        return filteredFields;\n    };\n    // eslint-disable-next-line\n    DropDownTree.prototype.nestedChildFilter = function (value, node) {\n        // eslint-disable-next-line\n        var children = node[this.fields.child];\n        if (isNullOrUndefined(children)) {\n            return (this.isMatchedNode(value, node)) ? node : null;\n        }\n        else {\n            // eslint-disable-next-line\n            var matchedChildren = [];\n            for (var i = 0; i < children.length; i++) {\n                // eslint-disable-next-line\n                var filteredChild = this.nestedChildFilter(value, children[i]);\n                if (!isNullOrUndefined(filteredChild)) {\n                    matchedChildren.push(filteredChild);\n                }\n            }\n            var filteredItems = Object.assign({}, node);\n            if (matchedChildren.length !== 0) {\n                filteredItems[this.fields.child] = matchedChildren;\n                return filteredItems;\n            }\n            else {\n                filteredItems[this.fields.child] = null;\n                return (this.isMatchedNode(value, filteredItems)) ? filteredItems : null;\n            }\n        }\n    };\n    DropDownTree.prototype.selfReferencefilter = function (value, filteredFields) {\n        // eslint-disable-next-line\n        var matchedData = [];\n        // eslint-disable-next-line\n        var matchedDataSource = [];\n        for (var i = 0; i < this.treeData.length; i++) {\n            if (this.isMatchedNode(value, this.treeData[i])) {\n                matchedData.push(this.treeData[i]);\n            }\n        }\n        for (var i = 0; i < matchedData.length; i++) {\n            if (matchedDataSource.indexOf(matchedData[i]) === -1) {\n                matchedDataSource.push(matchedData[i]);\n                // eslint-disable-next-line\n                var parentId = matchedData[i][this.fields.parentValue];\n                while (!isNullOrUndefined(parentId)) {\n                    // eslint-disable-next-line\n                    var parent_1 = null;\n                    for (var j = 0; j < this.treeData.length; j++) {\n                        // eslint-disable-next-line\n                        var value_1 = this.treeData[j][this.fields.value];\n                        if (!isNullOrUndefined(value_1) && (value_1 === parentId)) {\n                            parent_1 = this.treeData[j];\n                            break;\n                        }\n                    }\n                    if (!isNullOrUndefined(parent_1) && (matchedDataSource.indexOf(parent_1) === -1)) {\n                        matchedDataSource.push(parent_1);\n                        parentId = parent_1[this.fields.parentValue];\n                    }\n                    else {\n                        break;\n                    }\n                }\n            }\n        }\n        filteredFields.dataSource = matchedDataSource;\n        return filteredFields;\n    };\n    // eslint-disable-next-line\n    DropDownTree.prototype.isMatchedNode = function (value, node, isChild, isChildFiltering) {\n        var checkValue;\n        var isObjectValue = isChild && isChildFiltering && this.isChildObject();\n        checkValue = isObjectValue ? node[this.fields.child.text] : node[this.fields.text];\n        if (!checkValue) {\n            var tempChild = this.fields.child;\n            while (!node[tempChild.text]) {\n                tempChild = tempChild.child;\n            }\n            checkValue = node[tempChild.text];\n        }\n        if (this.ignoreCase) {\n            checkValue = checkValue.toLowerCase();\n            value = value.toLowerCase();\n        }\n        if (this.ignoreAccent) {\n            checkValue = DataUtil.ignoreDiacritics(checkValue);\n            value = DataUtil.ignoreDiacritics(value);\n        }\n        if (this.filterType === 'StartsWith') {\n            return checkValue.slice(0, value.length) === value;\n        }\n        else if (this.filterType === 'EndsWith') {\n            return checkValue.slice(-value.length) === value;\n        }\n        else {\n            return checkValue.indexOf(value) !== -1;\n        }\n    };\n    /* To wire events for the dropdown tree */\n    DropDownTree.prototype.wireEvents = function () {\n        EventHandler.add(this.inputWrapper, 'mouseup', this.dropDownClick, this);\n        EventHandler.add(this.inputWrapper, 'focus', this.focusIn, this);\n        EventHandler.add(this.inputWrapper, 'blur', this.focusOut, this);\n        EventHandler.add(this.inputWrapper, 'mousemove', this.mouseIn, this);\n        EventHandler.add(this.inputWrapper, 'mouseout', this.onMouseLeave, this);\n        EventHandler.add(this.overAllClear, 'mousedown', this.clearAll, this);\n        EventHandler.add(window, 'resize', this.windowResize, this);\n        var formElement = closest(this.inputWrapper, 'form');\n        if (formElement) {\n            EventHandler.add(formElement, 'reset', this.resetValueHandler, this);\n        }\n        this.keyboardModule = new KeyboardEvents(this.inputWrapper, {\n            keyAction: this.keyActionHandler.bind(this),\n            keyConfigs: this.keyConfigs,\n            eventName: 'keydown'\n        });\n    };\n    DropDownTree.prototype.wireTreeEvents = function () {\n        this.keyboardModule = new KeyboardEvents(this.tree, {\n            keyAction: this.treeAction.bind(this),\n            keyConfigs: this.keyConfigs,\n            eventName: 'keydown'\n        });\n    };\n    DropDownTree.prototype.wireCheckAllWrapperEvents = function () {\n        this.keyboardModule = new KeyboardEvents(this.checkAllParent, {\n            keyAction: this.checkAllAction.bind(this),\n            keyConfigs: this.keyConfigs,\n            eventName: 'keydown'\n        });\n    };\n    /* To unwire events for the dropdown tree */\n    DropDownTree.prototype.unWireEvents = function () {\n        EventHandler.remove(this.inputWrapper, 'mouseup', this.dropDownClick);\n        EventHandler.remove(this.inputWrapper, 'focus', this.focusIn);\n        EventHandler.remove(this.inputWrapper, 'blur', this.focusOut);\n        EventHandler.remove(this.inputWrapper, 'mousemove', this.mouseIn);\n        EventHandler.remove(this.inputWrapper, 'mouseout', this.onMouseLeave);\n        EventHandler.remove(this.overAllClear, 'mousedown', this.clearAll);\n        EventHandler.remove(window, 'resize', this.windowResize);\n        var formElement = closest(this.inputWrapper, 'form');\n        if (formElement) {\n            EventHandler.remove(formElement, 'reset', this.resetValueHandler);\n        }\n    };\n    /* Trigger when the dropdown is clicked */\n    DropDownTree.prototype.dropDownClick = function (e) {\n        if (!this.enabled || this.readonly) {\n            return;\n        }\n        if (this.isClearButtonClick) {\n            this.isClearButtonClick = false;\n            return;\n        }\n        if (this.isPopupOpen) {\n            this.hidePopup();\n        }\n        else {\n            this.focusIn(e);\n            this.renderPopup();\n        }\n        this.showOverAllClear();\n    };\n    DropDownTree.prototype.mouseIn = function () {\n        if (this.enabled || !this.readonly) {\n            this.showOverAllClear();\n        }\n    };\n    DropDownTree.prototype.onMouseLeave = function () {\n        if (!this.inputFocus) {\n            addClass([this.overAllClear], HIDEICON);\n            removeClass([this.inputWrapper], SHOW_CLEAR);\n        }\n    };\n    DropDownTree.prototype.getDirective = function () {\n        return 'EJS-DROPDOWNTREE';\n    };\n    DropDownTree.prototype.focusOut = function (e) {\n        if (!this.enabled || this.readonly || !this.inputFocus) {\n            return;\n        }\n        if ((Browser.isIE || Browser.info.name === 'edge') && (e.target === this.inputWrapper)) {\n            return;\n        }\n        var target = e.relatedTarget;\n        if ((target !== this.inputEle) && (isNullOrUndefined(target)) && (e.target !== this.inputWrapper || !this.isPopupOpen)) {\n            this.onFocusOut(e);\n        }\n    };\n    DropDownTree.prototype.onFocusOut = function (event) {\n        this.inputFocus = false;\n        if (this.isPopupOpen) {\n            this.hidePopup();\n        }\n        if (this.isClearButtonClick) {\n            this.isClearButtonClick = false;\n        }\n        if (this.showClearButton) {\n            this.clearIconWidth = select('.e-clear-icon', this.inputWrapper).offsetWidth;\n            addClass([this.overAllClear], HIDEICON);\n            removeClass([this.inputWrapper], SHOW_CLEAR);\n        }\n        removeClass([this.inputWrapper], [INPUTFOCUS]);\n        if ((this.allowMultiSelection || this.showCheckBox)) {\n            var isValue = this.value ? (this.value.length ? true : false) : false;\n            if (this.mode !== 'Delimiter' && this.mode !== 'Custom') {\n                if (this.chipWrapper && (this.mode === 'Default')) {\n                    addClass([this.chipWrapper], HIDEICON);\n                    removeClass([this.inputWrapper], SHOW_CHIP);\n                    removeClass([this.inputEle], CHIP_INPUT);\n                }\n            }\n            if (!this.wrapText && isValue) {\n                this.updateView();\n            }\n        }\n        if (this.changeOnBlur) {\n            this.triggerChangeEvent(event);\n        }\n        this.removeValue = false;\n        this.oldValue = this.value;\n        this.trigger('blur');\n    };\n    DropDownTree.prototype.updateView = function () {\n        if ((!this.showCheckBox && !this.allowMultiSelection) || this.mode === 'Custom' || this.inputFocus) {\n            return;\n        }\n        if (this.mode !== 'Box') {\n            addClass([this.inputWrapper, this.overFlowWrapper], SHOW_TEXT);\n        }\n        else {\n            addClass([this.inputWrapper], SHOW_CHIP);\n        }\n        if (this.value && this.value.length !== 0) {\n            if (this.inputWrapper.contains(this.chipWrapper)) {\n                addClass([this.chipWrapper], HIDEICON);\n            }\n            addClass([this.inputEle], CHIP_INPUT);\n            this.updateOverFlowView();\n            this.ensurePlaceHolder();\n        }\n    };\n    DropDownTree.prototype.triggerChangeEvent = function (event) {\n        var isEqual = this.ddtCompareValues(this.oldValue, this.value);\n        if ((!isEqual || this.isChipDelete) && !this.removeValue) {\n            var eventArgs = {\n                e: event,\n                oldValue: this.oldValue,\n                value: this.value,\n                isInteracted: event ? true : false,\n                element: this.element\n            };\n            this.trigger('change', eventArgs);\n            this.oldValue = this.value;\n        }\n    };\n    DropDownTree.prototype.ddtCompareValues = function (oldValue, newValue) {\n        if (oldValue === null || newValue === null) {\n            var isValid = oldValue === null ? ((newValue === oldValue) ? true : false) :\n                (oldValue.length === 0 ? (newValue === oldValue) : false);\n            return isValid;\n        }\n        else if (oldValue.length !== newValue.length) {\n            return false;\n        }\n        for (var i = 0; i < oldValue.length; i++) {\n            if (oldValue[i] !== newValue[i]) {\n                return false;\n            }\n        }\n        return true;\n    };\n    DropDownTree.prototype.focusIn = function (e) {\n        if (!this.enabled || this.readonly || this.inputFocus) {\n            return;\n        }\n        this.showOverAllClear();\n        this.inputFocus = true;\n        addClass([this.inputWrapper], [INPUTFOCUS]);\n        if (this.allowMultiSelection || this.showCheckBox) {\n            if (this.mode !== 'Delimiter' && this.inputFocus) {\n                if (this.chipWrapper && (this.value && this.value.length !== 0)) {\n                    removeClass([this.chipWrapper], HIDEICON);\n                    addClass([this.inputEle], CHIP_INPUT);\n                }\n                addClass([this.inputWrapper], SHOW_CHIP);\n                if (this.popupObj) {\n                    this.popupObj.refreshPosition();\n                }\n            }\n            if (!this.wrapText && this.mode !== 'Custom') {\n                if (this.inputWrapper.contains(this.overFlowWrapper)) {\n                    addClass([this.overFlowWrapper], HIDEICON);\n                }\n                if (this.mode === 'Delimiter') {\n                    removeClass([this.inputWrapper], SHOW_CHIP);\n                    removeClass([this.inputEle], CHIP_INPUT);\n                }\n                else {\n                    addClass([this.inputWrapper], SHOW_CHIP);\n                }\n                removeClass([this.inputWrapper], SHOW_TEXT);\n                this.ensurePlaceHolder();\n            }\n        }\n        var args = { isInteracted: e ? true : false, event: e };\n        this.trigger('focus', args);\n    };\n    DropDownTree.prototype.treeAction = function (e) {\n        var _this = this;\n        var eventArgs = {\n            cancel: false,\n            event: e\n        };\n        this.trigger('keyPress', eventArgs, function (observedArgs) {\n            if (!observedArgs.cancel) {\n                switch (e.action) {\n                    case 'escape':\n                    case 'altUp':\n                        _this.inputWrapper.focus();\n                        e.preventDefault();\n                        if (_this.isPopupOpen) {\n                            _this.hidePopup();\n                        }\n                        break;\n                    case 'tab':\n                    case 'shiftTab':\n                        if (_this.isPopupOpen) {\n                            _this.hidePopup();\n                        }\n                        break;\n                    case 'enter':\n                    case 'ctrlEnter':\n                    case 'shiftEnter':\n                    case 'csEnter':\n                        if (!_this.showCheckBox) {\n                            _this.isValueChange = true;\n                            _this.keyEventArgs = e;\n                        }\n                        break;\n                    case 'space':\n                        _this.isValueChange = true;\n                        _this.keyEventArgs = e;\n                        break;\n                    case 'ctrlA':\n                        if (_this.allowMultiSelection) {\n                            _this.selectAll(true);\n                        }\n                        break;\n                    case 'moveRight':\n                    case 'moveLeft':\n                    case 'shiftDown':\n                    case 'moveDown':\n                    case 'ctrlDown':\n                    case 'csDown':\n                    case 'shiftUp':\n                    case 'moveUp':\n                    case 'ctrlUp':\n                    case 'csUp':\n                    case 'home':\n                    case 'shiftHome':\n                    case 'ctrlHome':\n                    case 'csHome':\n                    case 'end':\n                    case 'shiftEnd':\n                    case 'ctrlEnd':\n                    case 'csEnd':\n                }\n            }\n            else {\n                e.stopImmediatePropagation();\n            }\n        });\n    };\n    DropDownTree.prototype.keyActionHandler = function (e) {\n        var _this = this;\n        var eventArgs = {\n            cancel: false,\n            event: e\n        };\n        this.trigger('keyPress', eventArgs, function (observedArgs) {\n            if (!observedArgs.cancel) {\n                switch (e.action) {\n                    case 'escape':\n                    case 'altUp':\n                        if (_this.isPopupOpen) {\n                            _this.hidePopup();\n                        }\n                        break;\n                    case 'shiftTab':\n                    case 'tab':\n                        if (_this.isPopupOpen) {\n                            _this.hidePopup();\n                        }\n                        if (_this.inputFocus) {\n                            _this.onFocusOut();\n                        }\n                        break;\n                    case 'altDown':\n                        if (!_this.isPopupOpen) {\n                            _this.showPopup();\n                            e.preventDefault();\n                        }\n                        break;\n                    case 'moveDown':\n                        if (_this.showSelectAll && _this.showCheckBox) {\n                            _this.checkAllParent.focus();\n                        }\n                        break;\n                }\n            }\n        });\n    };\n    DropDownTree.prototype.checkAllAction = function (e) {\n        var _this = this;\n        var eventArgs = {\n            cancel: false,\n            event: e\n        };\n        this.trigger('keyPress', eventArgs, function (observedArgs) {\n            if (!observedArgs.cancel) {\n                switch (e.action) {\n                    case 'space':\n                        _this.clickHandler(e);\n                        break;\n                    case 'moveDown':\n                        var focusedElement = _this.treeObj.element.querySelector('li');\n                        focusedElement.focus();\n                        addClass([focusedElement], ['e-node-focus']);\n                }\n            }\n        });\n    };\n    DropDownTree.prototype.windowResize = function () {\n        if (this.popupObj) {\n            this.popupObj.setProperties({ width: this.setWidth() });\n            this.popupObj.refreshPosition();\n        }\n    };\n    DropDownTree.prototype.resetValueHandler = function (e) {\n        var formElement = closest(this.inputWrapper, 'form');\n        if (formElement && e.target === formElement) {\n            this.isDynamicChange = true;\n            this.setProperties({ value: null }, true);\n            this.resetValue(true);\n            this.isDynamicChange = false;\n        }\n    };\n    DropDownTree.prototype.getAriaAttributes = function () {\n        return {};\n    };\n    DropDownTree.prototype.updateOverFlowView = function () {\n        this.overFlowWrapper.classList.remove(TOTAL_COUNT_WRAPPER);\n        removeClass([this.overFlowWrapper], HIDEICON);\n        if (this.value && this.value.length) {\n            var data = '';\n            var overAllContainer = void 0;\n            var temp = void 0;\n            var tempData = void 0;\n            var tempIndex = 1;\n            var wrapperleng = void 0;\n            var remaining = void 0;\n            var downIconWidth = 0;\n            this.overFlowWrapper.innerHTML = '';\n            // eslint-disable-next-line\n            var l10nLocale = { overflowCountTemplate: '+${count} more..', totalCountTemplate: '${count} selected' };\n            this.l10n = new L10n(this.getLocaleName(), l10nLocale, this.locale);\n            var remainContent = this.l10n.getConstant('overflowCountTemplate');\n            var totalContent = this.l10n.getConstant('totalCountTemplate');\n            var remainElement = this.createElement('span', { className: REMAIN_WRAPPER });\n            this.overFlowWrapper.appendChild(remainElement);\n            remainElement.innerText = remainContent.replace('${count}', this.value.length.toString());\n            var remainSize = remainElement.offsetWidth;\n            remove(remainElement);\n            if (this.showDropDownIcon) {\n                downIconWidth = select('.' + DDTICON, this.inputWrapper).offsetWidth;\n            }\n            if (!isNullOrUndefined(this.value)) {\n                if (this.mode !== 'Box') {\n                    for (var index = 0; !isNullOrUndefined(this.value[index]); index++) {\n                        data += (index === 0) ? '' : this.delimiterChar + ' ';\n                        temp = this.getOverflowVal(index);\n                        data += temp;\n                        temp = this.overFlowWrapper.innerHTML;\n                        if (this.enableHtmlSanitizer) {\n                            this.overFlowWrapper.innerText = SanitizeHtmlHelper.sanitize(data);\n                        }\n                        else {\n                            this.overFlowWrapper.innerHTML = data;\n                        }\n                        wrapperleng = this.overFlowWrapper.offsetWidth;\n                        overAllContainer = this.inputWrapper.offsetWidth;\n                        if ((wrapperleng + downIconWidth + this.clearIconWidth) > overAllContainer) {\n                            if (tempData !== undefined && tempData !== '') {\n                                temp = tempData;\n                                index = tempIndex + 1;\n                            }\n                            this.overFlowWrapper.innerHTML = temp;\n                            remaining = this.value.length - index;\n                            wrapperleng = this.overFlowWrapper.offsetWidth;\n                            while (((wrapperleng + remainSize + downIconWidth + this.clearIconWidth) >= overAllContainer)\n                                && wrapperleng !== 0 && this.overFlowWrapper.innerHTML !== '') {\n                                var textArr = this.overFlowWrapper.innerHTML.split(this.delimiterChar);\n                                textArr.pop();\n                                this.overFlowWrapper.innerHTML = textArr.join(this.delimiterChar);\n                                remaining++;\n                                wrapperleng = this.overFlowWrapper.offsetWidth;\n                            }\n                            break;\n                        }\n                        else if ((wrapperleng + remainSize + downIconWidth + this.clearIconWidth) <= overAllContainer) {\n                            tempData = data;\n                            tempIndex = index;\n                        }\n                        else if (index === 0) {\n                            tempData = '';\n                            tempIndex = -1;\n                        }\n                    }\n                }\n                else {\n                    addClass([this.chipWrapper], HIDEICON);\n                    var ele = this.chipWrapper.cloneNode(true);\n                    var chips = selectAll('.' + CHIP, ele);\n                    for (var i = 0; i < chips.length; i++) {\n                        temp = this.overFlowWrapper.innerHTML;\n                        this.overFlowWrapper.appendChild(chips[i]);\n                        data = this.overFlowWrapper.innerHTML;\n                        wrapperleng = this.overFlowWrapper.offsetWidth;\n                        overAllContainer = this.inputWrapper.offsetWidth;\n                        if ((wrapperleng + downIconWidth + this.clearIconWidth) > overAllContainer) {\n                            if (tempData !== undefined && tempData !== '') {\n                                temp = tempData;\n                                i = tempIndex + 1;\n                            }\n                            this.overFlowWrapper.innerHTML = temp;\n                            remaining = this.value.length - i;\n                            wrapperleng = this.overFlowWrapper.offsetWidth;\n                            while (((wrapperleng + remainSize + downIconWidth + this.clearIconWidth) >= overAllContainer)\n                                && wrapperleng !== 0 && this.overFlowWrapper.innerHTML !== '') {\n                                this.overFlowWrapper.removeChild(this.overFlowWrapper.lastChild);\n                                remaining++;\n                                wrapperleng = this.overFlowWrapper.offsetWidth;\n                            }\n                            break;\n                        }\n                        else if ((wrapperleng + remainSize + downIconWidth + this.clearIconWidth) <= overAllContainer) {\n                            tempData = data;\n                            tempIndex = i;\n                        }\n                        else if (i === 0) {\n                            tempData = '';\n                            tempIndex = -1;\n                        }\n                    }\n                }\n            }\n            if (remaining > 0) {\n                this.overFlowWrapper.appendChild(this.updateRemainTemplate(remainElement, remaining, remainContent, totalContent));\n            }\n            if (this.mode === 'Box' && !this.overFlowWrapper.classList.contains(TOTAL_COUNT_WRAPPER)) {\n                addClass([remainElement], REMAIN_COUNT);\n            }\n        }\n        else {\n            this.overFlowWrapper.innerHTML = '';\n            addClass([this.overFlowWrapper], HIDEICON);\n        }\n        this.updateDelimMode();\n    };\n    DropDownTree.prototype.updateRemainTemplate = function (remainElement, remaining, remainContent, totalContent) {\n        if (this.overFlowWrapper.firstChild && this.overFlowWrapper.firstChild.nodeType === 3 &&\n            this.overFlowWrapper.firstChild.nodeValue === '') {\n            this.overFlowWrapper.removeChild(this.overFlowWrapper.firstChild);\n        }\n        remainElement.innerHTML = '';\n        remainElement.innerText = (this.overFlowWrapper.firstChild && (this.overFlowWrapper.firstChild.nodeType === 3 || this.mode === 'Box')) ?\n            remainContent.replace('${count}', remaining.toString()) : totalContent.replace('${count}', remaining.toString());\n        if (this.overFlowWrapper.firstChild && (this.overFlowWrapper.firstChild.nodeType === 3 || this.mode === 'Box')) {\n            removeClass([this.overFlowWrapper], TOTAL_COUNT_WRAPPER);\n        }\n        else {\n            addClass([this.overFlowWrapper], TOTAL_COUNT_WRAPPER);\n            removeClass([this.overFlowWrapper], REMAIN_COUNT);\n        }\n        return remainElement;\n    };\n    DropDownTree.prototype.getOverflowVal = function (index) {\n        // eslint-disable-next-line\n        var selectedData = this.getSelectedData(this.value[index]);\n        return getValue(this.treeSettings.loadOnDemand ? this.fields.text : 'text', selectedData);\n    };\n    DropDownTree.prototype.updateDelimMode = function () {\n        if (this.mode !== 'Box') {\n            if (select('.' + REMAIN_WRAPPER, this.overFlowWrapper) && !this.overFlowWrapper.classList.contains(TOTAL_COUNT_WRAPPER)) {\n                addClass([this.overFlowWrapper], REMAIN_COUNT);\n                addClass([this.overFlowWrapper], SHOW_TEXT);\n            }\n            else {\n                this.overFlowWrapper.classList.remove(REMAIN_COUNT);\n                removeClass([this.overFlowWrapper], REMAIN_COUNT);\n            }\n        }\n        else if (select('.' + REMAIN_WRAPPER, this.overFlowWrapper)) {\n            this.overFlowWrapper.classList.remove(REMAIN_COUNT);\n        }\n    };\n    DropDownTree.prototype.createHiddenElement = function () {\n        if (this.allowMultiSelection || this.showCheckBox) {\n            this.hiddenElement = this.createElement('select', {\n                attrs: { 'aria-hidden': 'true', 'class': HIDDENELEMENT, 'tabindex': '-1', 'multiple': '' }\n            });\n        }\n        else {\n            this.hiddenElement = this.createElement('select', {\n                attrs: { 'aria-hidden': 'true', 'tabindex': '-1', 'class': HIDDENELEMENT }\n            });\n        }\n        prepend([this.hiddenElement], this.inputWrapper);\n        this.validationAttribute();\n    };\n    DropDownTree.prototype.createClearIcon = function () {\n        this.overAllClear = this.createElement('span', {\n            className: CLOSEICON_CLASS\n        });\n        addClass([this.overAllClear], HIDEICON);\n        removeClass([this.inputWrapper], SHOW_CLEAR);\n        if (this.showClearButton) {\n            this.inputWrapper.insertBefore(this.overAllClear, this.inputObj.buttons[0]);\n        }\n    };\n    DropDownTree.prototype.validationAttribute = function () {\n        var name = this.inputEle.getAttribute('name') ? this.inputEle.getAttribute('name') : this.inputEle.getAttribute('id');\n        this.hiddenElement.setAttribute('name', name);\n        this.inputEle.removeAttribute('name');\n        var attributes$$1 = ['required', 'aria-required', 'form'];\n        for (var i = 0; i < attributes$$1.length; i++) {\n            var attr = this.inputEle.getAttribute(attributes$$1[i]);\n            if (attr) {\n                this.hiddenElement.setAttribute(attributes$$1[i], attr);\n                this.inputEle.removeAttribute(attributes$$1[i]);\n            }\n        }\n    };\n    DropDownTree.prototype.createChip = function () {\n        if (!this.inputWrapper.contains(this.chipWrapper)) {\n            this.chipWrapper = this.createElement('span', {\n                className: CHIP_WRAPPER\n            });\n            this.chipCollection = this.createElement('span', {\n                className: CHIP_COLLECTION\n            });\n            this.chipWrapper.appendChild(this.chipCollection);\n            this.inputWrapper.insertBefore(this.chipWrapper, this.hiddenElement);\n            addClass([this.inputWrapper], SHOW_CHIP);\n            var isValid = this.getValidMode();\n            if (isValid && this.value !== null && (this.value && this.value.length !== 0)) {\n                addClass([this.inputEle], CHIP_INPUT);\n            }\n            else if (this.value === null || (this.value && this.value.length === 0) || this.checkWrapper) {\n                addClass([this.chipWrapper], HIDEICON);\n            }\n        }\n    };\n    DropDownTree.prototype.getValidMode = function () {\n        if (this.allowMultiSelection || this.showCheckBox) {\n            return this.mode === 'Box' ? true : (this.mode === 'Default' && this.inputFocus) ? true : false;\n        }\n        else {\n            return false;\n        }\n    };\n    DropDownTree.prototype.createSelectAllWrapper = function () {\n        this.checkAllParent = this.createElement('div', {\n            className: CHECKALLPARENT, attrs: { 'tabindex': '0' }\n        });\n        this.selectAllSpan = this.createElement('span', {\n            className: ALLTEXT\n        });\n        this.selectAllSpan.textContent = '';\n        var ele = closest(this.element, '.' + BIGGER);\n        var touchClass = isNullOrUndefined(ele) ? '' : SMALL;\n        this.checkBoxElement = createCheckBox(this.createElement, true, { cssClass: touchClass });\n        this.checkBoxElement.setAttribute('role', 'checkbox');\n        this.checkAllParent.appendChild(this.checkBoxElement);\n        this.checkAllParent.appendChild(this.selectAllSpan);\n        this.setLocale();\n        EventHandler.add(this.checkAllParent, 'mouseup', this.clickHandler, this);\n        this.wireCheckAllWrapperEvents();\n    };\n    DropDownTree.prototype.clickHandler = function (e) {\n        var target;\n        if ((e.currentTarget && e.currentTarget.classList.contains(CHECKALLPARENT))) {\n            target = e.currentTarget.firstElementChild.lastElementChild;\n        }\n        else {\n            target = e.target;\n        }\n        this.checkWrapper = closest(target, '.' + CHECKBOXWRAP);\n        if (!isNullOrUndefined(this.checkWrapper)) {\n            this.isClicked = true;\n            var checkElement = select('.' + CHECKBOXFRAME, this.checkWrapper);\n            this.changeState(this.checkWrapper, checkElement.classList.contains(CHECK) ? 'uncheck' : 'check', e);\n            this.isClicked = false;\n        }\n        e.preventDefault();\n    };\n    DropDownTree.prototype.changeState = function (wrapper, state, e) {\n        var ariaState;\n        var frameSpan = wrapper.getElementsByClassName(CHECKBOXFRAME)[0];\n        if (state === 'check' && !frameSpan.classList.contains(CHECK)) {\n            frameSpan.classList.add(CHECK);\n            ariaState = 'true';\n            if (!this.isReverseUpdate) {\n                this.isCheckAllCalled = true;\n                this.treeObj.checkAll();\n                if (!this.changeOnBlur) {\n                    this.triggerChangeEvent(e);\n                }\n            }\n            this.setLocale(true);\n        }\n        else if (state === 'uncheck' && (frameSpan.classList.contains(CHECK))) {\n            frameSpan.classList.remove(CHECK);\n            ariaState = 'false';\n            if (!this.isReverseUpdate) {\n                this.treeObj.uncheckAll();\n                if (!this.changeOnBlur) {\n                    this.triggerChangeEvent(e);\n                }\n            }\n            this.setLocale(false);\n        }\n        this.setMultiSelect();\n        this.ensurePlaceHolder();\n        ariaState = state === 'check' ? 'true' : 'false';\n        if (!isNullOrUndefined(ariaState)) {\n            wrapper.setAttribute('aria-checked', ariaState);\n        }\n    };\n    DropDownTree.prototype.setLocale = function (unSelect) {\n        if (!this.selectAllSpan) {\n            return;\n        }\n        if (this.selectAllText !== 'Select All' || this.unSelectAllText !== 'Unselect All') {\n            var template = unSelect ? this.unSelectAllText : this.selectAllText;\n            this.selectAllSpan.textContent = '';\n            // eslint-disable-next-line\n            var compiledString = compile(template);\n            var templateName = unSelect ? 'unSelectAllText' : 'selectAllText';\n            for (var _i = 0, _a = compiledString({}, this, templateName, null, !this.isStringTemplate); _i < _a.length; _i++) {\n                var item = _a[_i];\n                this.selectAllSpan.textContent = item.textContent;\n            }\n        }\n        else {\n            this.selectAllSpan.textContent = unSelect ? this.unSelectAllText : this.selectAllText;\n        }\n    };\n    DropDownTree.prototype.setAttributes = function () {\n        this.inputEle.setAttribute('tabindex', '-1');\n        var id = this.element.getAttribute('id');\n        this.hiddenElement.id = id + '_hidden';\n        this.inputWrapper.setAttribute('tabindex', '0');\n        attributes(this.inputWrapper, this.getAriaAttributes());\n    };\n    DropDownTree.prototype.setHTMLAttributes = function () {\n        if (Object.keys(this.htmlAttributes).length) {\n            for (var _i = 0, _a = Object.keys(this.htmlAttributes); _i < _a.length; _i++) {\n                var htmlAttr = _a[_i];\n                if (htmlAttr === 'class') {\n                    this.inputWrapper.classList.add(this.htmlAttributes[\"\" + htmlAttr]);\n                }\n                else if (htmlAttr === 'disabled' && this.htmlAttributes[\"\" + htmlAttr] === 'disabled') {\n                    this.setProperties({ enabled: false }, true);\n                    this.setEnable();\n                }\n                else if (htmlAttr === 'readonly' && !isNullOrUndefined(this.htmlAttributes[\"\" + htmlAttr])) {\n                    this.setProperties({ readonly: true }, true);\n                    this.dataBind();\n                }\n                else if (htmlAttr === 'style') {\n                    this.inputWrapper.setAttribute('style', this.htmlAttributes[\"\" + htmlAttr]);\n                }\n                else {\n                    var defaultAttr = ['title', 'id', 'placeholder', 'aria-placeholder',\n                        'role', 'autocorrect', 'autocomplete', 'autocapitalize', 'spellcheck', 'minlength', 'maxlength'];\n                    var validateAttr = ['name', 'required'];\n                    if (htmlAttr.indexOf('data') === 0 || validateAttr.indexOf(htmlAttr) > -1) {\n                        this.hiddenElement.setAttribute(htmlAttr, this.htmlAttributes[\"\" + htmlAttr]);\n                    }\n                    else if (defaultAttr.indexOf(htmlAttr) > -1) {\n                        if (htmlAttr === 'placeholder') {\n                            Input.setPlaceholder(this.htmlAttributes[\"\" + htmlAttr], this.inputEle);\n                        }\n                        else {\n                            this.inputEle.setAttribute(htmlAttr, this.htmlAttributes[\"\" + htmlAttr]);\n                        }\n                    }\n                    else {\n                        this.inputEle.setAttribute(htmlAttr, this.htmlAttributes[\"\" + htmlAttr]);\n                    }\n                }\n            }\n        }\n    };\n    DropDownTree.prototype.updateDataAttribute = function () {\n        var value = this.htmlAttributes;\n        var invalidAttr = ['class', 'style', 'id', 'type'];\n        var attr = {};\n        for (var a = 0; a < this.element.attributes.length; a++) {\n            if (invalidAttr.indexOf(this.element.attributes[a].name) === -1 &&\n                !(this.element.attributes[a].name === 'readonly')) {\n                attr[this.element.attributes[a].name] = this.element.getAttribute(this.element.attributes[a].name);\n            }\n        }\n        extend(attr, value, attr);\n        this.setProperties({ htmlAttributes: attr }, true);\n    };\n    DropDownTree.prototype.showOverAllClear = function () {\n        if (!this.enabled || this.readonly) {\n            return;\n        }\n        if (this.overAllClear) {\n            var isValue = this.value ? (this.value.length ? true : false) : false;\n            if (isValue && this.showClearButton) {\n                removeClass([this.overAllClear], HIDEICON);\n                addClass([this.inputWrapper], SHOW_CLEAR);\n            }\n            else {\n                addClass([this.overAllClear], HIDEICON);\n                removeClass([this.inputWrapper], SHOW_CLEAR);\n            }\n        }\n    };\n    DropDownTree.prototype.setTreeValue = function () {\n        if (this.value !== null && this.value.length !== 0) {\n            // eslint-disable-next-line\n            var data = void 0;\n            if (this.showCheckBox || this.allowMultiSelection) {\n                for (var i = 0; i < this.value.length; i++) {\n                    data = this.treeObj.getTreeData(this.value[i])[0];\n                    if (isNullOrUndefined(data)) {\n                        this.value.splice(this.value.indexOf(this.value[i]), 1);\n                    }\n                }\n                if (this.value.length !== 0) {\n                    this.setValidValue();\n                }\n            }\n            else {\n                data = this.treeObj.getTreeData(this.value[0])[0];\n                if (!isNullOrUndefined(data)) {\n                    this.setProperties({ text: data[this.fields.text] }, true);\n                    this.setValidValue();\n                }\n                else {\n                    this.setProperties({ value: this.currentValue }, true);\n                }\n            }\n        }\n    };\n    DropDownTree.prototype.setTreeText = function () {\n        if (this.value !== null && !this.isInitialized) {\n            return;\n        }\n        if (this.text !== null) {\n            // eslint-disable-next-line\n            var data = void 0;\n            var valArr = [];\n            if (this.showCheckBox || this.allowMultiSelection) {\n                var textArr = this.text.split(this.delimiterChar);\n                for (var i = 0; i < textArr.length; i++) {\n                    data = this.getItems(textArr[i]);\n                    if (!isNullOrUndefined(data)) {\n                        valArr.push(data[this.fields.value].toString());\n                    }\n                }\n                if (valArr.length !== 0) {\n                    this.oldValue = this.value;\n                    this.setProperties({ value: valArr }, true);\n                    this.setValidValue();\n                }\n                else {\n                    this.setProperties({ text: this.currentText }, true);\n                }\n            }\n            else {\n                data = this.getItems(this.text);\n                if (!isNullOrUndefined(data)) {\n                    this.oldValue = this.value;\n                    this.setProperties({ value: [data[this.fields.value].toString()] }, true);\n                    this.setValidValue();\n                }\n                else {\n                    this.setProperties({ text: this.currentText }, true);\n                }\n            }\n        }\n    };\n    DropDownTree.prototype.setSelectedValue = function () {\n        if (this.value != null) {\n            return;\n        }\n        if (!this.isInitialized) {\n            this.oldValue = this.value;\n            if (this.treeObj.selectedNodes.length > 0 && !this.showCheckBox) {\n                this.setProperties({ value: this.treeObj.selectedNodes }, true);\n                if (this.allowMultiSelection) {\n                    this.updateMode();\n                }\n            }\n            else if (this.showCheckBox && this.treeObj.checkedNodes) {\n                if (this.treeObj.checkedNodes.length > 0) {\n                    this.setProperties({ value: this.treeObj.checkedNodes }, true);\n                    setValue('selectedNodes', [], this.treeObj);\n                    this.treeObj.dataBind();\n                    this.updateMode();\n                }\n            }\n            this.updateSelectedValues();\n            this.currentText = this.text;\n            this.currentValue = this.value;\n        }\n    };\n    DropDownTree.prototype.setValidValue = function () {\n        var _this = this;\n        if (!this.showCheckBox && !this.allowMultiSelection) {\n            Input.setValue(this.text, this.inputEle, this.floatLabelType);\n            var id = this.value[0].toString();\n            if (this.treeObj.selectedNodes[0] !== id) {\n                setValue('selectedNodes', [id], this.treeObj);\n            }\n        }\n        else {\n            if (this.showCheckBox) {\n                var difference = this.value.filter(function (e) {\n                    return _this.treeObj.checkedNodes.indexOf(e) === -1;\n                });\n                if (difference.length > 0 || this.treeSettings.autoCheck) {\n                    this.treeObj.checkedNodes = this.value.slice();\n                    this.treeObj.dataBind();\n                    this.setMultiSelect();\n                }\n            }\n            else {\n                this.treeObj.selectedNodes = this.value.slice();\n                this.selectedText = [];\n                this.updateSelectedValues();\n            }\n            this.treeObj.dataBind();\n        }\n        this.currentText = this.text;\n        this.currentValue = this.value;\n        if (this.isInitialized) {\n            this.triggerChangeEvent();\n        }\n    };\n    // eslint-disable-next-line\n    DropDownTree.prototype.getItems = function (givenText) {\n        // eslint-disable-next-line\n        var data;\n        if (this.treeDataType === 1) {\n            for (var i = 0; i < this.treeItems.length; i++) {\n                // eslint-disable-next-line\n                var text = getValue(this.fields.text, this.treeItems[i]);\n                if (!isNullOrUndefined(this.treeItems[i]) && !isNullOrUndefined(text) && text === givenText) {\n                    data = this.treeItems[i];\n                    break;\n                }\n            }\n        }\n        else {\n            data = this.getNestedItems(this.treeItems, this.fields, givenText);\n        }\n        return data;\n    };\n    // eslint-disable-next-line\n    DropDownTree.prototype.getNestedItems = function (data, field, givenText) {\n        // eslint-disable-next-line\n        var newData;\n        for (var i = 0, objlen = data.length; i < objlen; i++) {\n            // eslint-disable-next-line\n            var dataId = getValue(this.fields.text, data[i]);\n            if (data[i] && dataId && dataId.toString() === givenText) {\n                return data[i];\n            }\n            else if (typeof field.child === 'string' && !isNullOrUndefined(getValue(field.child, data[i]))) {\n                // eslint-disable-next-line\n                var childData = getValue(field.child, data[i]);\n                // eslint-disable-next-line\n                newData = this.getNestedItems(childData, this.getChildType(field), givenText);\n                if (newData !== undefined) {\n                    break;\n                }\n            }\n            else if (this.fields.dataSource instanceof DataManager && !isNullOrUndefined(getValue('child', data[i]))) {\n                var child = 'child';\n                // eslint-disable-next-line\n                newData = this.getNestedItems(getValue(child, data[i]), this.getChildType(field), givenText);\n                if (newData !== undefined) {\n                    break;\n                }\n            }\n        }\n        return newData;\n    };\n    DropDownTree.prototype.getChildType = function (mapper) {\n        return (typeof mapper.child === 'string' || isNullOrUndefined(mapper.child)) ? mapper : mapper.child;\n    };\n    /* To render the treeview */\n    DropDownTree.prototype.renderTree = function () {\n        this.treeObj = new TreeView({\n            fields: this.getTreeFields(this.fields),\n            enableRtl: this.enableRtl,\n            nodeSelected: this.onNodeSelected.bind(this),\n            nodeChecked: this.onNodeChecked.bind(this),\n            nodeChecking: this.beforeCheck.bind(this),\n            nodeExpanded: this.onNodeExpanded.bind(this),\n            actionFailure: this.onActionFailure.bind(this),\n            nodeClicked: this.onNodeClicked.bind(this),\n            dataBound: this.OnDataBound.bind(this),\n            allowMultiSelection: this.allowMultiSelection,\n            enableHtmlSanitizer: this.enableHtmlSanitizer,\n            showCheckBox: this.showCheckBox,\n            autoCheck: this.treeSettings.autoCheck,\n            sortOrder: this.sortOrder,\n            expandOn: this.treeSettings.expandOn,\n            loadOnDemand: this.treeSettings.loadOnDemand,\n            nodeSelecting: this.onBeforeSelect.bind(this),\n            nodeTemplate: this.itemTemplate\n        });\n        this.treeObj.root = this.root ? this.root : this;\n        this.treeObj.appendTo('#' + this.tree.id);\n    };\n    /* To render the popup element */\n    DropDownTree.prototype.renderPopup = function () {\n        var _this = this;\n        if (this.isFilteredData) {\n            this.filterObj.value = '';\n            this.treeObj.fields = this.getTreeFields(this.fields);\n            this.isFilterRestore = true;\n            this.isFilteredData = false;\n            this.hideCheckAll(false);\n        }\n        var isCancelled = false;\n        var args = { cancel: false };\n        this.trigger('beforeOpen', args, function (args) {\n            if (!args.cancel) {\n                addClass([_this.inputWrapper], [ICONANIMATION]);\n                if (_this.isFirstRender) {\n                    _this.popupEle = _this.createElement('div', {\n                        id: _this.element.id + '_options', className: POPUP_CLASS + ' ' + (_this.cssClass != null ? _this.cssClass : '')\n                    });\n                    _this.popupEle.setAttribute('role', 'region');\n                    _this.popupEle.setAttribute('aria-label', _this.element.id);\n                    document.body.appendChild(_this.popupEle);\n                    _this.createPopup(_this.popupEle);\n                }\n                else {\n                    _this.popupEle = _this.popupObj.element;\n                    if (_this.isReact && _this.isFilterRestore) {\n                        _this.treeObj.refresh();\n                        _this.isFilteredData = true;\n                        _this.popupEle.removeChild(_this.filterContainer);\n                    }\n                }\n            }\n            else {\n                isCancelled = true;\n            }\n            if (_this.isFirstRender && !isCancelled || _this.isFilteredData) {\n                _this.isFilteredData = false;\n                prepend([_this.popupDiv], _this.popupEle);\n                removeClass([_this.popupDiv], DDTHIDEICON);\n                if (_this.allowFiltering) {\n                    _this.renderFilter();\n                }\n                if (_this.showCheckBox && _this.showSelectAll && (!_this.popupDiv.classList.contains(NODATA))) {\n                    _this.createSelectAllWrapper();\n                    _this.popupEle.insertBefore(_this.checkAllParent, _this.popupDiv);\n                }\n                if (_this.headerTemplate) {\n                    _this.setHeaderTemplate();\n                }\n                if (_this.footerTemplate) {\n                    _this.setFooterTemplate();\n                }\n                _this.isFirstRender = false;\n                /* eslint-disable */\n                if (_this.hasTemplate && _this.portals) {\n                    _this.portals = _this.portals.concat(_this.treeObj.portals);\n                    /* eslint-enable */\n                    _this.renderReactTemplates();\n                }\n            }\n            if (!isCancelled) {\n                attributes(_this.inputEle, { 'aria-expanded': 'true' });\n                _this.popupObj.show(null, (_this.zIndex === 1000) ? _this.inputEle : null);\n                removeClass([_this.popupEle], DDTHIDEICON);\n                _this.updatePopupHeight();\n                _this.popupObj.refreshPosition();\n                if (!(_this.showCheckBox && _this.showSelectAll) && (!_this.popupDiv.classList.contains(NODATA)\n                    && _this.treeItems.length > 0)) {\n                    var focusedElement = _this.treeObj.element.querySelector('li');\n                    focusedElement.focus();\n                    addClass([focusedElement], ['e-node-focus']);\n                }\n                if (_this.checkSelectAll && _this.checkBoxElement) {\n                    var wrap = closest(_this.checkBoxElement, '.' + CHECKBOXWRAP);\n                    _this.changeState(wrap, 'check');\n                    _this.checkSelectAll = false;\n                }\n                if (_this.allowFiltering) {\n                    removeClass([_this.inputWrapper], [INPUTFOCUS]);\n                    _this.filterObj.element.focus();\n                }\n                var eventArgs = { popup: _this.popupObj };\n                _this.trigger('open', eventArgs);\n            }\n        });\n    };\n    DropDownTree.prototype.updatePopupHeight = function () {\n        if (this.isFirstRender) {\n            return;\n        }\n        var popupHeight = this.getHeight();\n        this.popupEle.style.maxHeight = popupHeight;\n        if (this.allowFiltering) {\n            var height = Math.round(this.filterContainer.getBoundingClientRect().height);\n            popupHeight = formatUnit(parseInt(popupHeight, 10) - height + 'px');\n        }\n        if (this.headerTemplate) {\n            var height = Math.round(this.header.getBoundingClientRect().height);\n            popupHeight = formatUnit(parseInt(popupHeight, 10) - height + 'px');\n        }\n        if (this.showCheckBox && this.showSelectAll && (!this.popupDiv.classList.contains(NODATA))) {\n            var height = Math.round(this.checkAllParent.getBoundingClientRect().height);\n            popupHeight = formatUnit(parseInt(popupHeight, 10) - height + 'px');\n        }\n        if (this.footerTemplate) {\n            var height = Math.round(this.footer.getBoundingClientRect().height);\n            popupHeight = formatUnit(parseInt(popupHeight, 10) - height + 'px');\n        }\n        var border = parseInt(window.getComputedStyle(this.popupEle).borderTopWidth, 10);\n        border = border + parseInt(window.getComputedStyle(this.popupEle).borderBottomWidth, 10);\n        popupHeight = formatUnit(parseInt(popupHeight, 10) - border + 'px');\n        this.popupDiv.style.maxHeight = popupHeight;\n    };\n    DropDownTree.prototype.createPopup = function (element) {\n        var _this = this;\n        if (this.isFirstRender) {\n            this.popupObj = new Popup(element, {\n                width: this.setWidth(),\n                targetType: 'relative',\n                collision: { X: 'flip', Y: 'flip' },\n                relateTo: this.inputWrapper,\n                zIndex: this.zIndex,\n                enableRtl: this.enableRtl,\n                position: { X: 'left', Y: 'bottom' },\n                close: function () {\n                    _this.isPopupOpen = false;\n                },\n                open: function () {\n                    EventHandler.add(document, 'mousedown', _this.onDocumentClick, _this);\n                    _this.isPopupOpen = true;\n                },\n                targetExitViewport: function () {\n                    if (!Browser.isDevice) {\n                        _this.hidePopup();\n                    }\n                }\n            });\n        }\n    };\n    /* To calculate the width when change via set model */\n    DropDownTree.prototype.setElementWidth = function (inputWidth) {\n        var ddElement = this.inputWrapper;\n        if (!isNullOrUndefined(inputWidth)) {\n            if (typeof inputWidth === 'number') {\n                ddElement.style.width = formatUnit(inputWidth);\n            }\n            else if (typeof inputWidth === 'string') {\n                ddElement.style.width = (inputWidth.match(/px|%|em/)) ? (inputWidth) :\n                    (formatUnit(inputWidth));\n            }\n        }\n    };\n    /* To calculate the width of the popup */\n    DropDownTree.prototype.setWidth = function () {\n        var width = formatUnit(this.popupWidth);\n        if (width.indexOf('%') > -1) {\n            width = (this.inputWrapper.offsetWidth * parseFloat(width) / 100).toString() + 'px';\n        }\n        else if (typeof this.popupWidth === 'string') {\n            width = (this.popupWidth.match(/px|em/)) ? (this.popupWidth) : width;\n        }\n        return width;\n    };\n    /* To calculate the height of the popup */\n    DropDownTree.prototype.getHeight = function () {\n        var height = formatUnit(this.popupHeight);\n        if (height.indexOf('%') > -1) {\n            // Will set the height of the popup according to the view port height\n            height = (document.documentElement.clientHeight * parseFloat(height) / 100).toString() + 'px';\n        }\n        else if (typeof this.popupHeight === 'string') {\n            height = (this.popupHeight.match(/px|em/)) ? (this.popupHeight) : height;\n        }\n        return height;\n    };\n    DropDownTree.prototype.onDocumentClick = function (e) {\n        var target = e.target;\n        var isTree = closest(target, '.' + PARENTITEM);\n        var isFilter = closest(target, '.' + FILTERWRAP);\n        var isHeader = closest(target, '.' + HEADER);\n        var isFooter = closest(target, '.' + FOOTER);\n        var isScroller = target.classList.contains(DROPDOWN) ? true :\n            (matches(target, '.e-ddt .e-popup') || matches(target, '.e-ddt .e-treeview'));\n        if ((this.isPopupOpen && ((!isNullOrUndefined(this.inputWrapper) && this.inputWrapper.contains(target)) || isTree || isScroller || isHeader || isFooter)) ||\n            ((this.allowMultiSelection || this.showCheckBox) && (this.isPopupOpen && target.classList.contains(CHIP_CLOSE) ||\n                (this.isPopupOpen && (target.classList.contains(CHECKALLPARENT) || target.classList.contains(ALLTEXT)\n                    || target.classList.contains(CHECKBOXFRAME)))))) {\n            this.isDocumentClick = false;\n            e.preventDefault();\n        }\n        else if (!isNullOrUndefined(this.inputWrapper) && !this.inputWrapper.contains(target) && this.inputFocus && !isFilter) {\n            this.focusOut(e);\n        }\n    };\n    DropDownTree.prototype.onActionFailure = function (e) {\n        this.trigger('actionFailure', e);\n        this.l10nUpdate(true);\n        addClass([this.popupDiv], NODATA);\n    };\n    DropDownTree.prototype.OnDataBound = function (args) {\n        this.treeItems = args.data;\n        if (this.treeItems.length <= 0) {\n            this.l10nUpdate();\n            addClass([this.popupDiv], NODATA);\n            this.hideCheckAll(true);\n        }\n        else if (this.popupDiv.classList.contains(NODATA) && this.treeItems.length >= 1) {\n            removeClass([this.popupDiv], NODATA);\n            this.hideCheckAll(false);\n        }\n        this.treeDataType = this.getTreeDataType(this.treeItems, this.fields);\n        if (this.isFirstRender && this.isRemoteData) {\n            this.setTreeValue();\n            this.setTreeText();\n            this.updateHiddenValue();\n            this.setSelectedValue();\n            if (!this.wrapText) {\n                this.updateView();\n            }\n            this.treeObj.element.focus();\n        }\n        var eventArgs = { data: args.data };\n        this.trigger('dataBound', eventArgs);\n        if (this.filterObj === null) {\n            this.isFilteredData = false;\n        }\n        if (this.isFilteredData) {\n            this.treeObj.expandAll();\n        }\n        if (this.isFilterRestore) {\n            this.restoreFilterSelection();\n            this.isFilterRestore = false;\n        }\n    };\n    DropDownTree.prototype.restoreFilterSelection = function () {\n        if (this.showCheckBox) {\n            this.treeObj.checkedNodes = this.value ? this.value : [];\n        }\n        else {\n            this.treeObj.selectedNodes = this.value ? this.value : [];\n        }\n    };\n    /* To set cssclass for the dropdowntree */\n    DropDownTree.prototype.setCssClass = function (newClass, oldClass) {\n        var elements = this.popupObj ? [this.inputWrapper, this.popupObj.element] : [this.inputWrapper];\n        if (!isNullOrUndefined(oldClass) && oldClass !== '') {\n            removeClass(elements, oldClass.split(' '));\n        }\n        if (!isNullOrUndefined(newClass) && newClass !== '') {\n            addClass(elements, newClass.split(' '));\n        }\n    };\n    DropDownTree.prototype.setEnableRTL = function (state) {\n        if (state) {\n            this.inputWrapper.classList.add(RTL);\n        }\n        else {\n            this.inputWrapper.classList.remove(RTL);\n        }\n        if (this.popupObj) {\n            this.popupObj.enableRtl = state;\n            this.popupObj.dataBind();\n        }\n        if (this.treeObj) {\n            this.treeObj.enableRtl = state;\n            this.treeObj.dataBind();\n        }\n    };\n    /* To set enable property */\n    DropDownTree.prototype.setEnable = function () {\n        Input.setEnabled(this.enabled, this.inputEle);\n        if (this.enabled) {\n            removeClass([this.inputWrapper], DISABLED);\n            this.inputEle.setAttribute('aria-disabled', 'false');\n            this.inputWrapper.setAttribute('aria-disabled', 'false');\n        }\n        else {\n            if (this.isPopupOpen) {\n                this.hidePopup();\n            }\n            addClass([this.inputWrapper], DISABLED);\n            if (this.inputWrapper && this.inputWrapper.classList.contains(INPUTFOCUS)) {\n                removeClass([this.inputWrapper], [INPUTFOCUS]);\n            }\n            this.inputEle.setAttribute('aria-disabled', 'true');\n            this.inputWrapper.setAttribute('aria-disabled', 'true');\n        }\n    };\n    DropDownTree.prototype.cloneFields = function (fields) {\n        var clonedField = {\n            dataSource: fields.dataSource, value: fields.value, text: fields.text, parentValue: fields.parentValue,\n            child: this.cloneChildField(fields.child), hasChildren: fields.hasChildren, expanded: fields.expanded,\n            iconCss: fields.iconCss, imageUrl: fields.imageUrl, htmlAttributes: fields.htmlAttributes, query: fields.query,\n            selected: fields.selected, selectable: fields.selectable, tableName: fields.tableName, tooltip: fields.tooltip\n        };\n        return clonedField;\n    };\n    DropDownTree.prototype.cloneChildField = function (fields) {\n        if (typeof fields === 'string') {\n            return fields;\n        }\n        else {\n            var clonedField = {\n                dataSource: fields.dataSource, value: fields.value, text: fields.text, parentValue: fields.parentValue,\n                child: (fields.child ? this.cloneChildField(fields.child) : null), hasChildren: fields.hasChildren,\n                expanded: fields.expanded, iconCss: fields.iconCss, imageUrl: fields.imageUrl, htmlAttributes: fields.htmlAttributes,\n                query: fields.query, selected: fields.selected, selectable: fields.selectable, tableName: fields.tableName, tooltip: fields.tooltip\n            };\n            return clonedField;\n        }\n    };\n    DropDownTree.prototype.getTreeFields = function (fields) {\n        var treeFields = {\n            dataSource: fields.dataSource, id: fields.value, text: fields.text, parentID: fields.parentValue,\n            child: this.getTreeChildren(fields.child), hasChildren: fields.hasChildren, expanded: fields.expanded,\n            iconCss: fields.iconCss, imageUrl: fields.imageUrl, isChecked: fields.selected,\n            htmlAttributes: fields.htmlAttributes, query: fields.query, selectable: fields.selectable, selected: fields.selected,\n            tableName: fields.tableName, tooltip: fields.tooltip\n        };\n        return treeFields;\n    };\n    DropDownTree.prototype.getTreeChildren = function (mapper) {\n        if (typeof mapper === 'string') {\n            return mapper;\n        }\n        else if (!isNullOrUndefined(mapper)) {\n            mapper = this.getActualProperties(mapper);\n            var childFields = mapper;\n            if (mapper.value) {\n                childFields.id = mapper.value;\n            }\n            if (mapper.parentValue) {\n                childFields.parentID = mapper.parentValue;\n            }\n            if (mapper.child) {\n                childFields.child = this.getTreeChildren(mapper.child);\n            }\n            if (mapper.selected && this.showCheckBox) {\n                childFields.isChecked = mapper.selected;\n            }\n            return childFields;\n        }\n        return null;\n    };\n    // eslint-disable-next-line\n    DropDownTree.prototype.getTreeDataType = function (ds, field) {\n        if (this.fields.dataSource instanceof DataManager) {\n            for (var i = 0; i < ds.length; i++) {\n                if ((typeof field.child === 'string') && isNullOrUndefined(getValue(field.child, ds[i]))) {\n                    return 1;\n                }\n            }\n            return 2;\n        }\n        if (isNullOrUndefined(this.fields.dataSource))\n            this.fields.dataSource = [];\n        for (var i = 0, len = this.fields.dataSource.length; i < len; i++) {\n            if ((typeof field.child === 'string') && !isNullOrUndefined(getValue(field.child, this.fields.dataSource[i]))) {\n                return 2;\n            }\n            if (!isNullOrUndefined(getValue(field.parentValue, this.fields.dataSource[i])) || !isNullOrUndefined(getValue(field.hasChildren, this.fields.dataSource[i]))) {\n                return 1;\n            }\n        }\n        return 1;\n    };\n    /* Triggers when the tree fields is changed dynamically */\n    DropDownTree.prototype.setFields = function () {\n        this.resetValue();\n        if (this.hasTemplate) {\n            this.updateTemplate();\n        }\n        this.treeObj.fields = this.getTreeFields(this.fields);\n        this.treeObj.dataBind();\n    };\n    DropDownTree.prototype.getEventArgs = function (args) {\n        // eslint-disable-next-line\n        var checkData = args.data;\n        // eslint-disable-next-line\n        var selectData = args.nodeData;\n        var state;\n        if (this.showCheckBox) {\n            if (args.action === 'check') {\n                state = 'select';\n            }\n            else if (args.action === 'uncheck') {\n                state = 'un-select';\n            }\n        }\n        var eventArgs = {\n            action: this.showCheckBox ? state : args.action,\n            isInteracted: this.isClicked ? true : args.isInteracted,\n            item: args.node,\n            itemData: this.showCheckBox ? checkData[0] : selectData\n        };\n        return eventArgs;\n    };\n    DropDownTree.prototype.onBeforeSelect = function (args) {\n        if (args.isInteracted) {\n            this.oldValue = this.value ? this.value.slice() : this.value;\n            if (this.value === null) {\n                this.setProperties({ value: [] }, true);\n            }\n            if (args.node.classList.contains(\"e-active\")) {\n                this.hidePopup();\n            }\n        }\n    };\n    DropDownTree.prototype.updateHiddenValue = function () {\n        if (this.allowMultiSelection || this.showCheckBox) {\n            return;\n        }\n        if (this.value && this.value.length) {\n            this.hiddenElement.innerHTML = '<option selected value =\"' + this.value[0] + '\">' + this.text + '</option>';\n        }\n        else {\n            this.hiddenElement.innerHTML = '';\n        }\n    };\n    /* Triggers when the tree node is selected */\n    DropDownTree.prototype.onNodeSelected = function (args) {\n        if (this.showCheckBox) {\n            return;\n        }\n        var selectedText;\n        if (args.isInteracted) {\n            var id = getValue('id', args.nodeData).toString();\n            if (!this.allowMultiSelection) {\n                this.hiddenElement.innerHTML = '';\n                this.setProperties({ value: [id] }, true);\n                if (this.itemTemplate) {\n                    selectedText = getValue('text', this.treeObj.getNode(id));\n                }\n                else {\n                    selectedText = getValue('text', args.nodeData).toString();\n                }\n                Input.setValue(selectedText, this.inputEle, this.floatLabelType);\n                this.setProperties({ text: selectedText }, true);\n                this.currentText = this.text;\n                this.currentValue = this.value;\n                attributes(this.inputWrapper, { 'aria-describedby': this.element.id });\n                attributes(this.inputWrapper, { 'aria-activedescendant': id.toString() });\n                this.updateHiddenValue();\n                this.showOverAllClear();\n                this.hidePopup();\n                this.isNodeSelected = true;\n            }\n            else if (this.allowMultiSelection) {\n                this.setMultiSelect();\n            }\n        }\n        var eventArgs = this.getEventArgs(args);\n        this.trigger('select', eventArgs);\n        if (this.isValueChange && !this.changeOnBlur) {\n            this.triggerChangeEvent(this.keyEventArgs);\n            this.isValueChange = false;\n        }\n    };\n    DropDownTree.prototype.onNodeClicked = function (args) {\n        if (!this.changeOnBlur && this.isNodeSelected) {\n            this.triggerChangeEvent(args.event);\n            this.isNodeSelected = false;\n        }\n        var target = args.event.target;\n        if ((target.classList.contains('e-fullrow') || target.classList.contains('e-list-text')) && this.showCheckBox) {\n            this.isClicked = true;\n            // eslint-disable-next-line\n            var getNodeDetails = this.treeObj.getNode(args.node);\n            if (getNodeDetails.isChecked === 'true') {\n                this.treeObj.uncheckAll([args.node]);\n            }\n            else {\n                this.treeObj.checkAll([args.node]);\n            }\n            this.isClicked = false;\n            this.setMultiSelect();\n            this.ensurePlaceHolder();\n        }\n        if (!this.changeOnBlur && (this.allowMultiSelection || this.showCheckBox)) {\n            this.triggerChangeEvent(args.event);\n        }\n    };\n    DropDownTree.prototype.onNodeChecked = function (args) {\n        var eventArgs = this.getEventArgs(args);\n        this.trigger('select', eventArgs);\n        if (this.isFilteredData && args.action === 'uncheck') {\n            var id = getValue('id', args.data[0]).toString();\n            this.removeSelectedData(id, true);\n        }\n        if (!this.isChipDelete && args.isInteracted) {\n            this.setMultiSelect();\n            this.ensurePlaceHolder();\n        }\n        if (this.showSelectAll && this.checkBoxElement) {\n            var nodes = this.treeObj.element.querySelectorAll('li');\n            var checkedNodes = this.treeObj.element.querySelectorAll('li .e-checkbox-wrapper[aria-checked=true]');\n            var wrap = closest(this.checkBoxElement, '.' + CHECKBOXWRAP);\n            if (wrap && args.action === 'uncheck' && (args.isInteracted || checkedNodes.length === 0 || (!isNullOrUndefined(args.data[0]) && args.data[0].isChecked === 'false'))) {\n                this.isReverseUpdate = true;\n                this.changeState(wrap, 'uncheck');\n                this.isReverseUpdate = false;\n            }\n            else if (wrap && args.action === 'check' && checkedNodes.length === nodes.length && (args.isInteracted || this.isCheckAllCalled || (!isNullOrUndefined(args.data[0]) && args.data[0].isChecked === 'true'))) {\n                this.isReverseUpdate = true;\n                this.isCheckAllCalled = false;\n                this.changeState(wrap, 'check');\n                this.isReverseUpdate = false;\n            }\n        }\n    };\n    DropDownTree.prototype.beforeCheck = function (args) {\n        if (args.isInteracted) {\n            this.oldValue = this.value ? this.value.slice() : this.value;\n        }\n    };\n    DropDownTree.prototype.onNodeExpanded = function (args) {\n        if (this.hasTemplate && this.portals && this.treeObj.portals) {\n            for (var i = 0; i < this.treeObj.portals.length; i++) {\n                if (this.portals.indexOf(this.treeObj.portals[i]) == -1) {\n                    this.portals.push(this.treeObj.portals[i]);\n                }\n            }\n            /* eslint-enable */\n            this.renderReactTemplates();\n        }\n    };\n    DropDownTree.prototype.updateClearButton = function (state) {\n        if (state) {\n            if (!this.inputWrapper.contains(this.overAllClear)) {\n                this.inputEle.parentElement.insertBefore(this.overAllClear, this.inputEle.nextSibling);\n            }\n            else {\n                removeClass([this.overAllClear], HIDEICON);\n                addClass([this.inputWrapper], SHOW_CLEAR);\n            }\n        }\n        else {\n            addClass([this.overAllClear], HIDEICON);\n            removeClass([this.inputWrapper], SHOW_CLEAR);\n        }\n        if ((this.allowMultiSelection || this.showCheckBox) && this.chipWrapper) {\n            var chipClose = selectAll('.' + CHIP_CLOSE, this.chipWrapper);\n            for (var i = 0; i < chipClose.length; i++) {\n                if (!state) {\n                    addClass([chipClose[i]], HIDEICON);\n                }\n                else {\n                    removeClass([chipClose[i]], HIDEICON);\n                }\n            }\n        }\n    };\n    DropDownTree.prototype.updateDropDownIconState = function (state) {\n        var spinIcon = select('.' + DDTICON, this.inputWrapper);\n        if (state) {\n            if (!spinIcon) {\n                Input.appendSpan(DROPDOWNICON, this.inputWrapper, this.createElement);\n            }\n            else {\n                removeClass([spinIcon], HIDEICON);\n            }\n            addClass([this.inputWrapper], SHOW_DD_ICON);\n        }\n        else {\n            addClass([spinIcon], HIDEICON);\n            removeClass([this.inputWrapper], SHOW_DD_ICON);\n        }\n    };\n    DropDownTree.prototype.updateMode = function () {\n        if (this.mode === 'Custom') {\n            return;\n        }\n        if (this.mode !== 'Delimiter') {\n            if (!this.inputWrapper.contains(this.chipWrapper)) {\n                this.createChip();\n            }\n            var isValid = this.getValidMode();\n            if (this.chipWrapper.classList.contains(HIDEICON) && isValid) {\n                removeClass([this.chipWrapper], HIDEICON);\n                addClass([this.inputWrapper], SHOW_CHIP);\n            }\n            else if (!isValid) {\n                addClass([this.chipWrapper], HIDEICON);\n                removeClass([this.inputWrapper], SHOW_CHIP);\n            }\n            var isValue = this.value !== null ? (this.value.length !== 0 ? true : false) : false;\n            if (isValid && isValue) {\n                addClass([this.inputEle], CHIP_INPUT);\n            }\n            else {\n                removeClass([this.inputEle], CHIP_INPUT);\n            }\n        }\n        else if (this.inputEle.classList.contains(CHIP_INPUT)) {\n            removeClass([this.inputEle], CHIP_INPUT);\n            if (this.chipWrapper) {\n                addClass([this.chipWrapper], HIDEICON);\n                removeClass([this.inputWrapper], SHOW_CHIP);\n            }\n        }\n    };\n    DropDownTree.prototype.ensurePlaceHolder = function () {\n        if (isNullOrUndefined(this.value) || (this.value && this.value.length === 0)) {\n            removeClass([this.inputEle], CHIP_INPUT);\n            if (this.chipWrapper) {\n                addClass([this.chipWrapper], HIDEICON);\n            }\n        }\n    };\n    DropDownTree.prototype.ensureClearIconPosition = function (floatLabelType) {\n        if (floatLabelType !== 'Never') {\n            this.inputWrapper.insertBefore(this.overAllClear, this.inputObj.buttons[0]);\n        }\n    };\n    DropDownTree.prototype.setMultiSelectValue = function (newValues) {\n        if (!this.isFilteredData) {\n            this.setProperties({ value: this.isFromFilterChange && newValues && newValues.length == 0 ? this.value : newValues }, true);\n            this.isFromFilterChange = false;\n            if (newValues && newValues.length !== 0 && !this.showCheckBox) {\n                this.treeObj.selectedNodes = this.value.slice();\n                this.treeObj.dataBind();\n            }\n        }\n        else {\n            var selectedValues = isNullOrUndefined(this.value) ? [] : this.value;\n            for (var i = 0; i < newValues.length; i++) {\n                if (isNullOrUndefined(this.value) || this.value.indexOf(newValues[i]) === -1) {\n                    selectedValues.push(newValues[i]);\n                }\n            }\n            this.setProperties({ value: selectedValues }, true);\n        }\n    };\n    DropDownTree.prototype.setMultiSelect = function () {\n        if (this.showCheckBox && !this.isDynamicChange) {\n            this.setMultiSelectValue(this.treeObj.checkedNodes.slice());\n        }\n        else {\n            var ddtValue = this.allowMultiSelection ? (this.showCheckBox ? this.treeObj.checkedNodes\n                : this.treeObj.selectedNodes) : (this.value ? (this.showCheckBox ? this.value : [this.value[0]]) : null);\n            this.setMultiSelectValue(ddtValue);\n            if (this.showCheckBox && this.value !== null) {\n                this.treeObj.checkedNodes = this.value;\n                this.treeObj.dataBind();\n            }\n        }\n        this.selectedText = [];\n        var checkSelection = this.allowMultiSelection ? true : (this.showCheckBox ? true : false);\n        if (this.inputWrapper.contains(this.chipWrapper) && !checkSelection) {\n            removeClass([this.inputEle], CHIP_INPUT);\n            detach(this.chipWrapper);\n        }\n        var isValid = this.getValidMode();\n        if (isValid && this.value !== null) {\n            addClass([this.inputEle], CHIP_INPUT);\n            if (this.chipWrapper) {\n                removeClass([this.chipWrapper], HIDEICON);\n            }\n        }\n        var isValue = this.value ? (this.value.length ? true : false) : false;\n        if (this.chipWrapper && (this.mode === 'Box' && !isValue)) {\n            addClass([this.chipWrapper], HIDEICON);\n            removeClass([this.inputEle], CHIP_INPUT);\n        }\n        this.updateSelectedValues();\n    };\n    // eslint-disable-next-line\n    DropDownTree.prototype.getSelectedData = function (value) {\n        // eslint-disable-next-line\n        var data = null;\n        if (this.isFilteredData) {\n            for (var i = 0; i < this.selectedData.length; i++) {\n                if (getValue(this.treeSettings.loadOnDemand ? this.fields.value : 'id', this.selectedData[i]).toString() === value) {\n                    data = this.selectedData[i];\n                    break;\n                }\n            }\n        }\n        if (isNullOrUndefined(data)) {\n            if (this.treeSettings.loadOnDemand) {\n                data = this.getNodeData(value);\n            }\n            else {\n                data = this.treeObj.getNode(value);\n            }\n            if (!isNullOrUndefined(data)) {\n                this.selectedData.push(data);\n            }\n        }\n        return data;\n    };\n    DropDownTree.prototype.getNodeData = function (id) {\n        var childItems;\n        if (isNullOrUndefined(id)) {\n            return childItems;\n        }\n        else if (this.treeDataType === 1) {\n            for (var i = 0, objlen = this.treeItems.length; i < objlen; i++) {\n                var dataId = getValue(this.fields.value, this.treeItems[i]);\n                if (!isNullOrUndefined(this.treeItems[i]) && !isNullOrUndefined(dataId) && dataId.toString() === id) {\n                    return this.treeItems[i];\n                }\n            }\n        }\n        else {\n            return this.getChildNodeData(this.treeItems, this.fields, id);\n        }\n        return childItems;\n    };\n    DropDownTree.prototype.getChildNodeData = function (obj, mapper, id) {\n        var newChildItems;\n        if (isNullOrUndefined(obj)) {\n            return newChildItems;\n        }\n        for (var i = 0, objlen = obj.length; i < objlen; i++) {\n            var dataValue = getValue(mapper.value, obj[i]);\n            if (obj[i] && dataValue && dataValue.toString() === id) {\n                return obj[i];\n            }\n            else if (typeof mapper.child === 'string' && !isNullOrUndefined(getValue(mapper.child, obj[i]))) {\n                var childNodeData = getValue(mapper.child, obj[i]);\n                newChildItems = this.getChildNodeData(childNodeData, this.getChildMapperFields(mapper), id);\n                if (newChildItems !== undefined) {\n                    break;\n                }\n            }\n            else if (this.fields.dataSource instanceof DataManager && !isNullOrUndefined(getValue('child', obj[i]))) {\n                var child = 'child';\n                newChildItems = this.getChildNodeData(getValue(child, obj[i]), this.getChildMapperFields(mapper), id);\n                if (newChildItems !== undefined) {\n                    break;\n                }\n            }\n        }\n        return newChildItems;\n    };\n    DropDownTree.prototype.getChildMapperFields = function (mapper) {\n        return (typeof mapper.child === 'string' || isNullOrUndefined(mapper.child)) ? mapper : mapper.child;\n    };\n    DropDownTree.prototype.removeSelectedData = function (value, muteOnChange) {\n        var selectedValues = isNullOrUndefined(this.value) ? [] : this.value.slice();\n        selectedValues.splice(selectedValues.indexOf(value), 1);\n        this.setProperties({ value: selectedValues }, muteOnChange);\n        for (var i = 0; i < this.selectedData.length; i++) {\n            if (getValue(this.treeSettings.loadOnDemand ? this.fields.value : 'id', this.selectedData[i]).toString() === value) {\n                this.selectedData.splice(i, 1);\n                break;\n            }\n        }\n    };\n    DropDownTree.prototype.updateSelectedValues = function () {\n        this.dataValue = '';\n        var temp;\n        var text;\n        var textValue = '';\n        // eslint-disable-next-line\n        var selectedData;\n        this.hiddenElement.innerHTML = '';\n        var hiddenInputValue = '';\n        if ((!this.isChipDelete || this.treeSettings.autoCheck) && (this.inputWrapper.contains(this.chipWrapper))) {\n            this.chipCollection.innerHTML = '';\n        }\n        if (!this.isFilteredData) {\n            this.selectedData = [];\n        }\n        if (!isNullOrUndefined(this.value)) {\n            for (var i = 0, len = this.value.length; i < len; i++) {\n                selectedData = this.getSelectedData(this.value[i]);\n                text = getValue(this.treeSettings.loadOnDemand ? this.fields.text : 'text', selectedData);\n                this.selectedText.push(text);\n                temp = this.selectedText[this.selectedText.length - 1];\n                if (this.selectedText.length > 1) {\n                    this.dataValue += (this.delimiterChar + ' ' + temp);\n                    textValue += (',' + temp);\n                }\n                else {\n                    this.dataValue += temp;\n                    textValue += temp;\n                }\n                if (this.mode !== 'Custom' && this.mode !== 'Delimiter' && (!this.isChipDelete || this.treeSettings.autoCheck) &&\n                    (this.allowMultiSelection || this.showCheckBox)) {\n                    this.setChipValues(temp, this.value[i]);\n                }\n                hiddenInputValue += '<option selected value =\"' + this.value[i] + '\">' +\n                    this.selectedText[this.selectedText.length - 1] + '</option>';\n            }\n            if (this.selectedText.length >= 1) {\n                this.setProperties({ text: textValue }, true);\n            }\n            this.hiddenElement.innerHTML = hiddenInputValue;\n            if (this.mode === 'Custom' && (this.allowMultiSelection || this.showCheckBox)) {\n                this.setTagValues();\n            }\n        }\n        var isValid = this.getValidMode();\n        if (this.mode !== 'Custom' && this.mode !== 'Box' && (this.allowMultiSelection || this.showCheckBox) && !isValid) {\n            if (this.chipWrapper) {\n                addClass([this.chipWrapper], HIDEICON);\n                removeClass([this.inputWrapper], SHOW_CHIP);\n            }\n        }\n        Input.setValue(this.dataValue, this.inputEle, this.floatLabelType);\n        if (textValue === '') {\n            this.setProperties({ text: null }, true);\n        }\n        else {\n            this.setProperties({ text: textValue }, true);\n        }\n        if (this.showClearButton && this.inputFocus) {\n            this.showOverAllClear();\n        }\n        if ((this.allowMultiSelection || this.showCheckBox) && this.popupObj) {\n            this.popupObj.refreshPosition();\n        }\n        this.currentText = this.text;\n        this.currentValue = this.value;\n    };\n    DropDownTree.prototype.setChipValues = function (text, value) {\n        if (!this.inputWrapper.contains(this.chipWrapper)) {\n            this.createChip();\n        }\n        var chip = this.createElement('span', {\n            className: CHIP,\n            attrs: { 'data-value': value }\n        });\n        var chipContent = this.createElement('span', { className: CHIP_CONTENT });\n        var chipClose = this.createElement('span', { className: CHIP_CLOSE + ' ' + ICONS });\n        if (this.enableHtmlSanitizer) {\n            chipContent.innerText = SanitizeHtmlHelper.sanitize(text);\n        }\n        else {\n            chipContent.innerHTML = text;\n        }\n        chip.appendChild(chipContent);\n        this.chipCollection.appendChild(chip);\n        if (this.showClearButton) {\n            chip.appendChild(chipClose);\n            EventHandler.add(chipClose, 'mousedown', this.removeChip, this);\n        }\n    };\n    DropDownTree.prototype.setTagValues = function () {\n        if (this.value === null || this.text == null) {\n            return;\n        }\n        if (!this.inputWrapper.contains(this.chipWrapper)) {\n            this.createChip();\n        }\n        if (!this.inputWrapper.classList.contains(SHOW_CHIP)) {\n            addClass([this.inputWrapper], SHOW_CHIP);\n        }\n        var chip = this.createElement('span', {\n            className: CHIP,\n        });\n        if (!this.inputEle.classList.contains(CHIP_INPUT)) {\n            addClass([this.inputEle], CHIP_INPUT);\n        }\n        if (this.chipWrapper.classList.contains(HIDEICON)) {\n            removeClass([this.chipWrapper], HIDEICON);\n        }\n        var chipContent = this.createElement('span', { className: CHIP_CONTENT });\n        var template = this.customTemplate;\n        var templateId = this.customTemplateId;\n        var templatestring = 'customTemplate';\n        var compiledString = this.templateComplier(template);\n        var tempArr = compiledString({ 'value': this.value, 'text': this.text }, this, templatestring, templateId, this.isStringTemplate, undefined, chipContent);\n        if (tempArr) {\n            tempArr = Array.prototype.slice.call(tempArr);\n            append(tempArr, chipContent);\n        }\n        chip.appendChild(chipContent);\n        this.chipCollection.appendChild(chip);\n    };\n    DropDownTree.prototype.setSelectAllWrapper = function (state) {\n        if (this.isFirstRender) {\n            return;\n        }\n        if (state && !this.popupEle.contains(this.checkAllParent) && this.showCheckBox) {\n            this.createSelectAllWrapper();\n            this.popupEle.insertBefore(this.checkAllParent, this.popupDiv);\n        }\n        else if (this.popupEle.contains(this.checkAllParent)) {\n            detach(this.checkAllParent);\n            this.checkAllParent = null;\n        }\n    };\n    DropDownTree.prototype.setHeaderTemplate = function () {\n        if (this.header) {\n            this.header.innerHTML = '';\n        }\n        else {\n            this.header = this.createElement('div');\n            addClass([this.header], HEADER);\n        }\n        // eslint-disable-next-line\n        var compiledString = this.templateComplier(this.headerTemplate);\n        var tempArr = compiledString({}, this, 'headerTemplate', this.headerTemplateId, this.isStringTemplate, undefined, this.header);\n        if (tempArr) {\n            tempArr = Array.prototype.slice.call(tempArr);\n            append(tempArr, this.header);\n        }\n        this.popupEle.insertBefore(this.header, this.checkAllParent ? this.checkAllParent : this.popupDiv);\n    };\n    // eslint-disable-next-line\n    DropDownTree.prototype.templateComplier = function (template) {\n        if (template) {\n            // eslint-disable-next-line\n            try {\n                if (typeof template !== 'function' && document.querySelectorAll(template).length) {\n                    return compile(document.querySelector(template).innerHTML.trim());\n                }\n                else {\n                    return compile(template);\n                }\n            }\n            catch (e) {\n                return compile(template);\n            }\n        }\n        return compile(template);\n    };\n    DropDownTree.prototype.setFooterTemplate = function () {\n        if (this.footer) {\n            this.footer.innerHTML = '';\n        }\n        else {\n            this.footer = this.createElement('div');\n            addClass([this.footer], FOOTER);\n        }\n        // eslint-disable-next-line\n        var compiledString = this.templateComplier(this.footerTemplate);\n        var tempArr = compiledString({}, this, 'footerTemplate', this.footerTemplateId, this.isStringTemplate, undefined, this.footer);\n        if (tempArr) {\n            tempArr = Array.prototype.slice.call(tempArr);\n            append(tempArr, this.footer);\n        }\n        append([this.footer], this.popupEle);\n    };\n    DropDownTree.prototype.clearAll = function (e) {\n        if (!this.enabled || this.readonly) {\n            return;\n        }\n        this.resetValue();\n        this.showOverAllClear();\n        if ((this.allowMultiSelection || this.showCheckBox)) {\n            if (this.popupObj) {\n                this.popupObj.refreshPosition();\n            }\n            if (!this.wrapText) {\n                this.updateOverflowWrapper(true);\n            }\n        }\n        if (e) {\n            this.isClearButtonClick = true;\n        }\n        if (!this.changeOnBlur) {\n            this.triggerChangeEvent(e);\n        }\n    };\n    DropDownTree.prototype.removeChip = function (e) {\n        if (!this.enabled || this.readonly) {\n            return;\n        }\n        var element = e.target.parentElement;\n        var value = element.getAttribute('data-value');\n        if (this.chipCollection) {\n            if (element) {\n                remove(element);\n            }\n        }\n        this.isChipDelete = true;\n        this.isClearButtonClick = true;\n        this.removeSelectedData(value, true);\n        this.selectedText = [];\n        if (this.allowMultiSelection) {\n            this.treeObj.selectedNodes = this.value.slice();\n            this.updateSelectedValues();\n        }\n        if (this.showCheckBox) {\n            this.treeObj.uncheckAll([value]);\n            this.clearCheckAll();\n            this.setMultiSelect();\n        }\n        this.triggerChangeEvent(e);\n        this.isChipDelete = false;\n        this.ensurePlaceHolder();\n    };\n    DropDownTree.prototype.resetValue = function (isDynamicChange) {\n        if (this.value == [] && this.text == null) {\n            return;\n        }\n        Input.setValue(null, this.inputEle, this.floatLabelType);\n        if (!isDynamicChange) {\n            this.oldValue = this.value;\n            this.setProperties({ value: [] }, true);\n        }\n        this.dataValue = null;\n        this.setProperties({ text: null }, true);\n        this.selectedData = [];\n        setValue('selectedNodes', [], this.treeObj);\n        this.hiddenElement.innerHTML = '';\n        if (this.showCheckBox) {\n            this.treeObj.uncheckAll();\n            this.setMultiSelect();\n            this.clearCheckAll();\n        }\n        if (this.oldValue === null && !isDynamicChange) {\n            this.removeValue = true;\n        }\n        else if (isDynamicChange) {\n            this.triggerChangeEvent();\n        }\n        if ((this.allowMultiSelection || this.showCheckBox) && this.chipWrapper) {\n            this.chipCollection.innerHTML = '';\n            if (!this.wrapText) {\n                this.updateOverflowWrapper(true);\n            }\n            this.ensurePlaceHolder();\n        }\n    };\n    DropDownTree.prototype.clearCheckAll = function () {\n        if (this.showSelectAll && this.value && this.value.length === 0) {\n            this.setLocale(false);\n        }\n    };\n    DropDownTree.prototype.selectAllItems = function (state) {\n        if (this.showCheckBox) {\n            if (state) {\n                this.isCheckAllCalled = true;\n                this.treeObj.checkAll();\n            }\n            else {\n                this.treeObj.uncheckAll();\n            }\n            this.checkSelectAll = state;\n        }\n        else if (this.allowMultiSelection) {\n            if (!state) {\n                this.treeObj.selectedNodes = [];\n            }\n            else {\n                var li = selectAll('li', this.treeObj.element);\n                var id = void 0;\n                var arr = [];\n                for (var i = 0; i < li.length; i++) {\n                    id = li[i].getAttribute('data-uid').toString();\n                    arr.push(id);\n                }\n                this.treeObj.selectedNodes = arr;\n            }\n        }\n        this.updateMode();\n        this.setMultiSelect();\n        if (!this.wrapText) {\n            if (state) {\n                this.updateView();\n            }\n            else {\n                this.updateOverflowWrapper(true);\n            }\n        }\n    };\n    DropDownTree.prototype.updateTreeSettings = function (prop) {\n        var value = Object.keys(prop.treeSettings)[0];\n        if (value === 'autoCheck') {\n            this.treeObj.autoCheck = this.treeSettings.autoCheck;\n        }\n        else if (value === 'loadOnDemand') {\n            this.treeObj.loadOnDemand = this.treeSettings.loadOnDemand;\n        }\n        else if (value === 'expandOn') {\n            this.treeObj.expandOn = this.treeSettings.expandOn;\n            this.treeObj.dataBind();\n            return;\n        }\n        this.treeObj.dataBind();\n        this.setMultiSelect();\n        this.updateValue(this.value);\n    };\n    DropDownTree.prototype.updateCheckBoxState = function (checkBox) {\n        if (this.hasTemplate) {\n            this.updateTemplate();\n        }\n        if (!this.wrapText) {\n            this.updateOverflowWrapper(false);\n        }\n        this.treeObj.showCheckBox = checkBox;\n        this.treeObj.dataBind();\n        this.isDynamicChange = true;\n        this.setSelectAllWrapper(this.showSelectAll);\n        if (this.showSelectAll) {\n            this.setLocale();\n        }\n        if (this.showCheckBox) {\n            this.updateMode();\n        }\n        this.setMultiSelect();\n        this.isDynamicChange = false;\n    };\n    DropDownTree.prototype.updateTemplate = function () {\n        if (this.popupObj) {\n            this.clearTemplate();\n            /* eslint-disable */\n            this.portals = [];\n            /* eslint-enable */\n            this.popupObj.destroy();\n            if (this.isPopupOpen) {\n                this.hidePopup();\n                this.isFirstRender = true;\n                this.renderPopup();\n            }\n            else {\n                this.isFirstRender = true;\n            }\n        }\n    };\n    DropDownTree.prototype.l10nUpdate = function (actionFailure) {\n        if (this.noRecord) {\n            this.noRecord.innerHTML = '';\n        }\n        else {\n            this.noRecord = this.createElement('div');\n        }\n        if (this.noRecordsTemplate !== 'No Records Found' || this.actionFailureTemplate !== 'The Request Failed') {\n            var template = actionFailure ? this.actionFailureTemplate : this.noRecordsTemplate;\n            var templateId = actionFailure ? this.actionFailureTemplateId : this.noRecordsTemplateId;\n            var templatestring = actionFailure ? 'actionFailureTemplate' : 'noRecordsTemplate';\n            // eslint-disable-next-line\n            var compiledString = this.templateComplier(template);\n            var tempArr = compiledString({}, this, templatestring, templateId, this.isStringTemplate, undefined, this.noRecord);\n            if (tempArr) {\n                tempArr = Array.prototype.slice.call(tempArr);\n                append(tempArr, this.noRecord);\n            }\n        }\n        else {\n            // eslint-disable-next-line\n            var l10nLocale = { noRecordsTemplate: 'No Records Found', actionFailureTemplate: 'The Request Failed' };\n            this.l10n = new L10n(this.getLocaleName(), l10nLocale, this.locale);\n            this.noRecord.innerHTML = actionFailure ?\n                this.l10n.getConstant('actionFailureTemplate') : this.l10n.getConstant('noRecordsTemplate');\n        }\n        addClass([this.noRecord], NODATACONTAINER);\n        prepend([this.noRecord], this.popupDiv);\n    };\n    DropDownTree.prototype.updateRecordTemplate = function (action) {\n        if (this.treeItems && this.treeItems.length <= 0) {\n            this.l10nUpdate(action);\n            if (this.hasTemplate) {\n                this.updateTemplate();\n            }\n        }\n    };\n    DropDownTree.prototype.updateOverflowWrapper = function (state) {\n        if (!state) {\n            if (!this.inputWrapper.contains(this.overFlowWrapper)) {\n                this.overFlowWrapper = this.createElement('span', { className: OVERFLOW_VIEW + ' ' + HIDEICON });\n                this.inputWrapper.insertBefore(this.overFlowWrapper, this.hiddenElement);\n            }\n        }\n        else if (this.inputWrapper.contains(this.overFlowWrapper) && state) {\n            this.overFlowWrapper.innerHTML = '';\n        }\n    };\n    DropDownTree.prototype.updateMultiSelection = function (state) {\n        if (!this.wrapText) {\n            this.updateOverflowWrapper(false);\n        }\n        this.treeObj.allowMultiSelection = state;\n        this.treeObj.dataBind();\n        this.updateOption();\n        if (this.allowMultiSelection) {\n            this.updateMode();\n        }\n        this.setMultiSelect();\n    };\n    DropDownTree.prototype.updateAllowFiltering = function (state) {\n        if (!this.isFirstRender) {\n            if (state) {\n                this.renderFilter();\n            }\n            else {\n                this.destroyFilter();\n            }\n        }\n    };\n    DropDownTree.prototype.updateFilterPlaceHolder = function () {\n        if (this.filterObj) {\n            this.filterObj.placeholder = this.filterBarPlaceholder;\n            this.filterObj.element.setAttribute('aria-label', this.filterBarPlaceholder);\n        }\n    };\n    DropDownTree.prototype.updateValue = function (value) {\n        this.isDynamicChange = true;\n        if (isNullOrUndefined(value) || value.length === 0) {\n            this.resetValue(true);\n        }\n        else {\n            this.setTreeValue();\n            if ((this.allowMultiSelection || this.showCheckBox) && !this.wrapText) {\n                this.updateOverflowWrapper(false);\n                this.updateView();\n            }\n        }\n        this.updateHiddenValue();\n        this.isDynamicChange = false;\n    };\n    DropDownTree.prototype.updateText = function (text) {\n        if (isNullOrUndefined(text)) {\n            this.resetValue();\n        }\n        else {\n            this.setTreeText();\n            if ((this.allowMultiSelection || this.showCheckBox) && !this.wrapText) {\n                this.updateOverflowWrapper(false);\n                this.updateView();\n            }\n        }\n        this.updateHiddenValue();\n    };\n    DropDownTree.prototype.updateModelMode = function () {\n        var validMode = this.allowMultiSelection ? true : (this.showCheckBox ? true : false);\n        if (!validMode) {\n            return;\n        }\n        if (!this.wrapText) {\n            var overFlow = select('.' + OVERFLOW_VIEW, this.inputWrapper);\n            if (overFlow) {\n                overFlow.innerHTML = '';\n            }\n        }\n        this.updateMode();\n        this.setMultiSelect();\n        if (!this.wrapText && (this.value && this.value.length !== 0)) {\n            this.updateOverFlowView();\n            addClass([this.inputEle], CHIP_INPUT);\n            if (this.mode === 'Box') {\n                removeClass([this.overFlowWrapper, this.inputWrapper], SHOW_TEXT);\n            }\n            else {\n                addClass([this.overFlowWrapper, this.inputWrapper], SHOW_TEXT);\n            }\n        }\n    };\n    DropDownTree.prototype.updateOption = function () {\n        if (!this.hiddenElement.hasAttribute('multiple') && (this.allowMultiSelection || this.showCheckBox)) {\n            this.hiddenElement.setAttribute('multiple', '');\n        }\n        else if (this.hiddenElement.hasAttribute('multiple') && (!this.allowMultiSelection && !this.showCheckBox)) {\n            this.hiddenElement.removeAttribute('multiple');\n        }\n    };\n    /**\n     * Dynamically change the value of properties.\n     *\n     * @param {DropDownTreeModel} newProp - specifies the newProp value.\n     * @param {DropDownTreeModel} oldProp - specifies the newProp value.\n     * @returns {void}\n     * @private\n     */\n    DropDownTree.prototype.onPropertyChanged = function (newProp, oldProp) {\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'width':\n                    this.setElementWidth(newProp.width);\n                    if (this.popupObj) {\n                        this.popupObj.element.style.width = this.setWidth();\n                    }\n                    break;\n                case 'placeholder':\n                    Input.setPlaceholder(newProp.placeholder, this.inputEle);\n                    break;\n                case 'cssClass':\n                    this.setCssClass(newProp.cssClass, oldProp.cssClass);\n                    break;\n                case 'enableRtl':\n                    this.setEnableRTL(this.enableRtl);\n                    break;\n                case 'fields':\n                    this.setFields();\n                    break;\n                case 'readonly':\n                    Input.setReadonly(newProp.readonly, this.inputEle);\n                    break;\n                case 'enabled':\n                    this.setEnable();\n                    break;\n                case 'floatLabelType':\n                    Input.removeFloating(this.inputObj);\n                    Input.addFloating(this.inputEle, newProp.floatLabelType, this.placeholder, this.createElement);\n                    this.ensureClearIconPosition(newProp.floatLabelType);\n                    break;\n                case 'showClearButton':\n                    this.updateClearButton(newProp.showClearButton);\n                    break;\n                case 'allowFiltering':\n                    this.updateAllowFiltering(newProp.allowFiltering);\n                    break;\n                case 'filterBarPlaceholder':\n                    this.updateFilterPlaceHolder();\n                    break;\n                case 'value':\n                    this.oldValue = oldProp.value;\n                    this.updateValue(newProp.value);\n                    break;\n                case 'text':\n                    this.updateText(newProp.text);\n                    break;\n                case 'allowMultiSelection':\n                    this.updateMultiSelection(newProp.allowMultiSelection);\n                    break;\n                case 'mode':\n                    if (!this.showCheckBox && !this.allowMultiSelection) {\n                        return;\n                    }\n                    if (this.mode === 'Custom') {\n                        if (this.overFlowWrapper) {\n                            detach(this.overFlowWrapper);\n                        }\n                        if (this.chipWrapper) {\n                            detach(this.chipWrapper);\n                        }\n                        this.setTagValues();\n                    }\n                    else {\n                        if (oldProp.mode === 'Custom') {\n                            this.updateOverflowWrapper(this.wrapText);\n                        }\n                        this.updateModelMode();\n                    }\n                    break;\n                case 'delimiterChar':\n                    if (this.mode === 'Box') {\n                        return;\n                    }\n                    if (this.showCheckBox || this.allowMultiSelection) {\n                        this.setMultiSelect();\n                    }\n                    break;\n                case 'selectAllText':\n                    if (this.showCheckBox && this.showSelectAll) {\n                        this.setLocale();\n                    }\n                    break;\n                case 'unSelectAllText':\n                    if (this.showCheckBox && this.showSelectAll) {\n                        this.setLocale(false);\n                    }\n                    break;\n                case 'showSelectAll':\n                    if (this.showCheckBox) {\n                        this.setSelectAllWrapper(newProp.showSelectAll);\n                        this.updatePopupHeight();\n                    }\n                    break;\n                case 'showCheckBox':\n                    this.updateCheckBoxState(newProp.showCheckBox);\n                    if (!this.wrapText) {\n                        this.updateOverflowWrapper(true);\n                    }\n                    this.updatePopupHeight();\n                    this.updateOption();\n                    break;\n                case 'treeSettings':\n                    this.updateTreeSettings(newProp);\n                    break;\n                case 'customTemplate':\n                    if (this.mode !== \"Custom\") {\n                        return;\n                    }\n                    this.chipCollection.innerHTML = \"\";\n                    this.setTagValues();\n                    break;\n                case 'sortOrder':\n                    if (this.hasTemplate) {\n                        this.updateTemplate();\n                    }\n                    this.treeObj.sortOrder = newProp.sortOrder;\n                    this.treeObj.dataBind();\n                    this.updateValue(this.value);\n                    break;\n                case 'showDropDownIcon':\n                    this.updateDropDownIconState(newProp.showDropDownIcon);\n                    break;\n                case 'popupWidth':\n                    if (this.popupObj) {\n                        this.popupObj.element.style.width = this.setWidth();\n                    }\n                    break;\n                case 'popupHeight':\n                    if (this.popupObj) {\n                        this.updatePopupHeight();\n                    }\n                    break;\n                case 'zIndex':\n                    if (this.popupObj) {\n                        this.popupObj.zIndex = newProp.zIndex;\n                        this.popupObj.dataBind();\n                    }\n                    break;\n                case 'headerTemplate':\n                    this.updateTemplate();\n                    break;\n                case 'footerTemplate':\n                    this.updateTemplate();\n                    break;\n                case 'itemTemplate':\n                    this.updateTemplate();\n                    this.treeObj.nodeTemplate = newProp.itemTemplate;\n                    this.treeObj.dataBind();\n                    break;\n                case 'noRecordsTemplate':\n                    this.updateRecordTemplate();\n                    break;\n                case 'actionFailureTemplate':\n                    this.updateRecordTemplate(true);\n                    break;\n                case 'htmlAttributes':\n                    this.setHTMLAttributes();\n                    break;\n                case 'wrapText':\n                    this.updateOverflowWrapper(this.wrapText);\n                    if ((this.allowMultiSelection || this.showCheckBox) && !this.wrapText) {\n                        this.updateView();\n                    }\n                    else {\n                        addClass([this.overFlowWrapper], HIDEICON);\n                        if (this.chipWrapper && this.mode === 'Box') {\n                            removeClass([this.chipWrapper], HIDEICON);\n                        }\n                        else {\n                            removeClass([this.inputWrapper], SHOW_CHIP);\n                            removeClass([this.inputEle], CHIP_INPUT);\n                        }\n                        this.ensurePlaceHolder();\n                    }\n                    break;\n            }\n        }\n    };\n    /**\n     * Allows you to clear the selected values from the Dropdown Tree component.\n     *\n     * @method clear\n     * @returns {void}\n     */\n    DropDownTree.prototype.clear = function () {\n        this.clearAll();\n        if (this.inputFocus) {\n            this.onFocusOut();\n        }\n        else {\n            if (this.changeOnBlur) {\n                this.triggerChangeEvent();\n            }\n            this.removeValue = false;\n        }\n    };\n    /**\n     * Removes the component from the DOM and detaches all its related event handlers. Also, it removes the attributes and classes.\n     *\n     * @method destroy\n     * @returns {void}\n     */\n    DropDownTree.prototype.destroy = function () {\n        this.clearTemplate();\n        this.unWireEvents();\n        this.setCssClass(null, this.cssClass);\n        this.setProperties({ text: null }, true);\n        this.treeObj.destroy();\n        this.destroyFilter();\n        if (this.popupObj) {\n            this.popupObj.destroy();\n            detach(this.popupObj.element);\n        }\n        if (this.element.tagName !== this.getDirective()) {\n            this.inputWrapper.parentElement.insertBefore(this.element, this.inputWrapper);\n        }\n        Input.setValue(null, this.inputEle, this.floatLabelType);\n        detach(this.inputWrapper);\n        detach(this.popupDiv);\n        detach(this.hiddenElement);\n        this.element.classList.remove('e-input');\n        if (this.showCheckBox || this.allowMultiSelection) {\n            this.element.classList.remove(CHIP_INPUT);\n        }\n        this.inputObj = null;\n        while (this.hiddenElement.options.length > 0) {\n            this.hiddenElement.remove(0);\n        }\n        this.hiddenElement.innerHTML = '';\n        this.hiddenElement = null;\n        this.inputWrapper = null;\n        this.popupDiv = null;\n        this.tree = null;\n        this.popupObj = null;\n        this.treeObj = null;\n        this.overAllClear = null;\n        this.chipWrapper = null;\n        this.chipCollection = null;\n        this.checkAllParent = null;\n        this.selectAllSpan = null;\n        this.checkBoxElement = null;\n        this.checkWrapper = null;\n        this.popupEle = null;\n        this.header = null;\n        this.footer = null;\n        this.overFlowWrapper = null;\n        this.keyboardModule = null;\n        _super.prototype.destroy.call(this);\n        this.setProperties({ value: [] }, true);\n    };\n    DropDownTree.prototype.destroyFilter = function () {\n        if (this.filterObj) {\n            this.filterObj.destroy();\n            detach(this.filterObj.element);\n            detach(this.filterContainer);\n            this.filterObj = null;\n        }\n    };\n    /**\n     * Ensures visibility of the Dropdown Tree item by using item value or item element.\n     * If many Dropdown Tree items are present, and we are in need to find a particular item, then the `ensureVisible` property\n     * helps you to bring the item to visibility by expanding the Dropdown Tree and scrolling to the specific item.\n     *\n     * @param  {string | Element} item - Specifies the value of Dropdown Tree item/ Dropdown Tree item element.\n     * @returns {void}\n     */\n    DropDownTree.prototype.ensureVisible = function (item) {\n        this.treeObj.ensureVisible(item);\n    };\n    /**\n     * To get the updated data source of the Dropdown Tree.\n     *\n     * @param  {string | Element} item - Specifies the value of Dropdown Tree item/ Dropdown Tree item element\n     * @returns {'{[key: string]: Object }[]'} - returns the updated data source of the Dropdown Tree.\n     */\n    // eslint-disable-next-line\n    DropDownTree.prototype.getData = function (item) {\n        return this.treeObj.getTreeData(item);\n    };\n    /**\n     * Close the Dropdown tree pop-up.\n     *\n     * @returns {void}\n     */\n    DropDownTree.prototype.hidePopup = function () {\n        var eventArgs = { popup: this.popupObj };\n        this.inputWrapper.classList.remove(ICONANIMATION);\n        if (this.popupEle) {\n            addClass([this.popupEle], DDTHIDEICON);\n        }\n        attributes(this.inputEle, { 'aria-expanded': 'false' });\n        if (this.popupObj && this.isPopupOpen) {\n            this.popupObj.hide();\n            if (this.inputFocus) {\n                this.inputWrapper.focus();\n                if (this.allowFiltering) {\n                    addClass([this.inputWrapper], [INPUTFOCUS]);\n                }\n            }\n            this.trigger('close', eventArgs);\n        }\n    };\n    /**\n     * Based on the state parameter, entire list item will be selected or deselected.\n     *\n     * @param {boolean} state - Unselects/Selects entire Dropdown Tree items.\n     * @returns {void}\n     *\n     */\n    DropDownTree.prototype.selectAll = function (state) {\n        this.selectAllItems(state);\n    };\n    /**\n     * Opens the popup that displays the Dropdown Tree items.\n     *\n     * @returns {void}\n     */\n    DropDownTree.prototype.showPopup = function () {\n        if (!this.enabled || this.readonly || this.isPopupOpen) {\n            return;\n        }\n        this.renderPopup();\n        this.focusIn();\n    };\n    /**\n     * Return the module name.\n     *\n     * @private\n     * @returns {string} - returns the module name.\n     */\n    DropDownTree.prototype.getModuleName = function () {\n        return 'dropdowntree';\n    };\n    __decorate$2([\n        Property('The Request Failed')\n    ], DropDownTree.prototype, \"actionFailureTemplate\", void 0);\n    __decorate$2([\n        Property(false)\n    ], DropDownTree.prototype, \"allowFiltering\", void 0);\n    __decorate$2([\n        Property(false)\n    ], DropDownTree.prototype, \"allowMultiSelection\", void 0);\n    __decorate$2([\n        Property(true)\n    ], DropDownTree.prototype, \"changeOnBlur\", void 0);\n    __decorate$2([\n        Property('')\n    ], DropDownTree.prototype, \"cssClass\", void 0);\n    __decorate$2([\n        Property(\"${value.length} item(s) selected\")\n    ], DropDownTree.prototype, \"customTemplate\", void 0);\n    __decorate$2([\n        Property(',')\n    ], DropDownTree.prototype, \"delimiterChar\", void 0);\n    __decorate$2([\n        Property(true)\n    ], DropDownTree.prototype, \"enabled\", void 0);\n    __decorate$2([\n        Complex({}, Fields)\n    ], DropDownTree.prototype, \"fields\", void 0);\n    __decorate$2([\n        Property(null)\n    ], DropDownTree.prototype, \"filterBarPlaceholder\", void 0);\n    __decorate$2([\n        Property('StartsWith')\n    ], DropDownTree.prototype, \"filterType\", void 0);\n    __decorate$2([\n        Property('Never')\n    ], DropDownTree.prototype, \"floatLabelType\", void 0);\n    __decorate$2([\n        Property(null)\n    ], DropDownTree.prototype, \"footerTemplate\", void 0);\n    __decorate$2([\n        Property(false)\n    ], DropDownTree.prototype, \"ignoreAccent\", void 0);\n    __decorate$2([\n        Property(true)\n    ], DropDownTree.prototype, \"ignoreCase\", void 0);\n    __decorate$2([\n        Property(null)\n    ], DropDownTree.prototype, \"headerTemplate\", void 0);\n    __decorate$2([\n        Property({})\n    ], DropDownTree.prototype, \"htmlAttributes\", void 0);\n    __decorate$2([\n        Property(null)\n    ], DropDownTree.prototype, \"itemTemplate\", void 0);\n    __decorate$2([\n        Property('Default')\n    ], DropDownTree.prototype, \"mode\", void 0);\n    __decorate$2([\n        Property('No Records Found')\n    ], DropDownTree.prototype, \"noRecordsTemplate\", void 0);\n    __decorate$2([\n        Property(null)\n    ], DropDownTree.prototype, \"placeholder\", void 0);\n    __decorate$2([\n        Property('300px')\n    ], DropDownTree.prototype, \"popupHeight\", void 0);\n    __decorate$2([\n        Property('100%')\n    ], DropDownTree.prototype, \"popupWidth\", void 0);\n    __decorate$2([\n        Property(false)\n    ], DropDownTree.prototype, \"readonly\", void 0);\n    __decorate$2([\n        Property(false)\n    ], DropDownTree.prototype, \"showSelectAll\", void 0);\n    __decorate$2([\n        Property('Select All')\n    ], DropDownTree.prototype, \"selectAllText\", void 0);\n    __decorate$2([\n        Property(false)\n    ], DropDownTree.prototype, \"showCheckBox\", void 0);\n    __decorate$2([\n        Property(false)\n    ], DropDownTree.prototype, \"enableHtmlSanitizer\", void 0);\n    __decorate$2([\n        Property(true)\n    ], DropDownTree.prototype, \"showClearButton\", void 0);\n    __decorate$2([\n        Property(true)\n    ], DropDownTree.prototype, \"showDropDownIcon\", void 0);\n    __decorate$2([\n        Property('None')\n    ], DropDownTree.prototype, \"sortOrder\", void 0);\n    __decorate$2([\n        Property(null)\n    ], DropDownTree.prototype, \"text\", void 0);\n    __decorate$2([\n        Complex({}, TreeSettings)\n    ], DropDownTree.prototype, \"treeSettings\", void 0);\n    __decorate$2([\n        Property('Unselect All')\n    ], DropDownTree.prototype, \"unSelectAllText\", void 0);\n    __decorate$2([\n        Property(null)\n    ], DropDownTree.prototype, \"value\", void 0);\n    __decorate$2([\n        Property('100%')\n    ], DropDownTree.prototype, \"width\", void 0);\n    __decorate$2([\n        Property(1000)\n    ], DropDownTree.prototype, \"zIndex\", void 0);\n    __decorate$2([\n        Property(false)\n    ], DropDownTree.prototype, \"wrapText\", void 0);\n    __decorate$2([\n        Event()\n    ], DropDownTree.prototype, \"actionFailure\", void 0);\n    __decorate$2([\n        Event()\n    ], DropDownTree.prototype, \"beforeOpen\", void 0);\n    __decorate$2([\n        Event()\n    ], DropDownTree.prototype, \"change\", void 0);\n    __decorate$2([\n        Event()\n    ], DropDownTree.prototype, \"close\", void 0);\n    __decorate$2([\n        Event()\n    ], DropDownTree.prototype, \"blur\", void 0);\n    __decorate$2([\n        Event()\n    ], DropDownTree.prototype, \"created\", void 0);\n    __decorate$2([\n        Event()\n    ], DropDownTree.prototype, \"dataBound\", void 0);\n    __decorate$2([\n        Event()\n    ], DropDownTree.prototype, \"destroyed\", void 0);\n    __decorate$2([\n        Event()\n    ], DropDownTree.prototype, \"filtering\", void 0);\n    __decorate$2([\n        Event()\n    ], DropDownTree.prototype, \"focus\", void 0);\n    __decorate$2([\n        Event()\n    ], DropDownTree.prototype, \"keyPress\", void 0);\n    __decorate$2([\n        Event()\n    ], DropDownTree.prototype, \"open\", void 0);\n    __decorate$2([\n        Event()\n    ], DropDownTree.prototype, \"select\", void 0);\n    DropDownTree = __decorate$2([\n        NotifyPropertyChanges\n    ], DropDownTree);\n    return DropDownTree;\n}(Component));\n\n/**\n * export all modules from current location\n */\n\nvar __extends$3 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$3 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n// eslint-disable-next-line @typescript-eslint/triple-slash-reference\n/// <reference path='../drop-down-list/drop-down-list-model.d.ts'/>\nvar SPINNER_CLASS = 'e-atc-spinner-icon';\ndropDownListClasses.root = 'e-combobox';\nvar inputObject$1 = {\n    container: null,\n    buttons: []\n};\n/**\n * The ComboBox component allows the user to type a value or choose an option from the list of predefined options.\n * ```html\n * <select id=\"list\">\n *      <option value='1'>Badminton</option>\n *      <option value='2'>Basketball</option>\n *      <option value='3'>Cricket</option>\n *      <option value='4'>Football</option>\n *      <option value='5'>Tennis</option>\n * </select>\n * ```\n * ```typescript\n *   let games:ComboBox = new ComboBox();\n *   games.appendTo(\"#list\");\n * ```\n */\nvar ComboBox = /** @__PURE__ @class */ (function (_super) {\n    __extends$3(ComboBox, _super);\n    /**\n     * *Constructor for creating the component\n     *\n     * @param {ComboBoxModel} options - Specifies the ComboBox model.\n     * @param {string | HTMLElement} element - Specifies the element to render as component.\n     * @private\n     */\n    function ComboBox(options, element) {\n        return _super.call(this, options, element) || this;\n    }\n    /**\n     * Initialize the event handler\n     *\n     * @private\n     * @returns {void}\n     */\n    ComboBox.prototype.preRender = function () {\n        _super.prototype.preRender.call(this);\n    };\n    ComboBox.prototype.getLocaleName = function () {\n        return 'combo-box';\n    };\n    ComboBox.prototype.wireEvent = function () {\n        if (this.getModuleName() === 'combobox') {\n            EventHandler.add(this.inputWrapper.buttons[0], 'mousedown', this.preventBlur, this);\n            EventHandler.add(this.inputWrapper.container, 'blur', this.onBlurHandler, this);\n        }\n        if (!isNullOrUndefined(this.inputWrapper.buttons[0])) {\n            EventHandler.add(this.inputWrapper.buttons[0], 'mousedown', this.dropDownClick, this);\n        }\n        EventHandler.add(this.inputElement, 'focus', this.targetFocus, this);\n        if (!this.readonly) {\n            EventHandler.add(this.inputElement, 'input', this.onInput, this);\n            EventHandler.add(this.inputElement, 'keyup', this.onFilterUp, this);\n            EventHandler.add(this.inputElement, 'keydown', this.onFilterDown, this);\n            EventHandler.add(this.inputElement, 'paste', this.pasteHandler, this);\n            EventHandler.add(window, 'resize', this.windowResize, this);\n        }\n        this.bindCommonEvent();\n    };\n    ComboBox.prototype.preventBlur = function (e) {\n        if ((!this.allowFiltering && document.activeElement !== this.inputElement &&\n            !document.activeElement.classList.contains(dropDownListClasses.input) && Browser.isDevice || !Browser.isDevice)) {\n            e.preventDefault();\n        }\n    };\n    ComboBox.prototype.onBlurHandler = function (e) {\n        var inputValue = this.inputElement && this.inputElement.value === '' ?\n            null : this.inputElement && this.inputElement.value;\n        if (!isNullOrUndefined(this.listData) && !isNullOrUndefined(inputValue) && inputValue !== this.text) {\n            this.customValue(e);\n        }\n        _super.prototype.onBlurHandler.call(this, e);\n    };\n    ComboBox.prototype.targetElement = function () {\n        return this.inputElement;\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    ComboBox.prototype.setOldText = function (text) {\n        Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);\n        this.customValue();\n        this.removeSelection();\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    ComboBox.prototype.setOldValue = function (value) {\n        if (this.allowCustom) {\n            this.valueMuteChange(this.value);\n        }\n        else {\n            this.valueMuteChange(null);\n        }\n        this.removeSelection();\n        this.setHiddenValue();\n    };\n    ComboBox.prototype.valueMuteChange = function (value) {\n        var inputValue = isNullOrUndefined(value) ? null : value.toString();\n        Input.setValue(inputValue, this.inputElement, this.floatLabelType, this.showClearButton);\n        this.setProperties({ value: value, text: value, index: null }, true);\n        this.activeIndex = this.index;\n        var fields = this.fields;\n        var dataItem = {};\n        dataItem[fields.text] = isNullOrUndefined(value) ? null : value.toString();\n        dataItem[fields.value] = isNullOrUndefined(value) ? null : value.toString();\n        this.itemData = dataItem;\n        this.item = null;\n        if (this.previousValue !== this.value) {\n            this.detachChangeEvent(null);\n        }\n    };\n    ComboBox.prototype.updateValues = function () {\n        if (!isNullOrUndefined(this.value)) {\n            var li = this.getElementByValue(this.value);\n            if (li) {\n                this.setSelection(li, null);\n            }\n            else if (this.allowCustom) {\n                this.valueMuteChange(this.value);\n            }\n            else {\n                this.valueMuteChange(null);\n            }\n        }\n        else if (this.text && isNullOrUndefined(this.value)) {\n            var li = this.getElementByText(this.text);\n            if (li) {\n                this.setSelection(li, null);\n            }\n            else {\n                Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);\n                this.customValue();\n            }\n        }\n        else {\n            this.setSelection(this.liCollections[this.activeIndex], null);\n        }\n        this.setHiddenValue();\n        Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);\n    };\n    ComboBox.prototype.updateIconState = function () {\n        if (this.showClearButton) {\n            if (this.inputElement && this.inputElement.value !== '' && !this.readonly) {\n                removeClass([this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);\n            }\n            else {\n                addClass([this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);\n            }\n        }\n    };\n    ComboBox.prototype.getAriaAttributes = function () {\n        var ariaAttributes = {\n            'role': 'combobox',\n            'aria-autocomplete': 'both',\n            'aria-labelledby': this.hiddenElement.id,\n            'aria-expanded': 'false',\n            'aria-readonly': this.readonly.toString(),\n            'autocomplete': 'off',\n            'autocapitalize': 'off',\n            'spellcheck': 'false'\n        };\n        return ariaAttributes;\n    };\n    ComboBox.prototype.searchLists = function (e) {\n        this.isTyped = true;\n        if (this.isFiltering()) {\n            _super.prototype.searchLists.call(this, e);\n            if (this.ulElement && this.filterInput.value.trim() === '') {\n                this.setHoverList(this.ulElement.querySelector('.' + dropDownListClasses.li));\n            }\n        }\n        else {\n            if (this.ulElement && this.inputElement.value === '' && this.preventAutoFill) {\n                this.setHoverList(this.ulElement.querySelector('.' + dropDownListClasses.li));\n            }\n            this.incrementalSearch(e);\n        }\n    };\n    ComboBox.prototype.getNgDirective = function () {\n        return 'EJS-COMBOBOX';\n    };\n    ComboBox.prototype.setSearchBox = function () {\n        this.filterInput = this.inputElement;\n        var searchBoxContainer = (this.isFiltering() || (this.isReact && this.getModuleName() === 'combobox')) ? this.inputWrapper : inputObject$1;\n        return searchBoxContainer;\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    ComboBox.prototype.onActionComplete = function (ulElement, list, e, isUpdated) {\n        var _this = this;\n        _super.prototype.onActionComplete.call(this, ulElement, list, e);\n        if (this.isSelectCustom) {\n            this.removeSelection();\n        }\n        if (!this.preventAutoFill && this.getModuleName() === 'combobox' && this.isTyped && !this.enableVirtualization) {\n            setTimeout(function () {\n                _this.inlineSearch();\n            });\n        }\n    };\n    ComboBox.prototype.getFocusElement = function () {\n        var dataItem = this.isSelectCustom ? { text: '' } : this.getItemData();\n        var selected = !isNullOrUndefined(this.list) ? this.list.querySelector('.' + dropDownListClasses.selected) : this.list;\n        var isSelected = dataItem.text && dataItem.text.toString() === this.inputElement.value && !isNullOrUndefined(selected);\n        if (isSelected) {\n            return selected;\n        }\n        if ((Browser.isDevice && !this.isDropDownClick || !Browser.isDevice) &&\n            !isNullOrUndefined(this.liCollections) && this.liCollections.length > 0) {\n            var inputValue = this.inputElement.value;\n            var dataSource = this.sortedData;\n            var type = this.typeOfData(dataSource).typeof;\n            var activeItem = Search(inputValue, this.liCollections, this.filterType, true, dataSource, this.fields, type);\n            if (this.enableVirtualization && inputValue !== '' && this.getModuleName() !== 'autocomplete' && this.isTyped && !this.allowFiltering) {\n                var updatingincrementalindex = false;\n                if ((this.viewPortInfo.endIndex >= this.incrementalEndIndex && this.incrementalEndIndex <= this.totalItemCount) || this.incrementalEndIndex == 0) {\n                    updatingincrementalindex = true;\n                    this.incrementalStartIndex = this.incrementalEndIndex;\n                    if (this.incrementalEndIndex == 0) {\n                        this.incrementalEndIndex = 100 > this.totalItemCount ? this.totalItemCount : 100;\n                    }\n                    else {\n                        this.incrementalEndIndex = this.incrementalEndIndex + 100 > this.totalItemCount ? this.totalItemCount : this.incrementalEndIndex + 100;\n                    }\n                    this.updateIncrementalInfo(this.incrementalStartIndex, this.incrementalEndIndex);\n                    updatingincrementalindex = true;\n                }\n                if (this.viewPortInfo.startIndex !== 0 || updatingincrementalindex) {\n                    this.updateIncrementalView(0, this.itemCount);\n                }\n                activeItem = Search(inputValue, this.incrementalLiCollections, this.filterType, true, dataSource, this.fields, type);\n                while (isNullOrUndefined(activeItem) && this.incrementalEndIndex < this.totalItemCount) {\n                    this.incrementalStartIndex = this.incrementalEndIndex;\n                    this.incrementalEndIndex = this.incrementalEndIndex + 100 > this.totalItemCount ? this.totalItemCount : this.incrementalEndIndex + 100;\n                    this.updateIncrementalInfo(this.incrementalStartIndex, this.incrementalEndIndex);\n                    updatingincrementalindex = true;\n                    if (this.viewPortInfo.startIndex !== 0 || updatingincrementalindex) {\n                        this.updateIncrementalView(0, this.itemCount);\n                    }\n                    activeItem = Search(inputValue, this.incrementalLiCollections, this.filterType, true, dataSource, this.fields, type);\n                    if (!isNullOrUndefined(activeItem)) {\n                        break;\n                    }\n                    if (isNullOrUndefined(activeItem) && this.incrementalEndIndex >= this.totalItemCount) {\n                        this.incrementalStartIndex = 0;\n                        this.incrementalEndIndex = 100 > this.totalItemCount ? this.totalItemCount : 100;\n                        break;\n                    }\n                }\n                if (activeItem.index) {\n                    if ((!(this.viewPortInfo.startIndex >= activeItem.index)) || (!(activeItem.index >= this.viewPortInfo.endIndex))) {\n                        var startIndex = activeItem.index - ((this.itemCount / 2) - 2) > 0 ? activeItem.index - ((this.itemCount / 2) - 2) : 0;\n                        var endIndex = this.viewPortInfo.startIndex + this.itemCount > this.totalItemCount ? this.totalItemCount : this.viewPortInfo.startIndex + this.itemCount;\n                        if (startIndex != this.viewPortInfo.startIndex) {\n                            this.updateIncrementalView(startIndex, endIndex);\n                        }\n                    }\n                }\n                if (!isNullOrUndefined(activeItem.item)) {\n                    var index_1 = this.getIndexByValue(activeItem.item.getAttribute('data-value')) - this.skeletonCount;\n                    if (index_1 > this.itemCount / 2) {\n                        var startIndex = this.viewPortInfo.startIndex + ((this.itemCount / 2) - 2) < this.totalItemCount ? this.viewPortInfo.startIndex + ((this.itemCount / 2) - 2) : this.totalItemCount;\n                        var endIndex = this.viewPortInfo.startIndex + this.itemCount > this.totalItemCount ? this.totalItemCount : this.viewPortInfo.startIndex + this.itemCount;\n                        this.updateIncrementalView(startIndex, endIndex);\n                    }\n                    activeItem.item = this.getElementByValue(activeItem.item.getAttribute('data-value'));\n                }\n                else {\n                    this.updateIncrementalView(0, this.itemCount);\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    this.list.getElementsByClassName('e-virtual-ddl-content')[0].style = this.getTransformValues();\n                    this.list.scrollTop = 0;\n                }\n                if (activeItem && activeItem.item) {\n                    activeItem.item = this.getElementByValue(activeItem.item.getAttribute('data-value'));\n                }\n            }\n            var activeElement = activeItem.item;\n            if (!isNullOrUndefined(activeElement)) {\n                var count = this.getIndexByValue(activeElement.getAttribute('data-value')) - 1;\n                var height = parseInt(getComputedStyle(this.liCollections[0], null).getPropertyValue('height'), 10);\n                if (!isNaN(height) && this.getModuleName() !== 'autocomplete') {\n                    this.removeFocus();\n                    var fixedHead = this.fields.groupBy ? this.liCollections[0].offsetHeight : 0;\n                    if (!this.enableVirtualization) {\n                        this.list.scrollTop = count * height + fixedHead;\n                    }\n                    else {\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        this.list.getElementsByClassName('e-virtual-ddl-content')[0].style = this.getTransformValues();\n                        if (this.enableVirtualization && !this.fields.groupBy) {\n                            var selectedLiOffsetTop = this.virtualListInfo && this.virtualListInfo.startIndex ? activeElement.offsetTop + (this.virtualListInfo.startIndex * activeElement.offsetHeight) : activeElement.offsetTop;\n                            this.list.scrollTop = selectedLiOffsetTop - (this.list.querySelectorAll('.e-virtual-list').length * activeElement.offsetHeight);\n                        }\n                    }\n                    addClass([activeElement], dropDownListClasses.focus);\n                }\n            }\n            else {\n                if (this.isSelectCustom && this.inputElement.value.trim() !== '') {\n                    this.removeFocus();\n                    if (!this.enableVirtualization) {\n                        this.list.scrollTop = 0;\n                    }\n                }\n            }\n            return activeElement;\n        }\n        else {\n            return null;\n        }\n    };\n    ComboBox.prototype.setValue = function (e) {\n        if (e && e.type === 'keydown' && e.action === 'enter') {\n            this.removeFillSelection();\n        }\n        if (this.autofill && this.getModuleName() === 'combobox' && e && e.type === 'keydown' && e.action !== 'enter') {\n            this.preventAutoFill = false;\n            this.inlineSearch(e);\n            return false;\n        }\n        else {\n            return _super.prototype.setValue.call(this, e);\n        }\n    };\n    ComboBox.prototype.checkCustomValue = function () {\n        this.itemData = this.getDataByValue(this.value);\n        var dataItem = this.getItemData();\n        if (!(this.allowCustom && isNullOrUndefined(dataItem.value) && isNullOrUndefined(dataItem.text))) {\n            this.setProperties({ 'value': dataItem.value }, !this.allowCustom);\n        }\n    };\n    /**\n     * Shows the spinner loader.\n     *\n     * @returns {void}\n     * @deprecated\n     */\n    ComboBox.prototype.showSpinner = function () {\n        if (isNullOrUndefined(this.spinnerElement)) {\n            this.spinnerElement = (this.getModuleName() === 'autocomplete') ? (this.inputWrapper.buttons[0] ||\n                this.inputWrapper.clearButton ||\n                Input.appendSpan('e-input-group-icon ' + SPINNER_CLASS, this.inputWrapper.container, this.createElement)) :\n                (this.inputWrapper.buttons[0] || this.inputWrapper.clearButton);\n            addClass([this.spinnerElement], dropDownListClasses.disableIcon);\n            createSpinner({\n                target: this.spinnerElement,\n                width: Browser.isDevice ? '16px' : '14px'\n            }, this.createElement);\n            showSpinner(this.spinnerElement);\n        }\n    };\n    /**\n     * Hides the spinner loader.\n     *\n     * @returns {void}\n     * @deprecated\n     */\n    ComboBox.prototype.hideSpinner = function () {\n        if (!isNullOrUndefined(this.spinnerElement)) {\n            hideSpinner(this.spinnerElement);\n            removeClass([this.spinnerElement], dropDownListClasses.disableIcon);\n            if (this.spinnerElement.classList.contains(SPINNER_CLASS)) {\n                detach(this.spinnerElement);\n            }\n            else {\n                this.spinnerElement.innerHTML = '';\n            }\n            this.spinnerElement = null;\n        }\n    };\n    ComboBox.prototype.setAutoFill = function (activeElement, isHover) {\n        if (!isHover) {\n            this.setHoverList(activeElement);\n        }\n        if (this.autofill && !this.preventAutoFill) {\n            var currentValue = this.getTextByValue(activeElement.getAttribute('data-value')).toString();\n            var currentFillValue = this.getFormattedValue(activeElement.getAttribute('data-value'));\n            if (this.getModuleName() === 'combobox') {\n                if (!this.isSelected && this.previousValue !== currentFillValue) {\n                    this.updateSelectedItem(activeElement, null);\n                    this.isSelected = true;\n                    this.previousValue = this.getFormattedValue(activeElement.getAttribute('data-value'));\n                }\n                else {\n                    this.updateSelectedItem(activeElement, null, true);\n                }\n            }\n            if (!this.isAndroidAutoFill(currentValue)) {\n                this.setAutoFillSelection(currentValue, isHover);\n            }\n        }\n    };\n    ComboBox.prototype.isAndroidAutoFill = function (value) {\n        if (Browser.isAndroid) {\n            var currentPoints = this.getSelectionPoints();\n            var prevEnd = this.prevSelectPoints.end;\n            var curEnd = currentPoints.end;\n            var prevStart = this.prevSelectPoints.start;\n            var curStart = currentPoints.start;\n            if (prevEnd !== 0 && ((prevEnd === value.length && prevStart === value.length) ||\n                (prevStart > curStart && prevEnd > curEnd) || (prevEnd === curEnd && prevStart === curStart))) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        }\n        else {\n            return false;\n        }\n    };\n    ComboBox.prototype.clearAll = function (e, property) {\n        if (isNullOrUndefined(property) || (!isNullOrUndefined(property) && isNullOrUndefined(property.dataSource))) {\n            _super.prototype.clearAll.call(this, e);\n        }\n        if (this.isFiltering() && !isNullOrUndefined(e) && e.target === this.inputWrapper.clearButton) {\n            this.searchLists(e);\n        }\n    };\n    ComboBox.prototype.isSelectFocusItem = function (element) {\n        return !isNullOrUndefined(element);\n    };\n    ComboBox.prototype.inlineSearch = function (e) {\n        var isKeyNavigate = (e && (e.action === 'down' || e.action === 'up' ||\n            e.action === 'home' || e.action === 'end' || e.action === 'pageUp' || e.action === 'pageDown'));\n        var activeElement = isKeyNavigate ? this.liCollections[this.activeIndex] : this.getFocusElement();\n        if (!isNullOrUndefined(activeElement)) {\n            if (!isKeyNavigate) {\n                var value = this.getFormattedValue(activeElement.getAttribute('data-value'));\n                this.activeIndex = this.getIndexByValue(value);\n                this.activeIndex = !isNullOrUndefined(this.activeIndex) ? this.activeIndex : null;\n            }\n            this.preventAutoFill = this.inputElement.value === '' ? false : this.preventAutoFill;\n            this.setAutoFill(activeElement, isKeyNavigate);\n        }\n        else if (this.inputElement.value === '') {\n            this.activeIndex = null;\n            if (!isNullOrUndefined(this.list)) {\n                if (!this.enableVirtualization) {\n                    this.list.scrollTop = 0;\n                }\n                var focusItem = this.list.querySelector('.' + dropDownListClasses.li);\n                this.setHoverList(focusItem);\n            }\n        }\n        else {\n            this.activeIndex = null;\n            this.removeSelection();\n            if (this.liCollections && this.liCollections.length > 0 && !this.isCustomFilter) {\n                this.removeFocus();\n            }\n        }\n    };\n    ComboBox.prototype.incrementalSearch = function (e) {\n        this.showPopup(e);\n        if (!isNullOrUndefined(this.listData)) {\n            this.inlineSearch(e);\n            e.preventDefault();\n        }\n    };\n    ComboBox.prototype.setAutoFillSelection = function (currentValue, isKeyNavigate) {\n        if (isKeyNavigate === void 0) { isKeyNavigate = false; }\n        var selection = this.getSelectionPoints();\n        var value = this.inputElement.value.substr(0, selection.start);\n        if (value && (value.toLowerCase() === currentValue.substr(0, selection.start).toLowerCase())) {\n            var inputValue = value + currentValue.substr(value.length, currentValue.length);\n            Input.setValue(inputValue, this.inputElement, this.floatLabelType, this.showClearButton);\n            this.inputElement.setSelectionRange(selection.start, this.inputElement.value.length);\n        }\n        else if (isKeyNavigate) {\n            Input.setValue(currentValue, this.inputElement, this.floatLabelType, this.showClearButton);\n            this.inputElement.setSelectionRange(0, this.inputElement.value.length);\n        }\n    };\n    ComboBox.prototype.getValueByText = function (text) {\n        return _super.prototype.getValueByText.call(this, text, true, this.ignoreAccent);\n    };\n    ComboBox.prototype.unWireEvent = function () {\n        if (this.getModuleName() === 'combobox') {\n            EventHandler.remove(this.inputWrapper.buttons[0], 'mousedown', this.preventBlur);\n            EventHandler.remove(this.inputWrapper.container, 'blur', this.onBlurHandler);\n        }\n        if (!isNullOrUndefined(this.inputWrapper.buttons[0])) {\n            EventHandler.remove(this.inputWrapper.buttons[0], 'mousedown', this.dropDownClick);\n        }\n        if (this.inputElement) {\n            EventHandler.remove(this.inputElement, 'focus', this.targetFocus);\n            if (!this.readonly) {\n                EventHandler.remove(this.inputElement, 'input', this.onInput);\n                EventHandler.remove(this.inputElement, 'keyup', this.onFilterUp);\n                EventHandler.remove(this.inputElement, 'keydown', this.onFilterDown);\n                EventHandler.remove(this.inputElement, 'paste', this.pasteHandler);\n                EventHandler.remove(window, 'resize', this.windowResize);\n            }\n        }\n        this.unBindCommonEvent();\n    };\n    ComboBox.prototype.setSelection = function (li, e) {\n        _super.prototype.setSelection.call(this, li, e);\n        if (!isNullOrUndefined(li) && !this.autofill && !this.isDropDownClick) {\n            this.removeFocus();\n        }\n    };\n    ComboBox.prototype.selectCurrentItem = function (e) {\n        var li;\n        if (this.isPopupOpen) {\n            if (this.isSelected) {\n                li = this.list.querySelector('.' + dropDownListClasses.selected);\n            }\n            else {\n                li = this.list.querySelector('.' + dropDownListClasses.focus);\n            }\n            if (li) {\n                this.setSelection(li, e);\n                this.isTyped = false;\n            }\n            if (this.isSelected) {\n                this.isSelectCustom = false;\n                this.onChangeEvent(e);\n            }\n        }\n        if (e.action === 'enter' && this.inputElement.value.trim() === '') {\n            this.clearAll(e);\n        }\n        else if (this.isTyped && !this.isSelected && isNullOrUndefined(li)) {\n            this.customValue(e);\n        }\n        this.hidePopup(e);\n    };\n    ComboBox.prototype.setHoverList = function (li) {\n        this.removeSelection();\n        if (this.isValidLI(li) && !li.classList.contains(dropDownListClasses.selected)) {\n            this.removeFocus();\n            li.classList.add(dropDownListClasses.focus);\n        }\n    };\n    ComboBox.prototype.targetFocus = function (e) {\n        if (Browser.isDevice && !this.allowFiltering) {\n            this.preventFocus = false;\n        }\n        this.onFocus(e);\n        Input.calculateWidth(this.inputElement, this.inputWrapper.container);\n    };\n    ComboBox.prototype.dropDownClick = function (e) {\n        e.preventDefault();\n        if (Browser.isDevice && !this.isFiltering()) {\n            this.preventFocus = true;\n        }\n        _super.prototype.dropDownClick.call(this, e);\n    };\n    ComboBox.prototype.customValue = function (e) {\n        var _this = this;\n        var value = this.getValueByText(this.inputElement.value);\n        if (!this.allowCustom && this.inputElement.value !== '') {\n            var previousValue = this.previousValue;\n            var currentValue = this.value;\n            this.setProperties({ value: value });\n            if (isNullOrUndefined(this.value)) {\n                Input.setValue('', this.inputElement, this.floatLabelType, this.showClearButton);\n            }\n            if (this.autofill && previousValue === this.value && currentValue !== this.value) {\n                this.onChangeEvent(null);\n            }\n        }\n        else if (this.inputElement.value.trim() !== '') {\n            var previousValue_1 = this.value;\n            if (isNullOrUndefined(value)) {\n                var value_1 = this.inputElement.value === '' ? null : this.inputElement.value;\n                // eslint-disable-next-line max-len\n                var eventArgs = { text: value_1, item: {} };\n                if (!this.initial) {\n                    this.trigger('customValueSpecifier', eventArgs, function (eventArgs) {\n                        _this.updateCustomValueCallback(value_1, eventArgs, previousValue_1, e);\n                    });\n                }\n                else {\n                    this.updateCustomValueCallback(value_1, eventArgs, previousValue_1);\n                }\n            }\n            else {\n                this.isSelectCustom = false;\n                this.setProperties({ value: value });\n                if (previousValue_1 !== this.value) {\n                    this.onChangeEvent(e);\n                }\n            }\n        }\n        else if (this.allowCustom) {\n            this.isSelectCustom = true;\n        }\n    };\n    ComboBox.prototype.updateCustomValueCallback = function (value, eventArgs, previousValue, e) {\n        var fields = this.fields;\n        var item = eventArgs.item;\n        var dataItem = {};\n        if (item && getValue(fields.text, item) && getValue(fields.value, item)) {\n            dataItem = item;\n        }\n        else {\n            setValue(fields.text, value, dataItem);\n            setValue(fields.value, value, dataItem);\n        }\n        this.itemData = dataItem;\n        var changeData = {\n            text: getValue(fields.text, this.itemData),\n            value: getValue(fields.value, this.itemData),\n            index: null\n        };\n        this.setProperties(changeData, true);\n        this.setSelection(null, null);\n        this.isSelectCustom = true;\n        if (previousValue !== this.value) {\n            this.onChangeEvent(e);\n        }\n    };\n    /**\n     * Dynamically change the value of properties.\n     *\n     * @param {ComboBoxModel} newProp - Returns the dynamic property value of the component.\n     * @param {ComboBoxModel} oldProp - Returns the previous property value of the component.\n     * @private\n     * @returns {void}\n     */\n    ComboBox.prototype.onPropertyChanged = function (newProp, oldProp) {\n        if (this.getModuleName() === 'combobox') {\n            this.checkData(newProp);\n            this.setUpdateInitial(['fields', 'query', 'dataSource'], newProp);\n        }\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'readonly':\n                    Input.setReadonly(this.readonly, this.inputElement);\n                    if (this.readonly) {\n                        EventHandler.remove(this.inputElement, 'input', this.onInput);\n                        EventHandler.remove(this.inputElement, 'keyup', this.onFilterUp);\n                        EventHandler.remove(this.inputElement, 'keydown', this.onFilterDown);\n                    }\n                    else {\n                        EventHandler.add(this.inputElement, 'input', this.onInput, this);\n                        EventHandler.add(this.inputElement, 'keyup', this.onFilterUp, this);\n                        EventHandler.add(this.inputElement, 'keydown', this.onFilterDown, this);\n                    }\n                    this.setReadOnly();\n                    break;\n                case 'allowFiltering':\n                    this.setSearchBox();\n                    if (this.isFiltering() && this.getModuleName() === 'combobox' && isNullOrUndefined(this.list)) {\n                        _super.prototype.renderList.call(this);\n                    }\n                    break;\n                case 'allowCustom':\n                    break;\n                default: {\n                    // eslint-disable-next-line max-len\n                    var comboProps = this.getPropObject(prop, newProp, oldProp);\n                    _super.prototype.onPropertyChanged.call(this, comboProps.newProperty, comboProps.oldProperty);\n                    if (this.isFiltering() && prop === 'dataSource' && isNullOrUndefined(this.list) && this.itemTemplate &&\n                        this.getModuleName() === 'combobox') {\n                        _super.prototype.renderList.call(this);\n                    }\n                    break;\n                }\n            }\n        }\n    };\n    /**\n     * To initialize the control rendering.\n     *\n     * @private\n     * @returns {void}\n     */\n    ComboBox.prototype.render = function () {\n        _super.prototype.render.call(this);\n        this.setSearchBox();\n        if (this.isFiltering() && this.getModuleName() === 'combobox' && isNullOrUndefined(this.list)) {\n            _super.prototype.renderList.call(this);\n        }\n        this.renderComplete();\n    };\n    /**\n     * Return the module name of this component.\n     *\n     * @private\n     * @returns {string} Return the module name of this component.\n     */\n    ComboBox.prototype.getModuleName = function () {\n        return 'combobox';\n    };\n    /**\n     * Adds a new item to the combobox popup list. By default, new item appends to the list as the last item,\n     * but you can insert based on the index parameter.\n     *\n     * @param { Object[] } items - Specifies an array of JSON data or a JSON data.\n     * @param { number } itemIndex - Specifies the index to place the newly added item in the popup list.\n     * @returns {void}\n     * @deprecated\n     */\n    ComboBox.prototype.addItem = function (items, itemIndex) {\n        _super.prototype.addItem.call(this, items, itemIndex);\n    };\n    /**\n     * To filter the data from given data source by using query\n     *\n     * @param {Object[] | DataManager } dataSource - Set the data source to filter.\n     * @param {Query} query - Specify the query to filter the data.\n     * @param {FieldSettingsModel} fields - Specify the fields to map the column in the data table.\n     * @returns {void}\n     * @deprecated\n     */\n    ComboBox.prototype.filter = function (dataSource, query, fields) {\n        _super.prototype.filter.call(this, dataSource, query, fields);\n    };\n    /* eslint-disable valid-jsdoc, jsdoc/require-param */\n    /**\n     * Opens the popup that displays the list of items.\n     *\n     * @returns {void}\n     * @deprecated\n     */\n    ComboBox.prototype.showPopup = function (e) {\n        /* eslint-enable valid-jsdoc, jsdoc/require-param */\n        _super.prototype.showPopup.call(this, e);\n    };\n    /* eslint-disable valid-jsdoc, jsdoc/require-param */\n    /**\n     * Hides the popup if it is in open state.\n     *\n     * @returns {void}\n     * @deprecated\n     */\n    ComboBox.prototype.hidePopup = function (e) {\n        /* eslint-enable valid-jsdoc, jsdoc/require-param */\n        var inputValue = this.inputElement && this.inputElement.value === '' ? null\n            : this.inputElement && this.inputElement.value;\n        if (!isNullOrUndefined(this.listData)) {\n            var isEscape = this.isEscapeKey;\n            if (this.isEscapeKey) {\n                Input.setValue(this.typedString, this.inputElement, this.floatLabelType, this.showClearButton);\n                this.isEscapeKey = false;\n            }\n            if (this.autofill) {\n                this.removeFillSelection();\n            }\n            var dataItem = this.isSelectCustom ? { text: '' } : this.getItemData();\n            var selected = !isNullOrUndefined(this.list) ? this.list.querySelector('.' + dropDownListClasses.selected) : null;\n            if (this.inputElement && dataItem.text === this.inputElement.value && !isNullOrUndefined(selected)) {\n                if (this.isSelected) {\n                    this.onChangeEvent(e);\n                    this.isSelectCustom = false;\n                }\n                _super.prototype.hidePopup.call(this, e);\n                return;\n            }\n            if (this.getModuleName() === 'combobox' && this.inputElement.value.trim() !== '') {\n                var dataSource = this.sortedData;\n                var type = this.typeOfData(dataSource).typeof;\n                var searchItem = Search(this.inputElement.value, this.liCollections, 'Equal', true, dataSource, this.fields, type);\n                this.selectedLI = searchItem.item;\n                if (isNullOrUndefined(searchItem.index)) {\n                    searchItem.index = Search(this.inputElement.value, this.liCollections, 'StartsWith', true, dataSource, this.fields, type).index;\n                }\n                this.activeIndex = searchItem.index;\n                if (!isNullOrUndefined(this.selectedLI)) {\n                    this.updateSelectedItem(this.selectedLI, null, true);\n                }\n                else if (isEscape) {\n                    this.isSelectCustom = true;\n                    this.removeSelection();\n                }\n            }\n            if (!this.isEscapeKey && this.isTyped && !this.isInteracted) {\n                this.customValue(e);\n            }\n        }\n        if (isNullOrUndefined(this.listData) && this.allowCustom && !isNullOrUndefined(inputValue) && inputValue !== this.value) {\n            this.customValue();\n        }\n        _super.prototype.hidePopup.call(this, e);\n    };\n    /**\n     * Sets the focus to the component for interaction.\n     *\n     * @returns {void}\n     */\n    ComboBox.prototype.focusIn = function () {\n        if (!this.enabled) {\n            return;\n        }\n        if (Browser.isDevice && !this.isFiltering()) {\n            this.preventFocus = true;\n        }\n        _super.prototype.focusIn.call(this);\n    };\n    /**\n     * Allows you to clear the selected values from the component.\n     *\n     * @returns {void}\n     * @deprecated\n     */\n    ComboBox.prototype.clear = function () {\n        this.value = null;\n    };\n    /* eslint-disable valid-jsdoc, jsdoc/require-param */\n    /**\n     * Moves the focus from the component if the component is already focused.\n     *\n     * @returns {void}\n     * @deprecated\n     */\n    ComboBox.prototype.focusOut = function (e) {\n        /* eslint-enable valid-jsdoc, jsdoc/require-param */\n        _super.prototype.focusOut.call(this, e);\n    };\n    /* eslint-disable valid-jsdoc, jsdoc/require-returns-description */\n    /**\n     * Gets all the list items bound on this component.\n     *\n     * @returns {Element[]}\n     * @deprecated\n     */\n    ComboBox.prototype.getItems = function () {\n        return _super.prototype.getItems.call(this);\n    };\n    /**\n     * Gets the data Object that matches the given value.\n     *\n     * @param { string | number } value - Specifies the value of the list item.\n     * @returns {Object}\n     * @deprecated\n     */\n    ComboBox.prototype.getDataByValue = function (value) {\n        return _super.prototype.getDataByValue.call(this, value);\n    };\n    /* eslint-enable valid-jsdoc, jsdoc/require-returns-description */\n    ComboBox.prototype.renderHightSearch = function () {\n        // update high light search\n    };\n    __decorate$3([\n        Property(false)\n    ], ComboBox.prototype, \"autofill\", void 0);\n    __decorate$3([\n        Property(true)\n    ], ComboBox.prototype, \"allowCustom\", void 0);\n    __decorate$3([\n        Property({})\n    ], ComboBox.prototype, \"htmlAttributes\", void 0);\n    __decorate$3([\n        Property(false)\n    ], ComboBox.prototype, \"allowFiltering\", void 0);\n    __decorate$3([\n        Property(null)\n    ], ComboBox.prototype, \"query\", void 0);\n    __decorate$3([\n        Property(null)\n    ], ComboBox.prototype, \"index\", void 0);\n    __decorate$3([\n        Property(true)\n    ], ComboBox.prototype, \"showClearButton\", void 0);\n    __decorate$3([\n        Property(false)\n    ], ComboBox.prototype, \"enableRtl\", void 0);\n    __decorate$3([\n        Event()\n    ], ComboBox.prototype, \"customValueSpecifier\", void 0);\n    __decorate$3([\n        Event()\n    ], ComboBox.prototype, \"filtering\", void 0);\n    __decorate$3([\n        Property(null)\n    ], ComboBox.prototype, \"valueTemplate\", void 0);\n    __decorate$3([\n        Property('Never')\n    ], ComboBox.prototype, \"floatLabelType\", void 0);\n    __decorate$3([\n        Property(null)\n    ], ComboBox.prototype, \"filterBarPlaceholder\", void 0);\n    __decorate$3([\n        Property(null)\n    ], ComboBox.prototype, \"cssClass\", void 0);\n    __decorate$3([\n        Property(null)\n    ], ComboBox.prototype, \"headerTemplate\", void 0);\n    __decorate$3([\n        Property(null)\n    ], ComboBox.prototype, \"footerTemplate\", void 0);\n    __decorate$3([\n        Property(null)\n    ], ComboBox.prototype, \"placeholder\", void 0);\n    __decorate$3([\n        Property('100%')\n    ], ComboBox.prototype, \"width\", void 0);\n    __decorate$3([\n        Property('300px')\n    ], ComboBox.prototype, \"popupHeight\", void 0);\n    __decorate$3([\n        Property('100%')\n    ], ComboBox.prototype, \"popupWidth\", void 0);\n    __decorate$3([\n        Property(false)\n    ], ComboBox.prototype, \"readonly\", void 0);\n    __decorate$3([\n        Property(null)\n    ], ComboBox.prototype, \"text\", void 0);\n    __decorate$3([\n        Property(null)\n    ], ComboBox.prototype, \"value\", void 0);\n    ComboBox = __decorate$3([\n        NotifyPropertyChanges\n    ], ComboBox);\n    return ComboBox;\n}(DropDownList));\n\n/**\n * export all modules from current location\n */\n\nvar __extends$4 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$4 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n// eslint-disable-next-line @typescript-eslint/triple-slash-reference\n/// <reference path='../combo-box/combo-box-model.d.ts'/>\ndropDownListClasses.root = 'e-autocomplete';\ndropDownListClasses.icon = 'e-input-group-icon e-ddl-icon e-search-icon';\n/**\n * The AutoComplete component provides the matched suggestion list when type into the input,\n * from which the user can select one.\n * ```html\n * <input id=\"list\" type=\"text\"/>\n * ```\n * ```typescript\n *   let atcObj:AutoComplete = new AutoComplete();\n *   atcObj.appendTo(\"#list\");\n * ```\n */\nvar AutoComplete = /** @__PURE__ @class */ (function (_super) {\n    __extends$4(AutoComplete, _super);\n    /**\n     * * Constructor for creating the widget\n     *\n     * @param {AutoCompleteModel} options - Specifies the AutoComplete model.\n     * @param {string | HTMLElement} element - Specifies the element to render as component.\n     * @private\n     */\n    function AutoComplete(options, element) {\n        var _this_1 = _super.call(this, options, element) || this;\n        _this_1.isFiltered = false;\n        _this_1.searchList = false;\n        return _this_1;\n    }\n    /**\n     * Initialize the event handler\n     *\n     * @private\n     * @returns {void}\n     */\n    AutoComplete.prototype.preRender = function () {\n        _super.prototype.preRender.call(this);\n    };\n    AutoComplete.prototype.getLocaleName = function () {\n        return 'auto-complete';\n    };\n    AutoComplete.prototype.getNgDirective = function () {\n        return 'EJS-AUTOCOMPLETE';\n    };\n    AutoComplete.prototype.getQuery = function (query) {\n        var filterQuery = query ? query.clone() : this.query ? this.query.clone() : new Query();\n        var filterType = (this.queryString === '' && !isNullOrUndefined(this.value)) ? 'equal' : this.filterType;\n        var queryString = (this.queryString === '' && !isNullOrUndefined(this.value)) ? this.value : this.queryString;\n        if (this.isFiltered) {\n            return filterQuery;\n        }\n        if (this.queryString !== null && this.queryString !== '') {\n            var dataType = this.typeOfData(this.dataSource).typeof;\n            if (!(this.dataSource instanceof DataManager) && dataType === 'string' || dataType === 'number') {\n                filterQuery.where('', filterType, queryString, this.ignoreCase, this.ignoreAccent);\n            }\n            else if ((!this.enableVirtualization) || (this.enableVirtualization && (!(this.dataSource instanceof DataManager) || (this.dataSource instanceof DataManager && this.virtualGroupDataSource)))) {\n                var mapping = !isNullOrUndefined(this.fields.value) ? this.fields.value : '';\n                filterQuery.where(mapping, filterType, queryString, this.ignoreCase, this.ignoreAccent);\n            }\n        }\n        if (!isNullOrUndefined(this.suggestionCount) && !this.enableVirtualization) {\n            // Since defualt value of suggestioncount is 20, checked the condition\n            if (this.suggestionCount !== 20) {\n                for (var queryElements = 0; queryElements < filterQuery.queries.length; queryElements++) {\n                    if (filterQuery.queries[queryElements].fn === 'onTake') {\n                        filterQuery.queries.splice(queryElements, 1);\n                    }\n                }\n            }\n            filterQuery.take(this.suggestionCount);\n        }\n        if (this.enableVirtualization && (!(this.dataSource instanceof DataManager) || (this.dataSource instanceof DataManager && this.virtualGroupDataSource))) {\n            var takeValue = this.getTakeValue();\n            filterQuery.skip(this.virtualItemStartIndex);\n            filterQuery.take(takeValue);\n            filterQuery.requiresCount();\n        }\n        return filterQuery;\n    };\n    AutoComplete.prototype.searchLists = function (e) {\n        var _this_1 = this;\n        this.isTyped = true;\n        this.isDataFetched = this.isSelectCustom = false;\n        this.checkAndResetCache();\n        if (isNullOrUndefined(this.list)) {\n            _super.prototype.renderList.call(this, e, true);\n        }\n        this.queryString = this.filterInput.value;\n        if (e.type !== 'mousedown' && (e.keyCode === 40 || e.keyCode === 38)) {\n            this.queryString = this.queryString === '' ? null : this.queryString;\n            this.beforePopupOpen = true;\n            this.resetList(this.dataSource, this.fields, null, e);\n            return;\n        }\n        this.isSelected = false;\n        this.activeIndex = null;\n        var eventArgs = {\n            preventDefaultAction: false,\n            text: this.filterInput.value,\n            updateData: function (dataSource, query, fields) {\n                if (eventArgs.cancel) {\n                    return;\n                }\n                _this_1.isFiltered = true;\n                _this_1.filterAction(dataSource, query, fields);\n            },\n            cancel: false\n        };\n        this.trigger('filtering', eventArgs, function (eventArgs) {\n            if (!eventArgs.cancel && !_this_1.isFiltered && !eventArgs.preventDefaultAction) {\n                _this_1.searchList = true;\n                _this_1.filterAction(_this_1.dataSource, null, _this_1.fields, e);\n            }\n        });\n    };\n    /**\n     * To filter the data from given data source by using query\n     *\n     * @param {Object[] | DataManager } dataSource - Set the data source to filter.\n     * @param {Query} query - Specify the query to filter the data.\n     * @param {FieldSettingsModel} fields - Specify the fields to map the column in the data table.\n     * @returns {void}\n     * @deprecated\n     */\n    AutoComplete.prototype.filter = function (dataSource, query, fields) {\n        this.isFiltered = true;\n        this.filterAction(dataSource, query, fields);\n    };\n    AutoComplete.prototype.filterAction = function (dataSource, query, fields, e) {\n        this.beforePopupOpen = true;\n        var isNoDataElement = this.list.classList.contains('e-nodata');\n        if (this.queryString !== '' && (this.queryString.length >= this.minLength)) {\n            if (this.enableVirtualization && this.isFiltering() && this.isTyped) {\n                this.isPreventScrollAction = true;\n                this.list.scrollTop = 0;\n                this.previousStartIndex = 0;\n                this.virtualListInfo = null;\n            }\n            this.resetList(dataSource, fields, query, e);\n            if (this.enableVirtualization && isNoDataElement && !this.list.classList.contains('e-nodata')) {\n                if (!this.list.querySelector('.e-virtual-ddl-content')) {\n                    this.list.appendChild(this.createElement('div', {\n                        className: 'e-virtual-ddl-content',\n                        styles: this.getTransformValues()\n                    })).appendChild(this.list.querySelector('.e-list-parent'));\n                }\n                if (!this.list.querySelector('.e-virtual-ddl')) {\n                    var virualElement = this.createElement('div', {\n                        id: this.element.id + '_popup', className: 'e-virtual-ddl', styles: this.GetVirtualTrackHeight()\n                    });\n                    document.getElementsByClassName('e-popup')[0].querySelector('.e-dropdownbase').appendChild(virualElement);\n                }\n            }\n            if ((this.getModuleName() === 'autocomplete' && !(this.dataSource instanceof DataManager)) || (this.getModuleName() === 'autocomplete' && (this.dataSource instanceof DataManager) && this.totalItemCount != 0)) {\n                this.getFilteringSkeletonCount();\n            }\n        }\n        else {\n            this.hidePopup(e);\n            this.beforePopupOpen = false;\n        }\n        this.renderReactTemplates();\n    };\n    AutoComplete.prototype.clearAll = function (e, property) {\n        if (isNullOrUndefined(property) || (!isNullOrUndefined(property) && isNullOrUndefined(property.dataSource))) {\n            _super.prototype.clearAll.call(this, e);\n            this.checkAndResetCache();\n        }\n        if (this.beforePopupOpen) {\n            this.hidePopup();\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    AutoComplete.prototype.onActionComplete = function (ulElement, list, e, isUpdated) {\n        if (!this.enableVirtualization) {\n            this.fixedHeaderElement = null;\n        }\n        if ((this.getModuleName() === 'autocomplete' && !(this.dataSource instanceof DataManager)) || (this.getModuleName() === 'autocomplete' && (this.dataSource instanceof DataManager) && this.totalItemCount != 0)) {\n            this.getFilteringSkeletonCount();\n        }\n        _super.prototype.onActionComplete.call(this, ulElement, list, e);\n        var item = this.list.querySelector('.' + dropDownListClasses.li);\n        if (!isNullOrUndefined(item)) {\n            removeClass([item], dropDownListClasses.focus);\n        }\n        this.postBackAction();\n    };\n    AutoComplete.prototype.postBackAction = function () {\n        if (this.autofill && !isNullOrUndefined(this.liCollections[0]) && this.searchList) {\n            var items = [this.liCollections[0]];\n            var dataSource = this.listData;\n            var type = this.typeOfData(dataSource).typeof;\n            var searchItem = Search(this.inputElement.value, items, 'StartsWith', this.ignoreCase, dataSource, this.fields, type);\n            this.searchList = false;\n            if (!isNullOrUndefined(searchItem.item)) {\n                _super.prototype.setAutoFill.call(this, this.liCollections[0], true);\n            }\n        }\n    };\n    AutoComplete.prototype.setSelection = function (li, e) {\n        if (!this.isValidLI(li)) {\n            this.selectedLI = li;\n            return;\n        }\n        if (!isNullOrUndefined(e) && e.type === 'keydown' && e.action !== 'enter'\n            && e.action !== 'tab' && this.isValidLI(li)) {\n            var value = this.getFormattedValue(li.getAttribute('data-value'));\n            this.activeIndex = this.getIndexByValue(value);\n            this.setHoverList(li);\n            this.selectedLI = li;\n            this.setScrollPosition(e);\n            if (this.autofill && this.isPopupOpen) {\n                this.preventAutoFill = false;\n                var isKeyNavigate = (e && e.action === 'down' || e.action === 'up' ||\n                    e.action === 'home' || e.action === 'end' || e.action === 'pageUp' || e.action === 'pageDown');\n                _super.prototype.setAutoFill.call(this, li, isKeyNavigate);\n            }\n        }\n        else {\n            _super.prototype.setSelection.call(this, li, e);\n        }\n    };\n    AutoComplete.prototype.listOption = function (dataSource, fieldsSettings) {\n        var _this_1 = this;\n        var fields = _super.prototype.listOption.call(this, dataSource, fieldsSettings);\n        if (isNullOrUndefined(fields.itemCreated)) {\n            fields.itemCreated = function (e) {\n                if (_this_1.highlight) {\n                    if (_this_1.element.tagName === _this_1.getNgDirective() && _this_1.itemTemplate) {\n                        setTimeout(function () {\n                            highlightSearch(e.item, _this_1.queryString, _this_1.ignoreCase, _this_1.filterType);\n                        }, 0);\n                    }\n                    else {\n                        var isHtmlElement = /<[^>]*>/g.test(e.item.innerText);\n                        if (isHtmlElement) {\n                            e.item.innerText = e.item.innerText.replace(/[\\u00A0-\\u9999<>&]/g, function (match) { return \"&#\" + match.charCodeAt(0) + \";\"; });\n                        }\n                        highlightSearch(e.item, _this_1.queryString, _this_1.ignoreCase, _this_1.filterType);\n                    }\n                }\n            };\n        }\n        else {\n            var itemCreated_1 = fields.itemCreated;\n            fields.itemCreated = function (e) {\n                if (_this_1.highlight) {\n                    highlightSearch(e.item, _this_1.queryString, _this_1.ignoreCase, _this_1.filterType);\n                }\n                itemCreated_1.apply(_this_1, [e]);\n            };\n        }\n        return fields;\n    };\n    AutoComplete.prototype.isFiltering = function () {\n        return true;\n    };\n    AutoComplete.prototype.renderPopup = function (e) {\n        if (!this.enableVirtualization) {\n            this.list.scrollTop = 0;\n        }\n        _super.prototype.renderPopup.call(this, e);\n    };\n    AutoComplete.prototype.isEditTextBox = function () {\n        return false;\n    };\n    AutoComplete.prototype.isPopupButton = function () {\n        return this.showPopupButton;\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    AutoComplete.prototype.isSelectFocusItem = function (element) {\n        return false;\n    };\n    AutoComplete.prototype.setInputValue = function (newProp, oldProp) {\n        var oldValue = oldProp && oldProp.text ? oldProp.text : oldProp ? oldProp.value : oldProp;\n        var value = newProp && newProp.text ? newProp.text : newProp && newProp.value ? newProp.value : this.value;\n        if (value && this.typedString === '' && !this.allowCustom && !(this.dataSource instanceof DataManager)) {\n            var checkFields_1_1 = this.typeOfData(this.dataSource).typeof === 'string' ? '' : this.fields.value;\n            var listLength_1 = this.getItems().length;\n            var query = new Query();\n            var _this_2 = this;\n            new DataManager(this.dataSource).executeQuery(query.where(new Predicate(checkFields_1_1, 'equal', value)))\n                .then(function (e) {\n                if (e.result.length > 0) {\n                    _this_2.value = checkFields_1_1 !== '' ? e.result[0][_this_2.fields.value].toString() : e.result[0].toString();\n                    _this_2.addItem(e.result, listLength_1);\n                    _this_2.updateValues();\n                }\n                else {\n                    newProp && newProp.text ? _this_2.setOldText(oldValue) : newProp && newProp.value ? _this_2.setOldValue(oldValue) : _this_2.updateValues();\n                }\n            });\n        }\n        else if (newProp) {\n            newProp.text ? this.setOldText(oldValue) : this.setOldValue(oldValue);\n        }\n    };\n    /**\n     * Search the entered text and show it in the suggestion list if available.\n     *\n     * @returns {void}\n     * @deprecated\n     */\n    AutoComplete.prototype.showPopup = function (e) {\n        if (!this.enabled) {\n            return;\n        }\n        if (this.beforePopupOpen) {\n            this.refreshPopup();\n            return;\n        }\n        this.beforePopupOpen = true;\n        this.preventAutoFill = true;\n        if (isNullOrUndefined(this.list)) {\n            this.renderList(e);\n        }\n        else {\n            this.resetList(this.dataSource, this.fields, null, e);\n        }\n    };\n    /**\n     * Hides the popup if it is in open state.\n     *\n     * @returns {void}\n     */\n    AutoComplete.prototype.hidePopup = function (e) {\n        _super.prototype.hidePopup.call(this, e);\n        this.activeIndex = null;\n        this.virtualListInfo = this.viewPortInfo;\n        this.previousStartIndex = this.viewPortInfo.startIndex;\n        this.startIndex = this.viewPortInfo.startIndex;\n        this.previousEndIndex = this.viewPortInfo.endIndex;\n    };\n    /**\n     * Dynamically change the value of properties.\n     *\n     * @param {AutoCompleteModel} newProp - Returns the dynamic property value of the component.\n     * @param {AutoCompleteModel} oldProp - Returns the previous property value of the component.\n     * @private\n     * @returns {void}\n     */\n    AutoComplete.prototype.onPropertyChanged = function (newProp, oldProp) {\n        if (this.getModuleName() === 'autocomplete') {\n            this.setUpdateInitial(['fields', 'query', 'dataSource'], newProp);\n        }\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'showPopupButton':\n                    if (this.showPopupButton) {\n                        var button = Input.appendSpan(dropDownListClasses.icon, this.inputWrapper.container, this.createElement);\n                        this.inputWrapper.buttons[0] = button;\n                        Input.calculateWidth(this.inputElement, this.inputWrapper.container);\n                        if (!isNullOrUndefined(this.inputWrapper.buttons[0]) && !isNullOrUndefined(this.inputWrapper.container.getElementsByClassName('e-float-text-overflow')[0]) && this.floatLabelType !== 'Never') {\n                            this.inputWrapper.container.getElementsByClassName('e-float-text-overflow')[0].classList.add('e-icon');\n                        }\n                        if (this.inputWrapper && this.inputWrapper.buttons && this.inputWrapper.buttons[0]) {\n                            EventHandler.add(this.inputWrapper.buttons[0], 'click', this.dropDownClick, this);\n                        }\n                    }\n                    else {\n                        detach(this.inputWrapper.buttons[0]);\n                        this.inputWrapper.buttons[0] = null;\n                    }\n                    break;\n                default: {\n                    // eslint-disable-next-line max-len\n                    var atcProps = this.getPropObject(prop, newProp, oldProp);\n                    _super.prototype.onPropertyChanged.call(this, atcProps.newProperty, atcProps.oldProperty);\n                    break;\n                }\n            }\n        }\n    };\n    AutoComplete.prototype.renderHightSearch = function () {\n        if (this.highlight) {\n            for (var i = 0; i < this.liCollections.length; i++) {\n                var isHighlight = this.ulElement.querySelector('.e-active');\n                if (!isHighlight) {\n                    revertHighlightSearch(this.liCollections[i]);\n                    highlightSearch(this.liCollections[i], this.queryString, this.ignoreCase, this.filterType);\n                }\n            }\n        }\n    };\n    /**\n     * Return the module name of this component.\n     *\n     * @private\n     * @returns {string} Return the module name of this component.\n     */\n    AutoComplete.prototype.getModuleName = function () {\n        return 'autocomplete';\n    };\n    /**\n     * To initialize the control rendering\n     *\n     * @private\n     * @returns {void}\n     */\n    AutoComplete.prototype.render = function () {\n        _super.prototype.render.call(this);\n    };\n    __decorate$4([\n        Complex({ value: null, iconCss: null, groupBy: null }, FieldSettings)\n    ], AutoComplete.prototype, \"fields\", void 0);\n    __decorate$4([\n        Property(true)\n    ], AutoComplete.prototype, \"ignoreCase\", void 0);\n    __decorate$4([\n        Property(false)\n    ], AutoComplete.prototype, \"showPopupButton\", void 0);\n    __decorate$4([\n        Property(false)\n    ], AutoComplete.prototype, \"highlight\", void 0);\n    __decorate$4([\n        Property(20)\n    ], AutoComplete.prototype, \"suggestionCount\", void 0);\n    __decorate$4([\n        Property({})\n    ], AutoComplete.prototype, \"htmlAttributes\", void 0);\n    __decorate$4([\n        Property(null)\n    ], AutoComplete.prototype, \"query\", void 0);\n    __decorate$4([\n        Property(1)\n    ], AutoComplete.prototype, \"minLength\", void 0);\n    __decorate$4([\n        Property('Contains')\n    ], AutoComplete.prototype, \"filterType\", void 0);\n    __decorate$4([\n        Event()\n    ], AutoComplete.prototype, \"filtering\", void 0);\n    __decorate$4([\n        Property(null)\n    ], AutoComplete.prototype, \"index\", void 0);\n    __decorate$4([\n        Property('Never')\n    ], AutoComplete.prototype, \"floatLabelType\", void 0);\n    __decorate$4([\n        Property(null)\n    ], AutoComplete.prototype, \"valueTemplate\", void 0);\n    __decorate$4([\n        Property(null)\n    ], AutoComplete.prototype, \"filterBarPlaceholder\", void 0);\n    __decorate$4([\n        Property(false)\n    ], AutoComplete.prototype, \"allowFiltering\", void 0);\n    __decorate$4([\n        Property(null)\n    ], AutoComplete.prototype, \"text\", void 0);\n    AutoComplete = __decorate$4([\n        NotifyPropertyChanges\n    ], AutoComplete);\n    return AutoComplete;\n}(ComboBox));\n\n/**\n * export all modules from current location\n */\n\n/**\n * FloatLable Moduel\n * Specifies whether to display the floating label above the input element.\n */\nvar FLOATLINE = 'e-float-line';\nvar FLOATTEXT = 'e-float-text';\nvar LABELTOP = 'e-label-top';\nvar LABELBOTTOM = 'e-label-bottom';\n/* eslint-disable valid-jsdoc */\n/**\n * Function to create Float Label element.\n *\n * @param {HTMLDivElement} overAllWrapper - Overall wrapper of multiselect.\n * @param {HTMLElement} searchWrapper - Search wrapper of multiselect.\n * @param {HTMLElement} element - The given html element.\n * @param {HTMLInputElement} inputElement - Specify the input wrapper.\n * @param {number[] | string[] | boolean[]} value - Value of the MultiSelect.\n * @param {FloatLabelType} floatLabelType - Specify the FloatLabel Type.\n * @param {string} placeholder - Specify the PlaceHolder text.\n */\nfunction createFloatLabel(overAllWrapper, searchWrapper, element, inputElement, value, floatLabelType, placeholder) {\n    var floatLinelement = createElement('span', { className: FLOATLINE });\n    var floatLabelElement = createElement('label', { className: FLOATTEXT });\n    var id = element.getAttribute('id') ? element.getAttribute('id') : getUniqueID('ej2_multiselect');\n    element.id = id;\n    if (!isNullOrUndefined(element.id) && element.id !== '') {\n        floatLabelElement.id = 'label_' + element.id.replace(/ /g, '_');\n        attributes(inputElement, { 'aria-labelledby': floatLabelElement.id });\n    }\n    if (!isNullOrUndefined(inputElement.placeholder) && inputElement.placeholder !== '') {\n        floatLabelElement.innerText = encodePlaceholder(inputElement.placeholder);\n        inputElement.removeAttribute('placeholder');\n    }\n    floatLabelElement.innerText = encodePlaceholder(placeholder);\n    searchWrapper.appendChild(floatLinelement);\n    searchWrapper.appendChild(floatLabelElement);\n    overAllWrapper.classList.add('e-float-input');\n    updateFloatLabelState(value, floatLabelElement);\n    if (floatLabelType === 'Always') {\n        if (floatLabelElement.classList.contains(LABELBOTTOM)) {\n            removeClass([floatLabelElement], LABELBOTTOM);\n        }\n        addClass([floatLabelElement], LABELTOP);\n    }\n}\n/**\n * Function to update status of the Float Label element.\n *\n * @param {string[] | number[] | boolean[]} value - Value of the MultiSelect.\n * @param {HTMLElement} label - Float label element.\n */\nfunction updateFloatLabelState(value, label) {\n    if (value && value.length > 0) {\n        addClass([label], LABELTOP);\n        removeClass([label], LABELBOTTOM);\n    }\n    else {\n        removeClass([label], LABELTOP);\n        addClass([label], LABELBOTTOM);\n    }\n}\n/**\n * Function to remove Float Label element.\n *\n * @param {HTMLDivElement} overAllWrapper - Overall wrapper of multiselect.\n * @param {HTMLDivElement} componentWrapper - Wrapper element of multiselect.\n * @param {HTMLElement} searchWrapper - Search wrapper of multiselect.\n * @param {HTMLInputElement} inputElement - Specify the input wrapper.\n * @param {number[] | string[] | boolean[]} value - Value of the MultiSelect.\n * @param {FloatLabelType} floatLabelType - Specify the FloatLabel Type.\n * @param {string} placeholder - Specify the PlaceHolder text.\n */\nfunction removeFloating(overAllWrapper, componentWrapper, searchWrapper, inputElement, value, floatLabelType, placeholder) {\n    var placeholderElement = componentWrapper.querySelector('.' + FLOATTEXT);\n    var floatLine = componentWrapper.querySelector('.' + FLOATLINE);\n    var placeholderText;\n    if (!isNullOrUndefined(placeholderElement)) {\n        placeholderText = placeholderElement.innerText;\n        detach(searchWrapper.querySelector('.' + FLOATTEXT));\n        setPlaceHolder(value, inputElement, placeholderText);\n        if (!isNullOrUndefined(floatLine)) {\n            detach(searchWrapper.querySelector('.' + FLOATLINE));\n        }\n    }\n    else {\n        placeholderText = (placeholder !== null) ? placeholder : '';\n        setPlaceHolder(value, inputElement, placeholderText);\n    }\n    overAllWrapper.classList.remove('e-float-input');\n}\n/**\n * Function to set the placeholder to the element.\n *\n * @param {number[] | string[] | boolean[]} value - Value of the MultiSelect.\n * @param {HTMLInputElement} inputElement - Specify the input wrapper.\n * @param {string} placeholder - Specify the PlaceHolder text.\n */\nfunction setPlaceHolder(value, inputElement, placeholder) {\n    if (value && value.length) {\n        inputElement.placeholder = '';\n    }\n    else {\n        inputElement.placeholder = placeholder;\n    }\n}\n/**\n * Function for focusing the Float Element.\n *\n * @param {HTMLDivElement} overAllWrapper - Overall wrapper of multiselect.\n * @param {HTMLDivElement} componentWrapper - Wrapper element of multiselect.\n */\nfunction floatLabelFocus(overAllWrapper, componentWrapper) {\n    overAllWrapper.classList.add('e-input-focus');\n    var label = componentWrapper.querySelector('.' + FLOATTEXT);\n    if (!isNullOrUndefined(label)) {\n        addClass([label], LABELTOP);\n        if (label.classList.contains(LABELBOTTOM)) {\n            removeClass([label], LABELBOTTOM);\n        }\n    }\n}\n/* eslint-disable @typescript-eslint/no-unused-vars */\n/**\n * Function to focus the Float Label element.\n *\n * @param {HTMLDivElement} overAllWrapper - Overall wrapper of multiselect.\n * @param {HTMLDivElement} componentWrapper - Wrapper element of multiselect.\n * @param {number[] | string[] | boolean[]} value - Value of the MultiSelect.\n * @param {FloatLabelType} floatLabelType - Specify the FloatLabel Type.\n * @param {string} placeholder - Specify the PlaceHolder text.\n */\nfunction floatLabelBlur(overAllWrapper, componentWrapper, value, floatLabelType, placeholder) {\n    /* eslint-enable @typescript-eslint/no-unused-vars */\n    overAllWrapper.classList.remove('e-input-focus');\n    var label = componentWrapper.querySelector('.' + FLOATTEXT);\n    if (value && value.length <= 0 && floatLabelType === 'Auto' && !isNullOrUndefined(label)) {\n        if (label.classList.contains(LABELTOP)) {\n            removeClass([label], LABELTOP);\n        }\n        addClass([label], LABELBOTTOM);\n    }\n}\nfunction encodePlaceholder(placeholder) {\n    var result = '';\n    if (!isNullOrUndefined(placeholder) && placeholder !== '') {\n        var spanElement = document.createElement('span');\n        spanElement.innerHTML = '<input  placeholder=\"' + placeholder + '\"/>';\n        var hiddenInput = (spanElement.children[0]);\n        result = hiddenInput.placeholder;\n    }\n    return result;\n}\n/* eslint-enable valid-jsdoc */\n\nvar __extends$5 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$5 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n// eslint-disable-next-line @typescript-eslint/triple-slash-reference\n/// <reference path='../drop-down-base/drop-down-base-model.d.ts'/>\nvar FOCUS = 'e-input-focus';\nvar DISABLED$1 = 'e-disabled';\nvar OVER_ALL_WRAPPER = 'e-multiselect e-input-group e-control-wrapper';\nvar ELEMENT_WRAPPER = 'e-multi-select-wrapper';\nvar ELEMENT_MOBILE_WRAPPER = 'e-mob-wrapper';\nvar HIDE_LIST = 'e-hide-listitem';\nvar DELIMITER_VIEW = 'e-delim-view';\nvar CHIP_WRAPPER$1 = 'e-chips-collection';\nvar CHIP$1 = 'e-chips';\nvar CHIP_CONTENT$1 = 'e-chipcontent';\nvar CHIP_CLOSE$1 = 'e-chips-close';\nvar CHIP_SELECTED = 'e-chip-selected';\nvar SEARCHBOX_WRAPPER = 'e-searcher';\nvar DELIMITER_VIEW_WRAPPER = 'e-delimiter';\nvar ZERO_SIZE = 'e-zero-size';\nvar REMAIN_WRAPPER$1 = 'e-remain';\nvar CLOSEICON_CLASS$1 = 'e-chips-close e-close-hooker';\nvar DELIMITER_WRAPPER = 'e-delim-values';\nvar POPUP_WRAPPER = 'e-ddl e-popup e-multi-select-list-wrapper';\nvar INPUT_ELEMENT = 'e-dropdownbase';\nvar RTL_CLASS = 'e-rtl';\nvar CLOSE_ICON_HIDE = 'e-close-icon-hide';\nvar MOBILE_CHIP = 'e-mob-chip';\nvar FOOTER$1 = 'e-ddl-footer';\nvar HEADER$1 = 'e-ddl-header';\nvar DISABLE_ICON = 'e-ddl-disable-icon';\nvar SPINNER_CLASS$1 = 'e-ms-spinner-icon';\nvar HIDDEN_ELEMENT = 'e-multi-hidden';\nvar destroy = 'destroy';\nvar dropdownIcon = 'e-input-group-icon e-ddl-icon';\nvar iconAnimation = 'e-icon-anim';\nvar TOTAL_COUNT_WRAPPER$1 = 'e-delim-total';\nvar BOX_ELEMENT = 'e-multiselect-box';\nvar FILTERPARENT = 'e-filter-parent';\nvar CUSTOM_WIDTH = 'e-search-custom-width';\nvar FILTERINPUT = 'e-input-filter';\n/**\n * The Multiselect allows the user to pick a more than one value from list of predefined values.\n * ```html\n * <select id=\"list\">\n *      <option value='1'>Badminton</option>\n *      <option value='2'>Basketball</option>\n *      <option value='3'>Cricket</option>\n *      <option value='4'>Football</option>\n *      <option value='5'>Tennis</option>\n * </select>\n * ```\n * ```typescript\n * <script>\n *   var multiselectObj = new Multiselect();\n *   multiselectObj.appendTo(\"#list\");\n * </script>\n * ```\n */\nvar MultiSelect = /** @__PURE__ @class */ (function (_super) {\n    __extends$5(MultiSelect, _super);\n    /**\n     * Constructor for creating the DropDownList widget.\n     *\n     * @param {MultiSelectModel} option - Specifies the MultiSelect model.\n     * @param {string | HTMLElement} element - Specifies the element to render as component.\n     * @private\n     */\n    function MultiSelect(option, element) {\n        var _this = _super.call(this, option, element) || this;\n        _this.clearIconWidth = 0;\n        _this.previousFilterText = '';\n        _this.isValidKey = false;\n        _this.selectAllEventData = [];\n        _this.selectAllEventEle = [];\n        _this.resetMainList = null;\n        _this.resetFilteredData = false;\n        _this.scrollFocusStatus = false;\n        _this.keyDownStatus = false;\n        return _this;\n    }\n    MultiSelect.prototype.enableRTL = function (state) {\n        if (state) {\n            this.overAllWrapper.classList.add(RTL_CLASS);\n        }\n        else {\n            this.overAllWrapper.classList.remove(RTL_CLASS);\n        }\n        if (this.popupObj) {\n            this.popupObj.enableRtl = state;\n            this.popupObj.dataBind();\n        }\n    };\n    MultiSelect.prototype.requiredModules = function () {\n        var modules = [];\n        if (this.mode === 'CheckBox') {\n            this.isGroupChecking = this.enableGroupCheckBox;\n            if (this.enableGroupCheckBox) {\n                var prevOnChange = this.isProtectedOnChange;\n                this.isProtectedOnChange = true;\n                this.enableSelectionOrder = false;\n                this.isProtectedOnChange = prevOnChange;\n            }\n            this.allowCustomValue = false;\n            this.hideSelectedItem = false;\n            this.closePopupOnSelect = false;\n            modules.push({\n                member: 'CheckBoxSelection',\n                args: [this]\n            });\n        }\n        return modules;\n    };\n    MultiSelect.prototype.updateHTMLAttribute = function () {\n        if (Object.keys(this.htmlAttributes).length) {\n            for (var _i = 0, _a = Object.keys(this.htmlAttributes); _i < _a.length; _i++) {\n                var htmlAttr = _a[_i];\n                switch (htmlAttr) {\n                    case 'class': {\n                        var updatedClassValue = (this.htmlAttributes[\"\" + htmlAttr].replace(/\\s+/g, ' ')).trim();\n                        if (updatedClassValue !== '') {\n                            addClass([this.overAllWrapper], updatedClassValue.split(' '));\n                            addClass([this.popupWrapper], updatedClassValue.split(' '));\n                        }\n                        break;\n                    }\n                    case 'disabled':\n                        this.enable(false);\n                        break;\n                    case 'placeholder':\n                        if (!this.placeholder) {\n                            this.inputElement.setAttribute(htmlAttr, this.htmlAttributes[\"\" + htmlAttr]);\n                            this.setProperties({ placeholder: this.inputElement.placeholder }, true);\n                            this.refreshPlaceHolder();\n                        }\n                        break;\n                    default: {\n                        var defaultAttr = ['id'];\n                        var validateAttr = ['name', 'required', 'aria-required', 'form'];\n                        var containerAttr = ['title', 'role', 'style', 'class'];\n                        if (defaultAttr.indexOf(htmlAttr) > -1) {\n                            this.element.setAttribute(htmlAttr, this.htmlAttributes[\"\" + htmlAttr]);\n                        }\n                        else if (htmlAttr.indexOf('data') === 0 || validateAttr.indexOf(htmlAttr) > -1) {\n                            this.hiddenElement.setAttribute(htmlAttr, this.htmlAttributes[\"\" + htmlAttr]);\n                        }\n                        else if (containerAttr.indexOf(htmlAttr) > -1) {\n                            this.overAllWrapper.setAttribute(htmlAttr, this.htmlAttributes[\"\" + htmlAttr]);\n                        }\n                        else if (htmlAttr !== 'size' && !isNullOrUndefined(this.inputElement)) {\n                            this.inputElement.setAttribute(htmlAttr, this.htmlAttributes[\"\" + htmlAttr]);\n                        }\n                        break;\n                    }\n                }\n            }\n        }\n    };\n    MultiSelect.prototype.updateReadonly = function (state) {\n        if (!isNullOrUndefined(this.inputElement)) {\n            if (state || this.mode === 'CheckBox') {\n                this.inputElement.setAttribute('readonly', 'true');\n            }\n            else {\n                this.inputElement.removeAttribute('readonly');\n            }\n        }\n    };\n    MultiSelect.prototype.updateClearButton = function (state) {\n        if (state) {\n            if (this.overAllClear.parentNode) {\n                this.overAllClear.style.display = '';\n            }\n            else {\n                this.componentWrapper.appendChild(this.overAllClear);\n            }\n            this.componentWrapper.classList.remove(CLOSE_ICON_HIDE);\n        }\n        else {\n            this.overAllClear.style.display = 'none';\n            this.componentWrapper.classList.add(CLOSE_ICON_HIDE);\n        }\n    };\n    MultiSelect.prototype.updateCssClass = function () {\n        if (!isNullOrUndefined(this.cssClass) && this.cssClass !== '') {\n            var updatedCssClassValues = this.cssClass;\n            updatedCssClassValues = (this.cssClass.replace(/\\s+/g, ' ')).trim();\n            if (updatedCssClassValues !== '') {\n                addClass([this.overAllWrapper], updatedCssClassValues.split(' '));\n                addClass([this.popupWrapper], updatedCssClassValues.split(' '));\n            }\n        }\n    };\n    MultiSelect.prototype.updateOldPropCssClass = function (oldClass) {\n        if (!isNullOrUndefined(oldClass) && oldClass !== '') {\n            oldClass = (oldClass.replace(/\\s+/g, ' ')).trim();\n            if (oldClass !== '') {\n                removeClass([this.overAllWrapper], oldClass.split(' '));\n                removeClass([this.popupWrapper], oldClass.split(' '));\n            }\n        }\n    };\n    MultiSelect.prototype.onPopupShown = function (e) {\n        var _this = this;\n        if (Browser.isDevice && (this.mode === 'CheckBox' && this.allowFiltering)) {\n            // eslint-disable-next-line @typescript-eslint/no-this-alias\n            var proxy_1 = this;\n            window.onpopstate = function () {\n                proxy_1.hidePopup();\n                proxy_1.inputElement.focus();\n            };\n            history.pushState({}, '');\n        }\n        var animModel = { name: 'FadeIn', duration: 100 };\n        var eventArgs = { popup: this.popupObj, event: e, cancel: false, animation: animModel };\n        this.trigger('open', eventArgs, function (eventArgs) {\n            if (!eventArgs.cancel) {\n                _this.focusAtFirstListItem();\n                if (_this.popupObj) {\n                    document.body.appendChild(_this.popupObj.element);\n                }\n                if (_this.mode === 'CheckBox' && _this.enableGroupCheckBox && !isNullOrUndefined(_this.fields.groupBy)) {\n                    _this.updateListItems(_this.list.querySelectorAll('li.e-list-item'), _this.mainList.querySelectorAll('li.e-list-item'));\n                }\n                if (_this.mode === 'CheckBox' || _this.showDropDownIcon) {\n                    addClass([_this.overAllWrapper], [iconAnimation]);\n                }\n                _this.refreshPopup();\n                _this.renderReactTemplates();\n                if (_this.popupObj) {\n                    _this.popupObj.show(eventArgs.animation, (_this.zIndex === 1000) ? _this.element : null);\n                }\n                attributes(_this.inputElement, { 'aria-expanded': 'true', 'aria-owns': _this.element.id + '_popup', 'aria-controls': _this.element.id });\n                _this.updateAriaActiveDescendant();\n                if (_this.isFirstClick) {\n                    _this.loadTemplate();\n                }\n                if (_this.mode === 'CheckBox' && _this.showSelectAll) {\n                    EventHandler.add(_this.popupObj.element, 'click', _this.clickHandler, _this);\n                }\n            }\n        });\n    };\n    MultiSelect.prototype.updateListItems = function (listItems, mainListItems) {\n        for (var i = 0; i < listItems.length; i++) {\n            this.findGroupStart(listItems[i]);\n            this.findGroupStart(mainListItems[i]);\n        }\n        this.deselectHeader();\n    };\n    MultiSelect.prototype.loadTemplate = function () {\n        this.refreshListItems(null);\n        if (this.mode === 'CheckBox') {\n            this.removeFocus();\n        }\n        this.notify('reOrder', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox', e: this });\n    };\n    MultiSelect.prototype.setScrollPosition = function () {\n        if (((!this.hideSelectedItem && this.mode !== 'CheckBox') || (this.mode === 'CheckBox' && !this.enableSelectionOrder)) &&\n            (!isNullOrUndefined(this.value) && (this.value.length > 0))) {\n            var valueEle = this.findListElement((this.hideSelectedItem ? this.ulElement : this.list), 'li', 'data-value', this.value[this.value.length - 1]);\n            if (!isNullOrUndefined(valueEle)) {\n                this.scrollBottom(valueEle);\n            }\n        }\n    };\n    MultiSelect.prototype.focusAtFirstListItem = function () {\n        if (this.ulElement && this.ulElement.querySelector('li.'\n            + dropDownBaseClasses.li)) {\n            var element = void 0;\n            if (this.mode === 'CheckBox') {\n                this.removeFocus();\n                return;\n            }\n            else {\n                element = this.ulElement.querySelector('li.'\n                    + dropDownBaseClasses.li + ':not(.'\n                    + HIDE_LIST + ')');\n            }\n            if (element !== null) {\n                this.removeFocus();\n                this.addListFocus(element);\n            }\n        }\n    };\n    MultiSelect.prototype.focusAtLastListItem = function (data) {\n        var activeElement;\n        if (data) {\n            activeElement = Search(data, this.liCollections, 'StartsWith', this.ignoreCase);\n        }\n        else {\n            if (this.value && this.value.length) {\n                Search(this.value[this.value.length - 1], this.liCollections, 'StartsWith', this.ignoreCase);\n            }\n            else {\n                activeElement = null;\n            }\n        }\n        if (activeElement && activeElement.item !== null) {\n            this.addListFocus(activeElement.item);\n            if (((this.allowCustomValue || this.allowFiltering) && this.isPopupOpen() && this.closePopupOnSelect) || this.closePopupOnSelect) {\n                this.scrollBottom(activeElement.item, activeElement.index);\n            }\n        }\n    };\n    MultiSelect.prototype.getAriaAttributes = function () {\n        var ariaAttributes = {\n            'aria-disabled': 'false',\n            'role': 'combobox',\n            'aria-expanded': 'false'\n        };\n        return ariaAttributes;\n    };\n    MultiSelect.prototype.updateListARIA = function () {\n        if (!isNullOrUndefined(this.ulElement)) {\n            attributes(this.ulElement, { 'id': this.element.id + '_options', 'role': 'listbox', 'aria-hidden': 'false', 'aria-label': 'list' });\n        }\n        var disableStatus = !isNullOrUndefined(this.inputElement) && (this.inputElement.disabled) ? true : false;\n        if (!this.isPopupOpen() && !isNullOrUndefined(this.inputElement)) {\n            attributes(this.inputElement, this.getAriaAttributes());\n        }\n        if (disableStatus) {\n            attributes(this.inputElement, { 'aria-disabled': 'true' });\n        }\n        this.ensureAriaDisabled((disableStatus) ? 'true' : 'false');\n    };\n    MultiSelect.prototype.ensureAriaDisabled = function (status) {\n        if (this.htmlAttributes && this.htmlAttributes['aria-disabled']) {\n            var attr = this.htmlAttributes;\n            extend(attr, { 'aria-disabled': status }, attr);\n            this.setProperties({ htmlAttributes: attr }, true);\n        }\n    };\n    MultiSelect.prototype.removelastSelection = function (e) {\n        var elements = this.chipCollectionWrapper.querySelectorAll('span.' + CHIP$1);\n        var value = elements[elements.length - 1].getAttribute('data-value');\n        if (!isNullOrUndefined(this.value)) {\n            this.tempValues = this.value.slice();\n        }\n        var customValue = this.getFormattedValue(value);\n        if (this.allowCustomValue && (value !== 'false' && customValue === false || (!isNullOrUndefined(customValue) &&\n            customValue.toString() === 'NaN'))) {\n            customValue = value;\n        }\n        this.removeValue(customValue, e);\n        this.removeChipSelection();\n        this.updateDelimeter(this.delimiterChar, e);\n        this.makeTextBoxEmpty();\n        if (this.mainList && this.listData) {\n            this.refreshSelection();\n        }\n        this.checkPlaceholderSize();\n    };\n    MultiSelect.prototype.onActionFailure = function (e) {\n        _super.prototype.onActionFailure.call(this, e);\n        this.renderPopup();\n        this.onPopupShown();\n    };\n    MultiSelect.prototype.targetElement = function () {\n        this.targetInputElement = this.inputElement;\n        if (this.mode === 'CheckBox' && this.allowFiltering) {\n            this.notify('targetElement', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox' });\n        }\n        return this.targetInputElement.value;\n    };\n    MultiSelect.prototype.getForQuery = function (valuecheck) {\n        var predicate;\n        var field = isNullOrUndefined(this.fields.value) ? this.fields.text : this.fields.value;\n        for (var i = 0; i < valuecheck.length; i++) {\n            if (i === 0) {\n                predicate = new Predicate(field, 'equal', valuecheck[i]);\n            }\n            else {\n                predicate = predicate.or(field, 'equal', valuecheck[i]);\n            }\n        }\n        if (this.dataSource instanceof DataManager && this.dataSource.adaptor instanceof JsonAdaptor) {\n            return new Query().where(predicate);\n        }\n        else {\n            return this.getQuery(this.query).clone().where(predicate);\n        }\n    };\n    /* eslint-disable @typescript-eslint/no-unused-vars */\n    MultiSelect.prototype.onActionComplete = function (ulElement, list, e, isUpdated) {\n        /* eslint-enable @typescript-eslint/no-unused-vars */\n        _super.prototype.onActionComplete.call(this, ulElement, list, e);\n        this.updateSelectElementData(this.allowFiltering);\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        var proxy = this;\n        if (!isNullOrUndefined(this.value) && !this.allowCustomValue) {\n            for (var i = 0; i < this.value.length; i++) {\n                var checkEle = this.findListElement(((this.allowFiltering && !isNullOrUndefined(this.mainList)) ? this.mainList : ulElement), 'li', 'data-value', proxy.value[i]);\n                if (!checkEle && !(this.dataSource instanceof DataManager)) {\n                    this.value.splice(i, 1);\n                    i -= 1;\n                }\n            }\n        }\n        var valuecheck = [];\n        if (!isNullOrUndefined(this.value)) {\n            valuecheck = this.presentItemValue(this.ulElement);\n        }\n        if (valuecheck.length > 0 && this.dataSource instanceof DataManager && !isNullOrUndefined(this.value)\n            && this.listData != null) {\n            this.addNonPresentItems(valuecheck, this.ulElement, this.listData);\n        }\n        else {\n            this.updateActionList(ulElement, list, e);\n        }\n        if (this.dataSource instanceof DataManager && this.mode === 'CheckBox' && this.allowFiltering) {\n            this.removeFocus();\n        }\n    };\n    /* eslint-disable @typescript-eslint/no-unused-vars */\n    MultiSelect.prototype.updateActionList = function (ulElement, list, e, isUpdated) {\n        /* eslint-enable @typescript-eslint/no-unused-vars */\n        if (this.mode === 'CheckBox' && this.showSelectAll) {\n            this.notify('selectAll', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox' });\n        }\n        if (!this.mainList && !this.mainData) {\n            this.mainList = ulElement.cloneNode ? ulElement.cloneNode(true) : ulElement;\n            this.mainData = list;\n            this.mainListCollection = this.liCollections;\n        }\n        else if (isNullOrUndefined(this.mainData) || this.mainData.length === 0) {\n            this.mainData = list;\n        }\n        if ((this.remoteCustomValue || list.length <= 0) && this.allowCustomValue && this.inputFocus && this.allowFiltering &&\n            this.inputElement.value && this.inputElement.value !== '') {\n            this.checkForCustomValue(this.tempQuery, this.fields);\n            return;\n        }\n        if (this.value && this.value.length && ((this.mode !== 'CheckBox' && !isNullOrUndefined(this.inputElement) && this.inputElement.value.trim() !== '') ||\n            this.mode === 'CheckBox' || ((this.keyCode === 8 || this.keyCode === 46) && this.allowFiltering &&\n            this.allowCustomValue && this.dataSource instanceof DataManager && this.inputElement.value === ''))) {\n            this.refreshSelection();\n        }\n        this.updateListARIA();\n        this.unwireListEvents();\n        this.wireListEvents();\n        if (!isNullOrUndefined(this.setInitialValue)) {\n            this.setInitialValue();\n        }\n        if (!isNullOrUndefined(this.selectAllAction)) {\n            this.selectAllAction();\n        }\n        if (this.setDynValue) {\n            if (!isNullOrUndefined(this.text) && (isNullOrUndefined(this.value) || this.value.length === 0)) {\n                this.initialTextUpdate();\n            }\n            this.initialValueUpdate();\n            this.initialUpdate();\n            this.refreshPlaceHolder();\n            if (this.mode !== 'CheckBox' && this.changeOnBlur) {\n                this.updateValueState(null, this.value, null);\n            }\n        }\n        this.renderPopup();\n        if (this.beforePopupOpen) {\n            this.beforePopupOpen = false;\n            this.onPopupShown(e);\n        }\n    };\n    MultiSelect.prototype.refreshSelection = function () {\n        var value;\n        var element;\n        var className = this.hideSelectedItem ?\n            HIDE_LIST :\n            dropDownBaseClasses.selected;\n        if (!isNullOrUndefined(this.value)) {\n            for (var index = 0; !isNullOrUndefined(this.value[index]); index++) {\n                value = this.value[index];\n                element = this.findListElement(this.list, 'li', 'data-value', value);\n                if (element) {\n                    addClass([element], className);\n                    if (this.hideSelectedItem && element.previousSibling\n                        && element.previousElementSibling.classList.contains(dropDownBaseClasses.group)\n                        && (!element.nextElementSibling ||\n                            element.nextElementSibling.classList.contains(dropDownBaseClasses.group))) {\n                        addClass([element.previousElementSibling], className);\n                    }\n                    if (this.hideSelectedItem && this.fields.groupBy && !element.previousElementSibling.classList.contains(HIDE_LIST)) {\n                        this.hideGroupItem(value);\n                    }\n                    if (this.hideSelectedItem && element.classList.contains(dropDownBaseClasses.focus)) {\n                        removeClass([element], dropDownBaseClasses.focus);\n                        var listEle = element.parentElement.querySelectorAll('.' +\n                            dropDownBaseClasses.li + ':not(.' + HIDE_LIST + ')');\n                        if (listEle.length > 0) {\n                            addClass([listEle[0]], dropDownBaseClasses.focus);\n                            this.updateAriaActiveDescendant();\n                        }\n                        else {\n                            //EJ2-57588 - for this task, we prevent the ul element cloning ( this.ulElement = this.ulElement.cloneNode ? <HTMLElement>this.ulElement.cloneNode(true) : this.ulElement;)\n                            if (!(this.list && this.list.querySelectorAll('.' + dropDownBaseClasses.li).length > 0)) {\n                                this.l10nUpdate();\n                                addClass([this.list], dropDownBaseClasses.noData);\n                            }\n                        }\n                    }\n                    element.setAttribute('aria-selected', 'true');\n                    if (this.mode === 'CheckBox' && element.classList.contains('e-active')) {\n                        var ariaValue = element.getElementsByClassName('e-check').length;\n                        if (ariaValue === 0) {\n                            var args = {\n                                module: 'CheckBoxSelection',\n                                enable: this.mode === 'CheckBox',\n                                li: element,\n                                e: null\n                            };\n                            this.notify('updatelist', args);\n                        }\n                    }\n                }\n            }\n        }\n        this.checkSelectAll();\n        this.checkMaxSelection();\n    };\n    MultiSelect.prototype.hideGroupItem = function (value) {\n        var element;\n        var element1;\n        var className = this.hideSelectedItem ?\n            HIDE_LIST :\n            dropDownBaseClasses.selected;\n        element1 = element = this.findListElement(this.ulElement, 'li', 'data-value', value);\n        var i = 0;\n        var j = 0;\n        var temp = true;\n        var temp1 = true;\n        do {\n            if (element && element.previousElementSibling\n                && (!element.previousElementSibling.classList.contains(HIDE_LIST) &&\n                    element.previousElementSibling.classList.contains(dropDownBaseClasses.li))) {\n                temp = false;\n            }\n            if (!temp || !element || (element.previousElementSibling\n                && element.previousElementSibling.classList.contains(dropDownBaseClasses.group))) {\n                i = 10;\n            }\n            else {\n                element = element.previousElementSibling;\n            }\n            if (element1 && element1.nextElementSibling\n                && (!element1.nextElementSibling.classList.contains(HIDE_LIST) &&\n                    element1.nextElementSibling.classList.contains(dropDownBaseClasses.li))) {\n                temp1 = false;\n            }\n            if (!temp1 || !element1 || (element1.nextElementSibling\n                && element1.nextElementSibling.classList.contains(dropDownBaseClasses.group))) {\n                j = 10;\n            }\n            else {\n                element1 = element1.nextElementSibling;\n            }\n        } while (i < 10 || j < 10);\n        if (temp && temp1 && !element.previousElementSibling.classList.contains(HIDE_LIST)) {\n            addClass([element.previousElementSibling], className);\n        }\n        else if (temp && temp1 && element.previousElementSibling.classList.contains(HIDE_LIST)) {\n            removeClass([element.previousElementSibling], className);\n        }\n    };\n    MultiSelect.prototype.getValidLi = function () {\n        var liElement = this.ulElement.querySelector('li.' + dropDownBaseClasses.li + ':not(.' + HIDE_LIST + ')');\n        return (!isNullOrUndefined(liElement) ? liElement : this.liCollections[0]);\n    };\n    MultiSelect.prototype.checkSelectAll = function () {\n        var groupItemLength = this.list.querySelectorAll('li.e-list-group-item.e-active').length;\n        var listItem = this.list.querySelectorAll('li.e-list-item');\n        var searchCount = this.list.querySelectorAll('li.' + dropDownBaseClasses.li).length;\n        var searchActiveCount = this.list.querySelectorAll('li.' + dropDownBaseClasses.selected).length;\n        if (this.enableGroupCheckBox && !isNullOrUndefined(this.fields.groupBy)) {\n            searchActiveCount = searchActiveCount - groupItemLength;\n        }\n        if ((searchCount === searchActiveCount || searchActiveCount === this.maximumSelectionLength)\n            && (this.mode === 'CheckBox' && this.showSelectAll)) {\n            this.notify('checkSelectAll', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox', value: 'check' });\n        }\n        else if ((searchCount !== searchActiveCount) && (this.mode === 'CheckBox' && this.showSelectAll)) {\n            this.notify('checkSelectAll', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox', value: 'uncheck' });\n        }\n        if (this.enableGroupCheckBox && this.fields.groupBy && !this.enableSelectionOrder) {\n            for (var i = 0; i < listItem.length; i++) {\n                this.findGroupStart(listItem[i]);\n            }\n            this.deselectHeader();\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    MultiSelect.prototype.openClick = function (e) {\n        if (!this.openOnClick && this.mode !== 'CheckBox') {\n            if (this.targetElement() !== '') {\n                this.showPopup();\n            }\n            else {\n                this.hidePopup(e);\n            }\n        }\n        else if (!this.openOnClick && this.mode === 'CheckBox' && !this.isPopupOpen()) {\n            this.showPopup();\n        }\n    };\n    MultiSelect.prototype.keyUp = function (e) {\n        if (this.mode === 'CheckBox' && !this.openOnClick) {\n            var char = String.fromCharCode(e.keyCode);\n            var isWordCharacter = char.match(/\\w/);\n            if (!isNullOrUndefined(isWordCharacter)) {\n                this.isValidKey = true;\n            }\n        }\n        this.isValidKey = (this.isPopupOpen() && e.keyCode === 8) || this.isValidKey;\n        this.isValidKey = e.ctrlKey && e.keyCode === 86 ? false : this.isValidKey;\n        if (this.isValidKey) {\n            this.isValidKey = false;\n            this.expandTextbox();\n            this.showOverAllClear();\n            switch (e.keyCode) {\n                default:\n                    // For filtering works in mobile firefox\n                    this.search(e);\n            }\n        }\n    };\n    /**\n     * To filter the multiselect data from given data source by using query\n     *\n     * @param {Object[] | DataManager } dataSource - Set the data source to filter.\n     * @param {Query} query - Specify the query to filter the data.\n     * @param {FieldSettingsModel} fields - Specify the fields to map the column in the data table.\n     * @returns {void}\n     */\n    MultiSelect.prototype.filter = function (dataSource, query, fields) {\n        this.isFiltered = true;\n        this.remoteFilterAction = true;\n        this.dataUpdater(dataSource, query, fields);\n    };\n    MultiSelect.prototype.getQuery = function (query) {\n        var filterQuery = query ? query.clone() : this.query ? this.query.clone() : new Query();\n        if (this.isFiltered) {\n            return filterQuery;\n        }\n        if (this.filterAction) {\n            if (this.targetElement() !== null) {\n                var dataType = this.typeOfData(this.dataSource).typeof;\n                if (!(this.dataSource instanceof DataManager) && dataType === 'string' || dataType === 'number') {\n                    filterQuery.where('', this.filterType, this.targetElement(), this.ignoreCase, this.ignoreAccent);\n                }\n                else {\n                    var fields = this.fields;\n                    filterQuery.where(!isNullOrUndefined(fields.text) ? fields.text : '', this.filterType, this.targetElement(), this.ignoreCase, this.ignoreAccent);\n                }\n            }\n            return filterQuery;\n        }\n        else {\n            return query ? query : this.query ? this.query : new Query();\n        }\n    };\n    MultiSelect.prototype.dataUpdater = function (dataSource, query, fields) {\n        this.isDataFetched = false;\n        if (this.targetElement().trim() === '') {\n            var list = this.mainList.cloneNode ? this.mainList.cloneNode(true) : this.mainList;\n            if (this.backCommand) {\n                this.remoteCustomValue = false;\n                if (this.allowCustomValue && list.querySelectorAll('li').length == 0 && this.mainData.length > 0) {\n                    this.mainData = [];\n                }\n                this.onActionComplete(list, this.mainData);\n                if (this.value && this.value.length) {\n                    this.refreshSelection();\n                }\n                if (this.keyCode !== 8) {\n                    this.focusAtFirstListItem();\n                }\n                this.notify('reOrder', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox', e: this });\n            }\n        }\n        else {\n            this.resetList(dataSource, fields, query);\n            if (this.allowCustomValue) {\n                if (!(dataSource instanceof DataManager)) {\n                    this.checkForCustomValue(query, fields);\n                }\n                else {\n                    this.remoteCustomValue = true;\n                    this.tempQuery = query;\n                }\n            }\n        }\n        this.refreshPopup();\n        if (this.mode === 'CheckBox') {\n            this.removeFocus();\n        }\n    };\n    MultiSelect.prototype.checkForCustomValue = function (query, fields) {\n        var dataChecks = !this.getValueByText(this.inputElement.value, this.ignoreCase);\n        if (this.allowCustomValue && dataChecks) {\n            var value = this.inputElement.value;\n            var field = fields ? fields : this.fields;\n            var customData = (!isNullOrUndefined(this.mainData) && this.mainData.length > 0) ?\n                this.mainData[0] : this.mainData;\n            if (typeof (customData) !== 'string' && typeof (customData) !== 'number' && typeof (customData) !== 'boolean') {\n                var dataItem = {};\n                setValue(field.text, value, dataItem);\n                if (typeof getValue((this.fields.value ? this.fields.value : 'value'), customData)\n                    === 'number') {\n                    setValue(field.value, Math.random(), dataItem);\n                }\n                else {\n                    setValue(field.value, value, dataItem);\n                }\n                var tempData = JSON.parse(JSON.stringify(this.listData));\n                tempData.splice(0, 0, dataItem);\n                this.resetList(tempData, field, query);\n            }\n            else {\n                var tempData = JSON.parse(JSON.stringify(this.listData));\n                tempData.splice(0, 0, this.inputElement.value);\n                tempData[0] = (typeof customData === 'number' && !isNaN(parseFloat(tempData[0]))) ?\n                    parseFloat(tempData[0]) : tempData[0];\n                tempData[0] = (typeof customData === 'boolean') ?\n                    (tempData[0] === 'true' ? true : (tempData[0] === 'false' ? false : tempData[0])) : tempData[0];\n                this.resetList(tempData, field);\n            }\n        }\n        if (this.value && this.value.length) {\n            this.refreshSelection();\n        }\n    };\n    MultiSelect.prototype.getNgDirective = function () {\n        return 'EJS-MULTISELECT';\n    };\n    MultiSelect.prototype.wrapperClick = function (e) {\n        this.setDynValue = false;\n        if (!this.enabled) {\n            return;\n        }\n        if (e.target === this.overAllClear) {\n            e.preventDefault();\n            return;\n        }\n        if (!this.inputFocus) {\n            this.inputElement.focus();\n        }\n        if (!this.readonly) {\n            if (e.target && e.target.classList.toString().indexOf(CHIP_CLOSE$1) !== -1) {\n                if (this.isPopupOpen()) {\n                    this.refreshPopup();\n                }\n                return;\n            }\n            if (!this.isPopupOpen() &&\n                (this.openOnClick || (this.showDropDownIcon && e.target && e.target.className === dropdownIcon))) {\n                this.showPopup(e);\n            }\n            else {\n                this.hidePopup(e);\n                if (this.mode === 'CheckBox') {\n                    this.showOverAllClear();\n                    this.inputFocus = true;\n                    if (!this.overAllWrapper.classList.contains(FOCUS)) {\n                        this.overAllWrapper.classList.add(FOCUS);\n                    }\n                }\n            }\n        }\n        if (!(this.targetElement() && this.targetElement() !== '')) {\n            e.preventDefault();\n        }\n    };\n    MultiSelect.prototype.enable = function (state) {\n        if (state) {\n            this.overAllWrapper.classList.remove(DISABLED$1);\n            this.inputElement.removeAttribute('disabled');\n            attributes(this.inputElement, { 'aria-disabled': 'false' });\n            this.ensureAriaDisabled('false');\n        }\n        else {\n            this.overAllWrapper.classList.add(DISABLED$1);\n            this.inputElement.setAttribute('disabled', 'true');\n            attributes(this.inputElement, { 'aria-disabled': 'true' });\n            this.ensureAriaDisabled('true');\n        }\n        if (this.enabled !== state) {\n            this.enabled = state;\n        }\n        this.hidePopup();\n    };\n    MultiSelect.prototype.onBlurHandler = function (eve, isDocClickFromCheck) {\n        var target;\n        if (!isNullOrUndefined(eve)) {\n            target = eve.relatedTarget;\n        }\n        if (this.popupObj && document.body.contains(this.popupObj.element) && this.popupObj.element.contains(target)) {\n            if (this.mode !== 'CheckBox') {\n                this.inputElement.focus();\n            }\n            else if ((this.floatLabelType === 'Auto' &&\n                ((this.overAllWrapper.classList.contains('e-outline')) || (this.overAllWrapper.classList.contains('e-filled'))))) {\n                addClass([this.overAllWrapper], 'e-valid-input');\n            }\n            return;\n        }\n        if (this.floatLabelType === 'Auto' && (this.overAllWrapper.classList.contains('e-outline')) && this.mode === 'CheckBox' &&\n            ((isNullOrUndefined(this.value)) || this.value.length === 0)) {\n            removeClass([this.overAllWrapper], 'e-valid-input');\n        }\n        if (this.mode === 'CheckBox' && Browser.isIE && !isNullOrUndefined(eve) && !isDocClickFromCheck) {\n            this.inputFocus = false;\n            this.overAllWrapper.classList.remove(FOCUS);\n            return;\n        }\n        if (this.scrollFocusStatus) {\n            if (!isNullOrUndefined(eve)) {\n                eve.preventDefault();\n            }\n            this.inputElement.focus();\n            this.scrollFocusStatus = false;\n            return;\n        }\n        this.inputFocus = false;\n        this.overAllWrapper.classList.remove(FOCUS);\n        if (this.addTagOnBlur) {\n            var dataChecks = this.getValueByText(this.inputElement.value, this.ignoreCase, this.ignoreAccent);\n            var listLiElement = this.findListElement(this.list, 'li', 'data-value', dataChecks);\n            var className = this.hideSelectedItem ? HIDE_LIST : dropDownBaseClasses.selected;\n            var allowChipAddition = (listLiElement && !listLiElement.classList.contains(className)) ? true : false;\n            if (allowChipAddition) {\n                this.updateListSelection(listLiElement, eve);\n                if (this.mode === 'Delimiter') {\n                    this.updateDelimeter(this.delimiterChar);\n                }\n            }\n        }\n        this.updateDataList();\n        if (this.resetMainList) {\n            this.mainList = this.resetMainList;\n            this.resetMainList = null;\n        }\n        this.refreshListItems(null);\n        if (this.mode !== 'Box' && this.mode !== 'CheckBox') {\n            this.updateDelimView();\n        }\n        if (this.changeOnBlur) {\n            this.updateValueState(eve, this.value, this.tempValues);\n            this.dispatchEvent(this.hiddenElement, 'change');\n        }\n        this.overAllClear.style.display = 'none';\n        if (this.isPopupOpen()) {\n            this.hidePopup(eve);\n        }\n        this.makeTextBoxEmpty();\n        this.trigger('blur');\n        this.focused = true;\n        if (Browser.isDevice && this.mode !== 'Delimiter' && this.mode !== 'CheckBox') {\n            this.removeChipFocus();\n        }\n        this.removeChipSelection();\n        this.refreshInputHight();\n        floatLabelBlur(this.overAllWrapper, this.componentWrapper, this.value, this.floatLabelType, this.placeholder);\n        this.refreshPlaceHolder();\n        if ((this.allowFiltering || (this.enableSelectionOrder === true && this.mode === 'CheckBox'))\n            && !isNullOrUndefined(this.mainList)) {\n            this.ulElement = this.mainList;\n        }\n        this.checkPlaceholderSize();\n        Input.createSpanElement(this.overAllWrapper, this.createElement);\n        this.calculateWidth();\n        if (!isNullOrUndefined(this.overAllWrapper) && !isNullOrUndefined(this.overAllWrapper.getElementsByClassName('e-ddl-icon')[0] && this.overAllWrapper.getElementsByClassName('e-float-text-content')[0] && this.floatLabelType !== 'Never')) {\n            this.overAllWrapper.getElementsByClassName('e-float-text-content')[0].classList.add('e-icon');\n        }\n    };\n    MultiSelect.prototype.calculateWidth = function () {\n        var elementWidth;\n        if (this.overAllWrapper) {\n            if (!this.showDropDownIcon || this.overAllWrapper.querySelector('.' + 'e-label-top')) {\n                elementWidth = this.overAllWrapper.clientWidth - 2 * (parseInt(getComputedStyle(this.inputElement).paddingRight));\n            }\n            else {\n                var downIconWidth = this.dropIcon.offsetWidth +\n                    parseInt(getComputedStyle(this.dropIcon).marginRight);\n                elementWidth = this.overAllWrapper.clientWidth - (downIconWidth + 2 * (parseInt(getComputedStyle(this.inputElement).paddingRight)));\n            }\n            if (this.floatLabelType === 'Auto') {\n                Input.calculateWidth(elementWidth, this.overAllWrapper, this.getModuleName());\n            }\n        }\n    };\n    MultiSelect.prototype.checkPlaceholderSize = function () {\n        if (this.showDropDownIcon) {\n            var downIconWidth = this.dropIcon.offsetWidth +\n                parseInt(window.getComputedStyle(this.dropIcon).marginRight, 10);\n            this.setPlaceholderSize(downIconWidth);\n        }\n        else {\n            if (!isNullOrUndefined(this.dropIcon)) {\n                this.setPlaceholderSize(this.showDropDownIcon ? this.dropIcon.offsetWidth : 0);\n            }\n        }\n    };\n    MultiSelect.prototype.setPlaceholderSize = function (downIconWidth) {\n        if (isNullOrUndefined(this.value) || this.value.length === 0) {\n            if (this.dropIcon.offsetWidth !== 0) {\n                this.searchWrapper.style.width = ('calc(100% - ' + (downIconWidth + 10)) + 'px';\n            }\n            else {\n                addClass([this.searchWrapper], CUSTOM_WIDTH);\n            }\n        }\n        else if (!isNullOrUndefined(this.value)) {\n            this.searchWrapper.removeAttribute('style');\n            removeClass([this.searchWrapper], CUSTOM_WIDTH);\n        }\n    };\n    MultiSelect.prototype.refreshInputHight = function () {\n        if (!isNullOrUndefined(this.searchWrapper)) {\n            if ((!this.value || !this.value.length) && (isNullOrUndefined(this.text) || this.text === '')) {\n                this.searchWrapper.classList.remove(ZERO_SIZE);\n            }\n            else {\n                this.searchWrapper.classList.add(ZERO_SIZE);\n            }\n        }\n    };\n    MultiSelect.prototype.validateValues = function (newValue, oldValue) {\n        return JSON.stringify(newValue.slice().sort()) !== JSON.stringify(oldValue.slice().sort());\n    };\n    MultiSelect.prototype.updateValueState = function (event, newVal, oldVal) {\n        var newValue = newVal ? newVal : [];\n        var oldValue = oldVal ? oldVal : [];\n        if (this.initStatus && this.validateValues(newValue, oldValue)) {\n            var eventArgs = {\n                e: event,\n                oldValue: oldVal,\n                value: newVal,\n                isInteracted: event ? true : false,\n                element: this.element,\n                event: event\n            };\n            if (this.isAngular && this.preventChange) {\n                this.preventChange = false;\n            }\n            else {\n                this.trigger('change', eventArgs);\n            }\n            this.updateTempValue();\n            if (!this.changeOnBlur) {\n                this.dispatchEvent(this.hiddenElement, 'change');\n            }\n        }\n    };\n    MultiSelect.prototype.updateTempValue = function () {\n        if (!this.value) {\n            this.tempValues = this.value;\n        }\n        else {\n            this.tempValues = this.value.slice();\n        }\n    };\n    MultiSelect.prototype.updateAriaActiveDescendant = function () {\n        if (!isNullOrUndefined(this.ulElement) && !isNullOrUndefined(this.ulElement.getElementsByClassName('e-item-focus')[0])) {\n            attributes(this.inputElement, { 'aria-activedescendant': this.ulElement.getElementsByClassName('e-item-focus')[0].id });\n        }\n    };\n    MultiSelect.prototype.getPagingCount = function () {\n        var height = this.list.classList.contains(dropDownBaseClasses.noData) ? null :\n            getComputedStyle(this.getItems()[0], null).getPropertyValue('height');\n        return Math.round(this.list.offsetHeight / parseInt(height, 10));\n    };\n    MultiSelect.prototype.pageUpSelection = function (steps) {\n        var collection = this.list.querySelectorAll('li.'\n            + dropDownBaseClasses.li + ':not(.' + HIDE_LIST + ')' + ':not(.e-reorder-hide)');\n        var previousItem = steps >= 0 ? collection[steps + 1] : collection[0];\n        this.addListFocus(previousItem);\n        this.scrollBottom(previousItem, this.getIndexByValue(previousItem.getAttribute('data-value')));\n    };\n    MultiSelect.prototype.pageDownSelection = function (steps) {\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        var list = this.getItems();\n        var collection = this.list.querySelectorAll('li.'\n            + dropDownBaseClasses.li + ':not(.' + HIDE_LIST + ')' + ':not(.e-reorder-hide)');\n        var previousItem = steps <= collection.length ? collection[steps - 1] : collection[collection.length - 1];\n        this.addListFocus(previousItem);\n        this.scrollBottom(previousItem, this.getIndexByValue(previousItem.getAttribute('data-value')));\n    };\n    MultiSelect.prototype.getItems = function () {\n        if (!this.list) {\n            _super.prototype.render.call(this);\n        }\n        return this.ulElement && this.ulElement.querySelectorAll('.' + dropDownBaseClasses.li).length > 0 ?\n            this.ulElement.querySelectorAll('.' + dropDownBaseClasses.li\n                + ':not(.' + HIDE_LIST + ')') : [];\n    };\n    MultiSelect.prototype.focusInHandler = function (e) {\n        var _this = this;\n        if (this.enabled) {\n            this.showOverAllClear();\n            this.inputFocus = true;\n            if (this.value && this.value.length) {\n                if (this.mode !== 'Delimiter' && this.mode !== 'CheckBox') {\n                    this.chipCollectionWrapper.style.display = '';\n                }\n                else {\n                    this.showDelimWrapper();\n                }\n                if (this.mode !== 'CheckBox') {\n                    this.viewWrapper.style.display = 'none';\n                }\n            }\n            if (this.mode !== 'CheckBox') {\n                this.searchWrapper.classList.remove(ZERO_SIZE);\n            }\n            this.checkPlaceholderSize();\n            if (this.focused) {\n                var args = { isInteracted: e ? true : false, event: e };\n                this.trigger('focus', args);\n                this.focused = false;\n            }\n            if (!this.overAllWrapper.classList.contains(FOCUS)) {\n                this.overAllWrapper.classList.add(FOCUS);\n            }\n            floatLabelFocus(this.overAllWrapper, this.componentWrapper);\n            if (this.isPopupOpen()) {\n                this.refreshPopup();\n            }\n            setTimeout(function () {\n                _this.calculateWidth();\n            }, 150);\n            return true;\n        }\n        else {\n            return false;\n        }\n    };\n    MultiSelect.prototype.showDelimWrapper = function () {\n        if (this.mode === 'CheckBox') {\n            this.viewWrapper.style.display = '';\n        }\n        else {\n            this.delimiterWrapper.style.display = '';\n        }\n        this.componentWrapper.classList.add(DELIMITER_VIEW_WRAPPER);\n    };\n    MultiSelect.prototype.hideDelimWrapper = function () {\n        this.delimiterWrapper.style.display = 'none';\n        this.componentWrapper.classList.remove(DELIMITER_VIEW_WRAPPER);\n    };\n    MultiSelect.prototype.expandTextbox = function () {\n        var size = 5;\n        if (this.placeholder) {\n            size = size > this.inputElement.placeholder.length ? size : this.inputElement.placeholder.length;\n        }\n        if (this.inputElement.value.length > size) {\n            this.inputElement.size = this.inputElement.value.length;\n        }\n        else {\n            this.inputElement.size = size;\n        }\n    };\n    MultiSelect.prototype.isPopupOpen = function () {\n        return ((this.popupWrapper !== null) && (this.popupWrapper.parentElement !== null));\n    };\n    MultiSelect.prototype.refreshPopup = function () {\n        if (this.popupObj && this.mobFilter) {\n            this.popupObj.setProperties({ width: this.calcPopupWidth() });\n            this.popupObj.refreshPosition(this.overAllWrapper);\n            this.popupObj.resolveCollision();\n        }\n    };\n    MultiSelect.prototype.checkTextLength = function () {\n        return this.targetElement().length < 1;\n    };\n    MultiSelect.prototype.popupKeyActions = function (e) {\n        switch (e.keyCode) {\n            case 38:\n                this.hidePopup(e);\n                if (this.mode === 'CheckBox') {\n                    this.inputElement.focus();\n                }\n                e.preventDefault();\n                break;\n            case 40:\n                if (!this.isPopupOpen()) {\n                    this.showPopup(e);\n                    e.preventDefault();\n                }\n                break;\n        }\n    };\n    MultiSelect.prototype.updateAriaAttribute = function () {\n        var focusedItem = this.list.querySelector('.' + dropDownBaseClasses.focus);\n        if (!isNullOrUndefined(focusedItem)) {\n            this.inputElement.setAttribute('aria-activedescendant', focusedItem.id);\n            if (this.allowFiltering) {\n                var filterInput = this.popupWrapper.querySelector('.' + FILTERINPUT);\n                filterInput && filterInput.setAttribute('aria-activedescendant', focusedItem.id);\n            }\n            else if (this.mode == \"CheckBox\") {\n                this.overAllWrapper.setAttribute('aria-activedescendant', focusedItem.id);\n            }\n        }\n    };\n    MultiSelect.prototype.homeNavigation = function (isHome) {\n        this.removeFocus();\n        var scrollEle = this.ulElement.querySelectorAll('li.' + dropDownBaseClasses.li\n            + ':not(.' + HIDE_LIST + ')' + ':not(.e-reorder-hide)');\n        if (scrollEle.length > 0) {\n            var element = scrollEle[(isHome) ? 0 : (scrollEle.length - 1)];\n            element.classList.add(dropDownBaseClasses.focus);\n            this.scrollBottom(element);\n            this.updateAriaActiveDescendant();\n        }\n    };\n    MultiSelect.prototype.onKeyDown = function (e) {\n        if (this.readonly || !this.enabled && this.mode !== 'CheckBox') {\n            return;\n        }\n        this.keyCode = e.keyCode;\n        this.keyDownStatus = true;\n        if (e.keyCode > 111 && e.keyCode < 124) {\n            return;\n        }\n        if (e.altKey) {\n            this.popupKeyActions(e);\n            return;\n        }\n        else if (this.isPopupOpen()) {\n            var focusedItem = this.list.querySelector('.' + dropDownBaseClasses.focus);\n            var activeIndex = void 0;\n            switch (e.keyCode) {\n                case 36:\n                case 35:\n                    this.homeNavigation((e.keyCode === 36) ? true : false);\n                    break;\n                case 33:\n                    e.preventDefault();\n                    if (focusedItem) {\n                        this.getIndexByValue(focusedItem.getAttribute('data-value'));\n                        this.pageUpSelection(activeIndex - this.getPagingCount());\n                        this.updateAriaAttribute();\n                    }\n                    return;\n                case 34:\n                    e.preventDefault();\n                    if (focusedItem) {\n                        this.getIndexByValue(focusedItem.getAttribute('data-value'));\n                        this.pageDownSelection(activeIndex + this.getPagingCount());\n                        this.updateAriaAttribute();\n                    }\n                    return;\n                case 38:\n                    this.arrowUp(e);\n                    break;\n                case 40:\n                    this.arrowDown(e);\n                    break;\n                case 27:\n                    e.preventDefault();\n                    this.hidePopup(e);\n                    if (this.mode === 'CheckBox') {\n                        this.inputElement.focus();\n                    }\n                    return;\n                case 13:\n                    e.preventDefault();\n                    if (this.mode !== 'CheckBox') {\n                        this.selectByKey(e);\n                    }\n                    this.checkPlaceholderSize();\n                    return;\n                case 32:\n                    this.spaceKeySelection(e);\n                    return;\n                case 9:\n                    e.preventDefault();\n                    this.hidePopup(e);\n                    this.inputElement.focus();\n                    this.overAllWrapper.classList.add(FOCUS);\n            }\n        }\n        else {\n            switch (e.keyCode) {\n                case 13:\n                case 9:\n                case 16:\n                case 17:\n                case 20:\n                    return;\n                case 40:\n                    if (this.openOnClick) {\n                        this.showPopup();\n                    }\n                    break;\n                case 27:\n                    e.preventDefault();\n                    this.escapeAction();\n                    return;\n            }\n        }\n        if (this.checkTextLength()) {\n            this.keyNavigation(e);\n        }\n        if (this.mode === 'CheckBox' && this.enableSelectionOrder) {\n            if (this.allowFiltering) {\n                this.previousFilterText = this.targetElement();\n            }\n            this.checkBackCommand(e);\n        }\n        this.expandTextbox();\n        if (!(this.mode === 'CheckBox' && this.showSelectAll)) {\n            this.refreshPopup();\n        }\n    };\n    MultiSelect.prototype.arrowDown = function (e) {\n        e.preventDefault();\n        this.moveByList(1);\n        this.keyAction = true;\n        if (document.activeElement.classList.contains(FILTERINPUT)\n            || (this.mode === 'CheckBox' && !this.allowFiltering && document.activeElement !== this.list)) {\n            EventHandler.add(this.list, 'keydown', this.onKeyDown, this);\n        }\n        this.updateAriaAttribute();\n    };\n    MultiSelect.prototype.arrowUp = function (e) {\n        e.preventDefault();\n        this.keyAction = true;\n        var list = this.list.querySelectorAll('li.'\n            + dropDownBaseClasses.li\n            + ':not(.' + HIDE_LIST + ')' + ':not(.e-reorder-hide)');\n        if (this.enableGroupCheckBox && this.mode === 'CheckBox' && !isNullOrUndefined(this.fields.groupBy)) {\n            list = this.list.querySelectorAll('li.'\n                + dropDownBaseClasses.li + ',li.' + dropDownBaseClasses.group\n                + ':not(.' + HIDE_LIST + ')' + ':not(.e-reorder-hide)');\n        }\n        var focuseElem = this.list.querySelector('li.' + dropDownBaseClasses.focus);\n        this.focusFirstListItem = !isNullOrUndefined(this.liCollections[0]) ? this.liCollections[0].classList.contains('e-item-focus') : false;\n        var index = Array.prototype.slice.call(list).indexOf(focuseElem);\n        if (index <= 0 && (this.mode === 'CheckBox' && this.allowFiltering)) {\n            this.keyAction = false;\n            this.notify('inputFocus', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox', value: 'focus' });\n        }\n        this.moveByList(-1);\n        this.updateAriaAttribute();\n    };\n    MultiSelect.prototype.spaceKeySelection = function (e) {\n        if (this.mode === 'CheckBox') {\n            var li = this.list.querySelector('li.' + dropDownBaseClasses.focus);\n            var selectAllParent = document.getElementsByClassName('e-selectall-parent')[0];\n            if (!isNullOrUndefined(li) || (selectAllParent && selectAllParent.classList.contains('e-item-focus'))) {\n                e.preventDefault();\n                this.keyAction = true;\n            }\n            this.selectByKey(e);\n            if (this.keyAction) {\n                var li_1 = this.list.querySelector('li.' + dropDownBaseClasses.focus);\n                if (!isNullOrUndefined(li_1) && selectAllParent && selectAllParent.classList.contains('e-item-focus')) {\n                    li_1.classList.remove('e-item-focus');\n                }\n            }\n        }\n        this.checkPlaceholderSize();\n    };\n    MultiSelect.prototype.checkBackCommand = function (e) {\n        if (e.keyCode === 8 && this.allowFiltering ? this.targetElement() !== this.previousFilterText : this.targetElement() === '') {\n            this.backCommand = false;\n        }\n        else {\n            this.backCommand = true;\n        }\n    };\n    MultiSelect.prototype.keyNavigation = function (e) {\n        if ((this.mode !== 'Delimiter' && this.mode !== 'CheckBox') && this.value && this.value.length) {\n            switch (e.keyCode) {\n                case 37: //left arrow\n                    e.preventDefault();\n                    this.moveBy(-1, e);\n                    break;\n                case 39: //right arrow\n                    e.preventDefault();\n                    this.moveBy(1, e);\n                    break;\n                case 8:\n                    this.removelastSelection(e);\n                    break;\n                case 46: //del\n                    this.removeSelectedChip(e);\n                    break;\n            }\n        }\n        else if (e.keyCode === 8 && this.mode === 'Delimiter') {\n            if (this.value && this.value.length) {\n                e.preventDefault();\n                var temp = this.value[this.value.length - 1];\n                this.removeValue(temp, e);\n                this.updateDelimeter(this.delimiterChar, e);\n                this.focusAtLastListItem(temp);\n            }\n        }\n    };\n    MultiSelect.prototype.selectByKey = function (e) {\n        this.removeChipSelection();\n        this.selectListByKey(e);\n        if (this.hideSelectedItem) {\n            this.focusAtFirstListItem();\n        }\n    };\n    MultiSelect.prototype.escapeAction = function () {\n        var temp = this.tempValues ? this.tempValues.slice() : [];\n        if (this.value && this.validateValues(this.value, temp)) {\n            if (this.mode !== 'CheckBox') {\n                this.value = temp;\n                this.initialValueUpdate();\n            }\n            if (this.mode !== 'Delimiter' && this.mode !== 'CheckBox') {\n                this.chipCollectionWrapper.style.display = '';\n            }\n            else {\n                this.showDelimWrapper();\n            }\n            this.refreshPlaceHolder();\n            if (this.value.length) {\n                this.showOverAllClear();\n            }\n            else {\n                this.hideOverAllClear();\n            }\n        }\n        this.makeTextBoxEmpty();\n    };\n    MultiSelect.prototype.scrollBottom = function (selectedLI, activeIndex) {\n        var currentOffset = this.list.offsetHeight;\n        var nextBottom = selectedLI.offsetTop + selectedLI.offsetHeight - this.list.scrollTop;\n        var nextOffset = this.list.scrollTop + nextBottom - currentOffset;\n        var boxRange = (selectedLI.offsetTop + selectedLI.offsetHeight - this.list.scrollTop);\n        boxRange = this.fields.groupBy && !isNullOrUndefined(this.fixedHeaderElement) ?\n            boxRange - this.fixedHeaderElement.offsetHeight : boxRange;\n        if (activeIndex === 0) {\n            this.list.scrollTop = 0;\n        }\n        else if (nextBottom > currentOffset) {\n            this.list.scrollTop = nextOffset;\n        }\n        else if (!(boxRange > 0 && this.list.offsetHeight > boxRange)) {\n            this.list.scrollTop = nextOffset;\n        }\n    };\n    MultiSelect.prototype.scrollTop = function (selectedLI, activeIndex) {\n        var nextOffset = selectedLI.offsetTop - this.list.scrollTop;\n        nextOffset = this.fields.groupBy && !isUndefined(this.fixedHeaderElement) ?\n            nextOffset - this.fixedHeaderElement.offsetHeight : nextOffset;\n        var boxRange = (selectedLI.offsetTop + selectedLI.offsetHeight - this.list.scrollTop);\n        if (activeIndex === 0) {\n            this.list.scrollTop = 0;\n        }\n        else if (nextOffset < 0) {\n            this.list.scrollTop = this.list.scrollTop + nextOffset;\n        }\n        else if (!(boxRange > 0 && this.list.offsetHeight > boxRange)) {\n            this.list.scrollTop = selectedLI.offsetTop - (this.fields.groupBy && !isUndefined(this.fixedHeaderElement) ?\n                this.fixedHeaderElement.offsetHeight : 0);\n        }\n    };\n    MultiSelect.prototype.selectListByKey = function (e) {\n        var li = this.list.querySelector('li.' + dropDownBaseClasses.focus);\n        var limit = this.value && this.value.length ? this.value.length : 0;\n        var target;\n        if (li !== null) {\n            e.preventDefault();\n            if (li.classList.contains('e-active')) {\n                limit = limit - 1;\n            }\n            if (this.isValidLI(li) && limit < this.maximumSelectionLength) {\n                this.updateListSelection(li, e);\n                this.addListFocus(li);\n                if (this.mode === 'CheckBox') {\n                    this.updateDelimView();\n                    this.updateDelimeter(this.delimiterChar, e);\n                    this.refreshInputHight();\n                    this.checkPlaceholderSize();\n                    if (this.enableGroupCheckBox && !isNullOrUndefined(this.fields.groupBy)) {\n                        target = li.firstElementChild.lastElementChild;\n                        this.findGroupStart(target);\n                        this.deselectHeader();\n                    }\n                }\n                else {\n                    this.updateDelimeter(this.delimiterChar, e);\n                }\n                this.makeTextBoxEmpty();\n                if (this.mode !== 'CheckBox') {\n                    this.refreshListItems(li.textContent);\n                }\n                if (!this.changeOnBlur) {\n                    this.updateValueState(e, this.value, this.tempValues);\n                }\n                this.refreshPopup();\n            }\n            else {\n                if (!this.isValidLI(li) && limit < this.maximumSelectionLength) {\n                    target = li.firstElementChild.lastElementChild;\n                    if (target.classList.contains('e-check')) {\n                        this.selectAllItem(false, e, li);\n                    }\n                    else {\n                        this.selectAllItem(true, e, li);\n                    }\n                }\n            }\n            this.refreshSelection();\n            if (this.closePopupOnSelect) {\n                this.hidePopup(e);\n            }\n        }\n        var selectAllParent = document.getElementsByClassName('e-selectall-parent')[0];\n        if (selectAllParent && selectAllParent.classList.contains('e-item-focus')) {\n            var selectAllCheckBox = selectAllParent.childNodes[0];\n            if (!selectAllCheckBox.classList.contains('e-check')) {\n                selectAllCheckBox.classList.add('e-check');\n                var args = {\n                    module: 'CheckBoxSelection',\n                    enable: this.mode === 'CheckBox',\n                    value: 'check',\n                    name: 'checkSelectAll'\n                };\n                this.notify('checkSelectAll', args);\n                this.selectAllItem(true, e, li);\n            }\n            else {\n                selectAllCheckBox.classList.remove('e-check');\n                var args = {\n                    module: 'CheckBoxSelection',\n                    enable: this.mode === 'CheckBox',\n                    value: 'check',\n                    name: 'checkSelectAll'\n                };\n                this.notify('checkSelectAll', args);\n                this.selectAllItem(false, e, li);\n            }\n        }\n        this.refreshPlaceHolder();\n    };\n    MultiSelect.prototype.refreshListItems = function (data) {\n        if ((this.allowFiltering || (this.mode === 'CheckBox' && this.enableSelectionOrder === true)\n            || this.allowCustomValue) && this.mainList && this.listData) {\n            var list = this.mainList.cloneNode ? this.mainList.cloneNode(true) : this.mainList;\n            this.onActionComplete(list, this.mainData);\n            this.focusAtLastListItem(data);\n            if (this.value && this.value.length) {\n                this.refreshSelection();\n            }\n        }\n        else if (!isNullOrUndefined(this.fields.groupBy) && this.value && this.value.length) {\n            this.refreshSelection();\n        }\n    };\n    MultiSelect.prototype.removeSelectedChip = function (e) {\n        var selectedElem = this.chipCollectionWrapper.querySelector('span.' + CHIP_SELECTED);\n        var temp;\n        if (selectedElem !== null) {\n            if (!isNullOrUndefined(this.value)) {\n                this.tempValues = this.value.slice();\n            }\n            temp = selectedElem.nextElementSibling;\n            if (temp !== null) {\n                this.removeChipSelection();\n                this.addChipSelection(temp, e);\n            }\n            this.removeValue(selectedElem.getAttribute('data-value'), e);\n            this.makeTextBoxEmpty();\n        }\n        if (this.closePopupOnSelect) {\n            this.hidePopup(e);\n        }\n        this.checkPlaceholderSize();\n    };\n    MultiSelect.prototype.moveByTop = function (state) {\n        var elements = this.list.querySelectorAll('li.' + dropDownBaseClasses.li);\n        var index;\n        if (elements.length > 1) {\n            this.removeFocus();\n            index = state ? 0 : (elements.length - 1);\n            this.addListFocus(elements[index]);\n            this.scrollBottom(elements[index], index);\n        }\n        this.updateAriaAttribute();\n    };\n    MultiSelect.prototype.clickHandler = function (e) {\n        var targetElement = e.target;\n        var filterInputClassName = targetElement.className;\n        var selectAllParent = document.getElementsByClassName('e-selectall-parent')[0];\n        if ((filterInputClassName === 'e-input-filter e-input' || filterInputClassName === 'e-input-group e-control-wrapper e-input-focus') && selectAllParent.classList.contains('e-item-focus')) {\n            selectAllParent.classList.remove('e-item-focus');\n        }\n    };\n    MultiSelect.prototype.moveByList = function (position) {\n        if (this.list) {\n            var elements = this.list.querySelectorAll('li.'\n                + dropDownBaseClasses.li\n                + ':not(.' + HIDE_LIST + ')' + ':not(.e-reorder-hide)');\n            if (this.mode === 'CheckBox' && this.enableGroupCheckBox && !isNullOrUndefined(this.fields.groupBy)) {\n                elements = this.list.querySelectorAll('li.'\n                    + dropDownBaseClasses.li + ',li.' + dropDownBaseClasses.group\n                    + ':not(.' + HIDE_LIST + ')' + ':not(.e-reorder-hide)');\n            }\n            var selectedElem = this.list.querySelector('li.' + dropDownBaseClasses.focus);\n            var temp = -1;\n            var selectAllParent = document.getElementsByClassName('e-selectall-parent')[0];\n            if (this.mode === 'CheckBox' && this.showSelectAll && position == 1 && !isNullOrUndefined(selectAllParent) && !selectAllParent.classList.contains('e-item-focus') && this.list.getElementsByClassName('e-item-focus').length == 0 && this.liCollections.length > 1) {\n                if (!this.focusFirstListItem && selectAllParent.classList.contains('e-item-focus')) {\n                    selectAllParent.classList.remove('e-item-focus');\n                }\n                else if (!selectAllParent.classList.contains('e-item-focus')) {\n                    selectAllParent.classList.add('e-item-focus');\n                }\n            }\n            else if (elements.length) {\n                if (this.mode === 'CheckBox' && this.showSelectAll && !isNullOrUndefined(selectAllParent && position == -1)) {\n                    if (!this.focusFirstListItem && selectAllParent.classList.contains('e-item-focus')) {\n                        selectAllParent.classList.remove('e-item-focus');\n                    }\n                    else if (this.focusFirstListItem && !selectAllParent.classList.contains('e-item-focus')) {\n                        selectAllParent.classList.add('e-item-focus');\n                    }\n                }\n                for (var index = 0; index < elements.length; index++) {\n                    if (elements[index] === selectedElem) {\n                        temp = index;\n                        break;\n                    }\n                }\n                if (position > 0) {\n                    if (temp < (elements.length - 1)) {\n                        this.removeFocus();\n                        this.addListFocus(elements[++temp]);\n                        this.updateCheck(elements[temp]);\n                        this.scrollBottom(elements[temp], temp);\n                    }\n                }\n                else {\n                    if (temp > 0) {\n                        this.removeFocus();\n                        this.addListFocus(elements[--temp]);\n                        this.updateCheck(elements[temp]);\n                        this.scrollTop(elements[temp], temp);\n                    }\n                }\n            }\n        }\n    };\n    MultiSelect.prototype.updateCheck = function (element) {\n        if (this.mode === 'CheckBox' && this.enableGroupCheckBox &&\n            !isNullOrUndefined(this.fields.groupBy)) {\n            var checkElement = element.firstElementChild.lastElementChild;\n            if (checkElement.classList.contains('e-check')) {\n                element.classList.add('e-active');\n            }\n            else {\n                element.classList.remove('e-active');\n            }\n        }\n    };\n    MultiSelect.prototype.moveBy = function (position, e) {\n        var temp;\n        var elements = this.chipCollectionWrapper.querySelectorAll('span.' + CHIP$1);\n        var selectedElem = this.chipCollectionWrapper.querySelector('span.' + CHIP_SELECTED);\n        if (selectedElem === null) {\n            if (position < 0) {\n                this.addChipSelection(elements[elements.length - 1], e);\n            }\n        }\n        else {\n            if (position < 0) {\n                temp = selectedElem.previousElementSibling;\n                if (temp !== null) {\n                    this.removeChipSelection();\n                    this.addChipSelection(temp, e);\n                }\n            }\n            else {\n                temp = selectedElem.nextElementSibling;\n                this.removeChipSelection();\n                if (temp !== null) {\n                    this.addChipSelection(temp, e);\n                }\n            }\n        }\n    };\n    MultiSelect.prototype.chipClick = function (e) {\n        if (this.enabled) {\n            var elem = closest(e.target, '.' + CHIP$1);\n            this.removeChipSelection();\n            this.addChipSelection(elem, e);\n        }\n    };\n    MultiSelect.prototype.removeChipSelection = function () {\n        if (this.chipCollectionWrapper) {\n            this.removeChipFocus();\n        }\n    };\n    MultiSelect.prototype.addChipSelection = function (element, e) {\n        addClass([element], CHIP_SELECTED);\n        this.trigger('chipSelection', e);\n    };\n    MultiSelect.prototype.onChipRemove = function (e) {\n        if (e.which === 3 || e.button === 2) {\n            return;\n        }\n        if (this.enabled && !this.readonly) {\n            var element = e.target.parentElement;\n            var customVal = element.getAttribute('data-value');\n            var value = this.getFormattedValue(customVal);\n            if (this.allowCustomValue && ((customVal !== 'false' && value === false) ||\n                (!isNullOrUndefined(value) && value.toString() === 'NaN'))) {\n                value = customVal;\n            }\n            if (this.isPopupOpen() && this.mode !== 'CheckBox') {\n                this.hidePopup(e);\n            }\n            if (!this.inputFocus) {\n                this.inputElement.focus();\n            }\n            this.removeValue(value, e);\n            if (isNullOrUndefined(this.findListElement(this.list, 'li', 'data-value', value)) && this.mainList && this.listData) {\n                var list = this.mainList.cloneNode ? this.mainList.cloneNode(true) : this.mainList;\n                this.onActionComplete(list, this.mainData);\n            }\n            this.updateDelimeter(this.delimiterChar, e);\n            if (this.placeholder && this.floatLabelType === 'Never') {\n                this.makeTextBoxEmpty();\n                this.checkPlaceholderSize();\n            }\n            else {\n                this.inputElement.value = '';\n            }\n            e.preventDefault();\n        }\n    };\n    MultiSelect.prototype.makeTextBoxEmpty = function () {\n        this.inputElement.value = '';\n        this.refreshPlaceHolder();\n    };\n    MultiSelect.prototype.refreshPlaceHolder = function () {\n        if (this.placeholder && this.floatLabelType === 'Never') {\n            if ((this.value && this.value.length) || (!isNullOrUndefined(this.text) && this.text !== '')) {\n                this.inputElement.placeholder = '';\n            }\n            else {\n                this.inputElement.placeholder = encodePlaceholder(this.placeholder);\n            }\n        }\n        else {\n            this.setFloatLabelType();\n        }\n        this.expandTextbox();\n    };\n    MultiSelect.prototype.removeAllItems = function (value, eve, isClearAll, element, mainElement) {\n        var index = this.value.indexOf(value);\n        var removeVal = this.value.slice(0);\n        removeVal.splice(index, 1);\n        this.setProperties({ value: [].concat([], removeVal) }, true);\n        element.setAttribute('aria-selected', 'false');\n        var className = this.hideSelectedItem ?\n            HIDE_LIST :\n            dropDownBaseClasses.selected;\n        removeClass([element], className);\n        this.notify('activeList', {\n            module: 'CheckBoxSelection',\n            enable: this.mode === 'CheckBox', li: element,\n            e: this, index: index\n        });\n        this.invokeCheckboxSelection(element, eve, isClearAll);\n        this.updateMainList(true, value, mainElement);\n        this.updateChipStatus();\n    };\n    MultiSelect.prototype.invokeCheckboxSelection = function (element, eve, isClearAll) {\n        this.notify('updatelist', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox', li: element, e: eve });\n        this.updateAriaActiveDescendant();\n        if ((this.value && this.value.length !== this.mainData.length)\n            && (this.mode === 'CheckBox' && this.showSelectAll && !(this.isSelectAll || isClearAll))) {\n            this.notify('checkSelectAll', {\n                module: 'CheckBoxSelection',\n                enable: this.mode === 'CheckBox',\n                value: 'uncheck'\n            });\n        }\n    };\n    MultiSelect.prototype.removeValue = function (value, eve, length, isClearAll) {\n        var _this = this;\n        var index = this.value.indexOf(this.getFormattedValue(value));\n        if (index === -1 && this.allowCustomValue && !isNullOrUndefined(value)) {\n            index = this.value.indexOf(value.toString());\n        }\n        var targetEle = eve && eve.target;\n        isClearAll = (isClearAll || targetEle && targetEle.classList.contains('e-close-hooker')) ? true : null;\n        var className = this.hideSelectedItem ?\n            HIDE_LIST :\n            dropDownBaseClasses.selected;\n        if (index !== -1) {\n            var element_1 = this.findListElement(this.list, 'li', 'data-value', value);\n            var val_1 = this.getDataByValue(value);\n            var eventArgs = {\n                e: eve,\n                item: element_1,\n                itemData: val_1,\n                isInteracted: eve ? true : false,\n                cancel: false\n            };\n            this.trigger('removing', eventArgs, function (eventArgs) {\n                if (eventArgs.cancel) {\n                    _this.removeIndex++;\n                }\n                else {\n                    var removeVal = _this.value.slice(0);\n                    removeVal.splice(index, 1);\n                    _this.setProperties({ value: [].concat([], removeVal) }, true);\n                    if (element_1 !== null) {\n                        var hideElement = _this.findListElement(_this.mainList, 'li', 'data-value', value);\n                        element_1.setAttribute('aria-selected', 'false');\n                        removeClass([element_1], className);\n                        if (hideElement) {\n                            hideElement.setAttribute('aria-selected', 'false');\n                            removeClass([element_1, hideElement], className);\n                        }\n                        _this.notify('activeList', {\n                            module: 'CheckBoxSelection',\n                            enable: _this.mode === 'CheckBox', li: element_1,\n                            e: _this, index: index\n                        });\n                        _this.invokeCheckboxSelection(element_1, eve, isClearAll);\n                    }\n                    if (_this.hideSelectedItem && _this.fields.groupBy && element_1) {\n                        _this.hideGroupItem(value);\n                    }\n                    if (_this.hideSelectedItem && _this.fixedHeaderElement && _this.fields.groupBy && _this.mode !== 'CheckBox' &&\n                        _this.isPopupOpen()) {\n                        _super.prototype.scrollStop.call(_this);\n                    }\n                    _this.updateMainList(true, value);\n                    _this.removeChip(value);\n                    _this.updateChipStatus();\n                    var limit = _this.value && _this.value.length ? _this.value.length : 0;\n                    if (limit < _this.maximumSelectionLength) {\n                        var collection = _this.list.querySelectorAll('li.'\n                            + dropDownBaseClasses.li + ':not(.e-active)');\n                        removeClass(collection, 'e-disable');\n                    }\n                    _this.trigger('removed', eventArgs);\n                    var targetEle_1 = eve && eve.currentTarget;\n                    var isSelectAll = (targetEle_1 && targetEle_1.classList.contains('e-selectall-parent')) ? true : null;\n                    if (!_this.changeOnBlur && !isClearAll && (eve && length && !isSelectAll)) {\n                        _this.updateValueState(eve, _this.value, _this.tempValues);\n                    }\n                    if (length) {\n                        _this.selectAllEventData.push(val_1);\n                        _this.selectAllEventEle.push(element_1);\n                    }\n                    if (length === 1) {\n                        if (!_this.changeOnBlur) {\n                            _this.updateValueState(eve, _this.value, _this.tempValues);\n                        }\n                        var args = {\n                            event: eve,\n                            items: _this.selectAllEventEle,\n                            itemData: _this.selectAllEventData,\n                            isInteracted: eve ? true : false,\n                            isChecked: false\n                        };\n                        _this.trigger('selectedAll', args);\n                        _this.selectAllEventData = [];\n                        _this.selectAllEventEle = [];\n                    }\n                    if (isClearAll && (length === 1 || length === null)) {\n                        _this.clearAllCallback(eve, isClearAll);\n                    }\n                }\n            });\n        }\n    };\n    MultiSelect.prototype.updateMainList = function (state, value, mainElement) {\n        if (this.allowFiltering || this.mode === 'CheckBox') {\n            var element2 = mainElement ? mainElement :\n                this.findListElement(this.mainList, 'li', 'data-value', value);\n            if (element2) {\n                if (state) {\n                    element2.setAttribute('aria-selected', 'false');\n                    removeClass([element2], this.hideSelectedItem ?\n                        HIDE_LIST :\n                        dropDownBaseClasses.selected);\n                    if (this.mode === 'CheckBox') {\n                        removeClass([element2.firstElementChild.lastElementChild], 'e-check');\n                    }\n                }\n                else {\n                    element2.setAttribute('aria-selected', 'true');\n                    addClass([element2], this.hideSelectedItem ?\n                        HIDE_LIST :\n                        dropDownBaseClasses.selected);\n                    if (this.mode === 'CheckBox') {\n                        addClass([element2.firstElementChild.lastElementChild], 'e-check');\n                    }\n                }\n            }\n        }\n    };\n    MultiSelect.prototype.removeChip = function (value) {\n        if (this.chipCollectionWrapper) {\n            var element = this.findListElement(this.chipCollectionWrapper, 'span', 'data-value', value);\n            if (element) {\n                remove(element);\n            }\n        }\n    };\n    MultiSelect.prototype.setWidth = function (width) {\n        if (!isNullOrUndefined(width)) {\n            if (typeof width === 'number') {\n                this.overAllWrapper.style.width = formatUnit(width);\n            }\n            else if (typeof width === 'string') {\n                this.overAllWrapper.style.width = (width.match(/px|%|em/)) ? (width) : (formatUnit(width));\n            }\n        }\n    };\n    MultiSelect.prototype.updateChipStatus = function () {\n        if (this.value && this.value.length) {\n            if (!isNullOrUndefined(this.chipCollectionWrapper)) {\n                (this.chipCollectionWrapper.style.display = '');\n            }\n            if (this.mode === 'Delimiter' || this.mode === 'CheckBox') {\n                this.showDelimWrapper();\n            }\n            this.showOverAllClear();\n        }\n        else {\n            if (!isNullOrUndefined(this.chipCollectionWrapper)) {\n                this.chipCollectionWrapper.style.display = 'none';\n            }\n            if (!isNullOrUndefined(this.delimiterWrapper)) {\n                (this.delimiterWrapper.style.display = 'none');\n            }\n            this.hideOverAllClear();\n        }\n    };\n    MultiSelect.prototype.addValue = function (value, text, eve) {\n        if (!this.value) {\n            this.value = [];\n        }\n        if (this.value.indexOf(value) < 0) {\n            this.setProperties({ value: [].concat([], this.value, [value]) }, true);\n        }\n        var element = this.findListElement(this.list, 'li', 'data-value', value);\n        this.removeFocus();\n        if (element) {\n            this.addListFocus(element);\n            this.addListSelection(element);\n        }\n        if (this.mode !== 'Delimiter' && this.mode !== 'CheckBox') {\n            this.addChip(text, value, eve);\n        }\n        if (this.hideSelectedItem && this.fields.groupBy) {\n            this.hideGroupItem(value);\n        }\n        this.updateChipStatus();\n        this.checkMaxSelection();\n    };\n    MultiSelect.prototype.checkMaxSelection = function () {\n        var limit = this.value && this.value.length ? this.value.length : 0;\n        if (limit === this.maximumSelectionLength) {\n            var collection = this.list.querySelectorAll('li.'\n                + dropDownBaseClasses.li + ':not(.e-active)');\n            addClass(collection, 'e-disable');\n        }\n    };\n    MultiSelect.prototype.dispatchSelect = function (value, eve, element, isNotTrigger, length) {\n        var _this = this;\n        var list = this.listData;\n        if (this.initStatus && !isNotTrigger) {\n            var val_2 = this.getDataByValue(value);\n            var eventArgs = {\n                e: eve,\n                item: element,\n                itemData: val_2,\n                isInteracted: eve ? true : false,\n                cancel: false\n            };\n            this.trigger('select', eventArgs, function (eventArgs) {\n                if (!eventArgs.cancel) {\n                    if (length) {\n                        _this.selectAllEventData.push(val_2);\n                        _this.selectAllEventEle.push(element);\n                    }\n                    if (length === 1) {\n                        var args = {\n                            event: eve,\n                            items: _this.selectAllEventEle,\n                            itemData: _this.selectAllEventData,\n                            isInteracted: eve ? true : false,\n                            isChecked: true\n                        };\n                        _this.trigger('selectedAll', args);\n                        _this.selectAllEventData = [];\n                    }\n                    if (_this.allowCustomValue && _this.isServerRendered && _this.listData !== list) {\n                        _this.listData = list;\n                    }\n                    _this.updateListSelectEventCallback(value, element, eve);\n                    if (_this.hideSelectedItem && _this.fixedHeaderElement && _this.fields.groupBy && _this.mode !== 'CheckBox') {\n                        _super.prototype.scrollStop.call(_this);\n                    }\n                }\n            });\n        }\n    };\n    MultiSelect.prototype.addChip = function (text, value, e) {\n        if (this.chipCollectionWrapper) {\n            this.getChip(text, value, e);\n        }\n    };\n    MultiSelect.prototype.removeChipFocus = function () {\n        var elements = this.chipCollectionWrapper.querySelectorAll('span.' + CHIP$1 + '.' + CHIP_SELECTED);\n        removeClass(elements, CHIP_SELECTED);\n        if (Browser.isDevice) {\n            var closeElements = this.chipCollectionWrapper.querySelectorAll('span.' + CHIP_CLOSE$1.split(' ')[0]);\n            for (var index = 0; index < closeElements.length; index++) {\n                closeElements[index].style.display = 'none';\n            }\n        }\n    };\n    MultiSelect.prototype.onMobileChipInteraction = function (e) {\n        var chipElem = closest(e.target, '.' + CHIP$1);\n        var chipClose = chipElem.querySelector('span.' + CHIP_CLOSE$1.split(' ')[0]);\n        if (this.enabled && !this.readonly) {\n            if (!chipElem.classList.contains(CHIP_SELECTED)) {\n                this.removeChipFocus();\n                chipClose.style.display = '';\n                chipElem.classList.add(CHIP_SELECTED);\n            }\n            this.refreshPopup();\n            e.preventDefault();\n        }\n    };\n    MultiSelect.prototype.multiCompiler = function (multiselectTemplate) {\n        var checkTemplate = false;\n        if (typeof multiselectTemplate !== 'function' && multiselectTemplate) {\n            try {\n                checkTemplate = (selectAll(multiselectTemplate, document).length) ? true : false;\n            }\n            catch (exception) {\n                checkTemplate = false;\n            }\n        }\n        return checkTemplate;\n    };\n    MultiSelect.prototype.encodeHtmlEntities = function (input) {\n        return input.replace(/[\\u00A0-\\u9999<>&]/g, function (match) {\n            return \"&#\" + match.charCodeAt(0) + \";\";\n        });\n    };\n    MultiSelect.prototype.getChip = function (data, value, e) {\n        var _this = this;\n        var itemData = { text: value, value: value };\n        var chip = this.createElement('span', {\n            className: CHIP$1,\n            attrs: { 'data-value': value, 'title': data }\n        });\n        var compiledString;\n        var chipContent = this.createElement('span', { className: CHIP_CONTENT$1 });\n        var chipClose = this.createElement('span', { className: CHIP_CLOSE$1 });\n        if (this.mainData) {\n            itemData = this.getDataByValue(value);\n        }\n        if (this.valueTemplate && !isNullOrUndefined(itemData)) {\n            var valuecheck = this.multiCompiler(this.valueTemplate);\n            if (typeof this.valueTemplate !== 'function' && valuecheck) {\n                compiledString = compile(select(this.valueTemplate, document).innerHTML.trim());\n            }\n            else {\n                compiledString = compile(this.valueTemplate);\n            }\n            // eslint-disable-next-line\n            var valueCompTemp = compiledString(itemData, this, 'valueTemplate', this.valueTemplateId, this.isStringTemplate, null, chipContent);\n            if (valueCompTemp && valueCompTemp.length > 0) {\n                append(valueCompTemp, chipContent);\n            }\n            this.renderReactTemplates();\n        }\n        else if (this.enableHtmlSanitizer) {\n            chipContent.innerText = data;\n        }\n        else {\n            chipContent.innerHTML = this.encodeHtmlEntities(data);\n        }\n        chip.appendChild(chipContent);\n        var eventArgs = {\n            isInteracted: e ? true : false,\n            itemData: itemData,\n            e: e,\n            setClass: function (classes) {\n                addClass([chip], classes);\n            },\n            cancel: false\n        };\n        this.isPreventChange = this.isAngular && this.preventChange;\n        this.trigger('tagging', eventArgs, function (eventArgs) {\n            if (!eventArgs.cancel) {\n                if (Browser.isDevice) {\n                    chip.classList.add(MOBILE_CHIP);\n                    append([chipClose], chip);\n                    chipClose.style.display = 'none';\n                    EventHandler.add(chip, 'click', _this.onMobileChipInteraction, _this);\n                }\n                else {\n                    EventHandler.add(chip, 'mousedown', _this.chipClick, _this);\n                    if (_this.showClearButton) {\n                        chip.appendChild(chipClose);\n                    }\n                }\n                EventHandler.add(chipClose, 'mousedown', _this.onChipRemove, _this);\n                _this.chipCollectionWrapper.appendChild(chip);\n                if (!_this.changeOnBlur && e) {\n                    _this.updateValueState(e, _this.value, _this.tempValues);\n                }\n            }\n        });\n    };\n    MultiSelect.prototype.calcPopupWidth = function () {\n        var width = formatUnit(this.popupWidth);\n        if (width.indexOf('%') > -1) {\n            var inputWidth = (this.componentWrapper.offsetWidth) * parseFloat(width) / 100;\n            width = inputWidth.toString() + 'px';\n        }\n        return width;\n    };\n    MultiSelect.prototype.mouseIn = function () {\n        if (this.enabled && !this.readonly) {\n            this.showOverAllClear();\n        }\n    };\n    MultiSelect.prototype.mouseOut = function () {\n        if (!this.inputFocus) {\n            this.overAllClear.style.display = 'none';\n        }\n    };\n    MultiSelect.prototype.listOption = function (dataSource, fields) {\n        var iconCss = isNullOrUndefined(fields.iconCss) ? false : true;\n        var fieldProperty = isNullOrUndefined(fields.properties) ? fields :\n            fields.properties;\n        this.listCurrentOptions = (fields.text !== null || fields.value !== null) ? {\n            fields: fieldProperty, showIcon: iconCss, ariaAttributes: { groupItemRole: 'presentation' }\n        } : { fields: { value: 'text' } };\n        extend(this.listCurrentOptions, this.listCurrentOptions, fields, true);\n        if (this.mode === 'CheckBox') {\n            this.notify('listoption', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox', dataSource: dataSource, fieldProperty: fieldProperty });\n        }\n        return this.listCurrentOptions;\n    };\n    MultiSelect.prototype.renderPopup = function () {\n        var _this = this;\n        if (!this.list) {\n            _super.prototype.render.call(this);\n        }\n        if (!this.popupObj) {\n            if (!isNullOrUndefined(this.popupWrapper)) {\n                document.body.appendChild(this.popupWrapper);\n                var checkboxFilter = this.popupWrapper.querySelector('.' + FILTERPARENT);\n                if (this.mode === 'CheckBox' && !this.allowFiltering && checkboxFilter && this.filterParent) {\n                    checkboxFilter.remove();\n                    this.filterParent = null;\n                }\n                var overAllHeight = parseInt(this.popupHeight, 10);\n                this.popupWrapper.style.visibility = 'hidden';\n                if (this.headerTemplate) {\n                    this.setHeaderTemplate();\n                    overAllHeight -= this.header.offsetHeight;\n                }\n                append([this.list], this.popupWrapper);\n                if (this.footerTemplate) {\n                    this.setFooterTemplate();\n                    overAllHeight -= this.footer.offsetHeight;\n                }\n                if (this.mode === 'CheckBox' && this.showSelectAll) {\n                    this.notify('selectAll', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox' });\n                    overAllHeight -= this.selectAllHeight;\n                }\n                else if (this.mode === 'CheckBox' && !this.showSelectAll && (!this.headerTemplate && !this.footerTemplate)) {\n                    this.notify('selectAll', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox' });\n                    overAllHeight = parseInt(this.popupHeight, 10);\n                }\n                else if (this.mode === 'CheckBox' && !this.showSelectAll) {\n                    this.notify('selectAll', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox' });\n                    overAllHeight = parseInt(this.popupHeight, 10);\n                    if (this.headerTemplate && this.header) {\n                        overAllHeight -= this.header.offsetHeight;\n                    }\n                    if (this.footerTemplate && this.footer) {\n                        overAllHeight -= this.footer.offsetHeight;\n                    }\n                }\n                if (this.mode === 'CheckBox') {\n                    var args = {\n                        module: 'CheckBoxSelection',\n                        enable: this.mode === 'CheckBox',\n                        popupElement: this.popupWrapper\n                    };\n                    if (this.allowFiltering) {\n                        this.notify('searchBox', args);\n                        overAllHeight -= this.searchBoxHeight;\n                    }\n                    addClass([this.popupWrapper], 'e-checkbox');\n                }\n                if (this.popupHeight !== 'auto') {\n                    this.list.style.maxHeight = formatUnit(overAllHeight);\n                    this.popupWrapper.style.maxHeight = formatUnit(this.popupHeight);\n                }\n                else {\n                    this.list.style.maxHeight = formatUnit(this.popupHeight);\n                }\n                this.popupObj = new Popup(this.popupWrapper, {\n                    width: this.calcPopupWidth(), targetType: 'relative',\n                    position: this.enableRtl ? { X: 'right', Y: 'bottom' } : { X: 'left', Y: 'bottom' },\n                    relateTo: this.overAllWrapper,\n                    collision: this.enableRtl ? { X: 'fit', Y: 'flip' } : { X: 'flip', Y: 'flip' }, offsetY: 1,\n                    enableRtl: this.enableRtl, zIndex: this.zIndex,\n                    close: function () {\n                        if (_this.popupObj.element.parentElement) {\n                            _this.popupObj.unwireScrollEvents();\n                            // For restrict the page scrolling in safari browser\n                            var checkboxFilterInput = _this.popupWrapper.querySelector('.' + FILTERINPUT);\n                            if (_this.mode === 'CheckBox' && checkboxFilterInput && document.activeElement === checkboxFilterInput) {\n                                checkboxFilterInput.blur();\n                            }\n                            detach(_this.popupObj.element);\n                        }\n                    },\n                    open: function () {\n                        _this.popupObj.resolveCollision();\n                        if (!_this.isFirstClick) {\n                            var ulElement = _this.list.querySelector('ul');\n                            if (ulElement) {\n                                if (!(_this.mode !== 'CheckBox' && (_this.allowFiltering || _this.allowCustomValue) &&\n                                    _this.targetElement().trim() !== '')) {\n                                    _this.mainList = ulElement.cloneNode ? ulElement.cloneNode(true) : ulElement;\n                                }\n                            }\n                            _this.isFirstClick = true;\n                        }\n                        _this.popupObj.wireScrollEvents();\n                        if (!(_this.mode !== 'CheckBox' && (_this.allowFiltering || _this.allowCustomValue) &&\n                            _this.targetElement().trim() !== '')) {\n                            _this.loadTemplate();\n                        }\n                        _this.setScrollPosition();\n                        if (_this.allowFiltering) {\n                            _this.notify('inputFocus', {\n                                module: 'CheckBoxSelection', enable: _this.mode === 'CheckBox', value: 'focus'\n                            });\n                        }\n                    }, targetExitViewport: function () {\n                        if (!Browser.isDevice) {\n                            _this.hidePopup();\n                        }\n                    }\n                });\n                if (this.mode === 'CheckBox' && Browser.isDevice && this.allowFiltering) {\n                    this.notify('deviceSearchBox', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox' });\n                }\n                this.popupObj.close();\n                this.popupWrapper.style.visibility = '';\n            }\n        }\n    };\n    MultiSelect.prototype.setHeaderTemplate = function () {\n        var compiledString;\n        if (this.header) {\n            this.header.remove();\n        }\n        this.header = this.createElement('div');\n        addClass([this.header], HEADER$1);\n        var headercheck = this.multiCompiler(this.headerTemplate);\n        if (typeof this.headerTemplate !== 'function' && headercheck) {\n            compiledString = compile(select(this.headerTemplate, document).innerHTML.trim());\n        }\n        else {\n            compiledString = compile(this.headerTemplate);\n        }\n        // eslint-disable-next-line\n        var elements = compiledString({}, this, 'headerTemplate', this.headerTemplateId, this.isStringTemplate, null, this.header);\n        if (elements && elements.length > 0) {\n            append(elements, this.header);\n        }\n        if (this.mode === 'CheckBox' && this.showSelectAll) {\n            prepend([this.header], this.popupWrapper);\n        }\n        else {\n            append([this.header], this.popupWrapper);\n        }\n        EventHandler.add(this.header, 'mousedown', this.onListMouseDown, this);\n    };\n    MultiSelect.prototype.setFooterTemplate = function () {\n        var compiledString;\n        if (this.footer) {\n            this.footer.remove();\n        }\n        this.footer = this.createElement('div');\n        addClass([this.footer], FOOTER$1);\n        var footercheck = this.multiCompiler(this.footerTemplate);\n        if (typeof this.footerTemplate !== 'function' && footercheck) {\n            compiledString = compile(select(this.footerTemplate, document).innerHTML.trim());\n        }\n        else {\n            compiledString = compile(this.footerTemplate);\n        }\n        // eslint-disable-next-line\n        var elements = compiledString({}, this, 'footerTemplate', this.footerTemplateId, this.isStringTemplate, null, this.footer);\n        if (elements && elements.length > 0) {\n            append(elements, this.footer);\n        }\n        append([this.footer], this.popupWrapper);\n        EventHandler.add(this.footer, 'mousedown', this.onListMouseDown, this);\n    };\n    MultiSelect.prototype.clearAll = function (e) {\n        if (this.enabled && !this.readonly) {\n            var temp = void 0;\n            if (this.value && this.value.length > 0) {\n                var liElement = this.list && this.list.querySelectorAll('li.e-list-item');\n                if (liElement && liElement.length > 0) {\n                    this.selectAllItems(false, e);\n                }\n                else {\n                    this.removeIndex = 0;\n                    for (temp = this.value[this.removeIndex]; this.removeIndex < this.value.length; temp = this.value[this.removeIndex]) {\n                        this.removeValue(temp, e, null, true);\n                    }\n                }\n                this.selectedElementID = null;\n                this.inputElement.removeAttribute('aria-activedescendant');\n            }\n            else {\n                this.clearAllCallback(e);\n            }\n        }\n    };\n    MultiSelect.prototype.clearAllCallback = function (e, isClearAll) {\n        var tempValues = this.value ? this.value.slice() : [];\n        if (this.mainList && this.listData && ((this.allowFiltering && this.mode !== 'CheckBox') || this.allowCustomValue)) {\n            var list = this.mainList.cloneNode ? this.mainList.cloneNode(true) : this.mainList;\n            this.onActionComplete(list, this.mainData);\n        }\n        this.focusAtFirstListItem();\n        this.updateDelimeter(this.delimiterChar, e);\n        if (this.mode !== 'Box' && (!this.inputFocus || this.mode === 'CheckBox')) {\n            this.updateDelimView();\n        }\n        if (this.inputElement.value !== '') {\n            this.makeTextBoxEmpty();\n            this.search(null);\n        }\n        this.checkPlaceholderSize();\n        if (this.isPopupOpen()) {\n            this.refreshPopup();\n        }\n        if (!this.inputFocus) {\n            if (this.changeOnBlur) {\n                this.updateValueState(e, this.value, tempValues);\n            }\n            if (this.mode !== 'CheckBox') {\n                this.inputElement.focus();\n            }\n        }\n        if (this.mode === 'CheckBox') {\n            this.refreshPlaceHolder();\n            this.refreshInputHight();\n            if (this.changeOnBlur && isClearAll && (isNullOrUndefined(this.value) || this.value.length === 0)) {\n                this.updateValueState(e, this.value, this.tempValues);\n            }\n        }\n        if (!this.changeOnBlur && isClearAll && (isNullOrUndefined(this.value) || this.value.length === 0)) {\n            this.updateValueState(e, this.value, this.tempValues);\n        }\n        if (this.mode === 'CheckBox' && this.enableGroupCheckBox && !isNullOrUndefined(this.fields.groupBy)) {\n            this.updateListItems(this.list.querySelectorAll('li.e-list-item'), this.mainList.querySelectorAll('li.e-list-item'));\n        }\n        e.preventDefault();\n    };\n    MultiSelect.prototype.windowResize = function () {\n        this.refreshPopup();\n        if ((!this.inputFocus || this.mode === 'CheckBox') && this.viewWrapper && this.viewWrapper.parentElement) {\n            this.updateDelimView();\n        }\n    };\n    MultiSelect.prototype.resetValueHandler = function (e) {\n        var formElement = closest(this.inputElement, 'form');\n        if (formElement && e.target === formElement) {\n            var textVal = (this.element.tagName === this.getNgDirective()) ?\n                null : this.element.getAttribute('data-initial-value');\n            this.text = textVal;\n        }\n    };\n    MultiSelect.prototype.wireEvent = function () {\n        EventHandler.add(this.componentWrapper, 'mousedown', this.wrapperClick, this);\n        EventHandler.add(window, 'resize', this.windowResize, this);\n        EventHandler.add(this.inputElement, 'focus', this.focusInHandler, this);\n        EventHandler.add(this.inputElement, 'keydown', this.onKeyDown, this);\n        EventHandler.add(this.inputElement, 'keyup', this.keyUp, this);\n        if (this.mode !== 'CheckBox') {\n            EventHandler.add(this.inputElement, 'input', this.onInput, this);\n        }\n        EventHandler.add(this.inputElement, 'blur', this.onBlurHandler, this);\n        EventHandler.add(this.componentWrapper, 'mouseover', this.mouseIn, this);\n        var formElement = closest(this.inputElement, 'form');\n        if (formElement) {\n            EventHandler.add(formElement, 'reset', this.resetValueHandler, this);\n        }\n        EventHandler.add(this.componentWrapper, 'mouseout', this.mouseOut, this);\n        EventHandler.add(this.overAllClear, 'mouseup', this.clearAll, this);\n        EventHandler.add(this.inputElement, 'paste', this.pasteHandler, this);\n    };\n    MultiSelect.prototype.onInput = function (e) {\n        if (this.keyDownStatus) {\n            this.isValidKey = true;\n        }\n        else {\n            this.isValidKey = false;\n        }\n        this.keyDownStatus = false;\n        // For Filtering works in mobile firefox\n        if (Browser.isDevice && Browser.info.name === 'mozilla') {\n            this.search(e);\n        }\n    };\n    MultiSelect.prototype.pasteHandler = function (event) {\n        var _this = this;\n        setTimeout(function () {\n            _this.expandTextbox();\n            _this.search(event);\n        });\n    };\n    MultiSelect.prototype.search = function (e) {\n        var _this = this;\n        this.resetFilteredData = true;\n        if (!isNullOrUndefined(e)) {\n            this.keyCode = e.keyCode;\n        }\n        if (!this.isPopupOpen() && this.openOnClick) {\n            this.showPopup(e);\n        }\n        this.openClick(e);\n        if (this.checkTextLength() && !this.allowFiltering && !isNullOrUndefined(e) && (e.keyCode !== 8)) {\n            this.focusAtFirstListItem();\n        }\n        else {\n            var text = this.targetElement();\n            if (this.allowFiltering) {\n                var eventArgs_1 = {\n                    preventDefaultAction: false,\n                    text: this.targetElement(),\n                    updateData: function (dataSource, query, fields) {\n                        if (eventArgs_1.cancel) {\n                            return;\n                        }\n                        _this.isFiltered = true;\n                        _this.remoteFilterAction = true;\n                        _this.dataUpdater(dataSource, query, fields);\n                    },\n                    event: e,\n                    cancel: false\n                };\n                this.trigger('filtering', eventArgs_1, function (eventArgs) {\n                    if (!eventArgs.cancel) {\n                        if (!_this.isFiltered && !eventArgs.preventDefaultAction) {\n                            _this.filterAction = true;\n                            _this.dataUpdater(_this.dataSource, null, _this.fields);\n                        }\n                    }\n                });\n            }\n            else if (this.allowCustomValue) {\n                var query = new Query();\n                query = (text !== '') ? query.where(this.fields.text, 'startswith', text, this.ignoreCase, this.ignoreAccent) : query;\n                this.dataUpdater(this.mainData, query, this.fields);\n            }\n            else {\n                var liCollections = this.list.querySelectorAll('li.' + dropDownBaseClasses.li + ':not(.e-hide-listitem)');\n                var activeElement = Search(this.targetElement(), liCollections, 'StartsWith', this.ignoreCase);\n                if (activeElement && activeElement.item !== null) {\n                    this.addListFocus(activeElement.item);\n                    this.list.scrollTop =\n                        activeElement.item.offsetHeight * activeElement.index;\n                }\n                else if (this.targetElement() !== '') {\n                    this.removeFocus();\n                }\n                else {\n                    this.focusAtFirstListItem();\n                }\n            }\n        }\n    };\n    MultiSelect.prototype.preRender = function () {\n        if (this.allowFiltering === null) {\n            this.allowFiltering = (this.mode === 'CheckBox') ? true : false;\n        }\n        this.initializeData();\n        this.updateDataAttribute(this.htmlAttributes);\n        _super.prototype.preRender.call(this);\n    };\n    MultiSelect.prototype.getLocaleName = function () {\n        return 'multi-select';\n    };\n    MultiSelect.prototype.initializeData = function () {\n        this.mainListCollection = [];\n        this.beforePopupOpen = false;\n        this.filterAction = false;\n        this.remoteFilterAction = false;\n        this.isFirstClick = false;\n        this.mobFilter = true;\n        this.isFiltered = false;\n        this.focused = true;\n        this.initial = true;\n        this.backCommand = true;\n    };\n    MultiSelect.prototype.updateData = function (delimiterChar, e) {\n        var data = '';\n        var delim = this.mode === 'Delimiter' || this.mode === 'CheckBox';\n        var text = [];\n        var temp;\n        var tempData = this.listData;\n        this.listData = this.mainData;\n        if (!isNullOrUndefined(this.hiddenElement)) {\n            this.hiddenElement.innerHTML = '';\n        }\n        if (!isNullOrUndefined(this.value)) {\n            var valueLength = this.value.length;\n            var hiddenElementContent = '';\n            for (var index = 0; index < valueLength; index++) {\n                var valueItem = this.value[index];\n                var listValue = this.findListElement((!isNullOrUndefined(this.mainList) ? this.mainList : this.ulElement), 'li', 'data-value', valueItem);\n                if (isNullOrUndefined(listValue) && !this.allowCustomValue) {\n                    this.value.splice(index, 1);\n                    index -= 1;\n                    valueLength -= 1;\n                }\n                else {\n                    if (this.listData) {\n                        temp = this.getTextByValue(valueItem);\n                    }\n                    else {\n                        temp = valueItem;\n                    }\n                    data += temp + delimiterChar + ' ';\n                    text.push(temp);\n                }\n                hiddenElementContent += \"<option selected value=\\\"\" + valueItem + \"\\\">\" + index + \"</option>\";\n            }\n            if (!isNullOrUndefined(this.hiddenElement)) {\n                this.hiddenElement.innerHTML = hiddenElementContent;\n            }\n        }\n        this.setProperties({ text: text.toString() }, true);\n        if (delim) {\n            this.updateWrapperText(this.delimiterWrapper, data);\n            this.delimiterWrapper.setAttribute('id', getUniqueID('delim_val'));\n            this.inputElement.setAttribute('aria-labelledby', this.delimiterWrapper.id);\n        }\n        var targetEle = e && e.target;\n        var isClearAll = (targetEle && targetEle.classList.contains('e-close-hooker')) ? true : null;\n        if (!this.changeOnBlur && ((e && !isClearAll)) || this.isSelectAll) {\n            this.isSelectAll = false;\n            this.updateValueState(e, this.value, this.tempValues);\n        }\n        this.listData = tempData;\n        this.addValidInputClass();\n    };\n    MultiSelect.prototype.initialTextUpdate = function () {\n        if (!isNullOrUndefined(this.text)) {\n            var textArr = this.text.split(this.delimiterChar);\n            var textVal = [];\n            for (var index = 0; textArr.length > index; index++) {\n                var val = this.getValueByText(textArr[index]);\n                if (!isNullOrUndefined(val)) {\n                    textVal.push(val);\n                }\n                else if (this.allowCustomValue) {\n                    textVal.push(textArr[index]);\n                }\n            }\n            if (textVal && textVal.length) {\n                this.setProperties({ value: textVal }, true);\n            }\n        }\n        else {\n            this.setProperties({ value: null }, true);\n        }\n    };\n    MultiSelect.prototype.renderList = function (isEmptyData) {\n        if (!isEmptyData && this.allowCustomValue && this.list && (this.list.textContent === this.noRecordsTemplate\n            || this.list.querySelector('.e-ul') && this.list.querySelector('.e-ul').childElementCount === 0)) {\n            isEmptyData = true;\n        }\n        _super.prototype.render.call(this, null, isEmptyData);\n        this.unwireListEvents();\n        this.wireListEvents();\n    };\n    MultiSelect.prototype.initialValueUpdate = function () {\n        if (this.list) {\n            var text = void 0;\n            var element = void 0;\n            var value = void 0;\n            if (this.chipCollectionWrapper) {\n                this.chipCollectionWrapper.innerHTML = '';\n            }\n            this.removeListSelection();\n            if (!isNullOrUndefined(this.value)) {\n                for (var index = 0; !isNullOrUndefined(this.value[index]); index++) {\n                    value = this.value[index];\n                    element = this.findListElement(this.hideSelectedItem ? this.ulElement : this.list, 'li', 'data-value', value);\n                    text = this.getTextByValue(value);\n                    if ((element && (element.getAttribute('aria-selected') !== 'true')) ||\n                        (element && (element.getAttribute('aria-selected') === 'true' && this.hideSelectedItem) &&\n                            (this.mode === 'Box' || this.mode === 'Default'))) {\n                        this.addChip(text, value);\n                        this.addListSelection(element);\n                    }\n                    else if (value && this.allowCustomValue) {\n                        var indexItem = this.listData.length;\n                        var newValue = {};\n                        setValue(this.fields.text, value, newValue);\n                        setValue(this.fields.value, value, newValue);\n                        var noDataEle = this.popupWrapper.querySelector('.' + dropDownBaseClasses.noData);\n                        this.addItem(newValue, indexItem);\n                        element = element ? element : this.findListElement(this.hideSelectedItem ? this.ulElement : this.list, 'li', 'data-value', value);\n                        if (this.popupWrapper.contains(noDataEle)) {\n                            this.list.setAttribute('style', noDataEle.getAttribute('style'));\n                            this.popupWrapper.replaceChild(this.list, noDataEle);\n                            this.wireListEvents();\n                        }\n                        this.addChip(text, value);\n                        this.addListSelection(element);\n                    }\n                }\n            }\n            if (this.mode === 'CheckBox') {\n                this.updateDelimView();\n                if (this.changeOnBlur) {\n                    this.updateValueState(null, this.value, this.tempValues);\n                }\n                this.updateDelimeter(this.delimiterChar);\n                this.refreshInputHight();\n            }\n            else {\n                this.updateDelimeter(this.delimiterChar);\n            }\n            if (this.mode === 'CheckBox' && this.showSelectAll && (isNullOrUndefined(this.value) || !this.value.length)) {\n                this.notify('checkSelectAll', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox', value: 'uncheck' });\n            }\n            if (this.mode === 'Box' || (this.mode === 'Default' && this.inputFocus)) {\n                this.chipCollectionWrapper.style.display = '';\n            }\n            else if (this.mode === 'Delimiter' || this.mode === 'CheckBox') {\n                this.showDelimWrapper();\n            }\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    MultiSelect.prototype.updateActionCompleteData = function (li, item) {\n        if (this.value && this.value.indexOf(li.getAttribute('data-value')) > -1) {\n            this.mainList = this.ulElement;\n            if (this.hideSelectedItem) {\n                addClass([li], HIDE_LIST);\n            }\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    MultiSelect.prototype.updateAddItemList = function (list, itemCount) {\n        if (this.popupObj && this.popupObj.element && this.popupObj.element.querySelector('.' + dropDownBaseClasses.noData) && list) {\n            this.list = list;\n            this.mainList = this.ulElement = list.querySelector('ul');\n            remove(this.popupWrapper.querySelector('.e-content'));\n            this.popupObj = null;\n            this.renderPopup();\n        }\n        else if (this.allowCustomValue) {\n            this.list = list;\n            this.mainList = this.ulElement = list.querySelector('ul');\n        }\n    };\n    MultiSelect.prototype.updateDataList = function () {\n        if (this.mainList && this.ulElement && !(this.isFiltered || this.filterAction || this.targetElement().trim())) {\n            var isDynamicGroupItemUpdate = this.mainList.childElementCount < this.ulElement.childElementCount;\n            var isReactTemplateUpdate = ((this.ulElement.childElementCount > 0 && this.ulElement.children[0].childElementCount > 0) && (this.mainList.children[0] && (this.mainList.children[0].childElementCount < this.ulElement.children[0].childElementCount)));\n            var isAngularTemplateUpdate = this.itemTemplate && this.ulElement.childElementCount > 0 && !(this.ulElement.childElementCount < this.mainList.childElementCount) && (this.ulElement.children[0].childElementCount > 0 || (this.fields.groupBy && this.ulElement.children[1] && this.ulElement.children[1].childElementCount > 0));\n            if (isDynamicGroupItemUpdate || isReactTemplateUpdate || isAngularTemplateUpdate) {\n                //EJ2-57748 - for this task, we prevent the ul element cloning ( this.mainList = this.ulElement.cloneNode ? <HTMLElement>this.ulElement.cloneNode(true) : this.ulElement;)\n                this.mainList = this.ulElement;\n            }\n        }\n    };\n    MultiSelect.prototype.isValidLI = function (li) {\n        return (li && !li.classList.contains(dropDownBaseClasses.disabled) && !li.classList.contains(dropDownBaseClasses.group) &&\n            li.classList.contains(dropDownBaseClasses.li));\n    };\n    MultiSelect.prototype.updateListSelection = function (li, e, length) {\n        var customVal = li.getAttribute('data-value');\n        var value = this.getFormattedValue(customVal);\n        if (this.allowCustomValue && ((customVal !== 'false' && value === false) ||\n            (!isNullOrUndefined(value) && value.toString() === 'NaN'))) {\n            value = customVal;\n        }\n        this.removeHover();\n        if (!this.value || this.value.indexOf(value) === -1) {\n            this.dispatchSelect(value, e, li, (li.getAttribute('aria-selected') === 'true'), length);\n        }\n        else {\n            this.removeValue(value, e, length);\n        }\n    };\n    MultiSelect.prototype.updateListSelectEventCallback = function (value, li, e) {\n        var _this = this;\n        var text = this.getTextByValue(value);\n        if ((this.allowCustomValue || this.allowFiltering) && !this.findListElement(this.mainList, 'li', 'data-value', value)) {\n            var temp_1 = li.cloneNode(true);\n            var fieldValue = this.fields.value ? this.fields.value : 'value';\n            if (this.allowCustomValue && this.mainData.length && typeof getValue(fieldValue, this.mainData[0]) === 'number') {\n                value = !isNaN(parseFloat(value.toString())) ? parseFloat(value.toString()) : value;\n            }\n            var data_1 = this.getDataByValue(value);\n            var eventArgs = {\n                newData: data_1,\n                cancel: false\n            };\n            this.trigger('customValueSelection', eventArgs, function (eventArgs) {\n                if (!eventArgs.cancel) {\n                    append([temp_1], _this.mainList);\n                    _this.mainData.push(data_1);\n                    _this.remoteCustomValue = false;\n                    _this.addValue(value, text, e);\n                }\n            });\n        }\n        else {\n            this.remoteCustomValue = false;\n            this.addValue(value, text, e);\n        }\n    };\n    MultiSelect.prototype.removeListSelection = function () {\n        var className = this.hideSelectedItem ?\n            HIDE_LIST :\n            dropDownBaseClasses.selected;\n        var selectedItems = this.list.querySelectorAll('.' + className);\n        var temp = selectedItems.length;\n        if (selectedItems && selectedItems.length) {\n            removeClass(selectedItems, className);\n            while (temp > 0) {\n                selectedItems[temp - 1].setAttribute('aria-selected', 'false');\n                temp--;\n            }\n        }\n        if (!isNullOrUndefined(this.mainList)) {\n            var selectItems = this.mainList.querySelectorAll('.' + className);\n            var temp1 = selectItems.length;\n            if (selectItems && selectItems.length) {\n                removeClass(selectItems, className);\n                while (temp1 > 0) {\n                    selectItems[temp1 - 1].setAttribute('aria-selected', 'false');\n                    if (this.mode === 'CheckBox') {\n                        if (selectedItems && (selectedItems.length > (temp1 - 1))) {\n                            removeClass([selectedItems[temp1 - 1].firstElementChild.lastElementChild], 'e-check');\n                        }\n                        removeClass([selectItems[temp1 - 1].firstElementChild.lastElementChild], 'e-check');\n                    }\n                    temp1--;\n                }\n            }\n        }\n    };\n    MultiSelect.prototype.removeHover = function () {\n        var hoveredItem = this.list.querySelectorAll('.' + dropDownBaseClasses.hover);\n        if (hoveredItem && hoveredItem.length) {\n            removeClass(hoveredItem, dropDownBaseClasses.hover);\n        }\n    };\n    MultiSelect.prototype.removeFocus = function () {\n        if (this.list && this.mainList) {\n            var hoveredItem = this.list.querySelectorAll('.' + dropDownBaseClasses.focus);\n            var mainlist = this.mainList.querySelectorAll('.' + dropDownBaseClasses.focus);\n            if (hoveredItem && hoveredItem.length) {\n                removeClass(hoveredItem, dropDownBaseClasses.focus);\n                removeClass(mainlist, dropDownBaseClasses.focus);\n            }\n        }\n    };\n    MultiSelect.prototype.addListHover = function (li) {\n        if (this.enabled && this.isValidLI(li)) {\n            this.removeHover();\n            addClass([li], dropDownBaseClasses.hover);\n        }\n        else {\n            if ((li !== null && li.classList.contains('e-list-group-item')) && this.enableGroupCheckBox && this.mode === 'CheckBox'\n                && !isNullOrUndefined(this.fields.groupBy)) {\n                this.removeHover();\n                addClass([li], dropDownBaseClasses.hover);\n            }\n        }\n    };\n    MultiSelect.prototype.addListFocus = function (element) {\n        if (this.enabled && this.isValidLI(element)) {\n            this.removeFocus();\n            addClass([element], dropDownBaseClasses.focus);\n            this.updateAriaActiveDescendant();\n        }\n        else {\n            if (this.enableGroupCheckBox && this.mode === 'CheckBox' && !isNullOrUndefined(this.fields.groupBy)) {\n                addClass([element], dropDownBaseClasses.focus);\n                this.updateAriaActiveDescendant();\n            }\n        }\n    };\n    MultiSelect.prototype.addListSelection = function (element, mainElement) {\n        var className = this.hideSelectedItem ?\n            HIDE_LIST :\n            dropDownBaseClasses.selected;\n        if (this.isValidLI(element) && !element.classList.contains(dropDownBaseClasses.hover)) {\n            addClass([element], className);\n            this.updateMainList(false, element.getAttribute('data-value'), mainElement);\n            element.setAttribute('aria-selected', 'true');\n            if (this.mode === 'CheckBox' && element.classList.contains('e-active')) {\n                var ariaCheck = element.getElementsByClassName('e-check').length;\n                if (ariaCheck === 0) {\n                    this.notify('updatelist', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox', li: element, e: this });\n                }\n            }\n            this.notify('activeList', { module: 'CheckBoxSelection', enable: this.mode === 'CheckBox', li: element, e: this });\n            if (this.chipCollectionWrapper) {\n                this.removeChipSelection();\n            }\n            this.selectedElementID = element.id;\n        }\n    };\n    MultiSelect.prototype.updateDelimeter = function (delimChar, e) {\n        this.updateData(delimChar, e);\n    };\n    MultiSelect.prototype.onMouseClick = function (e) {\n        var _this = this;\n        this.keyCode = null;\n        this.scrollFocusStatus = false;\n        var target = e.target;\n        var li = closest(target, '.' + dropDownBaseClasses.li);\n        var headerLi = closest(target, '.' + dropDownBaseClasses.group);\n        if (headerLi && this.enableGroupCheckBox && this.mode === 'CheckBox' && this.fields.groupBy) {\n            target = target.classList.contains('e-list-group-item') ? target.firstElementChild.lastElementChild\n                : e.target;\n            if (target.classList.contains('e-check')) {\n                this.selectAllItem(false, e);\n                target.classList.remove('e-check');\n                target.classList.remove('e-stop');\n                closest(target, '.' + 'e-list-group-item').classList.remove('e-active');\n                target.setAttribute('aria-selected', 'false');\n            }\n            else {\n                this.selectAllItem(true, e);\n                target.classList.remove('e-stop');\n                target.classList.add('e-check');\n                closest(target, '.' + 'e-list-group-item').classList.add('e-active');\n                target.setAttribute('aria-selected', 'true');\n            }\n            this.refreshSelection();\n            this.checkSelectAll();\n        }\n        else {\n            if (this.isValidLI(li)) {\n                var limit = this.value && this.value.length ? this.value.length : 0;\n                if (li.classList.contains('e-active')) {\n                    limit = limit - 1;\n                }\n                if (limit < this.maximumSelectionLength) {\n                    this.updateListSelection(li, e);\n                    this.checkPlaceholderSize();\n                    this.addListFocus(li);\n                    if ((this.allowCustomValue || this.allowFiltering) && this.mainList && this.listData) {\n                        if (this.mode !== 'CheckBox') {\n                            this.focusAtLastListItem(li.getAttribute('data-value'));\n                            this.refreshSelection();\n                        }\n                    }\n                    else {\n                        this.makeTextBoxEmpty();\n                    }\n                }\n                if (this.mode === 'CheckBox') {\n                    this.updateDelimView();\n                    if (this.value && this.value.length > 50) {\n                        setTimeout(function () {\n                            _this.updateDelimeter(_this.delimiterChar, e);\n                        }, 0);\n                    }\n                    else {\n                        this.updateDelimeter(this.delimiterChar, e);\n                    }\n                    this.refreshInputHight();\n                }\n                else {\n                    this.updateDelimeter(this.delimiterChar, e);\n                }\n                this.checkSelectAll();\n                this.refreshPopup();\n                if (this.hideSelectedItem) {\n                    this.focusAtFirstListItem();\n                }\n                if (this.closePopupOnSelect) {\n                    this.hidePopup(e);\n                }\n                else {\n                    e.preventDefault();\n                }\n                this.makeTextBoxEmpty();\n                this.findGroupStart(target);\n                if (this.mode !== 'CheckBox') {\n                    this.refreshListItems(isNullOrUndefined(li) ? null : li.textContent);\n                }\n            }\n            else {\n                e.preventDefault();\n            }\n            this.refreshPlaceHolder();\n            this.deselectHeader();\n        }\n    };\n    MultiSelect.prototype.findGroupStart = function (target) {\n        if (this.enableGroupCheckBox && this.mode === 'CheckBox' && !isNullOrUndefined(this.fields.groupBy)) {\n            var count = 0;\n            var liChecked = 0;\n            var liUnchecked = 0;\n            var groupValues = void 0;\n            if (this.itemTemplate && !target.getElementsByClassName('e-frame').length) {\n                while (!target.getElementsByClassName('e-frame').length) {\n                    target = target.parentElement;\n                }\n            }\n            if (target.classList.contains('e-frame')) {\n                target = target.parentElement.parentElement;\n            }\n            groupValues = this.findGroupAttrtibutes(target, liChecked, liUnchecked, count, 0);\n            groupValues = this.findGroupAttrtibutes(target, groupValues[0], groupValues[1], groupValues[2], 1);\n            while (!target.classList.contains('e-list-group-item')) {\n                if (target.classList.contains('e-list-icon')) {\n                    target = target.parentElement;\n                }\n                target = target.previousElementSibling;\n                if (target == null) {\n                    break;\n                }\n            }\n            this.updateCheckBox(target, groupValues[0], groupValues[1], groupValues[2]);\n        }\n    };\n    MultiSelect.prototype.findGroupAttrtibutes = function (listElement, checked, unChecked, count, position) {\n        while (!listElement.classList.contains('e-list-group-item')) {\n            if (listElement.classList.contains('e-list-icon')) {\n                listElement = listElement.parentElement;\n            }\n            if (listElement.getElementsByClassName('e-frame')[0].classList.contains('e-check') &&\n                listElement.classList.contains('e-list-item')) {\n                checked++;\n            }\n            else if (listElement.classList.contains('e-list-item')) {\n                unChecked++;\n            }\n            count++;\n            listElement = position ? listElement.nextElementSibling : listElement.previousElementSibling;\n            if (listElement == null) {\n                break;\n            }\n        }\n        return [checked, unChecked, count];\n    };\n    MultiSelect.prototype.updateCheckBox = function (groupHeader, checked, unChecked, count) {\n        if (groupHeader === null) {\n            return;\n        }\n        var checkBoxElement = groupHeader.getElementsByClassName('e-frame')[0];\n        if (count === checked) {\n            checkBoxElement.classList.remove('e-stop');\n            checkBoxElement.classList.add('e-check');\n            closest(checkBoxElement, '.' + 'e-list-group-item').classList.add('e-active');\n            groupHeader.setAttribute('aria-selected', 'true');\n        }\n        else if (count === unChecked) {\n            checkBoxElement.classList.remove('e-check');\n            checkBoxElement.classList.remove('e-stop');\n            closest(checkBoxElement, '.' + 'e-list-group-item').classList.remove('e-active');\n            groupHeader.setAttribute('aria-selected', 'false');\n        }\n        else if (this.maximumSelectionLength === checked - 1) {\n            checkBoxElement.classList.remove('e-stop');\n            groupHeader.setAttribute('aria-selected', 'true');\n            closest(checkBoxElement, '.' + 'e-list-group-item').classList.add('e-active');\n            checkBoxElement.classList.add('e-check');\n        }\n        else {\n            checkBoxElement.classList.remove('e-check');\n            checkBoxElement.classList.add('e-stop');\n            closest(checkBoxElement, '.' + 'e-list-group-item').classList.add('e-active');\n            groupHeader.setAttribute('aria-selected', 'false');\n        }\n    };\n    MultiSelect.prototype.deselectHeader = function () {\n        var limit = this.value && this.value.length ? this.value.length : 0;\n        var collection = this.list.querySelectorAll('li.e-list-group-item:not(.e-active)');\n        if (limit < this.maximumSelectionLength) {\n            removeClass(collection, 'e-disable');\n        }\n        if (limit === this.maximumSelectionLength) {\n            addClass(collection, 'e-disable');\n        }\n    };\n    MultiSelect.prototype.onMouseOver = function (e) {\n        var currentLi = closest(e.target, '.' + dropDownBaseClasses.li);\n        if (currentLi === null && this.mode === 'CheckBox' && !isNullOrUndefined(this.fields.groupBy)\n            && this.enableGroupCheckBox) {\n            currentLi = closest(e.target, '.' + dropDownBaseClasses.group);\n        }\n        this.addListHover(currentLi);\n    };\n    MultiSelect.prototype.onMouseLeave = function () {\n        this.removeHover();\n    };\n    MultiSelect.prototype.onListMouseDown = function (e) {\n        e.preventDefault();\n        this.scrollFocusStatus = true;\n    };\n    MultiSelect.prototype.onDocumentClick = function (e) {\n        if (this.mode !== 'CheckBox') {\n            var target = e.target;\n            if (!(!isNullOrUndefined(this.popupObj) && closest(target, '[id=\"' + this.popupObj.element.id + '\"]')) &&\n                !this.overAllWrapper.contains(e.target)) {\n                this.scrollFocusStatus = false;\n            }\n            else {\n                this.scrollFocusStatus = (Browser.isIE || Browser.info.name === 'edge') && (document.activeElement === this.inputElement);\n            }\n        }\n    };\n    MultiSelect.prototype.wireListEvents = function () {\n        if (!isNullOrUndefined(this.list)) {\n            EventHandler.add(document, 'mousedown', this.onDocumentClick, this);\n            EventHandler.add(this.list, 'mousedown', this.onListMouseDown, this);\n            EventHandler.add(this.list, 'mouseup', this.onMouseClick, this);\n            EventHandler.add(this.list, 'mouseover', this.onMouseOver, this);\n            EventHandler.add(this.list, 'mouseout', this.onMouseLeave, this);\n        }\n    };\n    MultiSelect.prototype.unwireListEvents = function () {\n        EventHandler.remove(document, 'mousedown', this.onDocumentClick);\n        if (this.list) {\n            EventHandler.remove(this.list, 'mousedown', this.onListMouseDown);\n            EventHandler.remove(this.list, 'mouseup', this.onMouseClick);\n            EventHandler.remove(this.list, 'mouseover', this.onMouseOver);\n            EventHandler.remove(this.list, 'mouseout', this.onMouseLeave);\n        }\n    };\n    MultiSelect.prototype.hideOverAllClear = function () {\n        if (!this.value || !this.value.length || this.inputElement.value === '') {\n            this.overAllClear.style.display = 'none';\n        }\n    };\n    MultiSelect.prototype.showOverAllClear = function () {\n        if (((this.value && this.value.length) || this.inputElement.value !== '') && this.showClearButton && this.readonly !== true) {\n            this.overAllClear.style.display = '';\n        }\n        else {\n            this.overAllClear.style.display = 'none';\n        }\n    };\n    /**\n     * Sets the focus to widget for interaction.\n     *\n     * @returns {void}\n     */\n    MultiSelect.prototype.focusIn = function () {\n        if (document.activeElement !== this.inputElement && this.enabled) {\n            this.inputElement.focus();\n        }\n    };\n    /**\n     * Remove the focus from widget, if the widget is in focus state.\n     *\n     * @returns {void}\n     */\n    MultiSelect.prototype.focusOut = function () {\n        if (document.activeElement === this.inputElement && this.enabled) {\n            this.inputElement.blur();\n        }\n    };\n    /**\n     * Shows the spinner loader.\n     *\n     * @returns {void}\n     */\n    MultiSelect.prototype.showSpinner = function () {\n        if (isNullOrUndefined(this.spinnerElement)) {\n            var filterClear = this.filterParent && this.filterParent.querySelector('.e-clear-icon.e-icons');\n            if (this.overAllClear.style.display !== 'none' || filterClear) {\n                this.spinnerElement = filterClear ? filterClear : this.overAllClear;\n            }\n            else {\n                this.spinnerElement = this.createElement('span', { className: CLOSEICON_CLASS$1 + ' ' + SPINNER_CLASS$1 });\n                this.componentWrapper.appendChild(this.spinnerElement);\n            }\n            createSpinner({ target: this.spinnerElement, width: Browser.isDevice ? '16px' : '14px' }, this.createElement);\n            addClass([this.spinnerElement], DISABLE_ICON);\n            showSpinner(this.spinnerElement);\n        }\n    };\n    /**\n     * Hides the spinner loader.\n     *\n     * @returns {void}\n     */\n    MultiSelect.prototype.hideSpinner = function () {\n        if (!isNullOrUndefined(this.spinnerElement)) {\n            hideSpinner(this.spinnerElement);\n            removeClass([this.spinnerElement], DISABLE_ICON);\n            if (this.spinnerElement.classList.contains(SPINNER_CLASS$1)) {\n                detach(this.spinnerElement);\n            }\n            else {\n                this.spinnerElement.innerHTML = '';\n            }\n            this.spinnerElement = null;\n        }\n    };\n    MultiSelect.prototype.updateWrapperText = function (wrapperType, wrapperData) {\n        if (this.valueTemplate || !this.enableHtmlSanitizer) {\n            wrapperType.innerHTML = this.encodeHtmlEntities(wrapperData);\n        }\n        else {\n            wrapperType.innerText = wrapperData;\n        }\n    };\n    MultiSelect.prototype.updateDelimView = function () {\n        if (this.delimiterWrapper) {\n            this.hideDelimWrapper();\n        }\n        if (this.chipCollectionWrapper) {\n            this.chipCollectionWrapper.style.display = 'none';\n        }\n        if (!isNullOrUndefined(this.viewWrapper)) {\n            this.viewWrapper.style.display = '';\n            this.viewWrapper.style.width = '';\n            this.viewWrapper.classList.remove(TOTAL_COUNT_WRAPPER$1);\n        }\n        if (this.value && this.value.length) {\n            var data = '';\n            var temp = void 0;\n            var tempData = void 0;\n            var tempIndex = 1;\n            var wrapperleng = void 0;\n            var remaining = void 0;\n            var downIconWidth = 0;\n            var overAllContainer = void 0;\n            this.updateWrapperText(this.viewWrapper, data);\n            var l10nLocale = {\n                noRecordsTemplate: 'No records found',\n                actionFailureTemplate: 'Request failed',\n                overflowCountTemplate: '+${count} more..',\n                totalCountTemplate: '${count} selected'\n            };\n            var l10n = new L10n(this.getLocaleName(), l10nLocale, this.locale);\n            if (l10n.getConstant('actionFailureTemplate') === '') {\n                l10n = new L10n('dropdowns', l10nLocale, this.locale);\n            }\n            if (l10n.getConstant('noRecordsTemplate') === '') {\n                l10n = new L10n('dropdowns', l10nLocale, this.locale);\n            }\n            var remainContent = l10n.getConstant('overflowCountTemplate');\n            var totalContent = l10n.getConstant('totalCountTemplate');\n            var raminElement = this.createElement('span', {\n                className: REMAIN_WRAPPER$1\n            });\n            var remainCompildTemp = remainContent.replace('${count}', this.value.length.toString());\n            raminElement.innerText = remainCompildTemp;\n            this.viewWrapper.appendChild(raminElement);\n            this.renderReactTemplates();\n            var remainSize = raminElement.offsetWidth;\n            remove(raminElement);\n            if (this.showDropDownIcon) {\n                downIconWidth = this.dropIcon.offsetWidth + parseInt(window.getComputedStyle(this.dropIcon).marginRight, 10);\n            }\n            this.checkClearIconWidth();\n            if (!isNullOrUndefined(this.value)) {\n                for (var index = 0; !isNullOrUndefined(this.value[index]); index++) {\n                    data += (index === 0) ? '' : this.delimiterChar + ' ';\n                    temp = this.getOverflowVal(index);\n                    data += temp;\n                    temp = this.viewWrapper.innerHTML;\n                    this.updateWrapperText(this.viewWrapper, data);\n                    wrapperleng = this.viewWrapper.offsetWidth +\n                        parseInt(window.getComputedStyle(this.viewWrapper).paddingRight, 10);\n                    overAllContainer = this.componentWrapper.offsetWidth -\n                        parseInt(window.getComputedStyle(this.componentWrapper).paddingLeft, 10) -\n                        parseInt(window.getComputedStyle(this.componentWrapper).paddingRight, 10);\n                    if ((wrapperleng + downIconWidth + this.clearIconWidth) > overAllContainer) {\n                        if (tempData !== undefined && tempData !== '') {\n                            temp = tempData;\n                            index = tempIndex + 1;\n                        }\n                        this.updateWrapperText(this.viewWrapper, temp);\n                        remaining = this.value.length - index;\n                        wrapperleng = this.viewWrapper.offsetWidth +\n                            parseInt(window.getComputedStyle(this.viewWrapper).paddingRight, 10);\n                        while (((wrapperleng + remainSize + downIconWidth + this.clearIconWidth) > overAllContainer) && wrapperleng !== 0\n                            && this.viewWrapper.innerHTML !== '') {\n                            var textArr = [];\n                            this.viewWrapper.innerHTML = textArr.join(this.delimiterChar);\n                            remaining = this.value.length;\n                            wrapperleng = this.viewWrapper.offsetWidth +\n                                parseInt(window.getComputedStyle(this.viewWrapper).paddingRight, 10);\n                        }\n                        break;\n                    }\n                    else if ((wrapperleng + remainSize + downIconWidth + this.clearIconWidth) <= overAllContainer) {\n                        tempData = data;\n                        tempIndex = index;\n                    }\n                    else if (index === 0) {\n                        tempData = '';\n                        tempIndex = -1;\n                    }\n                }\n            }\n            if (remaining > 0) {\n                var totalWidth = overAllContainer - downIconWidth - this.clearIconWidth;\n                this.viewWrapper.appendChild(this.updateRemainTemplate(raminElement, this.viewWrapper, remaining, remainContent, totalContent, totalWidth));\n                this.updateRemainWidth(this.viewWrapper, totalWidth);\n                this.updateRemainingText(raminElement, downIconWidth, remaining, remainContent, totalContent);\n            }\n        }\n        else {\n            if (!isNullOrUndefined(this.viewWrapper)) {\n                this.viewWrapper.innerHTML = '';\n                this.viewWrapper.style.display = 'none';\n            }\n        }\n    };\n    MultiSelect.prototype.checkClearIconWidth = function () {\n        if (this.showClearButton) {\n            this.clearIconWidth = this.overAllClear.offsetWidth;\n        }\n    };\n    MultiSelect.prototype.updateRemainWidth = function (viewWrapper, totalWidth) {\n        if (viewWrapper.classList.contains(TOTAL_COUNT_WRAPPER$1) && totalWidth < (viewWrapper.offsetWidth +\n            parseInt(window.getComputedStyle(viewWrapper).paddingLeft, 10)\n            + parseInt(window.getComputedStyle(viewWrapper).paddingLeft, 10))) {\n            viewWrapper.style.width = totalWidth + 'px';\n        }\n    };\n    MultiSelect.prototype.updateRemainTemplate = function (raminElement, viewWrapper, remaining, remainContent, totalContent, totalWidth) {\n        if (viewWrapper.firstChild && viewWrapper.firstChild.nodeType === 3 && viewWrapper.firstChild.nodeValue === '') {\n            viewWrapper.removeChild(viewWrapper.firstChild);\n        }\n        raminElement.innerHTML = '';\n        var remainTemp = remainContent.replace('${count}', remaining.toString());\n        var totalTemp = totalContent.replace('${count}', remaining.toString());\n        raminElement.innerText = (viewWrapper.firstChild && viewWrapper.firstChild.nodeType === 3) ? remainTemp : totalTemp;\n        if (viewWrapper.firstChild && viewWrapper.firstChild.nodeType === 3) {\n            viewWrapper.classList.remove(TOTAL_COUNT_WRAPPER$1);\n        }\n        else {\n            viewWrapper.classList.add(TOTAL_COUNT_WRAPPER$1);\n            this.updateRemainWidth(viewWrapper, totalWidth);\n        }\n        return raminElement;\n    };\n    MultiSelect.prototype.updateRemainingText = function (raminElement, downIconWidth, remaining, remainContent, totalContent) {\n        var overAllContainer = this.componentWrapper.offsetWidth -\n            parseInt(window.getComputedStyle(this.componentWrapper).paddingLeft, 10) -\n            parseInt(window.getComputedStyle(this.componentWrapper).paddingRight, 10);\n        var wrapperleng = this.viewWrapper.offsetWidth + parseInt(window.getComputedStyle(this.viewWrapper).paddingRight, 10);\n        if (((wrapperleng + downIconWidth) >= overAllContainer) && wrapperleng !== 0 && this.viewWrapper.firstChild &&\n            this.viewWrapper.firstChild.nodeType === 3) {\n            while (((wrapperleng + downIconWidth) > overAllContainer) && wrapperleng !== 0 && this.viewWrapper.firstChild &&\n                this.viewWrapper.firstChild.nodeType === 3) {\n                var textArr = this.viewWrapper.firstChild.nodeValue.split(this.delimiterChar);\n                textArr.pop();\n                this.viewWrapper.firstChild.nodeValue = textArr.join(this.delimiterChar);\n                if (this.viewWrapper.firstChild.nodeValue === '') {\n                    this.viewWrapper.removeChild(this.viewWrapper.firstChild);\n                }\n                remaining++;\n                wrapperleng = this.viewWrapper.offsetWidth;\n            }\n            var totalWidth = overAllContainer - downIconWidth;\n            this.updateRemainTemplate(raminElement, this.viewWrapper, remaining, remainContent, totalContent, totalWidth);\n        }\n    };\n    MultiSelect.prototype.getOverflowVal = function (index) {\n        var temp;\n        if (this.mainData && this.mainData.length) {\n            if (this.mode === 'CheckBox') {\n                var newTemp = this.listData;\n                this.listData = this.mainData;\n                temp = this.getTextByValue(this.value[index]);\n                this.listData = newTemp;\n            }\n            else {\n                temp = this.getTextByValue(this.value[index]);\n            }\n        }\n        else {\n            temp = this.value[index];\n        }\n        return temp;\n    };\n    MultiSelect.prototype.unWireEvent = function () {\n        if (!isNullOrUndefined(this.componentWrapper)) {\n            EventHandler.remove(this.componentWrapper, 'mousedown', this.wrapperClick);\n        }\n        EventHandler.remove(window, 'resize', this.windowResize);\n        if (!isNullOrUndefined(this.inputElement)) {\n            EventHandler.remove(this.inputElement, 'focus', this.focusInHandler);\n            EventHandler.remove(this.inputElement, 'keydown', this.onKeyDown);\n            if (this.mode !== 'CheckBox') {\n                EventHandler.remove(this.inputElement, 'input', this.onInput);\n            }\n            EventHandler.remove(this.inputElement, 'keyup', this.keyUp);\n            var formElement = closest(this.inputElement, 'form');\n            if (formElement) {\n                EventHandler.remove(formElement, 'reset', this.resetValueHandler);\n            }\n            EventHandler.remove(this.inputElement, 'blur', this.onBlurHandler);\n        }\n        if (!isNullOrUndefined(this.componentWrapper)) {\n            EventHandler.remove(this.componentWrapper, 'mouseover', this.mouseIn);\n            EventHandler.remove(this.componentWrapper, 'mouseout', this.mouseOut);\n        }\n        if (!isNullOrUndefined(this.overAllClear)) {\n            EventHandler.remove(this.overAllClear, 'mousedown', this.clearAll);\n        }\n        if (!isNullOrUndefined(this.inputElement)) {\n            EventHandler.remove(this.inputElement, 'paste', this.pasteHandler);\n        }\n    };\n    MultiSelect.prototype.selectAllItem = function (state, event, list) {\n        var li;\n        if (!isNullOrUndefined(this.list)) {\n            li = this.list.querySelectorAll(state ?\n                'li.e-list-item:not([aria-selected=\"true\"]):not(.e-reorder-hide)' :\n                'li.e-list-item[aria-selected=\"true\"]:not(.e-reorder-hide)');\n        }\n        if (this.value && this.value.length && event && event.target\n            && closest(event.target, '.e-close-hooker') && this.allowFiltering) {\n            li = this.mainList.querySelectorAll(state ?\n                'li.e-list-item:not([aria-selected=\"true\"]):not(.e-reorder-hide)' :\n                'li.e-list-item[aria-selected=\"true\"]:not(.e-reorder-hide)');\n        }\n        if (this.enableGroupCheckBox && this.mode === 'CheckBox' && !isNullOrUndefined(this.fields.groupBy)) {\n            var target = (event ? (this.groupTemplate ? closest(event.target, '.e-list-group-item') : event.target) : null);\n            target = (event && event.keyCode === 32) ? list : target;\n            target = (target && target.classList.contains('e-frame')) ? target.parentElement.parentElement : target;\n            if (target && target.classList.contains('e-list-group-item')) {\n                var listElement = target.nextElementSibling;\n                if (isNullOrUndefined(listElement)) {\n                    return;\n                }\n                while (listElement.classList.contains('e-list-item')) {\n                    if (state) {\n                        if (!listElement.firstElementChild.lastElementChild.classList.contains('e-check')) {\n                            var selectionLimit = this.value && this.value.length ? this.value.length : 0;\n                            if (listElement.classList.contains('e-active')) {\n                                selectionLimit -= 1;\n                            }\n                            if (selectionLimit < this.maximumSelectionLength) {\n                                this.updateListSelection(listElement, event);\n                            }\n                        }\n                    }\n                    else {\n                        if (listElement.firstElementChild.lastElementChild.classList.contains('e-check')) {\n                            this.updateListSelection(listElement, event);\n                        }\n                    }\n                    listElement = listElement.nextElementSibling;\n                    if (listElement == null) {\n                        break;\n                    }\n                }\n                if (target.classList.contains('e-list-group-item')) {\n                    var focusedElement = this.list.getElementsByClassName('e-item-focus')[0];\n                    if (focusedElement) {\n                        focusedElement.classList.remove('e-item-focus');\n                    }\n                    if (state) {\n                        target.classList.add('e-active');\n                    }\n                    else {\n                        target.classList.remove('e-active');\n                    }\n                    target.classList.add('e-item-focus');\n                    this.updateAriaActiveDescendant();\n                }\n                this.textboxValueUpdate();\n                this.checkPlaceholderSize();\n                if (!this.changeOnBlur && event) {\n                    this.updateValueState(event, this.value, this.tempValues);\n                }\n            }\n            else {\n                this.updateValue(event, li, state);\n            }\n        }\n        else {\n            this.updateValue(event, li, state);\n        }\n        this.addValidInputClass();\n    };\n    MultiSelect.prototype.updateValue = function (event, li, state) {\n        var _this = this;\n        var length = li.length;\n        var beforeSelectArgs = {\n            event: event,\n            items: state ? li : [],\n            itemData: state ? this.listData : [],\n            isInteracted: event ? true : false,\n            isChecked: state,\n            preventSelectEvent: false\n        };\n        this.trigger('beforeSelectAll', beforeSelectArgs);\n        if (li && li.length) {\n            var index_1 = 0;\n            var count_1 = 0;\n            if (this.enableGroupCheckBox) {\n                count_1 = state ? this.maximumSelectionLength - (this.value ? this.value.length : 0) : li.length;\n            }\n            else {\n                count_1 = state ? this.maximumSelectionLength - (this.value ? this.value.length : 0) : this.maximumSelectionLength;\n            }\n            if (!beforeSelectArgs.preventSelectEvent) {\n                while (index_1 < length && index_1 <= 50 && index_1 < count_1) {\n                    this.updateListSelection(li[index_1], event, length - index_1);\n                    if (this.enableGroupCheckBox) {\n                        this.findGroupStart(li[index_1]);\n                    }\n                    index_1++;\n                }\n                if (length > 50) {\n                    setTimeout(function () {\n                        while (index_1 < length && index_1 < count_1) {\n                            _this.updateListSelection(li[index_1], event, length - index_1);\n                            if (_this.enableGroupCheckBox) {\n                                _this.findGroupStart(li[index_1]);\n                            }\n                            index_1++;\n                        }\n                        _this.updatedataValueItems(event);\n                        if (!_this.changeOnBlur) {\n                            _this.updateValueState(event, _this.value, _this.tempValues);\n                            _this.isSelectAll = _this.isSelectAll ? !_this.isSelectAll : _this.isSelectAll;\n                        }\n                        _this.updateHiddenElement();\n                    }, 0);\n                }\n            }\n            else {\n                for (var i = 0; i < li.length && i < count_1; i++) {\n                    this.removeHover();\n                    var customVal = li[i].getAttribute('data-value');\n                    var value = this.getFormattedValue(customVal);\n                    var mainElement = this.mainList ? this.mainList.querySelectorAll(state ?\n                        'li.e-list-item:not([aria-selected=\"true\"]):not(.e-reorder-hide)' :\n                        'li.e-list-item[aria-selected=\"true\"]:not(.e-reorder-hide)')[i] : null;\n                    if (state) {\n                        this.value = !this.value ? [] : this.value;\n                        if (this.value.indexOf(value) < 0) {\n                            this.setProperties({ value: [].concat([], this.value, [value]) }, true);\n                        }\n                        this.removeFocus();\n                        this.addListSelection(li[i], mainElement);\n                        this.updateChipStatus();\n                        this.checkMaxSelection();\n                    }\n                    else {\n                        this.removeAllItems(value, event, false, li[i], mainElement);\n                    }\n                    if (this.enableGroupCheckBox) {\n                        this.findGroupStart(li[i]);\n                    }\n                }\n                if (!state) {\n                    var limit = this.value && this.value.length ? this.value.length : 0;\n                    if (limit < this.maximumSelectionLength) {\n                        var collection = this.list.querySelectorAll('li.'\n                            + dropDownBaseClasses.li + ':not(.e-active)');\n                        removeClass(collection, 'e-disable');\n                    }\n                }\n                var args = {\n                    event: event,\n                    items: state ? li : [],\n                    itemData: state ? this.listData : [],\n                    isInteracted: event ? true : false,\n                    isChecked: state\n                };\n                this.trigger('selectedAll', args);\n            }\n        }\n        this.updatedataValueItems(event);\n        this.checkPlaceholderSize();\n        if (length <= 50 && !beforeSelectArgs.preventSelectEvent) {\n            if (!this.changeOnBlur) {\n                this.updateValueState(event, this.value, this.tempValues);\n                this.isSelectAll = this.isSelectAll ? !this.isSelectAll : this.isSelectAll;\n            }\n            this.updateHiddenElement();\n        }\n    };\n    MultiSelect.prototype.updateHiddenElement = function () {\n        var _this = this;\n        var hiddenValue = '';\n        var wrapperText = '';\n        var data = '';\n        var text = [];\n        if (this.mode === 'CheckBox') {\n            this.value.map(function (value, index) {\n                hiddenValue += '<option selected value =\"' + value + '\">' + index + '</option>';\n                if (_this.listData) {\n                    data = _this.getTextByValue(value);\n                }\n                else {\n                    data = value;\n                }\n                wrapperText += data + _this.delimiterChar + ' ';\n                text.push(data);\n            });\n            this.hiddenElement.innerHTML = hiddenValue;\n            this.updateWrapperText(this.delimiterWrapper, wrapperText);\n            this.delimiterWrapper.setAttribute('id', getUniqueID('delim_val'));\n            this.inputElement.setAttribute('aria-labelledby', this.delimiterWrapper.id);\n            this.setProperties({ text: text.toString() }, true);\n            this.refreshInputHight();\n            this.refreshPlaceHolder();\n        }\n    };\n    MultiSelect.prototype.updatedataValueItems = function (event) {\n        this.deselectHeader();\n        this.textboxValueUpdate(event);\n    };\n    MultiSelect.prototype.textboxValueUpdate = function (event) {\n        var isRemoveAll = event && event.target && (closest(event.target, '.e-selectall-parent')\n            || closest(event.target, '.e-close-hooker'));\n        if (this.mode !== 'Box' && !this.isPopupOpen() && !(this.mode === 'CheckBox' && (this.isSelectAll || isRemoveAll))) {\n            this.updateDelimView();\n        }\n        else {\n            this.searchWrapper.classList.remove(ZERO_SIZE);\n        }\n        if (this.mode === 'CheckBox') {\n            this.updateDelimView();\n            if (!(isRemoveAll || this.isSelectAll)) {\n                this.updateDelimeter(this.delimiterChar, event);\n            }\n            this.refreshInputHight();\n        }\n        else {\n            this.updateDelimeter(this.delimiterChar, event);\n        }\n        this.refreshPlaceHolder();\n    };\n    MultiSelect.prototype.setZIndex = function () {\n        if (this.popupObj) {\n            this.popupObj.setProperties({ 'zIndex': this.zIndex });\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    MultiSelect.prototype.updateDataSource = function (prop) {\n        if (isNullOrUndefined(this.list)) {\n            this.renderPopup();\n        }\n        else {\n            this.resetList(this.dataSource);\n        }\n        if (this.value && this.value.length) {\n            this.setProperties({ 'value': this.value });\n            this.refreshSelection();\n        }\n    };\n    MultiSelect.prototype.onLoadSelect = function () {\n        this.setDynValue = true;\n        this.renderPopup();\n    };\n    MultiSelect.prototype.selectAllItems = function (state, event) {\n        var _this = this;\n        if (isNullOrUndefined(this.list)) {\n            this.selectAllAction = function () {\n                if (_this.mode === 'CheckBox' && _this.showSelectAll) {\n                    var args = {\n                        module: 'CheckBoxSelection',\n                        enable: _this.mode === 'CheckBox',\n                        value: state ? 'check' : 'uncheck'\n                    };\n                    _this.notify('checkSelectAll', args);\n                }\n                _this.selectAllItem(state, event);\n                _this.selectAllAction = null;\n            };\n            _super.prototype.render.call(this);\n        }\n        else {\n            this.selectAllAction = null;\n            if (this.mode === 'CheckBox' && this.showSelectAll) {\n                var args = {\n                    value: state ? 'check' : 'uncheck',\n                    enable: this.mode === 'CheckBox',\n                    module: 'CheckBoxSelection'\n                };\n                this.notify('checkSelectAll', args);\n            }\n            this.selectAllItem(state, event);\n        }\n    };\n    /**\n     * Get the properties to be maintained in the persisted state.\n     *\n     * @returns {string} Returns the persisted data of the component.\n     */\n    MultiSelect.prototype.getPersistData = function () {\n        return this.addOnPersist(['value']);\n    };\n    /**\n     * Dynamically change the value of properties.\n     *\n     * @param {MultiSelectModel} newProp - Returns the dynamic property value of the component.\n     * @param {MultiSelectModel} oldProp - Returns the previous property value of the component.\n     * @private\n     * @returns {void}\n     */\n    MultiSelect.prototype.onPropertyChanged = function (newProp, oldProp) {\n        if (newProp.dataSource && !isNullOrUndefined(Object.keys(newProp.dataSource))\n            || newProp.query && !isNullOrUndefined(Object.keys(newProp.query))) {\n            if (this.resetFilteredData) {\n                // The filtered data is not being reset in the component after the user focuses out.\n                this.resetMainList = !this.resetMainList ? this.mainList : this.resetMainList;\n                this.resetFilteredData = false;\n            }\n            this.mainList = null;\n            this.mainData = null;\n            this.isFirstClick = false;\n            this.isDynamicDataChange = true;\n        }\n        if (this.getModuleName() === 'multiselect') {\n            this.filterAction = false;\n            this.setUpdateInitial(['fields', 'query', 'dataSource'], newProp);\n        }\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'query':\n                case 'dataSource':\n                    if (this.mode === 'CheckBox' && this.showSelectAll) {\n                        if (!isNullOrUndefined(this.popupObj)) {\n                            this.popupObj.destroy();\n                            this.popupObj = null;\n                        }\n                        this.renderPopup();\n                    }\n                    break;\n                case 'htmlAttributes':\n                    this.updateHTMLAttribute();\n                    break;\n                case 'showClearButton':\n                    this.updateClearButton(newProp.showClearButton);\n                    break;\n                case 'text':\n                    this.updateVal(this.value, this.value, 'text');\n                    break;\n                case 'value':\n                    this.updateVal(this.value, oldProp.value, 'value');\n                    this.addValidInputClass();\n                    if (!this.closePopupOnSelect && this.isPopupOpen()) {\n                        this.refreshPopup();\n                    }\n                    this.preventChange = this.isAngular && this.preventChange ? !this.preventChange : this.preventChange;\n                    break;\n                case 'width':\n                    this.setWidth(newProp.width);\n                    this.popupObj.setProperties({ width: this.calcPopupWidth() });\n                    break;\n                case 'placeholder':\n                    this.refreshPlaceHolder();\n                    break;\n                case 'filterBarPlaceholder':\n                    if (this.allowFiltering) {\n                        this.notify('filterBarPlaceholder', { filterBarPlaceholder: newProp.filterBarPlaceholder });\n                    }\n                    break;\n                case 'delimiterChar':\n                    if (this.mode !== 'Box') {\n                        this.updateDelimView();\n                    }\n                    this.updateData(newProp.delimiterChar);\n                    break;\n                case 'cssClass':\n                    this.updateOldPropCssClass(oldProp.cssClass);\n                    this.updateCssClass();\n                    this.calculateWidth();\n                    break;\n                case 'enableRtl':\n                    this.enableRTL(newProp.enableRtl);\n                    _super.prototype.onPropertyChanged.call(this, newProp, oldProp);\n                    break;\n                case 'readonly':\n                    this.updateReadonly(newProp.readonly);\n                    this.hidePopup();\n                    break;\n                case 'enabled':\n                    this.hidePopup();\n                    this.enable(newProp.enabled);\n                    break;\n                case 'showSelectAll':\n                    if (this.popupObj) {\n                        this.popupObj.destroy();\n                        this.popupObj = null;\n                    }\n                    this.renderPopup();\n                    break;\n                case 'showDropDownIcon':\n                    this.dropDownIcon();\n                    break;\n                case 'floatLabelType':\n                    this.setFloatLabelType();\n                    this.addValidInputClass();\n                    Input.createSpanElement(this.overAllWrapper, this.createElement);\n                    this.calculateWidth();\n                    if (!isNullOrUndefined(this.overAllWrapper) && !isNullOrUndefined(this.overAllWrapper.getElementsByClassName('e-ddl-icon')[0] && this.overAllWrapper.getElementsByClassName('e-float-text-content')[0] && this.floatLabelType !== 'Never')) {\n                        this.overAllWrapper.getElementsByClassName('e-float-text-content')[0].classList.add('e-icon');\n                    }\n                    break;\n                case 'enableSelectionOrder':\n                    break;\n                case 'selectAllText':\n                    this.notify('selectAllText', false);\n                    break;\n                case 'popupHeight':\n                    if (this.popupObj) {\n                        var overAllHeight = parseInt(this.popupHeight, 10);\n                        if (this.popupHeight !== 'auto') {\n                            this.list.style.maxHeight = formatUnit(overAllHeight);\n                            this.popupWrapper.style.maxHeight = formatUnit(this.popupHeight);\n                        }\n                        else {\n                            this.list.style.maxHeight = formatUnit(this.popupHeight);\n                        }\n                    }\n                    break;\n                case 'headerTemplate':\n                case 'footerTemplate':\n                    this.reInitializePoup();\n                    break;\n                case 'allowFiltering':\n                    if (this.mode === 'CheckBox' && this.popupObj) {\n                        this.reInitializePoup();\n                    }\n                    this.updateSelectElementData(this.allowFiltering);\n                    break;\n                case 'fields':\n                    if (isNullOrUndefined(this.fields.groupBy)) {\n                        this.removeScrollEvent();\n                    }\n                    break;\n                default:\n                    {\n                        // eslint-disable-next-line max-len\n                        var msProps = this.getPropObject(prop, newProp, oldProp);\n                        _super.prototype.onPropertyChanged.call(this, msProps.newProperty, msProps.oldProperty);\n                    }\n                    break;\n            }\n        }\n    };\n    MultiSelect.prototype.reInitializePoup = function () {\n        if (this.popupObj) {\n            this.popupObj.destroy();\n            this.popupObj = null;\n        }\n        this.renderPopup();\n    };\n    MultiSelect.prototype.presentItemValue = function (ulElement) {\n        var valuecheck = [];\n        for (var i = 0; i < this.value.length; i++) {\n            var checkEle = this.findListElement(((this.allowFiltering && !isNullOrUndefined(this.mainList)) ? this.mainList : ulElement), 'li', 'data-value', this.value[i]);\n            if (!checkEle) {\n                valuecheck.push(this.value[i]);\n            }\n        }\n        return valuecheck;\n    };\n    \n    MultiSelect.prototype.addNonPresentItems = function (valuecheck, ulElement, list, event) {\n        var _this = this;\n        this.dataSource.executeQuery(this.getForQuery(valuecheck)).then(function (e) {\n            if (e.result.length > 0) {\n                _this.addItem(e.result, list.length);\n            }\n            _this.updateActionList(ulElement, list, event);\n        });\n    };\n    \n    MultiSelect.prototype.updateVal = function (newProp, oldProp, prop) {\n        if (!this.list) {\n            this.onLoadSelect();\n        }\n        else if ((this.dataSource instanceof DataManager) && (!this.listData || !(this.mainList && this.mainData))) {\n            this.onLoadSelect();\n        }\n        else {\n            var valuecheck = [];\n            if (!isNullOrUndefined(this.value) && !this.allowCustomValue) {\n                valuecheck = this.presentItemValue(this.ulElement);\n            }\n            if (prop == 'value' && valuecheck.length > 0 && this.dataSource instanceof DataManager && !isNullOrUndefined(this.value)\n                && this.listData != null) {\n                this.mainData = null;\n                this.setDynValue = true;\n                this.addNonPresentItems(valuecheck, this.ulElement, this.listData);\n            }\n            else {\n                if (prop === 'text') {\n                    this.initialTextUpdate();\n                    newProp = this.value;\n                }\n                if (isNullOrUndefined(this.value) || this.value.length === 0) {\n                    this.tempValues = oldProp;\n                }\n                // eslint-disable-next-line\n                if (this.allowCustomValue && (this.mode === 'Default' || this.mode === 'Box') && this.isReact && this.inputFocus\n                    && this.isPopupOpen() && this.mainData !== this.listData) {\n                    var list = this.mainList.cloneNode ? this.mainList.cloneNode(true) : this.mainList;\n                    this.onActionComplete(list, this.mainData);\n                }\n                this.initialValueUpdate();\n                if (this.mode !== 'Box' && !this.inputFocus) {\n                    this.updateDelimView();\n                }\n                if (!this.inputFocus) {\n                    this.refreshInputHight();\n                }\n                this.refreshPlaceHolder();\n                if (this.mode !== 'CheckBox' && this.changeOnBlur) {\n                    this.updateValueState(null, newProp, oldProp);\n                }\n                this.checkPlaceholderSize();\n            }\n        }\n        if (!this.changeOnBlur) {\n            this.updateValueState(null, newProp, oldProp);\n        }\n    };\n    /**\n     * Adds a new item to the multiselect popup list. By default, new item appends to the list as the last item,\n     * but you can insert based on the index parameter.\n     *\n     * @param { Object[] } items - Specifies an array of JSON data or a JSON data.\n     * @param { number } itemIndex - Specifies the index to place the newly added item in the popup list.\n     * @returns {void}\n     */\n    MultiSelect.prototype.addItem = function (items, itemIndex) {\n        _super.prototype.addItem.call(this, items, itemIndex);\n    };\n    /**\n     * Hides the popup, if the popup in a open state.\n     *\n     * @returns {void}\n     */\n    MultiSelect.prototype.hidePopup = function (e) {\n        var _this = this;\n        var delay = 100;\n        if (this.isPopupOpen()) {\n            var animModel = {\n                name: 'FadeOut',\n                duration: 100,\n                delay: delay ? delay : 0\n            };\n            var eventArgs = { popup: this.popupObj, cancel: false, animation: animModel, event: e || null };\n            this.trigger('close', eventArgs, function (eventArgs) {\n                if (!eventArgs.cancel) {\n                    if (_this.fields.groupBy && _this.mode !== 'CheckBox' && _this.fixedHeaderElement) {\n                        remove(_this.fixedHeaderElement);\n                        _this.fixedHeaderElement = null;\n                    }\n                    _this.beforePopupOpen = false;\n                    _this.overAllWrapper.classList.remove(iconAnimation);\n                    _this.popupObj.hide(new Animation(eventArgs.animation));\n                    attributes(_this.inputElement, { 'aria-expanded': 'false' });\n                    _this.inputElement.removeAttribute('aria-owns');\n                    _this.inputElement.removeAttribute('aria-activedescendant');\n                    if (_this.allowFiltering) {\n                        _this.notify('inputFocus', { module: 'CheckBoxSelection', enable: _this.mode === 'CheckBox', value: 'clear' });\n                    }\n                    _this.popupObj.hide();\n                    removeClass([document.body, _this.popupObj.element], 'e-popup-full-page');\n                    EventHandler.remove(_this.list, 'keydown', _this.onKeyDown);\n                    if (_this.mode === 'CheckBox' && _this.showSelectAll) {\n                        EventHandler.remove(_this.popupObj.element, 'click', _this.clickHandler);\n                    }\n                }\n            });\n        }\n    };\n    /**\n     * Shows the popup, if the popup in a closed state.\n     *\n     * @returns {void}\n     */\n    MultiSelect.prototype.showPopup = function (e) {\n        var _this = this;\n        if (!this.enabled) {\n            return;\n        }\n        var args = { cancel: false };\n        this.trigger('beforeOpen', args, function (args) {\n            if (!args.cancel) {\n                if (!_this.ulElement) {\n                    _this.beforePopupOpen = true;\n                    if (_this.mode === 'CheckBox' && Browser.isDevice && _this.allowFiltering) {\n                        _this.notify('popupFullScreen', { module: 'CheckBoxSelection', enable: _this.mode === 'CheckBox' });\n                    }\n                    _super.prototype.render.call(_this, e);\n                    return;\n                }\n                if (_this.mode === 'CheckBox' && Browser.isDevice && _this.allowFiltering) {\n                    _this.notify('popupFullScreen', { module: 'CheckBoxSelection', enable: _this.mode === 'CheckBox' });\n                }\n                var mainLiLength = _this.ulElement.querySelectorAll('li.' + 'e-list-item').length;\n                var liLength = _this.ulElement.querySelectorAll('li.'\n                    + dropDownBaseClasses.li + '.' + HIDE_LIST).length;\n                if (mainLiLength > 0 && (mainLiLength === liLength) && (liLength === _this.mainData.length) && !(_this.targetElement() !== '' && _this.allowCustomValue)) {\n                    _this.beforePopupOpen = false;\n                    return;\n                }\n                _this.onPopupShown(e);\n            }\n        });\n    };\n    /**\n     * Based on the state parameter, entire list item will be selected/deselected.\n     * parameter\n     * `true`   - Selects entire list items.\n     * `false`  - Un Selects entire list items.\n     *\n     * @param {boolean} state - if its true then Selects the entire list items. If its false the Unselects entire list items.\n     * @returns {void}\n     */\n    MultiSelect.prototype.selectAll = function (state) {\n        this.isSelectAll = true;\n        this.selectAllItems(state);\n    };\n    /**\n     * Return the module name of this component.\n     *\n     * @private\n     * @returns {string} Return the module name of this component.\n     */\n    MultiSelect.prototype.getModuleName = function () {\n        return 'multiselect';\n    };\n    /**\n     * Allows you to clear the selected values from the Multiselect component.\n     *\n     * @returns {void}\n     */\n    MultiSelect.prototype.clear = function () {\n        var _this = this;\n        this.selectAll(false);\n        if (this.value && this.value.length) {\n            setTimeout(function () {\n                _this.setProperties({ value: null }, true);\n            }, 0);\n        }\n        else {\n            this.setProperties({ value: null }, true);\n        }\n    };\n    /**\n     * To Initialize the control rendering\n     *\n     * @private\n     * @returns {void}\n     */\n    MultiSelect.prototype.render = function () {\n        if (!isNullOrUndefined(this.value)) {\n            // eslint-disable-next-line\n            this.value = this.value.slice();\n        }\n        this.setDynValue = this.initStatus = false;\n        this.isSelectAll = false;\n        this.selectAllEventEle = [];\n        this.searchWrapper = this.createElement('span', { className: SEARCHBOX_WRAPPER + ' ' + ((this.mode === 'Box') ? BOX_ELEMENT : '') });\n        this.viewWrapper = this.createElement('span', { className: DELIMITER_VIEW + ' ' + DELIMITER_WRAPPER, styles: 'display:none;' });\n        this.overAllClear = this.createElement('span', {\n            className: CLOSEICON_CLASS$1, styles: 'display:none;'\n        });\n        this.componentWrapper = this.createElement('div', { className: ELEMENT_WRAPPER });\n        this.overAllWrapper = this.createElement('div', { className: OVER_ALL_WRAPPER });\n        if (this.mode === 'CheckBox') {\n            addClass([this.overAllWrapper], 'e-checkbox');\n        }\n        if (Browser.isDevice) {\n            this.componentWrapper.classList.add(ELEMENT_MOBILE_WRAPPER);\n        }\n        this.setWidth(this.width);\n        this.overAllWrapper.appendChild(this.componentWrapper);\n        this.popupWrapper = this.createElement('div', { id: this.element.id + '_popup', className: POPUP_WRAPPER });\n        this.popupWrapper.setAttribute('aria-label', this.element.id);\n        this.popupWrapper.setAttribute('role', 'dialog');\n        if (this.mode === 'Delimiter' || this.mode === 'CheckBox') {\n            this.delimiterWrapper = this.createElement('span', { className: DELIMITER_WRAPPER, styles: 'display:none' });\n            this.componentWrapper.appendChild(this.delimiterWrapper);\n        }\n        else {\n            this.chipCollectionWrapper = this.createElement('span', {\n                className: CHIP_WRAPPER$1,\n                styles: 'display:none'\n            });\n            if (this.mode === 'Default') {\n                this.chipCollectionWrapper.setAttribute('id', getUniqueID('chip_default'));\n            }\n            else if (this.mode === 'Box') {\n                this.chipCollectionWrapper.setAttribute('id', getUniqueID('chip_box'));\n            }\n            this.componentWrapper.appendChild(this.chipCollectionWrapper);\n        }\n        if (this.mode !== 'Box') {\n            this.componentWrapper.appendChild(this.viewWrapper);\n        }\n        this.componentWrapper.appendChild(this.searchWrapper);\n        if (this.showClearButton && !Browser.isDevice) {\n            this.componentWrapper.appendChild(this.overAllClear);\n        }\n        else {\n            this.componentWrapper.classList.add(CLOSE_ICON_HIDE);\n        }\n        this.dropDownIcon();\n        this.inputElement = this.createElement('input', {\n            className: INPUT_ELEMENT,\n            attrs: {\n                spellcheck: 'false',\n                type: 'text',\n                autocomplete: 'off',\n                tabindex: '0',\n                role: 'combobox'\n            }\n        });\n        if (this.mode === 'Default' || this.mode === 'Box') {\n            this.inputElement.setAttribute('aria-labelledby', this.chipCollectionWrapper.id);\n        }\n        if (this.element.tagName !== this.getNgDirective()) {\n            this.element.style.display = 'none';\n        }\n        if (this.element.tagName === this.getNgDirective()) {\n            this.element.appendChild(this.overAllWrapper);\n            this.searchWrapper.appendChild(this.inputElement);\n        }\n        else {\n            this.element.parentElement.insertBefore(this.overAllWrapper, this.element);\n            this.searchWrapper.appendChild(this.inputElement);\n            this.searchWrapper.appendChild(this.element);\n            this.element.removeAttribute('tabindex');\n        }\n        if (this.floatLabelType !== 'Never') {\n            createFloatLabel(this.overAllWrapper, this.searchWrapper, this.element, this.inputElement, this.value, this.floatLabelType, this.placeholder);\n        }\n        else if (this.floatLabelType === 'Never') {\n            this.refreshPlaceHolder();\n        }\n        this.addValidInputClass();\n        this.element.style.opacity = '';\n        var id = this.element.getAttribute('id') ? this.element.getAttribute('id') : getUniqueID('ej2_dropdownlist');\n        this.element.id = id;\n        this.hiddenElement = this.createElement('select', {\n            attrs: { 'aria-hidden': 'true', 'class': HIDDEN_ELEMENT, 'tabindex': '-1', 'multiple': '' }\n        });\n        this.componentWrapper.appendChild(this.hiddenElement);\n        this.validationAttribute(this.element, this.hiddenElement);\n        if (this.mode !== 'CheckBox') {\n            this.hideOverAllClear();\n        }\n        if (!isNullOrUndefined(closest(this.element, \"fieldset\")) && closest(this.element, \"fieldset\").disabled) {\n            this.enabled = false;\n        }\n        this.wireEvent();\n        this.enable(this.enabled);\n        this.enableRTL(this.enableRtl);\n        this.checkInitialValue();\n        if (this.element.hasAttribute('data-val')) {\n            this.element.setAttribute('data-val', 'false');\n        }\n        Input.createSpanElement(this.overAllWrapper, this.createElement);\n        this.calculateWidth();\n        if (!isNullOrUndefined(this.overAllWrapper) && !isNullOrUndefined(this.overAllWrapper.getElementsByClassName('e-ddl-icon')[0] && this.overAllWrapper.getElementsByClassName('e-float-text-content')[0] && this.floatLabelType !== 'Never')) {\n            this.overAllWrapper.getElementsByClassName('e-float-text-content')[0].classList.add('e-icon');\n        }\n        this.renderComplete();\n    };\n    MultiSelect.prototype.checkInitialValue = function () {\n        var _this = this;\n        var isData = this.dataSource instanceof Array ? (this.dataSource.length > 0)\n            : !isNullOrUndefined(this.dataSource);\n        if (!(this.value && this.value.length) &&\n            isNullOrUndefined(this.text) &&\n            !isData &&\n            this.element.tagName === 'SELECT' &&\n            this.element.options.length > 0) {\n            var optionsElement = this.element.options;\n            var valueCol = [];\n            var textCol = '';\n            for (var index = 0, optionsLen = optionsElement.length; index < optionsLen; index++) {\n                var opt = optionsElement[index];\n                if (!isNullOrUndefined(opt.getAttribute('selected'))) {\n                    if (opt.getAttribute('value')) {\n                        valueCol.push(opt.getAttribute('value'));\n                    }\n                    else {\n                        textCol += (opt.text + this.delimiterChar);\n                    }\n                }\n            }\n            if (valueCol.length > 0) {\n                this.setProperties({ value: valueCol }, true);\n            }\n            else if (textCol !== '') {\n                this.setProperties({ text: textCol }, true);\n            }\n            if (valueCol.length > 0 || textCol !== '') {\n                this.refreshInputHight();\n                this.refreshPlaceHolder();\n            }\n        }\n        if ((this.value && this.value.length) || !isNullOrUndefined(this.text)) {\n            if (!this.list) {\n                _super.prototype.render.call(this);\n            }\n        }\n        if (!isNullOrUndefined(this.text) && (isNullOrUndefined(this.value) || this.value.length === 0)) {\n            this.initialTextUpdate();\n        }\n        if (this.value && this.value.length) {\n            if (!(this.dataSource instanceof DataManager)) {\n                this.initialValueUpdate();\n                this.initialUpdate();\n            }\n            else {\n                this.setInitialValue = function () {\n                    _this.initStatus = false;\n                    _this.initialValueUpdate();\n                    _this.initialUpdate();\n                    _this.setInitialValue = null;\n                    _this.initStatus = true;\n                };\n            }\n            this.updateTempValue();\n        }\n        else {\n            this.initialUpdate();\n        }\n        this.initStatus = true;\n        this.checkAutoFocus();\n        if (!isNullOrUndefined(this.text)) {\n            this.element.setAttribute('data-initial-value', this.text);\n        }\n    };\n    MultiSelect.prototype.checkAutoFocus = function () {\n        if (this.element.hasAttribute('autofocus')) {\n            this.inputElement.focus();\n        }\n    };\n    MultiSelect.prototype.setFloatLabelType = function () {\n        removeFloating(this.overAllWrapper, this.componentWrapper, this.searchWrapper, this.inputElement, this.value, this.floatLabelType, this.placeholder);\n        if (this.floatLabelType !== 'Never') {\n            createFloatLabel(this.overAllWrapper, this.searchWrapper, this.element, this.inputElement, this.value, this.floatLabelType, this.placeholder);\n        }\n    };\n    MultiSelect.prototype.addValidInputClass = function () {\n        if (!isNullOrUndefined(this.overAllWrapper)) {\n            if ((!isNullOrUndefined(this.value) && this.value.length) || this.floatLabelType === 'Always') {\n                addClass([this.overAllWrapper], 'e-valid-input');\n            }\n            else {\n                removeClass([this.overAllWrapper], 'e-valid-input');\n            }\n        }\n    };\n    MultiSelect.prototype.dropDownIcon = function () {\n        if (this.showDropDownIcon) {\n            this.dropIcon = this.createElement('span', { className: dropdownIcon });\n            this.componentWrapper.appendChild(this.dropIcon);\n            addClass([this.componentWrapper], ['e-down-icon']);\n        }\n        else {\n            if (!isNullOrUndefined(this.dropIcon)) {\n                this.dropIcon.parentElement.removeChild(this.dropIcon);\n                removeClass([this.componentWrapper], ['e-down-icon']);\n            }\n        }\n    };\n    MultiSelect.prototype.initialUpdate = function () {\n        if (this.mode !== 'Box' && !(this.setDynValue && this.mode === 'Default' && this.inputFocus)) {\n            this.updateDelimView();\n        }\n        this.updateCssClass();\n        this.updateHTMLAttribute();\n        this.updateReadonly(this.readonly);\n        this.refreshInputHight();\n        this.checkPlaceholderSize();\n    };\n    /**\n     * Removes the component from the DOM and detaches all its related event handlers. Also it removes the attributes and classes.\n     *\n     * @method destroy\n     * @returns {void}\n     */\n    MultiSelect.prototype.destroy = function () {\n        // eslint-disable-next-line\n        if (this.isReact) {\n            this.clearTemplate();\n        }\n        if (this.popupObj) {\n            this.popupObj.hide();\n        }\n        this.notify(destroy, {});\n        this.unwireListEvents();\n        this.unWireEvent();\n        this.list = null;\n        this.popupObj = null;\n        this.mainList = null;\n        this.mainData = null;\n        this.filterParent = null;\n        this.ulElement = null;\n        this.mainListCollection = null;\n        _super.prototype.destroy.call(this);\n        var temp = ['readonly', 'aria-disabled', 'placeholder'];\n        var length = temp.length;\n        if (!isNullOrUndefined(this.inputElement)) {\n            while (length > 0) {\n                this.inputElement.removeAttribute(temp[length - 1]);\n                length--;\n            }\n        }\n        if (!isNullOrUndefined(this.element)) {\n            this.element.removeAttribute('data-initial-value');\n            this.element.style.display = 'block';\n        }\n        if (this.overAllWrapper && this.overAllWrapper.parentElement) {\n            if (this.overAllWrapper.parentElement.tagName === this.getNgDirective()) {\n                remove(this.overAllWrapper);\n            }\n            else {\n                this.overAllWrapper.parentElement.insertBefore(this.element, this.overAllWrapper);\n                remove(this.overAllWrapper);\n            }\n        }\n        this.componentWrapper = null;\n        this.overAllClear = null;\n        this.overAllWrapper = null;\n        this.hiddenElement = null;\n        this.searchWrapper = null;\n        this.viewWrapper = null;\n        this.chipCollectionWrapper = null;\n        this.targetInputElement = null;\n        this.popupWrapper = null;\n        this.inputElement = null;\n        this.delimiterWrapper = null;\n        this.popupObj = null;\n        this.popupWrapper = null;\n        this.liCollections = null;\n        this.header = null;\n        this.mainList = null;\n        this.mainListCollection = null;\n        this.footer = null;\n        this.selectAllEventEle = null;\n    };\n    __decorate$5([\n        Complex({ text: null, value: null, iconCss: null, groupBy: null }, FieldSettings)\n    ], MultiSelect.prototype, \"fields\", void 0);\n    __decorate$5([\n        Property(false)\n    ], MultiSelect.prototype, \"enablePersistence\", void 0);\n    __decorate$5([\n        Property(null)\n    ], MultiSelect.prototype, \"groupTemplate\", void 0);\n    __decorate$5([\n        Property('No records found')\n    ], MultiSelect.prototype, \"noRecordsTemplate\", void 0);\n    __decorate$5([\n        Property('Request failed')\n    ], MultiSelect.prototype, \"actionFailureTemplate\", void 0);\n    __decorate$5([\n        Property('None')\n    ], MultiSelect.prototype, \"sortOrder\", void 0);\n    __decorate$5([\n        Property(true)\n    ], MultiSelect.prototype, \"enabled\", void 0);\n    __decorate$5([\n        Property(false)\n    ], MultiSelect.prototype, \"enableHtmlSanitizer\", void 0);\n    __decorate$5([\n        Property([])\n    ], MultiSelect.prototype, \"dataSource\", void 0);\n    __decorate$5([\n        Property(null)\n    ], MultiSelect.prototype, \"query\", void 0);\n    __decorate$5([\n        Property('StartsWith')\n    ], MultiSelect.prototype, \"filterType\", void 0);\n    __decorate$5([\n        Property(1000)\n    ], MultiSelect.prototype, \"zIndex\", void 0);\n    __decorate$5([\n        Property(false)\n    ], MultiSelect.prototype, \"ignoreAccent\", void 0);\n    __decorate$5([\n        Property()\n    ], MultiSelect.prototype, \"locale\", void 0);\n    __decorate$5([\n        Property(false)\n    ], MultiSelect.prototype, \"enableGroupCheckBox\", void 0);\n    __decorate$5([\n        Property(null)\n    ], MultiSelect.prototype, \"cssClass\", void 0);\n    __decorate$5([\n        Property('100%')\n    ], MultiSelect.prototype, \"width\", void 0);\n    __decorate$5([\n        Property('300px')\n    ], MultiSelect.prototype, \"popupHeight\", void 0);\n    __decorate$5([\n        Property('100%')\n    ], MultiSelect.prototype, \"popupWidth\", void 0);\n    __decorate$5([\n        Property(null)\n    ], MultiSelect.prototype, \"placeholder\", void 0);\n    __decorate$5([\n        Property(null)\n    ], MultiSelect.prototype, \"filterBarPlaceholder\", void 0);\n    __decorate$5([\n        Property({})\n    ], MultiSelect.prototype, \"htmlAttributes\", void 0);\n    __decorate$5([\n        Property(null)\n    ], MultiSelect.prototype, \"valueTemplate\", void 0);\n    __decorate$5([\n        Property(null)\n    ], MultiSelect.prototype, \"headerTemplate\", void 0);\n    __decorate$5([\n        Property(null)\n    ], MultiSelect.prototype, \"footerTemplate\", void 0);\n    __decorate$5([\n        Property(null)\n    ], MultiSelect.prototype, \"itemTemplate\", void 0);\n    __decorate$5([\n        Property(null)\n    ], MultiSelect.prototype, \"allowFiltering\", void 0);\n    __decorate$5([\n        Property(true)\n    ], MultiSelect.prototype, \"changeOnBlur\", void 0);\n    __decorate$5([\n        Property(false)\n    ], MultiSelect.prototype, \"allowCustomValue\", void 0);\n    __decorate$5([\n        Property(true)\n    ], MultiSelect.prototype, \"showClearButton\", void 0);\n    __decorate$5([\n        Property(1000)\n    ], MultiSelect.prototype, \"maximumSelectionLength\", void 0);\n    __decorate$5([\n        Property(false)\n    ], MultiSelect.prototype, \"readonly\", void 0);\n    __decorate$5([\n        Property(null)\n    ], MultiSelect.prototype, \"text\", void 0);\n    __decorate$5([\n        Property(null)\n    ], MultiSelect.prototype, \"value\", void 0);\n    __decorate$5([\n        Property(true)\n    ], MultiSelect.prototype, \"hideSelectedItem\", void 0);\n    __decorate$5([\n        Property(true)\n    ], MultiSelect.prototype, \"closePopupOnSelect\", void 0);\n    __decorate$5([\n        Property('Default')\n    ], MultiSelect.prototype, \"mode\", void 0);\n    __decorate$5([\n        Property(',')\n    ], MultiSelect.prototype, \"delimiterChar\", void 0);\n    __decorate$5([\n        Property(true)\n    ], MultiSelect.prototype, \"ignoreCase\", void 0);\n    __decorate$5([\n        Property(false)\n    ], MultiSelect.prototype, \"showDropDownIcon\", void 0);\n    __decorate$5([\n        Property('Never')\n    ], MultiSelect.prototype, \"floatLabelType\", void 0);\n    __decorate$5([\n        Property(false)\n    ], MultiSelect.prototype, \"showSelectAll\", void 0);\n    __decorate$5([\n        Property('Select All')\n    ], MultiSelect.prototype, \"selectAllText\", void 0);\n    __decorate$5([\n        Property('Unselect All')\n    ], MultiSelect.prototype, \"unSelectAllText\", void 0);\n    __decorate$5([\n        Property(true)\n    ], MultiSelect.prototype, \"enableSelectionOrder\", void 0);\n    __decorate$5([\n        Property(true)\n    ], MultiSelect.prototype, \"openOnClick\", void 0);\n    __decorate$5([\n        Property(false)\n    ], MultiSelect.prototype, \"addTagOnBlur\", void 0);\n    __decorate$5([\n        Event()\n    ], MultiSelect.prototype, \"change\", void 0);\n    __decorate$5([\n        Event()\n    ], MultiSelect.prototype, \"removing\", void 0);\n    __decorate$5([\n        Event()\n    ], MultiSelect.prototype, \"removed\", void 0);\n    __decorate$5([\n        Event()\n    ], MultiSelect.prototype, \"beforeSelectAll\", void 0);\n    __decorate$5([\n        Event()\n    ], MultiSelect.prototype, \"selectedAll\", void 0);\n    __decorate$5([\n        Event()\n    ], MultiSelect.prototype, \"beforeOpen\", void 0);\n    __decorate$5([\n        Event()\n    ], MultiSelect.prototype, \"open\", void 0);\n    __decorate$5([\n        Event()\n    ], MultiSelect.prototype, \"close\", void 0);\n    __decorate$5([\n        Event()\n    ], MultiSelect.prototype, \"blur\", void 0);\n    __decorate$5([\n        Event()\n    ], MultiSelect.prototype, \"focus\", void 0);\n    __decorate$5([\n        Event()\n    ], MultiSelect.prototype, \"chipSelection\", void 0);\n    __decorate$5([\n        Event()\n    ], MultiSelect.prototype, \"filtering\", void 0);\n    __decorate$5([\n        Event()\n    ], MultiSelect.prototype, \"tagging\", void 0);\n    __decorate$5([\n        Event()\n    ], MultiSelect.prototype, \"customValueSelection\", void 0);\n    MultiSelect = __decorate$5([\n        NotifyPropertyChanges\n    ], MultiSelect);\n    return MultiSelect;\n}(DropDownBase));\n\nvar ICON = 'e-icons';\nvar CHECKBOXFRAME$1 = 'e-frame';\nvar CHECK$1 = 'e-check';\nvar CHECKBOXWRAP$1 = 'e-checkbox-wrapper';\nvar INDETERMINATE = 'e-stop';\nvar checkAllParent = 'e-selectall-parent';\nvar searchBackIcon = 'e-input-group-icon e-back-icon e-icons';\nvar filterBarClearIcon = 'e-input-group-icon e-clear-icon e-icons';\nvar filterInput = 'e-input-filter';\nvar filterParent = 'e-filter-parent';\nvar mobileFilter = 'e-ddl-device-filter';\nvar clearIcon = 'e-clear-icon';\nvar popupFullScreen = 'e-popup-full-page';\nvar device = 'e-ddl-device';\nvar FOCUS$1 = 'e-input-focus';\n/**\n * The Multiselect enable CheckBoxSelection call this inject module.\n */\nvar CheckBoxSelection = /** @__PURE__ @class */ (function () {\n    function CheckBoxSelection(parent) {\n        this.activeLi = [];\n        this.activeEle = [];\n        this.parent = parent;\n        this.removeEventListener();\n        this.addEventListener();\n    }\n    CheckBoxSelection.prototype.getModuleName = function () {\n        return 'CheckBoxSelection';\n    };\n    CheckBoxSelection.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on('updatelist', this.listSelection, this);\n        this.parent.on('listoption', this.listOption, this);\n        this.parent.on('selectAll', this.setSelectAll, this);\n        this.parent.on('checkSelectAll', this.checkSelectAll, this);\n        this.parent.on('searchBox', this.setSearchBox, this);\n        this.parent.on('blur', this.onBlurHandler, this);\n        this.parent.on('targetElement', this.targetElement, this);\n        this.parent.on('deviceSearchBox', this.setDeviceSearchBox, this);\n        this.parent.on('inputFocus', this.getFocus, this);\n        this.parent.on('reOrder', this.setReorder, this);\n        this.parent.on('activeList', this.getActiveList, this);\n        this.parent.on('selectAllText', this.setLocale, this);\n        this.parent.on('filterBarPlaceholder', this.setPlaceholder, this);\n        EventHandler.add(document, 'mousedown', this.onDocumentClick, this);\n        this.parent.on('addItem', this.checboxCreate, this);\n        this.parent.on('popupFullScreen', this.setPopupFullScreen, this);\n    };\n    CheckBoxSelection.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off('updatelist', this.listSelection);\n        this.parent.off('listoption', this.listOption);\n        this.parent.off('selectAll', this.setSelectAll);\n        this.parent.off('checkSelectAll', this.checkSelectAll);\n        this.parent.off('searchBox', this.setSearchBox);\n        this.parent.off('blur', this.onBlurHandler);\n        this.parent.off('targetElement', this.targetElement);\n        this.parent.off('deviceSearchBox', this.setDeviceSearchBox);\n        this.parent.off('inputFocus', this.getFocus);\n        this.parent.off('reOrder', this.setReorder);\n        this.parent.off('activeList', this.getActiveList);\n        this.parent.off('selectAllText', this.setLocale);\n        this.parent.off('filterBarPlaceholder', this.setPlaceholder);\n        this.parent.off('addItem', this.checboxCreate);\n        this.parent.off('popupFullScreen', this.setPopupFullScreen);\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    CheckBoxSelection.prototype.listOption = function (args) {\n        var _this = this;\n        if (isNullOrUndefined(this.parent.listCurrentOptions.itemCreated)) {\n            this.parent.listCurrentOptions.itemCreated = function (e) {\n                _this.checboxCreate(e);\n            };\n        }\n        else {\n            var itemCreated_1 = this.parent.listCurrentOptions.itemCreated;\n            this.parent.listCurrentOptions.itemCreated = function (e) {\n                _this.checboxCreate(e);\n                itemCreated_1.apply(_this, [e]);\n            };\n        }\n    };\n    CheckBoxSelection.prototype.setPlaceholder = function (props) {\n        Input.setPlaceholder(props.filterBarPlaceholder, this.filterInput);\n    };\n    CheckBoxSelection.prototype.checboxCreate = function (e) {\n        var item;\n        if (!isNullOrUndefined(e.item)) {\n            item = e.item;\n        }\n        else {\n            item = e;\n        }\n        if (this.parent.enableGroupCheckBox || (item.className !== 'e-list-group-item '\n            && item.className !== 'e-list-group-item')) {\n            var checkboxEle = createCheckBox(this.parent.createElement, true);\n            var icon = select('div.' + ICON, item);\n            item.insertBefore(checkboxEle, item.childNodes[isNullOrUndefined(icon) ? 0 : 1]);\n            select('.' + CHECKBOXFRAME$1, checkboxEle);\n            if (this.parent.enableGroupCheckBox) {\n                this.parent.popupWrapper.classList.add('e-multiselect-group');\n            }\n            return item;\n        }\n        else {\n            return item;\n        }\n    };\n    CheckBoxSelection.prototype.setSelectAll = function () {\n        if (this.parent.showSelectAll) {\n            if (isNullOrUndefined(this.checkAllParent)) {\n                this.checkAllParent = this.parent.createElement('div', {\n                    className: checkAllParent\n                });\n                this.selectAllSpan = this.parent.createElement('span', {\n                    className: 'e-all-text'\n                });\n                this.selectAllSpan.textContent = '';\n                this.checkAllParent.appendChild(this.selectAllSpan);\n                this.setLocale();\n                this.checboxCreate(this.checkAllParent);\n                if (this.parent.headerTemplate) {\n                    if (!isNullOrUndefined(this.parent.filterParent)) {\n                        append([this.checkAllParent], this.parent.filterParent);\n                    }\n                    else {\n                        append([this.checkAllParent], this.parent.popupWrapper);\n                    }\n                }\n                if (!this.parent.headerTemplate) {\n                    if (!isNullOrUndefined(this.parent.filterParent)) {\n                        this.parent.filterParent.parentNode.insertBefore(this.checkAllParent, this.parent.filterParent.nextSibling);\n                    }\n                    else {\n                        prepend([this.checkAllParent], this.parent.popupWrapper);\n                    }\n                }\n                EventHandler.add(this.checkAllParent, 'mousedown', this.clickHandler, this);\n            }\n            if (this.parent.list.classList.contains('e-nodata') || (this.parent.listData && this.parent.listData.length <= 1 &&\n                !(this.parent.isDynamicDataChange)) || (this.parent.isDynamicDataChange &&\n                this.parent.listData && this.parent.listData.length <= 1)) {\n                this.checkAllParent.style.display = 'none';\n            }\n            else {\n                this.checkAllParent.style.display = 'block';\n            }\n            this.parent.selectAllHeight = this.checkAllParent.getBoundingClientRect().height;\n        }\n        else if (!isNullOrUndefined(this.checkAllParent)) {\n            this.checkAllParent.parentElement.removeChild(this.checkAllParent);\n            this.checkAllParent = null;\n        }\n    };\n    CheckBoxSelection.prototype.destroy = function () {\n        this.removeEventListener();\n        EventHandler.remove(document, 'mousedown', this.onDocumentClick);\n        this.checkAllParent = null;\n        this.clearIconElement = null;\n        this.filterInput = null;\n        this.filterInputObj = null;\n        this.checkWrapper = null;\n        this.selectAllSpan = null;\n    };\n    CheckBoxSelection.prototype.listSelection = function (args) {\n        var target;\n        if (!isNullOrUndefined(args.e)) {\n            var frameElm = args.li.querySelector('.e-checkbox-wrapper .e-frame');\n            target = !isNullOrUndefined(args.e.target) ?\n                (args.e.target.classList.contains('e-frame')\n                    && (!this.parent.showSelectAll\n                        || (this.checkAllParent && !this.checkAllParent.contains(args.e.target)))) ?\n                    args.e.target : args.li.querySelector('.e-checkbox-wrapper').childNodes[1]\n                : args.li.querySelector('.e-checkbox-wrapper').childNodes[1];\n        }\n        else {\n            var checkboxWrapper = args.li.querySelector('.e-checkbox-wrapper');\n            target = checkboxWrapper ? checkboxWrapper.childNodes[1] : args.li.lastElementChild.childNodes[1];\n        }\n        if (this.parent.itemTemplate || this.parent.enableGroupCheckBox) {\n            target = args.li.firstElementChild.childNodes[1];\n        }\n        if (!isNullOrUndefined(target)) {\n            this.checkWrapper = closest(target, '.' + CHECKBOXWRAP$1);\n        }\n        if (!isNullOrUndefined(this.checkWrapper)) {\n            var checkElement = select('.' + CHECKBOXFRAME$1, this.checkWrapper);\n            var selectAll$$1 = false;\n            this.validateCheckNode(this.checkWrapper, checkElement.classList.contains(CHECK$1), args.li, args.e, selectAll$$1);\n        }\n    };\n    CheckBoxSelection.prototype.validateCheckNode = function (checkWrap, isCheck, li, e, selectAll$$1) {\n        this.changeState(checkWrap, isCheck ? 'uncheck' : 'check', e, true, selectAll$$1);\n    };\n    CheckBoxSelection.prototype.clickHandler = function (e) {\n        var target;\n        if (e.currentTarget.classList.contains(this.checkAllParent.className) || (e.currentTarget.classList.value === this.checkAllParent.className)) {\n            target = e.currentTarget.firstElementChild.lastElementChild;\n        }\n        else {\n            target = e.currentTarget;\n        }\n        this.checkWrapper = closest(target, '.' + CHECKBOXWRAP$1);\n        var selectAll$$1 = true;\n        if (!isNullOrUndefined(this.checkWrapper)) {\n            var checkElement = select('.' + CHECKBOXFRAME$1, this.checkWrapper);\n            this.validateCheckNode(this.checkWrapper, checkElement.classList.contains(CHECK$1), null, e, selectAll$$1);\n        }\n        e.preventDefault();\n    };\n    CheckBoxSelection.prototype.changeState = function (wrapper, state, e, isPrevent, selectAll$$1) {\n        var frameSpan = wrapper.getElementsByClassName(CHECKBOXFRAME$1)[0];\n        if (state === 'check' && !frameSpan.classList.contains(CHECK$1)) {\n            frameSpan.classList.remove(INDETERMINATE);\n            frameSpan.classList.add(CHECK$1);\n            if (selectAll$$1) {\n                this.parent.selectAllItems(true, e);\n                this.setLocale(true);\n            }\n        }\n        else if (state === 'uncheck' && (frameSpan.classList.contains(CHECK$1) || frameSpan.classList.contains(INDETERMINATE))) {\n            removeClass([frameSpan], [CHECK$1, INDETERMINATE]);\n            if (selectAll$$1) {\n                this.parent.selectAllItems(false, e);\n                this.setLocale();\n            }\n        }\n        else if (state === 'indeterminate' && !(frameSpan.classList.contains(INDETERMINATE))) {\n            removeClass([frameSpan], [CHECK$1]);\n            frameSpan.classList.add(INDETERMINATE);\n            if (selectAll$$1) {\n                this.parent.selectAllItems(false, e);\n                this.setLocale();\n            }\n        }\n    };\n    CheckBoxSelection.prototype.setSearchBox = function (args) {\n        if (isNullOrUndefined(this.parent.filterParent)) {\n            this.parent.filterParent = this.parent.createElement('span', {\n                className: filterParent\n            });\n            this.filterInput = this.parent.createElement('input', {\n                attrs: { type: 'text' },\n                className: filterInput\n            });\n            this.parent.element.parentNode.insertBefore(this.filterInput, this.parent.element);\n            var backIcon = false;\n            if (Browser.isDevice) {\n                backIcon = true;\n                this.parent.mobFilter = false;\n            }\n            this.filterInputObj = Input.createInput({\n                element: this.filterInput,\n                buttons: backIcon ? [searchBackIcon, filterBarClearIcon] : [filterBarClearIcon],\n                properties: { placeholder: this.parent.filterBarPlaceholder }\n            }, this.parent.createElement);\n            if (!isNullOrUndefined(this.parent.cssClass)) {\n                if (this.parent.cssClass.split(' ').indexOf('e-outline') !== -1) {\n                    addClass([this.filterInputObj.container], 'e-outline');\n                }\n                else if (this.parent.cssClass.split(' ').indexOf('e-filled') !== -1) {\n                    addClass([this.filterInputObj.container], 'e-filled');\n                }\n            }\n            append([this.filterInputObj.container], this.parent.filterParent);\n            prepend([this.parent.filterParent], args.popupElement);\n            attributes(this.filterInput, {\n                'aria-disabled': 'false',\n                'role': 'combobox',\n                'autocomplete': 'off',\n                'autocapitalize': 'off',\n                'spellcheck': 'false',\n                'aria-label': 'multiselect',\n                'aria-expanded': 'true',\n                'aria-controls': args.popupElement.id\n            });\n            this.clearIconElement = this.filterInput.parentElement.querySelector('.' + clearIcon);\n            if (!Browser.isDevice && this.clearIconElement) {\n                EventHandler.add(this.clearIconElement, 'mousedown', this.clearText, this);\n                this.clearIconElement.style.visibility = 'hidden';\n            }\n            EventHandler.add(this.filterInput, 'input', this.parent.onInput, this.parent);\n            EventHandler.add(this.filterInput, 'keyup', this.parent.keyUp, this.parent);\n            EventHandler.add(this.filterInput, 'keydown', this.parent.onKeyDown, this.parent);\n            EventHandler.add(this.filterInput, 'blur', this.onBlurHandler, this);\n            EventHandler.add(this.filterInput, 'paste', this.parent.pasteHandler, this.parent);\n            this.parent.searchBoxHeight = (this.filterInputObj.container.parentElement).getBoundingClientRect().height;\n            return this.filterInputObj;\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    CheckBoxSelection.prototype.clickOnBackIcon = function (e) {\n        this.parent.hidePopup();\n        removeClass([document.body, this.parent.popupObj.element], popupFullScreen);\n        this.parent.inputElement.focus();\n    };\n    CheckBoxSelection.prototype.clearText = function (e) {\n        this.parent.targetInputElement.value = '';\n        if (this.parent.allowFiltering && this.parent.targetInputElement.value === '') {\n            this.parent.search(null);\n        }\n        this.parent.refreshPopup();\n        this.parent.refreshListItems(null);\n        this.clearIconElement.style.visibility = 'hidden';\n        this.filterInput.focus();\n        this.setReorder(e);\n        e.preventDefault();\n    };\n    CheckBoxSelection.prototype.setDeviceSearchBox = function () {\n        this.parent.popupObj.element.classList.add(device);\n        this.parent.popupObj.element.classList.add(mobileFilter);\n        this.parent.popupObj.position = { X: 0, Y: 0 };\n        this.parent.popupObj.dataBind();\n        this.setSearchBoxPosition();\n        this.backIconElement = this.filterInputObj.container.querySelector('.e-back-icon');\n        this.clearIconElement = this.filterInputObj.container.querySelector('.' + clearIcon);\n        this.clearIconElement.style.visibility = 'hidden';\n        EventHandler.add(this.backIconElement, 'click', this.clickOnBackIcon, this);\n        EventHandler.add(this.clearIconElement, 'click', this.clearText, this);\n    };\n    CheckBoxSelection.prototype.setSearchBoxPosition = function () {\n        var searchBoxHeight = this.filterInput.parentElement.getBoundingClientRect().height;\n        var selectAllHeight = 0;\n        if (this.checkAllParent) {\n            selectAllHeight = this.checkAllParent.getBoundingClientRect().height;\n        }\n        this.parent.popupObj.element.style.maxHeight = '100%';\n        this.parent.popupObj.element.style.width = '100%';\n        this.parent.list.style.maxHeight = (window.innerHeight - searchBoxHeight - selectAllHeight) + 'px';\n        this.parent.list.style.height = (window.innerHeight - searchBoxHeight - selectAllHeight) + 'px';\n        var clearElement = this.filterInput.parentElement.querySelector('.' + clearIcon);\n        detach(this.filterInput);\n        clearElement.parentElement.insertBefore(this.filterInput, clearElement);\n    };\n    CheckBoxSelection.prototype.setPopupFullScreen = function () {\n        if (this.parent && this.parent.popupObj) {\n            attributes(this.parent.popupObj.element, { style: 'left:0px;right:0px;top:0px;bottom:0px;' });\n            addClass([document.body, this.parent.popupObj.element], popupFullScreen);\n            this.parent.popupObj.element.style.maxHeight = '100%';\n            this.parent.popupObj.element.style.width = '100%';\n        }\n    };\n    CheckBoxSelection.prototype.targetElement = function () {\n        if (!isNullOrUndefined(this.clearIconElement)) {\n            this.parent.targetInputElement = this.filterInput;\n            this.clearIconElement.style.visibility = this.parent.targetInputElement.value === '' ? 'hidden' : 'visible';\n        }\n        return this.parent.targetInputElement.value;\n    };\n    CheckBoxSelection.prototype.onBlurHandler = function (e) {\n        if (!this.parent.element.classList.contains('e-listbox')) {\n            var target = void 0;\n            if (this.parent.keyAction) {\n                return;\n            }\n            if (Browser.isIE) {\n                target = !isNullOrUndefined(e) && e.target;\n            }\n            if (!Browser.isIE) {\n                target = !isNullOrUndefined(e) && e.relatedTarget;\n            }\n            // eslint-disable-next-line max-len\n            if (this.parent.popupObj && document.body.contains(this.parent.popupObj.element) && this.parent.popupObj.element.contains(target)\n                && !Browser.isIE && this.filterInput) {\n                this.filterInput.focus();\n                return;\n            }\n            if (this.parent.scrollFocusStatus && this.filterInput) {\n                e.preventDefault();\n                this.filterInput.focus();\n                this.parent.scrollFocusStatus = false;\n                return;\n            }\n            if (this.parent.popupObj && document.body.contains(this.parent.popupObj.element)\n                && !this.parent.popupObj.element.classList.contains('e-popup-close')) {\n                this.parent.inputFocus = false;\n                this.parent.updateValueState(e, this.parent.value, this.parent.tempValues);\n                this.parent.dispatchEvent(this.parent.hiddenElement, 'change');\n            }\n            if (this.parent.popupObj && document.body.contains(this.parent.popupObj.element) &&\n                !this.parent.popupObj.element.classList.contains('e-popup-close')) {\n                this.parent.inputFocus = false;\n                this.parent.overAllWrapper.classList.remove(FOCUS$1);\n                this.parent.trigger('blur');\n                this.parent.focused = true;\n            }\n            if (this.parent.popupObj && document.body.contains(this.parent.popupObj.element) &&\n                !this.parent.popupObj.element.classList.contains('e-popup-close') && !Browser.isDevice) {\n                this.parent.hidePopup();\n            }\n        }\n    };\n    CheckBoxSelection.prototype.onDocumentClick = function (e) {\n        if (this.parent.getLocaleName() !== 'listbox') {\n            var target = e.target;\n            if (!isNullOrUndefined(this.parent.popupObj) && closest(target, '[id=\"' + this.parent.popupObj.element.id + '\"]')) {\n                if (!(this.filterInput && this.filterInput.value !== '')) {\n                    e.preventDefault();\n                }\n            }\n            if (!(!isNullOrUndefined(this.parent.popupObj) && closest(target, '[id=\"' + this.parent.popupObj.element.id + '\"]'))\n                && !isNullOrUndefined(this.parent.overAllWrapper) && !this.parent.overAllWrapper.contains(e.target)) {\n                if (this.parent.overAllWrapper.classList.contains(dropDownBaseClasses.focus) || this.parent.isPopupOpen()) {\n                    this.parent.inputFocus = false;\n                    this.parent.scrollFocusStatus = false;\n                    this.parent.hidePopup();\n                    this.parent.onBlurHandler(e, true);\n                    this.parent.focused = true;\n                }\n            }\n            else {\n                this.parent.scrollFocusStatus = (Browser.isIE || Browser.info.name === 'edge') &&\n                    (document.activeElement === this.filterInput);\n            }\n            if (!isNullOrUndefined(this.parent.overAllWrapper) && !this.parent.overAllWrapper.contains(e.target) && this.parent.overAllWrapper.classList.contains('e-input-focus') &&\n                !this.parent.isPopupOpen()) {\n                if (Browser.isIE) {\n                    this.parent.onBlurHandler();\n                }\n                else {\n                    this.parent.onBlurHandler(e);\n                }\n            }\n            if (this.filterInput === target) {\n                this.filterInput.focus();\n            }\n        }\n    };\n    CheckBoxSelection.prototype.getFocus = function (e) {\n        this.parent.overAllWrapper.classList.remove(FOCUS$1);\n        if (this.parent.keyAction && e.value !== 'clear' && e.value !== 'focus') {\n            this.parent.keyAction = false;\n            return;\n        }\n        if (e.value === 'focus') {\n            this.filterInput.focus();\n            this.parent.removeFocus();\n            EventHandler.remove(this.parent.list, 'keydown', this.parent.onKeyDown);\n        }\n        if (e.value === 'clear') {\n            this.filterInput.value = '';\n            this.clearIconElement.style.visibility = 'hidden';\n        }\n    };\n    CheckBoxSelection.prototype.checkSelectAll = function (e) {\n        if (e.value === 'check') {\n            this.changeState(this.checkAllParent, e.value, null, null, false);\n            this.setLocale(true);\n        }\n        if (e.value === 'uncheck') {\n            this.changeState(this.checkAllParent, e.value, null, null, false);\n            this.setLocale();\n        }\n        if (e.value === 'indeterminate') {\n            this.changeState(this.checkAllParent, e.value, null, null, false);\n            this.setLocale();\n        }\n    };\n    CheckBoxSelection.prototype.setLocale = function (unSelect) {\n        if (this.parent.selectAllText !== 'Select All' || this.parent.unSelectAllText !== 'Unselect All') {\n            var template = unSelect ? this.parent.unSelectAllText : this.parent.selectAllText;\n            this.selectAllSpan.textContent = '';\n            var compiledString = compile(template);\n            var templateName = unSelect ? 'unSelectAllText' : 'selectAllText';\n            for (var _i = 0, _a = compiledString({}, this.parent, templateName, null, !this.parent.isStringTemplate); _i < _a.length; _i++) {\n                var item = _a[_i];\n                this.selectAllSpan.textContent = item.textContent;\n            }\n        }\n        else {\n            var l10nLocale = { selectAllText: 'Select All', unSelectAllText: 'Unselect All' };\n            var l10n = new L10n(this.parent.getLocaleName(), {}, this.parent.locale);\n            if (l10n.getConstant('selectAllText') === '') {\n                l10n = new L10n('dropdowns', l10nLocale, this.parent.locale);\n            }\n            this.selectAllSpan.textContent = unSelect ? l10n.getConstant('unSelectAllText') : l10n.getConstant('selectAllText');\n        }\n    };\n    CheckBoxSelection.prototype.getActiveList = function (args) {\n        if (args.li.classList.contains('e-active')) {\n            this.activeLi.push(args.li.cloneNode(true));\n        }\n        else {\n            this.activeLi.splice(args.index, 1);\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    CheckBoxSelection.prototype.setReorder = function (args) {\n        if (this.parent.enableSelectionOrder && !isNullOrUndefined(this.parent.value)) {\n            var activeLiCount = this.parent.ulElement.querySelectorAll('li.e-active').length;\n            var remLi = void 0;\n            var ulEle_1 = this.parent.createElement('ul', {\n                className: 'e-list-parent e-ul e-reorder'\n            });\n            if (activeLiCount > 0) {\n                var activeListItems = this.parent.ulElement.querySelectorAll('li.e-active');\n                activeListItems.forEach(function (item) {\n                    ulEle_1.appendChild(item);\n                });\n                remLi = this.parent.ulElement.querySelectorAll('li.e-active');\n                addClass(remLi, 'e-reorder-hide');\n                prepend([ulEle_1], this.parent.list);\n            }\n            this.parent.focusAtFirstListItem();\n        }\n    };\n    return CheckBoxSelection;\n}());\n\n/**\n * export all modules from current location\n */\n\nvar __extends$6 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$6 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n// eslint-disable-next-line @typescript-eslint/triple-slash-reference\n/// <reference path='../drop-down-base/drop-down-base-model.d.ts'/>\n/**\n * Defines the Selection settings of List Box.\n */\nvar SelectionSettings = /** @__PURE__ @class */ (function (_super) {\n    __extends$6(SelectionSettings, _super);\n    function SelectionSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate$6([\n        Property('Multiple')\n    ], SelectionSettings.prototype, \"mode\", void 0);\n    __decorate$6([\n        Property(false)\n    ], SelectionSettings.prototype, \"showCheckbox\", void 0);\n    __decorate$6([\n        Property(false)\n    ], SelectionSettings.prototype, \"showSelectAll\", void 0);\n    __decorate$6([\n        Property('Left')\n    ], SelectionSettings.prototype, \"checkboxPosition\", void 0);\n    return SelectionSettings;\n}(ChildProperty));\n/**\n * Defines the toolbar settings of List Box.\n */\nvar ToolbarSettings = /** @__PURE__ @class */ (function (_super) {\n    __extends$6(ToolbarSettings, _super);\n    function ToolbarSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate$6([\n        Property([])\n    ], ToolbarSettings.prototype, \"items\", void 0);\n    __decorate$6([\n        Property('Right')\n    ], ToolbarSettings.prototype, \"position\", void 0);\n    return ToolbarSettings;\n}(ChildProperty));\n/**\n * The ListBox is a graphical user interface component used to display a list of items.\n * Users can select one or more items in the list using a checkbox or by keyboard selection.\n * It supports sorting, grouping, reordering and drag and drop of items.\n * ```html\n * <select id=\"listbox\">\n *      <option value='1'>Badminton</option>\n *      <option value='2'>Basketball</option>\n *      <option value='3'>Cricket</option>\n *      <option value='4'>Football</option>\n *      <option value='5'>Tennis</option>\n * </select>\n * ```\n * ```typescript\n * <script>\n *   var listObj = new ListBox();\n *   listObj.appendTo(\"#listbox\");\n * </script>\n * ```\n */\nvar ListBox = /** @__PURE__ @class */ (function (_super) {\n    __extends$6(ListBox, _super);\n    /**\n     * Constructor for creating the ListBox component.\n     *\n     * @param {ListBoxModel} options - Specifies ListBox model\n     * @param {string | HTMLElement} element - Specifies the element.\n     */\n    function ListBox(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        _this.isValidKey = false;\n        _this.isDataSourceUpdate = false;\n        _this.keyDownStatus = false;\n        return _this;\n    }\n    ListBox_1 = ListBox;\n    /**\n     * Adds a new item to the popup list. By default, new item appends to the list as the last item,\n     * but you can insert based on the index parameter.\n     *\n     * @param  { Object[] } items - Specifies an array of JSON data or a JSON data.\n     * @param { number } itemIndex - Specifies the index to place the newly added item in the popup list.\n     * @returns {void}.\n     * @private\n     */\n    ListBox.prototype.addItem = function (items, itemIndex) {\n        _super.prototype.addItem.call(this, items, itemIndex);\n    };\n    /**\n     * Build and render the component.\n     *\n     * @private\n     * @returns {void}\n     */\n    ListBox.prototype.render = function () {\n        this.inputString = '';\n        this.initLoad = true;\n        this.isCustomFiltering = false;\n        this.initialSelectedOptions = this.value;\n        this.inputFormName = this.element.getAttribute('name');\n        _super.prototype.render.call(this);\n        this.setEnabled();\n        this.renderComplete();\n    };\n    ListBox.prototype.initWrapper = function () {\n        var hiddenSelect = this.createElement('select', { className: 'e-hidden-select', attrs: { 'multiple': '' } });\n        hiddenSelect.style.visibility = 'hidden';\n        this.list.classList.add('e-listbox-wrapper');\n        this.list.querySelector('.e-list-parent').setAttribute('role', 'presentation');\n        var groupHdrs = this.list.querySelectorAll('.e-list-group-item');\n        for (var i = 0; i < groupHdrs.length; i++) {\n            groupHdrs[i].removeAttribute('tabindex');\n            groupHdrs[i].setAttribute('role', 'option');\n        }\n        if (this.itemTemplate) {\n            this.list.classList.add('e-list-template');\n        }\n        this.list.classList.add('e-wrapper');\n        this.list.classList.add('e-lib');\n        if (this.element.tagName === 'EJS-LISTBOX') {\n            this.element.setAttribute('tabindex', '0');\n            if (this.initLoad) {\n                this.element.appendChild(this.list);\n            }\n        }\n        else {\n            if (this.initLoad) {\n                this.element.parentElement.insertBefore(this.list, this.element);\n            }\n            this.list.insertBefore(this.element, this.list.firstChild);\n            this.element.style.display = 'none';\n        }\n        this.list.insertBefore(hiddenSelect, this.list.firstChild);\n        if (this.list.getElementsByClassName('e-list-item')[0]) {\n            this.list.getElementsByClassName('e-list-item')[0].classList.remove(dropDownBaseClasses.focus);\n        }\n        if (this.itemTemplate) {\n            this.renderReactTemplates();\n        }\n        removeClass([this.list], [dropDownBaseClasses.content, dropDownBaseClasses.root]);\n        this.validationAttribute(this.element, hiddenSelect);\n        this.list.setAttribute('role', 'listbox');\n        attributes(this.list, { 'role': 'listbox', 'aria-label': 'listbox', 'aria-multiselectable': this.selectionSettings.mode === 'Multiple' ? 'true' : 'false' });\n        this.updateSelectionSettings();\n    };\n    ListBox.prototype.updateSelectionSettings = function () {\n        if (this.selectionSettings.showCheckbox && this.selectionSettings.showSelectAll && this.liCollections.length) {\n            var l10nSelect = new L10n(this.getModuleName(), { selectAllText: 'Select All', unSelectAllText: 'Unselect All' }, this.locale);\n            this.showSelectAll = true;\n            this.selectAllText = l10nSelect.getConstant('selectAllText');\n            this.unSelectAllText = l10nSelect.getConstant('unSelectAllText');\n            this.popupWrapper = this.list;\n            this.checkBoxSelectionModule.checkAllParent = null;\n            this.notify('selectAll', {});\n        }\n    };\n    ListBox.prototype.initDraggable = function () {\n        var _this = this;\n        if (this.ulElement) {\n            this.ulElement.id = this.element.id + '_parent';\n        }\n        if (this.allowDragAndDrop) {\n            new Sortable(this.ulElement, {\n                scope: this.scope,\n                itemClass: 'e-list-item',\n                dragStart: this.triggerDragStart.bind(this),\n                drag: this.triggerDrag.bind(this),\n                beforeDrop: this.beforeDragEnd.bind(this),\n                drop: this.dragEnd.bind(this),\n                placeHolder: function () { return _this.createElement('span', { className: 'e-placeholder' }); },\n                helper: function (e) {\n                    var wrapper = _this.list.cloneNode();\n                    var ele = e.sender.cloneNode(true);\n                    wrapper.appendChild(ele);\n                    var refEle = _this.getItems()[0];\n                    wrapper.style.width = refEle.offsetWidth + 'px';\n                    wrapper.style.height = refEle.offsetHeight + 'px';\n                    if ((_this.value && _this.value.length) > 1 && _this.isSelected(ele)) {\n                        ele.appendChild(_this.createElement('span', {\n                            className: 'e-list-badge', innerHTML: _this.value.length + ''\n                        }));\n                    }\n                    wrapper.style.zIndex = getZindexPartial(_this.element) + '';\n                    return wrapper;\n                }\n            });\n        }\n    };\n    ListBox.prototype.updateActionCompleteData = function (li, item, index) {\n        this.jsonData.splice(index, 0, item);\n    };\n    ListBox.prototype.initToolbar = function () {\n        var pos = this.toolbarSettings.position;\n        var prevScope = this.element.getAttribute('data-value');\n        if (this.toolbarSettings.items.length) {\n            var toolElem = this.createElement('div', { className: 'e-listbox-tool', attrs: { 'role': 'toolbar' } });\n            var wrapper = this.createElement('div', {\n                className: 'e-listboxtool-wrapper e-lib e-' + pos.toLowerCase()\n            });\n            this.list.parentElement.insertBefore(wrapper, this.list);\n            wrapper.appendChild(pos === 'Right' ? this.list : toolElem);\n            wrapper.appendChild(pos === 'Right' ? toolElem : this.list);\n            this.createButtons(toolElem);\n            if (!this.element.id) {\n                this.element.id = getUniqueID('e-' + this.getModuleName());\n            }\n            if (this.scope) {\n                document.querySelector(this.scope).setAttribute('data-value', this.element.id);\n            }\n            else {\n                this.updateToolBarState();\n            }\n        }\n        var scope = this.element.getAttribute('data-value');\n        if (prevScope && scope && (prevScope !== scope)) {\n            this.tBListBox = getComponent(document.getElementById(prevScope), this.getModuleName());\n            this.tBListBox.updateToolBarState();\n        }\n        else if (scope) {\n            this.tBListBox = getComponent(document.getElementById(scope), this.getModuleName());\n            this.tBListBox.updateToolBarState();\n        }\n    };\n    ListBox.prototype.createButtons = function (toolElem) {\n        var _this = this;\n        var btn;\n        var ele;\n        var title;\n        var l10n = new L10n(this.getModuleName(), {\n            moveUp: 'Move Up', moveDown: 'Move Down', moveTo: 'Move To',\n            moveFrom: 'Move From', moveAllTo: 'Move All To', moveAllFrom: 'Move All From'\n        }, this.locale);\n        this.toolbarSettings.items.forEach(function (value) {\n            title = l10n.getConstant(value);\n            ele = _this.createElement('button', {\n                attrs: {\n                    'type': 'button',\n                    'data-value': value,\n                    'title': title,\n                    'aria-label': title\n                }\n            });\n            toolElem.appendChild(ele);\n            btn = new Button({ iconCss: 'e-icons e-' + value.toLowerCase() }, ele);\n            btn.createElement = _this.createElement;\n        });\n    };\n    ListBox.prototype.validationAttribute = function (input, hiddenSelect) {\n        if (this.inputFormName) {\n            input.setAttribute('name', this.inputFormName);\n        }\n        _super.prototype.validationAttribute.call(this, input, hiddenSelect);\n        hiddenSelect.required = input.required;\n        input.required = false;\n    };\n    ListBox.prototype.setHeight = function () {\n        var ele = this.toolbarSettings.items.length ? this.list.parentElement : this.list;\n        ele.style.height = formatUnit(this.height);\n        if (this.allowFiltering && this.height.toString().indexOf('%') < 0) {\n            addClass([this.list], 'e-filter-list');\n        }\n        else {\n            removeClass([this.list], 'e-filter-list');\n        }\n    };\n    ListBox.prototype.setCssClass = function () {\n        var wrap = this.toolbarSettings.items.length ? this.list.parentElement : this.list;\n        if (this.cssClass) {\n            addClass([wrap], this.cssClass.replace(/\\s+/g, ' ').trim().split(' '));\n        }\n        if (this.enableRtl) {\n            addClass([this.list], 'e-rtl');\n        }\n    };\n    ListBox.prototype.setEnable = function () {\n        var ele = this.toolbarSettings.items.length ? this.list.parentElement : this.list;\n        if (this.enabled) {\n            removeClass([ele], cssClass.disabled);\n        }\n        else {\n            addClass([ele], cssClass.disabled);\n        }\n    };\n    ListBox.prototype.showSpinner = function () {\n        if (!this.spinner) {\n            this.spinner = this.createElement('div', { className: 'e-listbox-wrapper' });\n        }\n        this.spinner.style.height = formatUnit(this.height);\n        this.element.parentElement.insertBefore(this.spinner, this.element.nextSibling);\n        createSpinner({ target: this.spinner }, this.createElement);\n        showSpinner(this.spinner);\n    };\n    ListBox.prototype.hideSpinner = function () {\n        if (this.spinner.querySelector('.e-spinner-pane')) {\n            hideSpinner(this.spinner);\n        }\n        if (this.spinner.parentElement) {\n            detach(this.spinner);\n        }\n    };\n    ListBox.prototype.onInput = function () {\n        this.isDataSourceUpdate = false;\n        if (this.keyDownStatus) {\n            this.isValidKey = true;\n        }\n        else {\n            this.isValidKey = false;\n        }\n        this.keyDownStatus = false;\n        this.refreshClearIcon();\n    };\n    ListBox.prototype.clearText = function () {\n        this.filterInput.value = '';\n        this.refreshClearIcon();\n        var event = document.createEvent('KeyboardEvent');\n        this.isValidKey = true;\n        this.KeyUp(event);\n    };\n    ListBox.prototype.refreshClearIcon = function () {\n        if (this.filterInput.parentElement.querySelector('.' + listBoxClasses.clearIcon)) {\n            var clearElement = this.filterInput.parentElement.querySelector('.' + listBoxClasses.clearIcon);\n            clearElement.style.visibility = this.filterInput.value === '' ? 'hidden' : 'visible';\n        }\n    };\n    ListBox.prototype.onActionComplete = function (ulElement, list, e) {\n        var searchEle;\n        var filterElem;\n        var txtLength;\n        if (this.allowFiltering && this.list.getElementsByClassName('e-filter-parent')[0]) {\n            searchEle = this.list.getElementsByClassName('e-filter-parent')[0].cloneNode(true);\n        }\n        if (list.length === 0) {\n            var noRecElem = ulElement.childNodes[0];\n            if (noRecElem) {\n                ulElement.removeChild(noRecElem);\n            }\n        }\n        if (this.allowFiltering) {\n            filterElem = this.list.getElementsByClassName('e-input-filter')[0];\n            if (filterElem) {\n                txtLength = filterElem.selectionStart;\n            }\n        }\n        _super.prototype.onActionComplete.call(this, ulElement, list, e);\n        if (this.allowFiltering && !isNullOrUndefined(searchEle)) {\n            this.list.insertBefore(searchEle, this.list.firstElementChild);\n            this.filterParent = this.list.getElementsByClassName('e-filter-parent')[0];\n            this.filterWireEvents(searchEle);\n            var inputSearch = searchEle.querySelector('.e-input-filter');\n            if (inputSearch) {\n                inputSearch.addEventListener('focus', function () {\n                    if (!searchEle.childNodes[0].classList.contains('e-input-focus')) {\n                        searchEle.childNodes[0].classList.add('e-input-focus');\n                    }\n                });\n                inputSearch.addEventListener('blur', function () {\n                    if (searchEle.childNodes[0].classList.contains('e-input-focus')) {\n                        searchEle.childNodes[0].classList.remove('e-input-focus');\n                    }\n                });\n            }\n        }\n        this.initWrapper();\n        this.setSelection();\n        this.initDraggable();\n        this.mainList = this.ulElement;\n        if (this.initLoad) {\n            this.jsonData = [];\n            extend(this.jsonData, list, []);\n            this.initToolbarAndStyles();\n            this.wireEvents();\n            if (this.showCheckbox) {\n                this.setCheckboxPosition();\n            }\n            if (this.allowFiltering) {\n                this.setFiltering();\n            }\n        }\n        else {\n            if (this.isDataSourceUpdate) {\n                this.jsonData = [];\n                extend(this.jsonData, list, []);\n                this.isDataSourceUpdate = false;\n            }\n            if (this.allowFiltering) {\n                filterElem = this.list.getElementsByClassName('e-input-filter')[0];\n                filterElem.selectionStart = txtLength;\n                filterElem.selectionEnd = txtLength;\n                filterElem.focus();\n            }\n        }\n        if (this.toolbarSettings.items.length && this.scope && this.scope.indexOf('#') > -1 && !isNullOrUndefined(e)) {\n            var scope = this.scope.replace('#', '');\n            var scopedLB = getComponent(document.getElementById(scope), this.getModuleName());\n            scopedLB.initToolbar();\n        }\n        this.initLoad = false;\n    };\n    ListBox.prototype.initToolbarAndStyles = function () {\n        this.initToolbar();\n        this.setCssClass();\n        this.setEnable();\n        this.setHeight();\n    };\n    ListBox.prototype.triggerDragStart = function (args) {\n        var _this = this;\n        var badge;\n        args = extend(this.getDragArgs(args), { dragSelected: true });\n        if (Browser.isIos) {\n            this.list.style.overflow = 'hidden';\n        }\n        this.trigger('dragStart', args, function (dragEventArgs) {\n            _this.allowDragAll = dragEventArgs.dragSelected;\n            if (!_this.allowDragAll) {\n                badge = _this.ulElement.getElementsByClassName('e-list-badge')[0];\n                if (badge) {\n                    detach(badge);\n                }\n            }\n        });\n    };\n    ListBox.prototype.triggerDrag = function (args) {\n        var _this = this;\n        var scrollParent;\n        var boundRect;\n        var scrollMoved = 36;\n        var scrollHeight = 10;\n        if (this.itemTemplate && args.target) {\n            if (args.target && args.target.closest('.e-list-item')) {\n                scrollHeight = args.target.closest('.e-list-item').scrollHeight;\n            }\n            else {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                var listItem = args.element.querySelector('.e-list-item');\n                if (listItem) {\n                    scrollHeight = listItem.scrollHeight;\n                }\n            }\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var event = args.event;\n        var wrapper;\n        this.stopTimer();\n        if (args.target && (args.target.classList.contains('e-listbox-wrapper') || args.target.classList.contains('e-list-item')\n            || args.target.classList.contains('e-filter-parent') || args.target.classList.contains('e-input-group')\n            || args.target.closest('.e-list-item'))) {\n            if (args.target.classList.contains('e-list-item') || args.target.classList.contains('e-filter-parent')\n                || args.target.classList.contains('e-input-group')\n                || args.target.closest('.e-list-item')) {\n                wrapper = args.target.closest('.e-listbox-wrapper');\n            }\n            else {\n                wrapper = args.target;\n            }\n            if (this.allowFiltering) {\n                scrollParent = wrapper.querySelector('.e-list-parent');\n            }\n            else {\n                scrollParent = wrapper;\n            }\n            boundRect = scrollParent.getBoundingClientRect();\n            if ((boundRect.y + scrollParent.offsetHeight) - (event.clientY + scrollMoved) < 1) {\n                this.timer = window.setInterval(function () { _this.setScrollDown(scrollParent, scrollHeight, true); }, 70);\n            }\n            else if ((event.clientY - scrollMoved) - boundRect.y < 1) {\n                this.timer = window.setInterval(function () { _this.setScrollDown(scrollParent, scrollHeight, false); }, 70);\n            }\n        }\n        if (args.target === null) {\n            return;\n        }\n        this.trigger('drag', this.getDragArgs(args));\n    };\n    ListBox.prototype.setScrollDown = function (scrollElem, scrollPixel, isScrollDown) {\n        if (isScrollDown) {\n            scrollElem.scrollTop = scrollElem.scrollTop + scrollPixel;\n        }\n        else {\n            scrollElem.scrollTop = scrollElem.scrollTop - scrollPixel;\n        }\n    };\n    ListBox.prototype.stopTimer = function () {\n        window.clearInterval(this.timer);\n    };\n    ListBox.prototype.beforeDragEnd = function (args) {\n        this.stopTimer();\n        var items = [];\n        this.dragValue = this.getFormattedValue(args.droppedElement.getAttribute('data-value'));\n        if (this.value.indexOf(this.dragValue) > -1) {\n            args.items = this.getDataByValues(this.value);\n        }\n        else {\n            args.items = this.getDataByValues([this.dragValue]);\n        }\n        extend(items, args.items);\n        this.trigger('beforeDrop', args);\n        if (args.items !== items) {\n            this.customDraggedItem = args.items;\n        }\n    };\n    ListBox.prototype.dragEnd = function (args) {\n        var _this = this;\n        var listData;\n        var liColl;\n        var jsonData;\n        var droppedData;\n        var selectedOptions;\n        var sortedData;\n        var dropValue = this.getFormattedValue(args.droppedElement.getAttribute('data-value'));\n        var listObj = this.getComponent(args.droppedElement);\n        var getArgs = this.getDragArgs({ target: args.droppedElement }, true);\n        var sourceArgs = { previousData: this.dataSource };\n        var destArgs = { previousData: listObj.dataSource };\n        var dragArgs = extend({}, getArgs, { target: args.target, source: { previousData: this.dataSource },\n            previousIndex: args.previousIndex, currentIndex: args.currentIndex });\n        if (listObj !== this) {\n            var sourceArgs1 = extend(sourceArgs, { currentData: this.listData });\n            dragArgs = extend(dragArgs, { source: sourceArgs1, destination: destArgs });\n        }\n        if (Browser.isIos) {\n            this.list.style.overflow = '';\n        }\n        var targetListObj = this.getComponent(args.target);\n        if (targetListObj && targetListObj.listData.length === 0) {\n            var noRecElem = targetListObj.ulElement.childNodes[0];\n            if (noRecElem) {\n                targetListObj.ulElement.removeChild(noRecElem);\n            }\n        }\n        if (listObj === this) {\n            var ul_1 = this.ulElement;\n            listData = [].slice.call(this.listData);\n            liColl = [].slice.call(this.liCollections);\n            jsonData = [].slice.call(this.jsonData);\n            sortedData = [].slice.call(this.sortedData);\n            var toSortIdx_1 = args.currentIndex;\n            var toIdx_1 = args.currentIndex = this.getCurIdx(this, args.currentIndex);\n            var rIdx = listData.indexOf(this.getDataByValue(dropValue));\n            var jsonIdx = jsonData.indexOf(this.getDataByValue(dropValue));\n            var sIdx = sortedData.indexOf(this.getDataByValue(dropValue));\n            listData.splice(toIdx_1, 0, listData.splice(rIdx, 1)[0]);\n            sortedData.splice(toSortIdx_1, 0, sortedData.splice(sIdx, 1)[0]);\n            jsonData.splice(toIdx_1, 0, jsonData.splice(jsonIdx, 1)[0]);\n            liColl.splice(toIdx_1, 0, liColl.splice(rIdx, 1)[0]);\n            if (this.allowDragAll) {\n                selectedOptions = this.value && Array.prototype.indexOf.call(this.value, dropValue) > -1 ? this.value : [dropValue];\n                if (!isNullOrUndefined(this.customDraggedItem)) {\n                    selectedOptions = [];\n                    this.customDraggedItem.forEach(function (item) {\n                        selectedOptions.push(getValue(_this.fields.value, item));\n                    });\n                }\n                selectedOptions.forEach(function (value) {\n                    if (value !== dropValue) {\n                        var idx = listData.indexOf(_this.getDataByValue(value));\n                        var jsonIdx_1 = jsonData.indexOf(_this.getDataByValue(value));\n                        var sIdx_1 = sortedData.indexOf(_this.getDataByValue(value));\n                        if (idx > toIdx_1) {\n                            toIdx_1++;\n                        }\n                        jsonData.splice(toIdx_1, 0, jsonData.splice(jsonIdx_1, 1)[0]);\n                        listData.splice(toIdx_1, 0, listData.splice(idx, 1)[0]);\n                        sortedData.splice(toSortIdx_1, 0, sortedData.splice(sIdx_1, 1)[0]);\n                        liColl.splice(toIdx_1, 0, liColl.splice(idx, 1)[0]);\n                        ul_1.insertBefore(_this.getItems()[_this.getIndexByValue(value)], ul_1.getElementsByClassName('e-placeholder')[0]);\n                    }\n                });\n            }\n            this.listData = listData;\n            this.jsonData = jsonData;\n            this.sortedData = sortedData;\n            this.liCollections = liColl;\n        }\n        else {\n            var li_1;\n            var fLiColl_1 = [].slice.call(this.liCollections);\n            var currIdx_1 = args.currentIndex = this.getCurIdx(listObj, args.currentIndex);\n            var ul_2 = listObj.ulElement;\n            listData = [].slice.call(listObj.listData);\n            liColl = [].slice.call(listObj.liCollections);\n            jsonData = [].slice.call(listObj.jsonData);\n            sortedData = [].slice.call(listObj.sortedData);\n            selectedOptions = (this.value && Array.prototype.indexOf.call(this.value, dropValue) > -1 && this.allowDragAll)\n                ? this.value : [dropValue];\n            if (!isNullOrUndefined(this.customDraggedItem)) {\n                selectedOptions = [];\n                this.customDraggedItem.forEach(function (item) {\n                    selectedOptions.push(getValue(_this.fields.value, item));\n                });\n            }\n            var fListData_1 = [].slice.call(this.listData);\n            var fSortData_1 = [].slice.call(this.sortedData);\n            selectedOptions.forEach(function (value, index) {\n                droppedData = _this.getDataByValue(value);\n                var srcIdx = _this.listData.indexOf(droppedData);\n                var jsonSrcIdx = _this.jsonData.indexOf(droppedData);\n                var sortIdx = _this.sortedData.indexOf(droppedData);\n                fListData_1.splice(srcIdx, 1);\n                _this.jsonData.splice(jsonSrcIdx, 1);\n                fSortData_1.splice(sortIdx, 1);\n                _this.listData = fListData_1;\n                _this.sortedData = fSortData_1;\n                var destIdx = value === dropValue ? args.currentIndex : currIdx_1;\n                listData.splice(destIdx, 0, droppedData);\n                jsonData.splice(destIdx, 0, droppedData);\n                sortedData.splice(destIdx, 0, droppedData);\n                liColl.splice(destIdx, 0, fLiColl_1.splice(srcIdx, 1)[0]);\n                if (!value) {\n                    var liCollElem_1 = _this.getItems();\n                    for (var i = 0; i < liCollElem_1.length; i++) {\n                        if (liCollElem_1[i].getAttribute('data-value') === null && liCollElem_1[i].classList.contains('e-list-item')) {\n                            li_1 = liCollElem_1[i];\n                            break;\n                        }\n                    }\n                }\n                else {\n                    li_1 = _this.getItems()[_this.getIndexByValue(value)];\n                }\n                if (!li_1) {\n                    li_1 = args.helper;\n                }\n                _this.removeSelected(_this, value === dropValue ? [args.droppedElement] : [li_1]);\n                ul_2.insertBefore(li_1, ul_2.getElementsByClassName('e-placeholder')[0]);\n                currIdx_1++;\n            });\n            if (this.fields.groupBy) {\n                var sourceElem = this.renderItems(this.listData, this.fields);\n                this.updateListItems(sourceElem, this.ulElement);\n                this.setSelection();\n            }\n            if (listObj.sortOrder !== 'None' || this.selectionSettings.showCheckbox\n                !== listObj.selectionSettings.showCheckbox || listObj.fields.groupBy || listObj.itemTemplate || this.itemTemplate) {\n                var sortable = getComponent(ul_2, 'sortable');\n                var sourceElem = listObj.renderItems(listData, listObj.fields);\n                listObj.updateListItems(sourceElem, ul_2);\n                this.setSelection();\n                if (sortable.placeHolderElement) {\n                    ul_2.appendChild(sortable.placeHolderElement);\n                }\n                ul_2.appendChild(args.helper);\n                listObj.setSelection();\n            }\n            this.liCollections = fLiColl_1;\n            listObj.liCollections = liColl;\n            listObj.jsonData = extend([], [], jsonData, false);\n            listObj.listData = extend([], [], listData, false);\n            listObj.sortedData = extend([], [], sortedData, false);\n            if (this.listData.length === 0) {\n                this.l10nUpdate();\n            }\n        }\n        if (this === listObj) {\n            var sourceArgs1 = extend(sourceArgs, { currentData: listData });\n            dragArgs = extend(dragArgs, { source: sourceArgs1 });\n        }\n        else {\n            var dragArgs1 = extend(destArgs, { currentData: listData });\n            dragArgs = extend(dragArgs, { destination: dragArgs1 });\n        }\n        if (!isNullOrUndefined(this.customDraggedItem)) {\n            dragArgs.items = this.customDraggedItem;\n        }\n        this.trigger('drop', dragArgs);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var liCollElem = dragArgs.elements;\n        if (liCollElem.length) {\n            for (var i = 0; i < liCollElem.length; i++) {\n                liCollElem[i].classList.remove('e-grabbed');\n            }\n        }\n    };\n    ListBox.prototype.updateListItems = function (sourceElem, destElem) {\n        var i = 0;\n        destElem.innerHTML = '';\n        while (i < sourceElem.childNodes.length) {\n            destElem.appendChild(sourceElem.childNodes[i]);\n        }\n    };\n    ListBox.prototype.removeSelected = function (listObj, elems) {\n        if (listObj.selectionSettings.showCheckbox) {\n            elems.forEach(function (ele) { ele.getElementsByClassName('e-frame')[0].classList.remove('e-check'); });\n        }\n        else {\n            removeClass(elems, cssClass.selected);\n        }\n    };\n    ListBox.prototype.getCurIdx = function (listObj, idx) {\n        if (listObj.fields.groupBy) {\n            idx -= [].slice.call(listObj.ulElement.children).slice(0, idx)\n                .filter(function (ele) { return ele.classList.contains(cssClass.group); }).length;\n        }\n        return idx;\n    };\n    ListBox.prototype.getComponent = function (li) {\n        var listObj;\n        var ele = (this.element.tagName === 'EJS-LISTBOX' ? closest(li, '.e-listbox')\n            : closest(li, '.e-listbox-wrapper') && closest(li, '.e-listbox-wrapper').querySelector('.e-listbox'));\n        if (ele) {\n            listObj = getComponent(ele, this.getModuleName());\n        }\n        return listObj;\n    };\n    /**\n     * Sets the enabled state to DropDownBase.\n     *\n     * @returns {void}\n     */\n    ListBox.prototype.setEnabled = function () {\n        this.element.setAttribute('aria-disabled', (this.enabled) ? 'false' : 'true');\n    };\n    ListBox.prototype.listOption = function (dataSource, fields) {\n        this.listCurrentOptions = _super.prototype.listOption.call(this, dataSource, fields);\n        this.listCurrentOptions = extend({}, this.listCurrentOptions, { itemCreated: this.triggerBeforeItemRender.bind(this) }, true);\n        this.notify('listoption', { module: 'CheckBoxSelection' });\n        return this.listCurrentOptions;\n    };\n    ListBox.prototype.triggerBeforeItemRender = function (e) {\n        e.item.setAttribute('tabindex', '-1');\n        this.trigger('beforeItemRender', { element: e.item, item: e.curData });\n    };\n    ListBox.prototype.requiredModules = function () {\n        var modules = [];\n        if (this.selectionSettings.showCheckbox) {\n            modules.push({\n                member: 'CheckBoxSelection',\n                args: [this]\n            });\n        }\n        return modules;\n    };\n    /**\n     * This method is used to enable or disable the items in the ListBox based on the items and enable argument.\n     *\n     * @param {string[]} items - Text items that needs to be enabled/disabled.\n     * @param {boolean} enable - Set `true`/`false` to enable/disable the list items.\n     * @param {boolean} isValue - Set `true` if `items` parameter is a array of unique values.\n     * @returns {void}\n     */\n    ListBox.prototype.enableItems = function (items, enable, isValue) {\n        var _this = this;\n        if (enable === void 0) { enable = true; }\n        var li;\n        items.forEach(function (item) {\n            var text = item;\n            li = _this.findListElement(_this.list, 'li', 'data-value', isValue ? text : _this.getValueByText(text));\n            if (!li) {\n                return;\n            }\n            if (enable) {\n                removeClass([li], cssClass.disabled);\n                li.removeAttribute('aria-disabled');\n            }\n            else {\n                addClass([li], cssClass.disabled);\n                li.setAttribute('aria-disabled', 'true');\n            }\n        });\n    };\n    /**\n     * Based on the state parameter, specified list item will be selected/deselected.\n     *\n     * @param {string[]} items - Array of text value of the item.\n     * @param {boolean} state - Set `true`/`false` to select/un select the list items.\n     * @param {boolean} isValue - Set `true` if `items` parameter is a array of unique values.\n     * @returns {void}\n     */\n    ListBox.prototype.selectItems = function (items, state, isValue) {\n        if (state === void 0) { state = true; }\n        if (state && !this.selectionSettings.showCheckbox && this.selectionSettings.mode === 'Single') {\n            this.getSelectedItems().forEach(function (li) {\n                li.classList.remove('e-active');\n                li.removeAttribute('aria-selected');\n                removeClass([li], cssClass.selected);\n            });\n        }\n        this.setSelection(items, state, !isValue);\n        this.updateSelectedOptions();\n        var selElems = [];\n        for (var i = 0; i < items.length; i++) {\n            var liColl = this.list.querySelectorAll('[aria-selected=\"true\"]');\n            for (var j = 0; j < liColl.length; j++) {\n                if (items[i] === this.getFormattedValue(liColl[j].getAttribute('data-value'))) {\n                    selElems.push(liColl[j]);\n                }\n            }\n        }\n        this.triggerChange(selElems, null);\n    };\n    /**\n     * Based on the state parameter, entire list item will be selected/deselected.\n     *\n     * @param {boolean} state - Set `true`/`false` to select/un select the entire list items.\n     * @returns {void}\n     */\n    ListBox.prototype.selectAll = function (state) {\n        if (state === void 0) { state = true; }\n        this.selectAllItems(state);\n    };\n    /**\n     * Adds a new item to the list. By default, new item appends to the list as the last item,\n     * but you can insert based on the index parameter.\n     *\n     * @param  { Object[] } items - Specifies an array of JSON data or a JSON data.\n     * @param { number } itemIndex - Specifies the index to place the newly added item in the list.\n     * @returns {void}.\n     */\n    ListBox.prototype.addItems = function (items, itemIndex) {\n        _super.prototype.addItem.call(this, items, itemIndex);\n    };\n    /**\n     * Removes a item from the list. By default, removed the last item in the list,\n     * but you can remove based on the index parameter.\n     *\n     * @param  { Object[] } items - Specifies an array of JSON data or a JSON data.\n     * @param { number } itemIndex - Specifies the index to remove the item from the list.\n     * @returns {void}.\n     */\n    ListBox.prototype.removeItems = function (items, itemIndex) {\n        this.removeItem(items, itemIndex);\n    };\n    /**\n     * Removes a item from the list. By default, removed the last item in the list,\n     * but you can remove based on the index parameter.\n     *\n     * @param  { Object[] } items - Specifies an array of JSON data or a JSON data.\n     * @param { number } itemIndex - Specifies the index to remove the item from the list.\n     * @returns {void}.\n     */\n    ListBox.prototype.removeItem = function (items, itemIndex) {\n        var liCollections = [];\n        var liElement = this.list.querySelectorAll('.' + dropDownBaseClasses.li);\n        if (items) {\n            items = (items instanceof Array ? items : [items]);\n            var fields = this.fields;\n            var dataValue = void 0;\n            var objValue = void 0;\n            var dupData = [];\n            var itemIdx = void 0;\n            extend(dupData, [], this.jsonData);\n            var removeIdxes = [];\n            var removeLiIdxes = [];\n            for (var j = 0; j < items.length; j++) {\n                if (items[j] instanceof Object) {\n                    dataValue = getValue(fields.value, items[j]);\n                }\n                else {\n                    dataValue = items[j].toString();\n                }\n                for (var i = 0, len = dupData.length; i < len; i++) {\n                    if (dupData[i] instanceof Object) {\n                        objValue = getValue(fields.value, dupData[i]);\n                    }\n                    else {\n                        objValue = dupData[i].toString();\n                    }\n                    if (objValue === dataValue) {\n                        itemIdx = this.getIndexByValue(dataValue);\n                        var idx = itemIdx === i ? itemIdx : i;\n                        liCollections.push(liElement[idx]);\n                        removeIdxes.push(idx);\n                        removeLiIdxes.push(idx);\n                    }\n                }\n            }\n            for (var k = removeIdxes.length - 1; k >= 0; k--) {\n                this.listData.splice(removeIdxes[k], 1);\n            }\n            for (var k = removeIdxes.length - 1; k >= 0; k--) {\n                this.jsonData.splice(removeIdxes[k], 1);\n            }\n            for (var k = removeLiIdxes.length - 1; k >= 0; k--) {\n                this.updateLiCollection(removeLiIdxes[k]);\n            }\n        }\n        else {\n            itemIndex = itemIndex ? itemIndex : 0;\n            liCollections.push(liElement[itemIndex]);\n            this.listData.splice(itemIndex, 1);\n            this.jsonData.splice(itemIndex, 1);\n            this.updateLiCollection(itemIndex);\n        }\n        for (var i = 0; i < liCollections.length; i++) {\n            this.ulElement.removeChild(liCollections[i]);\n        }\n        if (this.listData.length === 0) {\n            this.l10nUpdate();\n        }\n        this.value = [];\n        this.updateToolBarState();\n    };\n    /**\n     * Gets the array of data Object that matches the given array of values.\n     *\n     * @param  { string[] | number[] | boolean[] } value - Specifies the array value of the list item.\n     * @returns {object[]}.\n     */\n    ListBox.prototype.getDataByValues = function (value) {\n        var data = [];\n        for (var i = 0; i < value.length; i++) {\n            data.push(this.getDataByValue(value[i]));\n        }\n        return data;\n    };\n    /**\n     * Moves the given value(s) / selected value(s) upwards.\n     *\n     * @param  { string[] | number[] | boolean[] } value - Specifies the value(s).\n     * @returns {void}\n     */\n    ListBox.prototype.moveUp = function (value) {\n        var elem = (value) ? this.getElemByValue(value) : this.getSelectedItems();\n        this.moveUpDown(true, false, elem);\n    };\n    /**\n     * Moves the given value(s) / selected value(s) downwards.\n     *\n     * @param  { string[] | number[] | boolean[] } value - Specifies the value(s).\n     * @returns {void}\n     */\n    ListBox.prototype.moveDown = function (value) {\n        var elem = (value) ? this.getElemByValue(value) : this.getSelectedItems();\n        this.moveUpDown(false, false, elem);\n    };\n    /**\n     * Moves the given value(s) / selected value(s) in Top of the list.\n     *\n     * @param  { string[] | number[] | boolean[] } value - Specifies the value(s).\n     * @returns {void}\n     */\n    ListBox.prototype.moveTop = function (value) {\n        var elem = (value) ? this.getElemByValue(value) : this.getSelectedItems();\n        this.moveUpDown(null, false, elem, true);\n    };\n    /**\n     * Moves the given value(s) / selected value(s) in bottom of the list.\n     *\n     * @param  { string[] | number[] | boolean[] } value - Specifies the value(s).\n     * @returns {void}\n     */\n    ListBox.prototype.moveBottom = function (value) {\n        var elem = (value) ? this.getElemByValue(value) : this.getSelectedItems();\n        this.moveUpDown(true, false, elem, false, true);\n    };\n    /**\n     * Moves the given value(s) / selected value(s) to the given / default scoped ListBox.\n     *\n     * @param  { string[] | number[] | boolean[] } value - Specifies the value or array value of the list item.\n     * @param {number} index - Specifies the index.\n     * @param {string} targetId - Specifies the target id.\n     * @returns {void}\n     */\n    ListBox.prototype.moveTo = function (value, index, targetId) {\n        var elem = (value) ? this.getElemByValue(value) : this.getSelectedItems();\n        var tlistbox = (targetId) ? getComponent(targetId, ListBox_1) : this.getScopedListBox();\n        this.moveData(this, tlistbox, false, elem, index);\n    };\n    /**\n     * Moves all the values from one ListBox to the scoped ListBox.\n     *\n     * @param  { string } targetId - Specifies the scoped ListBox ID.\n     * @param  { string } index - Specifies the index to where the items moved.\n     * @returns {void}\n     */\n    ListBox.prototype.moveAllTo = function (targetId, index) {\n        if (this.listData.length > 0) {\n            var tlistbox = (targetId) ? getComponent(targetId, ListBox_1) : this.getScopedListBox();\n            this.moveAllData(this, tlistbox, false, index);\n        }\n    };\n    /* eslint-disable */\n    /**\n     * Gets the updated dataSource in ListBox.\n     *\n     * @returns {{ [key: string]: Object }[] | string[] | boolean[] | number[]} - Updated DataSource.\n     */\n    /* eslint-enable */\n    ListBox.prototype.getDataList = function () {\n        return this.jsonData;\n    };\n    /* eslint-disable */\n    /**\n     * Returns the sorted Data in ListBox.\n     *\n     * @returns {{ [key: string]: Object }[] | string[] | boolean[] | number[]} - Sorted data\n     */\n    /* eslint-enable */\n    ListBox.prototype.getSortedList = function () {\n        var sortData;\n        var tempData;\n        sortData = tempData = this.sortedData;\n        if (this.fields.groupBy) {\n            sortData = [];\n            for (var i = 0; i < tempData.length; i++) {\n                if (tempData[i].isHeader) {\n                    continue;\n                }\n                sortData.push(tempData[i]);\n            }\n        }\n        return sortData;\n    };\n    ListBox.prototype.getElemByValue = function (value) {\n        var elem = [];\n        for (var i = 0; i < value.length; i++) {\n            elem.push(this.ulElement.querySelector('[data-value =\"' + value[i] + '\"]'));\n        }\n        return elem;\n    };\n    ListBox.prototype.updateLiCollection = function (index) {\n        var tempLi = [].slice.call(this.liCollections);\n        tempLi.splice(index, 1);\n        this.liCollections = tempLi;\n    };\n    ListBox.prototype.selectAllItems = function (state, event) {\n        var _this = this;\n        [].slice.call(this.getItems()).forEach(function (li) {\n            if (!li.classList.contains(cssClass.disabled)) {\n                if (_this.selectionSettings.showCheckbox) {\n                    var ele = li.getElementsByClassName('e-check')[0];\n                    if ((!ele && state) || (ele && !state)) {\n                        _this.notify('updatelist', { li: li, module: 'listbox' });\n                        if (_this.maximumSelectionLength >= _this.list.querySelectorAll('.e-list-item span.e-check').length) {\n                            _this.checkMaxSelection();\n                        }\n                    }\n                }\n                else {\n                    if (state) {\n                        li.classList.add(cssClass.selected);\n                    }\n                    else {\n                        li.classList.remove(cssClass.selected);\n                    }\n                }\n            }\n        });\n        this.updateSelectedOptions();\n        if (this.allowFiltering && this.selectionSettings.showCheckbox) {\n            var liEle = this.list.getElementsByTagName('li');\n            var index = 0;\n            if (state) {\n                var _loop_1 = function () {\n                    var dataValue1 = this_1.getFormattedValue(liEle[index].getAttribute('data-value'));\n                    if (!this_1.value.some(function (e) { return e === dataValue1; })) {\n                        this_1.value.push(this_1.getFormattedValue(liEle[index].getAttribute('data-value')));\n                    }\n                };\n                var this_1 = this;\n                for (index = 0; index < liEle.length; index++) {\n                    _loop_1();\n                }\n            }\n            else {\n                var _loop_2 = function () {\n                    var dataValue2 = this_2.getFormattedValue(liEle[index].getAttribute('data-value'));\n                    this_2.value = this_2.value.filter(function (e) { return e !== dataValue2; });\n                };\n                var this_2 = this;\n                for (index = 0; index < liEle.length; index++) {\n                    _loop_2();\n                }\n            }\n            if (document.querySelectorAll('ul').length < 2) {\n                this.updateMainList();\n            }\n        }\n        this.triggerChange(this.getSelectedItems(), event);\n    };\n    ListBox.prototype.updateMainList = function () {\n        var mainList = this.mainList.querySelectorAll('.e-list-item');\n        var ulList = this.ulElement.querySelectorAll('.e-list-item');\n        var mainCount = mainList.length;\n        var ulEleCount = ulList.length;\n        if (this.selectionSettings.showCheckbox || (document.querySelectorAll('ul').length > 1 || mainCount !== ulEleCount)) {\n            var listindex = 0;\n            var valueindex = 0;\n            var count = 0;\n            for (listindex; listindex < mainCount;) {\n                if (this.value) {\n                    for (valueindex; valueindex < this.value.length; valueindex++) {\n                        if (mainList[listindex].getAttribute('data-value') === this.value[valueindex]) {\n                            count++;\n                        }\n                    }\n                }\n                if (!count && this.selectionSettings.showCheckbox) {\n                    mainList[listindex].getElementsByClassName('e-frame')[0].classList.remove('e-check');\n                }\n                if (document.querySelectorAll('ul').length > 1 && count && mainCount !== ulEleCount) {\n                    this.mainList.removeChild(this.mainList.getElementsByTagName('li')[listindex]);\n                    listindex = 0;\n                }\n                else {\n                    listindex++;\n                }\n                count = 0;\n                valueindex = 0;\n            }\n        }\n    };\n    ListBox.prototype.wireEvents = function () {\n        var form = closest(this.element, 'form');\n        var wrapper = this.element.tagName === 'EJS-LISTBOX' ? this.element : this.list;\n        EventHandler.add(this.list, 'click', this.clickHandler, this);\n        EventHandler.add(wrapper, 'keydown', this.keyDownHandler, this);\n        EventHandler.add(wrapper, 'focusout', this.focusOutHandler, this);\n        this.wireToolbarEvent();\n        if (this.selectionSettings.showCheckbox) {\n            EventHandler.remove(document, 'mousedown', this.checkBoxSelectionModule.onDocumentClick);\n        }\n        if (this.fields.groupBy || this.element.querySelector('select>optgroup')) {\n            EventHandler.remove(this.list, 'scroll', this.setFloatingHeader);\n        }\n        if (form) {\n            EventHandler.add(form, 'reset', this.formResetHandler, this);\n        }\n    };\n    ListBox.prototype.wireToolbarEvent = function () {\n        if (this.toolbarSettings.items.length) {\n            EventHandler.add(this.getToolElem(), 'click', this.toolbarClickHandler, this);\n        }\n    };\n    ListBox.prototype.unwireEvents = function () {\n        var form = closest(this.element, 'form');\n        var wrapper = this.element.tagName === 'EJS-LISTBOX' ? this.element : this.list;\n        EventHandler.remove(this.list, 'click', this.clickHandler);\n        EventHandler.remove(wrapper, 'keydown', this.keyDownHandler);\n        EventHandler.remove(wrapper, 'focusout', this.focusOutHandler);\n        if (this.allowFiltering && this.clearFilterIconElem) {\n            EventHandler.remove(this.clearFilterIconElem, 'click', this.clearText);\n        }\n        if (this.toolbarSettings.items.length) {\n            EventHandler.remove(this.getToolElem(), 'click', this.toolbarClickHandler);\n        }\n        if (form) {\n            EventHandler.remove(form, 'reset', this.formResetHandler);\n        }\n    };\n    ListBox.prototype.clickHandler = function (e) {\n        this.selectHandler(e);\n    };\n    ListBox.prototype.checkSelectAll = function () {\n        var searchCount = 0;\n        var liItems = this.list.querySelectorAll('li.' + dropDownBaseClasses.li);\n        for (var i = 0; i < liItems.length; i++) {\n            if (!liItems[i].classList.contains('e-disabled')) {\n                searchCount++;\n            }\n        }\n        var len = this.getSelectedItems().length;\n        if (this.showSelectAll && searchCount) {\n            this.notify('checkSelectAll', { module: 'CheckBoxSelection',\n                value: (searchCount === len) ? 'check' : (len === 0) ? 'uncheck' : 'indeterminate' });\n        }\n    };\n    ListBox.prototype.getQuery = function (query) {\n        var filterQuery = query ? query.clone() : this.query ? this.query.clone() : new Query();\n        if (this.allowFiltering) {\n            var filterType = this.inputString === '' ? 'contains' : this.filterType;\n            var dataType = this.typeOfData(this.dataSource).typeof;\n            if (dataType === null) {\n                dataType = this.typeOfData(this.jsonData).typeof;\n            }\n            if (!(this.dataSource instanceof DataManager) && dataType === 'string' || dataType === 'number') {\n                filterQuery.where('', filterType, this.inputString, this.ignoreCase, this.ignoreAccent);\n            }\n            else {\n                var fields = (this.fields.text) ? this.fields.text : '';\n                filterQuery.where(fields, filterType, this.inputString, this.ignoreCase, this.ignoreAccent);\n            }\n        }\n        else {\n            filterQuery = query ? query : this.query ? this.query : new Query();\n        }\n        return filterQuery;\n    };\n    ListBox.prototype.setFiltering = function () {\n        var filterInputObj;\n        if (this.initLoad || isNullOrUndefined(this.filterParent)) {\n            this.filterParent = this.createElement('span', {\n                className: listBoxClasses.filterParent\n            });\n            this.filterInput = this.createElement('input', {\n                attrs: { type: 'text' },\n                className: listBoxClasses.filterInput\n            });\n            this.element.parentNode.insertBefore(this.filterInput, this.element);\n            filterInputObj = Input.createInput({\n                element: this.filterInput,\n                buttons: [listBoxClasses.filterBarClearIcon],\n                properties: { placeholder: this.filterBarPlaceholder }\n            }, this.createElement);\n            append([filterInputObj.container], this.filterParent);\n            prepend([this.filterParent], this.list);\n            attributes(this.filterInput, {\n                'aria-disabled': 'false',\n                'aria-label': 'search list item',\n                'autocomplete': 'off',\n                'autocorrect': 'off',\n                'autocapitalize': 'off',\n                'spellcheck': 'false',\n                'role': 'textbox'\n            });\n            if (this.height.toString().indexOf('%') < 0) {\n                addClass([this.list], 'e-filter-list');\n            }\n            this.inputString = this.filterInput.value;\n            this.filterWireEvents();\n            return filterInputObj;\n        }\n    };\n    ListBox.prototype.filterWireEvents = function (filterElem) {\n        if (filterElem) {\n            this.filterInput = filterElem.querySelector('.e-input-filter');\n        }\n        this.clearFilterIconElem = this.filterInput.parentElement.querySelector('.' + listBoxClasses.clearIcon);\n        if (this.clearFilterIconElem) {\n            EventHandler.add(this.clearFilterIconElem, 'click', this.clearText, this);\n            if (!filterElem) {\n                this.clearFilterIconElem.style.visibility = 'hidden';\n            }\n        }\n        EventHandler.add(this.filterInput, 'input', this.onInput, this);\n        EventHandler.add(this.filterInput, 'keyup', this.KeyUp, this);\n        EventHandler.add(this.filterInput, 'keydown', this.onKeyDown, this);\n    };\n    ListBox.prototype.selectHandler = function (e, isKey) {\n        var isSelect = true;\n        var currSelIdx;\n        var li = closest(e.target, '.' + 'e-list-item');\n        var selectedLi = [li];\n        if (li && li.parentElement) {\n            currSelIdx = [].slice.call(li.parentElement.children).indexOf(li);\n            if (!this.selectionSettings.showCheckbox) {\n                if ((e.ctrlKey || e.metaKey || Browser.isDevice) && this.isSelected(li)) {\n                    li.classList.remove(cssClass.selected);\n                    li.removeAttribute('aria-selected');\n                    isSelect = false;\n                }\n                else if (!(this.selectionSettings.mode === 'Multiple' && (e.ctrlKey || e.metaKey || Browser.isDevice))) {\n                    this.getSelectedItems().forEach(function (ele) {\n                        ele.removeAttribute('aria-selected');\n                    });\n                    removeClass(this.getSelectedItems(), cssClass.selected);\n                }\n            }\n            else {\n                isSelect = !li.getElementsByClassName('e-frame')[0].classList.contains('e-check');\n            }\n            if (e.shiftKey && !this.selectionSettings.showCheckbox && this.selectionSettings.mode !== 'Single') {\n                selectedLi = [].slice.call(li.parentElement.children)\n                    .slice(Math.min(currSelIdx, this.prevSelIdx), Math.max(currSelIdx, this.prevSelIdx) + 1)\n                    .filter(function (ele) { return ele.classList.contains('e-list-item'); });\n            }\n            else {\n                this.prevSelIdx = [].slice.call(li.parentElement.children).indexOf(li);\n            }\n            if (isSelect) {\n                if (!this.selectionSettings.showCheckbox) {\n                    addClass(selectedLi, cssClass.selected);\n                }\n                selectedLi.forEach(function (ele) {\n                    ele.setAttribute('aria-selected', 'true');\n                });\n                this.list.setAttribute('aria-activedescendant', li.id);\n            }\n            else {\n                selectedLi.forEach(function (ele) {\n                    ele.setAttribute('aria-selected', 'false');\n                });\n            }\n            if (!isKey && (this.maximumSelectionLength > (this.value && this.value.length) || !isSelect) &&\n                (this.maximumSelectionLength >= (this.value && this.value.length) || !isSelect) &&\n                !(this.maximumSelectionLength < (this.value && this.value.length))) {\n                this.notify('updatelist', { li: li, e: e, module: 'listbox' });\n            }\n            if (this.allowFiltering && !isKey) {\n                var liDataValue_1 = this.getFormattedValue(li.getAttribute('data-value'));\n                if (!isSelect) {\n                    this.value = this.value.filter(function (value1) {\n                        return value1 !== liDataValue_1;\n                    });\n                }\n                else {\n                    var values = [];\n                    extend(values, this.value);\n                    values.push(liDataValue_1);\n                    this.value = values;\n                }\n                if (document.querySelectorAll('ul').length < 2) {\n                    this.updateMainList();\n                }\n            }\n            this.updateSelectedOptions();\n            this.triggerChange(this.getSelectedItems(), e);\n            if (this.list) {\n                this.checkMaxSelection();\n            }\n        }\n    };\n    ListBox.prototype.triggerChange = function (selectedLis, event) {\n        this.trigger('change', { elements: selectedLis, items: this.getDataByElements(selectedLis), value: this.value, event: event });\n    };\n    ListBox.prototype.getDataByElems = function (elems) {\n        var data = [];\n        for (var i = 0, len = elems.length; i < len; i++) {\n            data.push(this.getDataByValue(this.getFormattedValue(elems[i].getAttribute('data-value'))));\n        }\n        return data;\n    };\n    ListBox.prototype.getDataByElements = function (elems) {\n        var data = [];\n        var value;\n        var sIdx = 0;\n        if (!isNullOrUndefined(this.listData)) {\n            var type = this.typeOfData(this.listData).typeof;\n            if (type === 'string' || type === 'number' || type === 'boolean') {\n                for (var _i = 0, _a = this.listData; _i < _a.length; _i++) {\n                    var item = _a[_i];\n                    for (var i = sIdx, len = elems.length; i < len; i++) {\n                        value = this.getFormattedValue(elems[i].getAttribute('data-value'));\n                        if (!isNullOrUndefined(item) && item === value) {\n                            sIdx = i;\n                            data.push(item);\n                            break;\n                        }\n                    }\n                    if (elems.length === data.length) {\n                        break;\n                    }\n                }\n            }\n            else {\n                for (var _b = 0, _c = this.listData; _b < _c.length; _b++) {\n                    var item = _c[_b];\n                    for (var i = sIdx, len = elems.length; i < len; i++) {\n                        value = this.getFormattedValue(elems[i].getAttribute('data-value'));\n                        if (!isNullOrUndefined(item) && getValue((this.fields.value ? this.fields.value : 'value'), item) === value) {\n                            sIdx = i;\n                            data.push(item);\n                            break;\n                        }\n                    }\n                    if (elems.length === data.length) {\n                        break;\n                    }\n                }\n            }\n            return data;\n        }\n        return null;\n    };\n    ListBox.prototype.checkMaxSelection = function () {\n        var limit = this.list.querySelectorAll('.e-list-item span.e-check').length;\n        if (this.selectionSettings.showCheckbox) {\n            var index = 0;\n            var liCollElem = this.list.getElementsByClassName('e-list-item');\n            for (index; index < liCollElem.length; index++) {\n                if (!liCollElem[index].querySelector('.e-frame.e-check')) {\n                    if (limit === this.maximumSelectionLength) {\n                        liCollElem[index].classList.add('e-disable');\n                    }\n                    else if (liCollElem[index].classList.contains('e-disable')) {\n                        liCollElem[index].classList.remove('e-disable');\n                    }\n                }\n            }\n        }\n    };\n    ListBox.prototype.toolbarClickHandler = function (e) {\n        var btn = closest(e.target, 'button');\n        if (btn) {\n            this.toolbarAction = btn.getAttribute('data-value');\n            if (btn.disabled) {\n                return;\n            }\n            switch (this.toolbarAction) {\n                case 'moveUp':\n                    this.moveUpDown(true);\n                    break;\n                case 'moveDown':\n                    this.moveUpDown();\n                    break;\n                case 'moveTo':\n                    this.moveItemTo();\n                    break;\n                case 'moveFrom':\n                    this.moveItemFrom();\n                    break;\n                case 'moveAllTo':\n                    this.moveAllItemTo();\n                    break;\n                case 'moveAllFrom':\n                    this.moveAllItemFrom();\n                    break;\n                default:\n                    this.trigger('actionBegin', { cancel: false, items: this.getDataByElems(this.getSelectedItems()),\n                        eventName: this.toolbarAction });\n                    break;\n            }\n        }\n    };\n    ListBox.prototype.moveUpDown = function (isUp, isKey, value, isTop, isBottom) {\n        var _this = this;\n        var elems = this.getSelectedItems();\n        if (value) {\n            elems = value;\n        }\n        if (((isUp && this.isSelected(this.ulElement.firstElementChild))\n            || (!isUp && this.isSelected(this.ulElement.lastElementChild))) && !value) {\n            return;\n        }\n        var tempItems = this.getDataByElems(elems);\n        var localDataArgs = { cancel: false, items: tempItems, eventName: this.toolbarAction };\n        this.trigger('actionBegin', localDataArgs);\n        if (localDataArgs.cancel) {\n            return;\n        }\n        (isUp ? elems : elems.reverse()).forEach(function (ele) {\n            var jsonToIdx = Array.prototype.indexOf.call(_this.ulElement.querySelectorAll('.e-list-item'), ele);\n            var idx = Array.prototype.indexOf.call(_this.ulElement.children, ele);\n            if (isTop) {\n                moveTo(_this.ulElement, _this.ulElement, [idx], 0);\n                _this.changeData(idx, 0, jsonToIdx, ele);\n            }\n            else if (isBottom) {\n                moveTo(_this.ulElement, _this.ulElement, [idx], _this.ulElement.querySelectorAll('.e-list-item').length);\n                _this.changeData(idx, _this.ulElement.querySelectorAll('.e-list-item').length, jsonToIdx, ele);\n            }\n            else {\n                moveTo(_this.ulElement, _this.ulElement, [idx], isUp ? idx - 1 : idx + 2);\n                _this.changeData(idx, isUp ? idx - 1 : idx + 1, isUp ? jsonToIdx - 1 : jsonToIdx + 1, ele);\n            }\n        });\n        this.trigger('actionComplete', { items: tempItems, eventName: this.toolbarAction });\n        elems[0].focus();\n        if (!isKey && this.toolbarSettings.items.length) {\n            this.getToolElem().querySelector('[data-value=' + (isUp ? 'moveUp' : 'moveDown') + ']').focus();\n        }\n        this.updateToolBarState();\n    };\n    ListBox.prototype.moveItemTo = function () {\n        this.moveData(this, this.getScopedListBox());\n    };\n    ListBox.prototype.moveItemFrom = function () {\n        this.moveData(this.getScopedListBox(), this);\n    };\n    /**\n     * Called internally if any of the property value changed.\n     *\n     * @param {ListBox} fListBox - Specifies the from listbox.\n     * @param {ListBox} tListBox - Specifies the to listbox.\n     * @param {boolean} isKey - Specifies the key.\n     * @param {Element[]} value - Specifies the value.\n     * @param {number} index - Specifies the index.\n     * @returns {void}\n     * @private\n     */\n    ListBox.prototype.moveData = function (fListBox, tListBox, isKey, value, index) {\n        var idx = [];\n        var dataIdx = [];\n        var jsonIdx = [];\n        var sortIdx = [];\n        var listData = [].slice.call(fListBox.listData);\n        var tListData = [].slice.call(tListBox.listData);\n        var sortData = [].slice.call(fListBox.sortedData);\n        var tSortData = [].slice.call(tListBox.sortedData);\n        var fliCollections = [].slice.call(fListBox.liCollections);\n        var dataLiIdx = [];\n        var tliCollections = [].slice.call(tListBox.liCollections);\n        var tempItems = [];\n        var data = [];\n        var elems = fListBox.getSelectedItems();\n        if (value) {\n            elems = value;\n        }\n        var isRefresh = tListBox.sortOrder !== 'None' || (tListBox.selectionSettings.showCheckbox !==\n            fListBox.selectionSettings.showCheckbox) || tListBox.fields.groupBy || tListBox.itemTemplate || fListBox.itemTemplate;\n        fListBox.value = [];\n        if (elems.length) {\n            this.removeSelected(fListBox, elems);\n            elems.forEach(function (ele) {\n                idx.push(Array.prototype.indexOf.call(fListBox.ulElement.children, ele)); // update sortable elem\n                // To update lb view data\n                dataLiIdx.push(Array.prototype.indexOf.call(fListBox.ulElement.querySelectorAll('.e-list-item'), ele));\n                // To update lb listdata data\n                dataIdx.push(Array.prototype.indexOf.call(fListBox.listData, fListBox.getDataByElems([ele])[0]));\n                // To update lb sorted data\n                sortIdx.push(Array.prototype.indexOf.call(fListBox.sortedData, fListBox.getDataByElems([ele])[0]));\n                // To update lb original data\n                jsonIdx.push(Array.prototype.indexOf.call(fListBox.jsonData, fListBox.getDataByElems([ele])[0]));\n            });\n            if (this.sortOrder !== 'None') {\n                sortIdx.forEach(function (i) {\n                    tempItems.push(fListBox.sortedData[i]);\n                });\n            }\n            else {\n                jsonIdx.forEach(function (i) {\n                    tempItems.push(fListBox.jsonData[i]);\n                });\n            }\n            var localDataArgs = { cancel: false, items: tempItems, eventName: this.toolbarAction };\n            fListBox.trigger('actionBegin', localDataArgs);\n            if (localDataArgs.cancel) {\n                return;\n            }\n            var rLiCollection_1 = [];\n            dataLiIdx.sort(function (n1, n2) { return n1 - n2; }).reverse().forEach(function (i) {\n                rLiCollection_1.push(fliCollections.splice(i, 1)[0]);\n            });\n            fListBox.liCollections = fliCollections;\n            if (index) {\n                var toColl = tliCollections.splice(0, index);\n                tListBox.liCollections = toColl.concat(rLiCollection_1.reverse()).concat(tliCollections);\n            }\n            else {\n                tListBox.liCollections = tliCollections.concat(rLiCollection_1.reverse());\n            }\n            if (tListBox.listData.length === 0) {\n                var noRecElem = tListBox.ulElement.childNodes[0];\n                if (noRecElem) {\n                    tListBox.ulElement.removeChild(noRecElem);\n                }\n            }\n            dataIdx.sort(function (n1, n2) { return n2 - n1; }).forEach(function (i) {\n                // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n                listData.splice(i, 1)[0];\n            });\n            sortIdx.sort(function (n1, n2) { return n2 - n1; }).forEach(function (i) {\n                // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n                sortData.splice(i, 1)[0];\n            });\n            jsonIdx.slice().reverse().forEach(function (i) {\n                data.push(fListBox.jsonData.splice(i, 1)[0]);\n            });\n            if (isRefresh) {\n                if (fListBox.fields.groupBy) {\n                    var sourceElem = fListBox.renderItems(listData, fListBox.fields);\n                    fListBox.updateListItems(sourceElem, fListBox.ulElement);\n                }\n                else {\n                    elems.forEach(function (ele) { detach(ele); });\n                }\n            }\n            else {\n                moveTo(fListBox.ulElement, tListBox.ulElement, idx, index);\n                fListBox.trigger('actionComplete', { items: tempItems, eventName: this.toolbarAction });\n            }\n            if (tListBox.mainList.childElementCount !== tListBox.jsonData.length) {\n                tListBox.mainList = tListBox.ulElement;\n            }\n            fListBox.updateMainList();\n            var tJsonData = [].slice.call(tListBox.jsonData);\n            tSortData = [].slice.call(tListBox.sortedData);\n            this.selectNextList(elems, dataLiIdx, dataIdx, fListBox);\n            if (isKey) {\n                this.list.focus();\n            }\n            fListBox.listData = listData;\n            fListBox.sortedData = sortData;\n            index = (index) ? index : tListData.length;\n            for (var i = tempItems.length - 1; i >= 0; i--) {\n                tListData.splice(index, 0, tempItems[i]);\n                tJsonData.splice(index, 0, tempItems[i]);\n                tSortData.splice(index, 0, tempItems[i]);\n            }\n            tListBox.listData = tListData;\n            tListBox.jsonData = tJsonData;\n            tListBox.sortedData = tSortData;\n            if (isRefresh) {\n                var sourceElem = tListBox.renderItems(tListData, tListBox.fields);\n                tListBox.updateListItems(sourceElem, tListBox.ulElement);\n                tListBox.setSelection();\n                fListBox.trigger('actionComplete', { items: tempItems, eventName: this.toolbarAction });\n            }\n            fListBox.updateSelectedOptions();\n            if (fListBox.listData.length === 0) {\n                fListBox.l10nUpdate();\n            }\n        }\n        if (fListBox.value.length === 1 && fListBox.getSelectedItems().length) {\n            fListBox.value[0] = fListBox.getFormattedValue(fListBox.getSelectedItems()[0].getAttribute('data-value'));\n        }\n    };\n    ListBox.prototype.selectNextList = function (elems, dataLiIdx, dataIdx, inst) {\n        var childCnt = inst.ulElement.querySelectorAll('.e-list-item').length;\n        var ele;\n        var liIdx;\n        var validIdx = -1;\n        if (elems.length === 1 && childCnt && !inst.selectionSettings.showCheckbox) {\n            liIdx = childCnt <= dataLiIdx[0] ? childCnt - 1 : dataLiIdx[0];\n            ele = inst.ulElement.querySelectorAll('.e-list-item')[liIdx];\n            validIdx = inst.getValidIndex(ele, liIdx, childCnt === dataIdx[0] ? 38 : 40);\n            if (validIdx > -1) {\n                (inst.ulElement.querySelectorAll('.e-list-item')[validIdx].classList.add(cssClass.selected));\n            }\n        }\n    };\n    ListBox.prototype.moveAllItemTo = function () {\n        this.moveAllData(this, this.getScopedListBox());\n    };\n    ListBox.prototype.moveAllItemFrom = function () {\n        this.moveAllData(this.getScopedListBox(), this);\n    };\n    ListBox.prototype.moveAllData = function (fListBox, tListBox, isKey, index) {\n        var listData = [].slice.call(tListBox.listData);\n        var jsonData = [].slice.call(tListBox.jsonData);\n        var isRefresh = tListBox.sortOrder !== 'None' || (tListBox.selectionSettings.showCheckbox !==\n            fListBox.selectionSettings.showCheckbox) || tListBox.fields.groupBy || tListBox.itemTemplate || fListBox.itemTemplate;\n        this.removeSelected(fListBox, fListBox.getSelectedItems());\n        var tempItems = [].slice.call(fListBox.listData);\n        var localDataArgs = { cancel: false, items: tempItems, eventName: this.toolbarAction };\n        fListBox.trigger('actionBegin', localDataArgs);\n        if (localDataArgs.cancel) {\n            return;\n        }\n        if (tListBox.listData.length === 0) {\n            var noRecElem = tListBox.ulElement.childNodes[0];\n            if (noRecElem) {\n                tListBox.ulElement.removeChild(noRecElem);\n            }\n        }\n        if (isRefresh) {\n            var noRecElem = fListBox.ulElement.childNodes[0];\n            if (noRecElem) {\n                fListBox.ulElement.removeChild(noRecElem);\n            }\n        }\n        moveTo(fListBox.ulElement, tListBox.ulElement, \n        // eslint-disable-next-line prefer-spread\n        Array.apply(null, { length: fListBox.ulElement.childElementCount }).map(Number.call, Number), index);\n        this.trigger('actionComplete', { items: tempItems, eventName: this.toolbarAction });\n        if (isKey) {\n            this.list.focus();\n        }\n        index = (index) ? index : listData.length;\n        for (var i = 0; i < fListBox.listData.length; i++) {\n            listData.splice(index + i, 0, fListBox.listData[i]);\n        }\n        for (var i = 0; i < fListBox.jsonData.length; i++) {\n            jsonData.splice(index + i, 0, fListBox.jsonData[i]);\n        }\n        var fliCollections = [].slice.call(fListBox.liCollections);\n        var tliCollections = [].slice.call(tListBox.liCollections);\n        fListBox.liCollections = [];\n        if (index) {\n            var toColl = tliCollections.splice(0, index);\n            tListBox.liCollections = toColl.concat(fliCollections).concat(tliCollections);\n        }\n        else {\n            tListBox.liCollections = tliCollections.concat(fliCollections);\n        }\n        fListBox.value = [];\n        listData = listData\n            .filter(function (data) { return data.isHeader !== true; });\n        var sortedData = listData.filter(function (val) {\n            return tListBox.jsonData.indexOf(val) === -1;\n        });\n        for (var i = 0; i < sortedData.length; i++) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            tListBox.jsonData.splice(index + i, 0, sortedData[i]);\n        }\n        tListBox.listData = listData;\n        if (fListBox.listData.length === fListBox.jsonData.length) {\n            fListBox.listData = fListBox.sortedData = fListBox.jsonData = [];\n        }\n        else if (fListBox.allowFiltering) {\n            for (var i = 0; i < fListBox.listData.length; i++) {\n                for (var j = 0; j < fListBox.jsonData.length; j++) {\n                    if (fListBox.listData[i] === fListBox.jsonData[j]) {\n                        fListBox.jsonData.splice(j, 1);\n                    }\n                }\n            }\n            fListBox.listData = fListBox.sortedData = [];\n        }\n        if (isRefresh) {\n            var sourceElem = tListBox.renderItems(listData, tListBox.fields);\n            tListBox.updateListItems(sourceElem, tListBox.ulElement);\n            this.trigger('actionComplete', { items: tempItems, eventName: this.toolbarAction });\n        }\n        else {\n            tListBox.sortedData = listData;\n        }\n        fListBox.updateSelectedOptions();\n        if (fListBox.listData.length === 0) {\n            fListBox.l10nUpdate();\n        }\n    };\n    ListBox.prototype.changeData = function (fromIdx, toIdx, jsonToIdx, ele) {\n        var listData = [].slice.call(this.listData);\n        var jsonData = [].slice.call(this.jsonData);\n        var sortData = [].slice.call(this.sortedData);\n        var jsonIdx = Array.prototype.indexOf.call(this.jsonData, this.getDataByElems([ele])[0]);\n        var sortIdx = Array.prototype.indexOf.call(this.sortedData, this.getDataByElems([ele])[0]);\n        var liColl = [].slice.call(this.liCollections);\n        listData.splice(toIdx, 0, listData.splice(fromIdx, 1)[0]);\n        jsonData.splice(jsonToIdx, 0, jsonData.splice(jsonIdx, 1)[0]);\n        sortData.splice(toIdx, 0, sortData.splice(sortIdx, 1)[0]);\n        liColl.splice(toIdx, 0, liColl.splice(fromIdx, 1)[0]);\n        this.listData = listData;\n        this.jsonData = jsonData;\n        this.liCollections = liColl;\n        this.sortedData = sortData;\n    };\n    ListBox.prototype.getSelectedItems = function () {\n        var ele = [];\n        if (this.selectionSettings.showCheckbox) {\n            [].slice.call(this.ulElement.getElementsByClassName('e-check')).forEach(function (cbox) {\n                ele.push(closest(cbox, '.' + 'e-list-item'));\n            });\n        }\n        else {\n            ele = [].slice.call(this.ulElement.getElementsByClassName(cssClass.selected));\n        }\n        return ele;\n    };\n    ListBox.prototype.getScopedListBox = function () {\n        var _this = this;\n        var listObj;\n        if (this.scope) {\n            [].slice.call(document.querySelectorAll(this.scope)).forEach(function (ele) {\n                if (getComponent(ele, _this.getModuleName())) {\n                    listObj = getComponent(ele, _this.getModuleName());\n                }\n            });\n        }\n        return listObj;\n    };\n    ListBox.prototype.getGrabbedItems = function (args) {\n        var grabbItems = false;\n        for (var i = 0; i < this.value.length; i++) {\n            if (this.value[i] === this.getFormattedValue(args.target.getAttribute('data-value'))) {\n                grabbItems = true;\n                break;\n            }\n        }\n        if (grabbItems) {\n            for (var i = 0; i < this.value.length; i++) {\n                var liColl = this.list.querySelectorAll('[aria-selected=\"true\"]');\n                for (var j = 0; j < liColl.length; j++) {\n                    if (this.value[i] === this.getFormattedValue(liColl[j].getAttribute('data-value'))) {\n                        liColl[j].classList.add('e-grabbed');\n                    }\n                }\n            }\n        }\n        var elems;\n        if (this.isAngular) {\n            elems = Array.prototype.slice.call(this.element.getElementsByClassName('e-list-parent')[0].querySelectorAll('.e-grabbed'));\n        }\n        else {\n            elems = Array.prototype.slice.call(this.element.nextElementSibling.querySelectorAll('.e-grabbed'));\n        }\n        return elems;\n    };\n    ListBox.prototype.getDragArgs = function (args, isDragEnd) {\n        var elems = this.getGrabbedItems(args);\n        if (elems.length) {\n            if (isDragEnd) {\n                elems.push(args.target);\n            }\n        }\n        else {\n            elems = [args.target];\n        }\n        return { elements: elems, items: this.getDataByElems(elems) };\n    };\n    ListBox.prototype.onKeyDown = function (e) {\n        this.keyDownHandler(e);\n        e.stopPropagation();\n    };\n    ListBox.prototype.keyDownHandler = function (e) {\n        if ([32, 35, 36, 37, 38, 39, 40, 65].indexOf(e.keyCode) > -1 && (!this.allowFiltering ||\n            (this.allowFiltering && e.target !== this.filterInput))) {\n            if (e.target && e.target.className.indexOf('e-edit-template') > -1) {\n                return;\n            }\n            e.preventDefault();\n            if (e.keyCode === 32 && this.ulElement.children.length) {\n                this.selectHandler({\n                    target: this.ulElement.getElementsByClassName('e-focused')[0],\n                    ctrlKey: e.ctrlKey, shiftKey: e.shiftKey\n                });\n            }\n            else if (e.keyCode === 65 && e.ctrlKey) {\n                this.selectAll();\n            }\n            else if ((e.keyCode === 38 || e.keyCode === 40) && e.ctrlKey && e.shiftKey) {\n                this.moveUpDown(e.keyCode === 38 ? true : false, true);\n            }\n            else if ((this.toolbarSettings.items.length || this.tBListBox) && (e.keyCode === 39 || e.keyCode === 37) && e.ctrlKey) {\n                var listObj = this.tBListBox || this.getScopedListBox();\n                if (e.keyCode === 39) {\n                    if (e.shiftKey) {\n                        this.moveAllData(this, listObj, true);\n                    }\n                    else {\n                        this.moveData(this, listObj, true);\n                    }\n                }\n                else {\n                    if (e.shiftKey) {\n                        this.moveAllData(listObj, this, true);\n                    }\n                    else {\n                        this.moveData(listObj, this, true);\n                    }\n                }\n            }\n            else if (e.keyCode !== 37 && e.keyCode !== 39 && e.code !== 'KeyA') {\n                this.upDownKeyHandler(e);\n            }\n        }\n        else if (this.allowFiltering) {\n            if (e.keyCode === 40 || e.keyCode === 38) {\n                this.upDownKeyHandler(e);\n            }\n        }\n    };\n    ListBox.prototype.upDownKeyHandler = function (e) {\n        var ul = this.ulElement;\n        var defaultIdx = (e.keyCode === 40 || e.keyCode === 36) ? 0 : ul.childElementCount - 1;\n        var fliIdx = defaultIdx;\n        var fli = ul.getElementsByClassName('e-focused')[0] || ul.getElementsByClassName(cssClass.selected)[0];\n        if (fli) {\n            if (e.keyCode !== 35 && e.keyCode !== 36) {\n                fliIdx = Array.prototype.indexOf.call(ul.children, fli);\n                if (e.keyCode === 40) {\n                    fliIdx++;\n                }\n                else {\n                    fliIdx--;\n                }\n                if (fliIdx < 0 || fliIdx > ul.childElementCount - 1) {\n                    return;\n                }\n            }\n            removeClass([fli], 'e-focused');\n        }\n        var cli = ul.children[fliIdx];\n        if (cli) {\n            fliIdx = this.getValidIndex(cli, fliIdx, e.keyCode);\n            if (fliIdx === -1) {\n                addClass([fli], 'e-focused');\n                return;\n            }\n            ul.children[fliIdx].focus();\n            ul.children[fliIdx].classList.add('e-focused');\n            if (!e.ctrlKey || !this.selectionSettings.showCheckbox && e.shiftKey && (e.keyCode === 36 || e.keyCode === 35)) {\n                this.selectHandler({ target: ul.children[fliIdx], ctrlKey: e.ctrlKey, shiftKey: e.shiftKey }, true);\n            }\n            if (this.selectionSettings.showCheckbox && e.ctrlKey && e.shiftKey && (e.keyCode === 36 || e.keyCode === 35)) {\n                var selectedidx = Array.prototype.indexOf.call(ul.children, fli);\n                var sidx = e.code === 'Home' ? 0 : selectedidx;\n                var eidx = e.code === 'Home' ? selectedidx : ul.children.length - 1;\n                for (var i = sidx; i <= eidx; i++) {\n                    var item = ul.children[i];\n                    this.notify('updatelist', { li: item, e: {\n                            target: this.ulElement.getElementsByClassName('e-focused')[0],\n                            ctrlKey: e.ctrlKey, shiftKey: e.shiftKey\n                        }, module: 'listbox' });\n                }\n            }\n        }\n    };\n    ListBox.prototype.KeyUp = function (e) {\n        var _this = this;\n        if (this.allowFiltering && e.ctrlKey && e.keyCode === 65) {\n            e.preventDefault();\n            return;\n        }\n        var char = String.fromCharCode(e.keyCode);\n        var isWordCharacter = char.match(/\\w/);\n        if (!isNullOrUndefined(isWordCharacter)) {\n            this.isValidKey = true;\n        }\n        this.isValidKey = (e.keyCode === 8) || (e.keyCode === 46) || this.isValidKey;\n        if (this.isValidKey) {\n            this.isValidKey = false;\n            switch (e.keyCode) {\n                default:\n                    if (this.allowFiltering) {\n                        var eventArgsData_1 = {\n                            preventDefaultAction: false,\n                            text: this.targetElement(),\n                            updateData: function (dataSource, query, fields) {\n                                if (eventArgsData_1.cancel) {\n                                    return;\n                                }\n                                _this.isFiltered = true;\n                                _this.remoteFilterAction = true;\n                                _this.dataUpdater(dataSource, query, fields);\n                            },\n                            event: e,\n                            cancel: false\n                        };\n                        this.trigger('filtering', eventArgsData_1, function (args) {\n                            _this.isDataFetched = false;\n                            if (args.cancel || (_this.filterInput.value !== '' && _this.isFiltered)) {\n                                return;\n                            }\n                            if (!args.cancel && !_this.isCustomFiltering && !args.preventDefaultAction) {\n                                _this.inputString = _this.filterInput.value;\n                                _this.filteringAction(_this.jsonData, new Query(), _this.fields);\n                            }\n                            if (!_this.isFiltered && !_this.isCustomFiltering && !args.preventDefaultAction) {\n                                _this.dataUpdater(_this.jsonData, new Query(), _this.fields);\n                            }\n                        });\n                    }\n            }\n        }\n    };\n    /**\n     * To filter the data from given data source by using query.\n     *\n     * @param  {Object[] | DataManager } dataSource - Set the data source to filter.\n     * @param  {Query} query - Specify the query to filter the data.\n     * @param  {FieldSettingsModel} fields - Specify the fields to map the column in the data table.\n     * @returns {void}.\n     */\n    ListBox.prototype.filter = function (dataSource, query, fields) {\n        this.isCustomFiltering = true;\n        this.filteringAction(dataSource, query, fields);\n    };\n    ListBox.prototype.filteringAction = function (dataSource, query, fields) {\n        this.resetList(dataSource, fields, query);\n    };\n    ListBox.prototype.targetElement = function () {\n        this.targetInputElement = this.list.getElementsByClassName('e-input-filter')[0];\n        return this.targetInputElement.value;\n    };\n    ListBox.prototype.dataUpdater = function (dataSource, query, fields) {\n        this.isDataFetched = false;\n        var backCommand = true;\n        if (this.targetElement().trim() === '') {\n            var list = this.mainList.cloneNode ? this.mainList.cloneNode(true) : this.mainList;\n            if (backCommand) {\n                this.remoteCustomValue = false;\n                if (this.isAngular && this.itemTemplate) {\n                    list = this.renderItems(this.listData, fields);\n                }\n                this.onActionComplete(list, this.jsonData);\n                this.notify('reOrder', { module: 'CheckBoxSelection', enable: this.selectionSettings.showCheckbox, e: this });\n            }\n        }\n        else {\n            this.resetList(dataSource, fields, query);\n        }\n    };\n    ListBox.prototype.focusOutHandler = function () {\n        var ele = this.list.getElementsByClassName('e-focused')[0];\n        if (ele) {\n            ele.classList.remove('e-focused');\n        }\n        if (this.allowFiltering) {\n            this.refreshClearIcon();\n        }\n    };\n    ListBox.prototype.getValidIndex = function (cli, index, keyCode) {\n        var cul = this.ulElement;\n        if (cli.classList.contains('e-disabled') || cli.classList.contains(cssClass.group)) {\n            if (keyCode === 40 || keyCode === 36) {\n                index++;\n            }\n            else {\n                index--;\n            }\n        }\n        if (index < 0 || index === cul.childElementCount) {\n            return -1;\n        }\n        cli = cul.childNodes[index];\n        if (cli.classList.contains('e-disabled') || cli.classList.contains(cssClass.group)) {\n            index = this.getValidIndex(cli, index, keyCode);\n        }\n        return index;\n    };\n    ListBox.prototype.updateSelectedOptions = function () {\n        var _this = this;\n        var selectedOptions = [];\n        var values = [];\n        extend(values, this.value);\n        this.getSelectedItems().forEach(function (ele) {\n            if (!ele.classList.contains('e-grabbed')) {\n                selectedOptions.push(_this.getFormattedValue(ele.getAttribute('data-value')));\n            }\n        });\n        if (this.mainList.childElementCount === this.ulElement.childElementCount) {\n            if (this.allowFiltering && this.selectionSettings.showCheckbox) {\n                for (var i = 0; i < selectedOptions.length; i++) {\n                    if (values.indexOf(selectedOptions[i]) > -1) {\n                        continue;\n                    }\n                    else {\n                        values.push(selectedOptions[i]);\n                    }\n                }\n                this.setProperties({ value: values }, true);\n            }\n            else {\n                this.setProperties({ value: selectedOptions }, true);\n            }\n        }\n        this.updateSelectTag();\n        this.updateToolBarState();\n        if (this.tBListBox) {\n            this.tBListBox.updateToolBarState();\n        }\n    };\n    ListBox.prototype.clearSelection = function (values) {\n        var _this = this;\n        if (values === void 0) { values = this.value; }\n        if (this.selectionSettings.showCheckbox) {\n            var dvalue_1;\n            this.getSelectedItems().forEach(function (li) {\n                dvalue_1 = _this.getFormattedValue(li.getAttribute('data-value'));\n                if (values.indexOf(dvalue_1) < 0) {\n                    li.getElementsByClassName('e-check')[0].classList.remove('e-check');\n                    li.removeAttribute('aria-selected');\n                }\n            });\n        }\n    };\n    ListBox.prototype.setSelection = function (values, isSelect, isText) {\n        var _this = this;\n        if (values === void 0) { values = this.value; }\n        if (isSelect === void 0) { isSelect = true; }\n        if (isText === void 0) { isText = false; }\n        var li;\n        var liselect;\n        if (values) {\n            values.forEach(function (value) {\n                var text;\n                if (isText) {\n                    text = _this.getValueByText(value);\n                }\n                else {\n                    text = value;\n                }\n                if (typeof (text) === 'string') {\n                    text = text.split('\\\\').join('\\\\\\\\');\n                    li = _this.list.querySelector('[data-value=\"' + text.replace(/\"/g, '\\\\\"') + '\"]');\n                }\n                else {\n                    li = _this.list.querySelector('[data-value=\"' + text + '\"]');\n                }\n                if (li) {\n                    if (_this.selectionSettings.showCheckbox) {\n                        liselect = li.getElementsByClassName('e-frame')[0].classList.contains('e-check');\n                    }\n                    else {\n                        liselect = li.classList.contains('e-selected');\n                    }\n                    if (!isSelect && liselect || isSelect && !liselect && li) {\n                        if (_this.selectionSettings.showCheckbox) {\n                            _this.notify('updatelist', { li: li, module: 'listbox' });\n                            li.focus();\n                        }\n                        else {\n                            if (isSelect) {\n                                li.classList.add(cssClass.selected);\n                                li.setAttribute('aria-selected', 'true');\n                                li.focus();\n                            }\n                            else {\n                                li.classList.remove(cssClass.selected);\n                                li.removeAttribute('aria-selected');\n                            }\n                        }\n                    }\n                }\n            });\n        }\n        this.updateSelectTag();\n    };\n    ListBox.prototype.updateSelectTag = function () {\n        var ele = this.getSelectTag();\n        var innerHTML = '';\n        ele.innerHTML = '';\n        if (this.value) {\n            for (var i = 0, len = this.value.length; i < len; i++) {\n                innerHTML += '<option selected>' + this.value[i] + '</option>';\n            }\n            ele.innerHTML += innerHTML;\n            for (var i = 0, len = ele.childNodes.length; i < len; i++) {\n                ele.childNodes[i].setAttribute('value', this.value[i].toString());\n            }\n        }\n        this.checkSelectAll();\n    };\n    ListBox.prototype.checkDisabledState = function (inst) {\n        return inst.ulElement.querySelectorAll('.' + cssClass.li).length === 0;\n    };\n    ListBox.prototype.updateToolBarState = function () {\n        var _this = this;\n        if (this.toolbarSettings.items.length) {\n            var listObj_1 = this.getScopedListBox();\n            var wrap_1 = this.list.parentElement.getElementsByClassName('e-listbox-tool')[0];\n            this.toolbarSettings.items.forEach(function (value) {\n                var btn = wrap_1.querySelector('[data-value=\"' + value + '\"]');\n                switch (value) {\n                    case 'moveAllTo':\n                        btn.disabled = _this.checkDisabledState(_this);\n                        break;\n                    case 'moveAllFrom':\n                        btn.disabled = _this.checkDisabledState(listObj_1);\n                        break;\n                    case 'moveFrom':\n                        btn.disabled = listObj_1.value && listObj_1.value.length ? false : true;\n                        break;\n                    case 'moveUp':\n                        btn.disabled = _this.value && _this.value.length\n                            && !_this.isSelected(_this.ulElement.children[0]) ? false : true;\n                        break;\n                    case 'moveDown':\n                        btn.disabled = _this.value && _this.value.length\n                            && !_this.isSelected(_this.ulElement.children[_this.ulElement.childElementCount - 1]) ? false : true;\n                        break;\n                    default:\n                        btn.disabled = _this.value && _this.value.length ? false : true;\n                        break;\n                }\n            });\n        }\n    };\n    ListBox.prototype.setCheckboxPosition = function () {\n        var listWrap = this.list;\n        if (!this.initLoad && this.selectionSettings.checkboxPosition === 'Left') {\n            listWrap.classList.remove('e-right');\n        }\n        if (this.selectionSettings.checkboxPosition === 'Right') {\n            listWrap.classList.add('e-right');\n        }\n    };\n    ListBox.prototype.showCheckbox = function (showCheckbox) {\n        var index = 0;\n        var liColl = this.list.lastElementChild.querySelectorAll('li');\n        var liCollLen = this.list.lastElementChild.getElementsByClassName('e-list-item').length;\n        if (showCheckbox) {\n            this.ulElement = this.renderItems(this.listData, this.fields);\n            this.mainList = this.ulElement;\n            this.list.removeChild(this.list.getElementsByTagName('ul')[0]);\n            this.list.appendChild(this.ulElement);\n            if (this.selectionSettings.showSelectAll && !this.list.getElementsByClassName('e-selectall-parent')[0]) {\n                var l10nShow = new L10n(this.getModuleName(), { selectAllText: 'Select All', unSelectAllText: 'Unselect All' }, this.locale);\n                this.showSelectAll = true;\n                this.selectAllText = l10nShow.getConstant('selectAllText');\n                this.unSelectAllText = l10nShow.getConstant('unSelectAllText');\n                this.popupWrapper = this.list;\n                this.checkBoxSelectionModule.checkAllParent = null;\n                this.notify('selectAll', {});\n                this.checkSelectAll();\n            }\n        }\n        else {\n            if (this.list.getElementsByClassName('e-selectall-parent')[0]) {\n                this.list.removeChild(this.list.getElementsByClassName('e-selectall-parent')[0]);\n            }\n            for (index; index < liCollLen; index++) {\n                if (liColl[index].classList.contains('e-list-item')) {\n                    liColl[index].removeChild(liColl[index].getElementsByClassName('e-checkbox-wrapper')[0]);\n                }\n                if (liColl[index].hasAttribute('aria-selected')) {\n                    liColl[index].removeAttribute('aria-selected');\n                }\n            }\n            this.mainList = this.ulElement;\n        }\n        this.value = [];\n    };\n    ListBox.prototype.isSelected = function (ele) {\n        if (!isNullOrUndefined(ele)) {\n            return ele.classList.contains(cssClass.selected) || ele.querySelector('.e-check') !== null;\n        }\n        else {\n            return false;\n        }\n    };\n    ListBox.prototype.getSelectTag = function () {\n        return this.list.getElementsByClassName('e-hidden-select')[0];\n    };\n    ListBox.prototype.getToolElem = function () {\n        return this.list.parentElement.getElementsByClassName('e-listbox-tool')[0];\n    };\n    ListBox.prototype.formResetHandler = function () {\n        this.value = this.initialSelectedOptions;\n    };\n    /**\n     * Return the module name.\n     *\n     * @private\n     * @returns {string} - Module name\n     */\n    ListBox.prototype.getModuleName = function () {\n        return 'listbox';\n    };\n    /**\n     * Get the properties to be maintained in the persisted state.\n     *\n     * @returns {string} - Persist data\n     */\n    ListBox.prototype.getPersistData = function () {\n        return this.addOnPersist(['value']);\n    };\n    ListBox.prototype.getLocaleName = function () {\n        return 'listbox';\n    };\n    ListBox.prototype.destroy = function () {\n        this.unwireEvents();\n        if (this.element.tagName === 'EJS-LISTBOX') {\n            this.element.innerHTML = '';\n        }\n        else {\n            this.element.style.display = 'inline-block';\n            if (this.toolbarSettings.items.length) {\n                this.list.parentElement.parentElement.insertBefore(this.list, this.list.parentElement);\n                detach(this.list.nextElementSibling);\n            }\n            this.list.parentElement.insertBefore(this.element, this.list);\n        }\n        _super.prototype.destroy.call(this);\n        this.enableRtlElements = [];\n        this.liCollections = null;\n        this.list = null;\n        this.ulElement = null;\n        this.mainList = null;\n        this.spinner = null;\n        this.rippleFun = null;\n        if (this.itemTemplate) {\n            this.clearTemplate();\n        }\n    };\n    /**\n     * Called internally if any of the property value changed.\n     *\n     * @param {ListBoxModel} newProp - Specifies the new properties.\n     * @param {ListBoxModel} oldProp - Specifies the old properties.\n     * @returns {void}\n     * @private\n     */\n    ListBox.prototype.onPropertyChanged = function (newProp, oldProp) {\n        var wrap = this.toolbarSettings.items.length ? this.list.parentElement : this.list;\n        _super.prototype.onPropertyChanged.call(this, newProp, oldProp);\n        this.setUpdateInitial(['fields', 'query', 'dataSource'], newProp);\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'cssClass':\n                    if (oldProp.cssClass) {\n                        removeClass([wrap], oldProp.cssClass.split(' '));\n                    }\n                    if (newProp.cssClass) {\n                        addClass([wrap], newProp.cssClass.replace(/\\s+/g, ' ').trim().split(' '));\n                    }\n                    break;\n                case 'enableRtl':\n                    if (newProp.enableRtl) {\n                        this.list.classList.add('e-rtl');\n                    }\n                    else {\n                        this.list.classList.remove('e-rtl');\n                    }\n                    break;\n                case 'value':\n                    removeClass(this.list.querySelectorAll('.' + cssClass.selected), cssClass.selected);\n                    this.clearSelection(this.value);\n                    this.setSelection();\n                    break;\n                case 'height':\n                    this.setHeight();\n                    break;\n                case 'enabled':\n                    this.setEnable();\n                    break;\n                case 'allowDragAndDrop':\n                    if (newProp.allowDragAndDrop) {\n                        this.initDraggable();\n                    }\n                    else {\n                        getComponent(this.ulElement, 'sortable').destroy();\n                    }\n                    break;\n                case 'allowFiltering':\n                    if (this.allowFiltering) {\n                        this.setFiltering();\n                    }\n                    else {\n                        this.list.removeChild(this.list.getElementsByClassName('e-filter-parent')[0]);\n                        this.filterParent = null;\n                        removeClass([this.list], 'e-filter-list');\n                    }\n                    break;\n                case 'filterBarPlaceholder':\n                    if (this.allowFiltering) {\n                        if (this.filterInput) {\n                            Input.setPlaceholder(newProp.filterBarPlaceholder, this.filterInput);\n                        }\n                    }\n                    break;\n                case 'scope':\n                    if (this.allowDragAndDrop) {\n                        getComponent(this.ulElement, 'sortable').scope = newProp.scope;\n                    }\n                    if (this.toolbarSettings.items.length) {\n                        if (oldProp.scope) {\n                            getComponent(document.querySelector(oldProp.scope), this.getModuleName())\n                                .tBListBox = null;\n                        }\n                        if (newProp.scope) {\n                            getComponent(document.querySelector(newProp.scope), this.getModuleName())\n                                .tBListBox = this;\n                        }\n                    }\n                    break;\n                case 'toolbarSettings': {\n                    var ele = void 0;\n                    var pos = newProp.toolbarSettings.position;\n                    var toolElem = this.getToolElem();\n                    if (pos) {\n                        removeClass([wrap], ['e-right', 'e-left']);\n                        wrap.classList.add('e-' + pos.toLowerCase());\n                        if (pos === 'Left') {\n                            wrap.insertBefore(toolElem, this.list);\n                        }\n                        else {\n                            wrap.appendChild(toolElem);\n                        }\n                    }\n                    if (newProp.toolbarSettings.items) {\n                        if (oldProp.toolbarSettings && oldProp.toolbarSettings.items.length) {\n                            ele = this.list.parentElement;\n                            ele.parentElement.insertBefore(this.list, ele);\n                            detach(ele);\n                        }\n                        this.initToolbarAndStyles();\n                        this.wireToolbarEvent();\n                    }\n                    break;\n                }\n                case 'selectionSettings': {\n                    var showSelectAll = newProp.selectionSettings.showSelectAll;\n                    var showCheckbox = newProp.selectionSettings.showCheckbox;\n                    if (!isNullOrUndefined(showSelectAll)) {\n                        this.showSelectAll = showSelectAll;\n                        if (this.showSelectAll) {\n                            var l10nSel = new L10n(this.getModuleName(), { selectAllText: 'Select All', unSelectAllText: 'Unselect All' }, this.locale);\n                            this.checkBoxSelectionModule.checkAllParent = null;\n                            this.showSelectAll = true;\n                            this.selectAllText = l10nSel.getConstant('selectAllText');\n                            this.unSelectAllText = l10nSel.getConstant('selectAllText');\n                            this.popupWrapper = this.list;\n                        }\n                        this.notify('selectAll', {});\n                        this.checkSelectAll();\n                    }\n                    if (!isNullOrUndefined(showCheckbox)) {\n                        this.showCheckbox(showCheckbox);\n                    }\n                    if (this.selectionSettings.showCheckbox) {\n                        this.setCheckboxPosition();\n                    }\n                    break;\n                }\n                case 'dataSource':\n                    this.isDataSourceUpdate = true;\n                    this.jsonData = [].slice.call(this.dataSource);\n                    break;\n            }\n        }\n    };\n    var ListBox_1;\n    __decorate$6([\n        Property('')\n    ], ListBox.prototype, \"cssClass\", void 0);\n    __decorate$6([\n        Property([])\n    ], ListBox.prototype, \"value\", void 0);\n    __decorate$6([\n        Property('')\n    ], ListBox.prototype, \"height\", void 0);\n    __decorate$6([\n        Property(true)\n    ], ListBox.prototype, \"enabled\", void 0);\n    __decorate$6([\n        Property(false)\n    ], ListBox.prototype, \"enablePersistence\", void 0);\n    __decorate$6([\n        Property(false)\n    ], ListBox.prototype, \"allowDragAndDrop\", void 0);\n    __decorate$6([\n        Property(1000)\n    ], ListBox.prototype, \"maximumSelectionLength\", void 0);\n    __decorate$6([\n        Property(false)\n    ], ListBox.prototype, \"allowFiltering\", void 0);\n    __decorate$6([\n        Property('')\n    ], ListBox.prototype, \"scope\", void 0);\n    __decorate$6([\n        Property(true)\n    ], ListBox.prototype, \"ignoreCase\", void 0);\n    __decorate$6([\n        Property(null)\n    ], ListBox.prototype, \"filterBarPlaceholder\", void 0);\n    __decorate$6([\n        Event()\n    ], ListBox.prototype, \"beforeItemRender\", void 0);\n    __decorate$6([\n        Event()\n    ], ListBox.prototype, \"filtering\", void 0);\n    __decorate$6([\n        Event()\n    ], ListBox.prototype, \"select\", void 0);\n    __decorate$6([\n        Event()\n    ], ListBox.prototype, \"change\", void 0);\n    __decorate$6([\n        Event()\n    ], ListBox.prototype, \"beforeDrop\", void 0);\n    __decorate$6([\n        Event()\n    ], ListBox.prototype, \"dragStart\", void 0);\n    __decorate$6([\n        Event()\n    ], ListBox.prototype, \"drag\", void 0);\n    __decorate$6([\n        Event()\n    ], ListBox.prototype, \"drop\", void 0);\n    __decorate$6([\n        Event()\n    ], ListBox.prototype, \"dataBound\", void 0);\n    __decorate$6([\n        Property(null)\n    ], ListBox.prototype, \"groupTemplate\", void 0);\n    __decorate$6([\n        Property('Request failed')\n    ], ListBox.prototype, \"actionFailureTemplate\", void 0);\n    __decorate$6([\n        Property(1000)\n    ], ListBox.prototype, \"zIndex\", void 0);\n    __decorate$6([\n        Property(false)\n    ], ListBox.prototype, \"ignoreAccent\", void 0);\n    __decorate$6([\n        Complex({}, ToolbarSettings)\n    ], ListBox.prototype, \"toolbarSettings\", void 0);\n    __decorate$6([\n        Complex({}, SelectionSettings)\n    ], ListBox.prototype, \"selectionSettings\", void 0);\n    ListBox = ListBox_1 = __decorate$6([\n        NotifyPropertyChanges\n    ], ListBox);\n    return ListBox;\n}(DropDownBase));\nvar listBoxClasses = {\n    backIcon: 'e-input-group-icon e-back-icon e-icons',\n    filterBarClearIcon: 'e-input-group-icon e-clear-icon e-icons',\n    filterInput: 'e-input-filter',\n    filterParent: 'e-filter-parent',\n    clearIcon: 'e-clear-icon'\n};\n\n/**\n * export all modules from current location\n */\n\nvar __extends$7 = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate$7 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/**\n * The Mention component is used to list someone or something based on user input in textarea, input,\n * or any other editable element from which the user can select.\n */\nvar Mention = /** @__PURE__ @class */ (function (_super) {\n    __extends$7(Mention, _super);\n    /**\n     * * Constructor for creating the widget\n     *\n     * @param {MentionModel} options - Specifies the MentionComponent model.\n     * @param {string | HTMLElement} element - Specifies the element to render as component.\n     * @private\n     */\n    function Mention(options, element) {\n        return _super.call(this, options, element) || this;\n    }\n    /**\n     * When property value changes happened, then onPropertyChanged method will execute the respective changes in this component.\n     *\n     * @param {MentionModel} newProp - Returns the dynamic property value of the component.\n     * @param {MentionModel} oldProp - Returns the previous property value of the component.\n     * @private\n     * @returns {void}\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    Mention.prototype.onPropertyChanged = function (newProp, oldProp) {\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'minLength':\n                    this.minLength = newProp.minLength;\n                    break;\n                case 'suffixText':\n                    this.suffixText = newProp.suffixText;\n                    break;\n                case 'allowSpaces':\n                    this.allowSpaces = newProp.allowSpaces;\n                    break;\n                case 'mentionChar':\n                    this.mentionChar = newProp.mentionChar;\n                    break;\n                case 'showMentionChar':\n                    this.showMentionChar = newProp.showMentionChar;\n                    break;\n                case 'cssClass':\n                    this.updateCssClass(newProp.cssClass, oldProp.cssClass);\n                    break;\n            }\n        }\n    };\n    Mention.prototype.updateCssClass = function (newClass, oldClass) {\n        if (!isNullOrUndefined(oldClass)) {\n            oldClass = (oldClass.replace(/\\s+/g, ' ')).trim();\n        }\n        if (!isNullOrUndefined(newClass)) {\n            newClass = (newClass.replace(/\\s+/g, ' ')).trim();\n        }\n        this.setCssClass(newClass, [this.inputElement], oldClass);\n        if (this.popupObj) {\n            this.setCssClass(newClass, [this.popupObj.element], oldClass);\n        }\n    };\n    Mention.prototype.setCssClass = function (cssClass$$1, elements, oldClass) {\n        if (!isNullOrUndefined(oldClass) && oldClass !== '') {\n            removeClass(elements, oldClass.split(' '));\n        }\n        if (!isNullOrUndefined(cssClass$$1) && cssClass$$1 !== '') {\n            addClass(elements, cssClass$$1.split(' '));\n        }\n    };\n    Mention.prototype.initializeData = function () {\n        this.isSelected = false;\n        this.isFiltered = false;\n        this.beforePopupOpen = false;\n        this.initRemoteRender = false;\n        this.isListResetted = false;\n        this.isPopupOpen = false;\n        this.isCollided = false;\n        this.lineBreak = false;\n        this.keyConfigure = {\n            tab: 'tab',\n            enter: '13',\n            escape: '27',\n            end: '35',\n            home: '36',\n            down: '40',\n            up: '38',\n            pageUp: '33',\n            pageDown: '34',\n            open: 'alt+40',\n            close: 'shift+tab',\n            hide: 'alt+38',\n            space: '32'\n        };\n    };\n    /**\n     * Execute before render the list items\n     *\n     * @private\n     * @returns {void}\n     */\n    Mention.prototype.preRender = function () {\n        this.initializeData();\n        _super.prototype.preRender.call(this);\n    };\n    /**\n     * To Initialize the control rendering\n     *\n     * @private\n     * @returns {void}\n     */\n    Mention.prototype.render = function () {\n        var isSelector = typeof this.target === 'string';\n        this.inputElement = !isNullOrUndefined(this.target) ?\n            this.checkAndUpdateInternalComponent(isSelector\n                ? document.querySelector(this.target)\n                : this.target) : this.element;\n        if (this.isContentEditable(this.inputElement)) {\n            this.inputElement.setAttribute('contenteditable', 'true');\n            addClass([this.inputElement], ['e-mention']);\n            if (isNullOrUndefined(this.target)) {\n                addClass([this.inputElement], ['e-editable-element']);\n            }\n        }\n        this.inputElement.setAttribute('role', 'textbox');\n        this.inputElement.setAttribute('aria-label', 'mention');\n        this.queryString = this.elementValue();\n        this.wireEvent();\n    };\n    Mention.prototype.wireEvent = function () {\n        EventHandler.add(this.inputElement, 'keyup', this.onKeyUp, this);\n        this.bindCommonEvent();\n    };\n    Mention.prototype.unWireEvent = function () {\n        EventHandler.remove(this.inputElement, 'keyup', this.onKeyUp);\n        this.unBindCommonEvent();\n    };\n    Mention.prototype.bindCommonEvent = function () {\n        if (!Browser.isDevice) {\n            this.keyboardModule = new KeyboardEvents(this.inputElement, {\n                keyAction: this.keyActionHandler.bind(this), keyConfigs: this.keyConfigure, eventName: 'keydown'\n            });\n        }\n    };\n    /**\n     * Hides the spinner loader.\n     *\n     * @private\n     * @returns {void}\n     */\n    Mention.prototype.hideSpinner = function () {\n        this.hideWaitingSpinner();\n    };\n    Mention.prototype.hideWaitingSpinner = function () {\n        if (!isNullOrUndefined(this.spinnerElement)) {\n            hideSpinner(this.spinnerElement);\n        }\n        if (!isNullOrUndefined(this.spinnerTemplate) && !isNullOrUndefined(this.spinnerTemplateElement)) {\n            detach(this.spinnerTemplateElement);\n        }\n    };\n    Mention.prototype.checkAndUpdateInternalComponent = function (targetElement) {\n        if (!this.isVue && targetElement.classList.contains('e-richtexteditor')) {\n            return targetElement.querySelector('.e-content');\n        }\n        if (this.isVue && targetElement.nodeName === 'TEXTAREA' && targetElement.classList.contains('e-rte-hidden')) {\n            var parentElement = targetElement.parentElement;\n            if (parentElement && parentElement.classList.contains('e-richtexteditor')) {\n                return parentElement.querySelector('.e-content');\n            }\n        }\n        return targetElement;\n    };\n    /**\n     * Shows the spinner loader.\n     *\n     * @returns {void}\n     */\n    Mention.prototype.showWaitingSpinner = function () {\n        if (!isNullOrUndefined(this.popupObj)) {\n            if (isNullOrUndefined(this.spinnerTemplate) && isNullOrUndefined(this.spinnerElement)) {\n                this.spinnerElement = this.popupObj.element;\n                createSpinner({\n                    target: this.spinnerElement,\n                    width: Browser.isDevice ? '16px' : '14px'\n                }, this.createElement);\n                showSpinner(this.spinnerElement);\n            }\n            if (!isNullOrUndefined(this.spinnerTemplate)) {\n                this.setSpinnerTemplate();\n            }\n        }\n    };\n    Mention.prototype.keyActionHandler = function (e) {\n        var isNavigation = (e.action === 'down' || e.action === 'up' || e.action === 'pageUp' || e.action === 'pageDown'\n            || e.action === 'home' || e.action === 'end');\n        var isTabAction = e.action === 'tab' || e.action === 'close';\n        if (this.list === undefined && !this.isRequested && !isTabAction && e.action !== 'escape' && e.action !== 'space') {\n            this.renderList();\n        }\n        if (isNullOrUndefined(this.list) || (!isNullOrUndefined(this.liCollections) &&\n            isNavigation && this.liCollections.length === 0) || this.isRequested) {\n            return;\n        }\n        if (e.action === 'escape') {\n            e.preventDefault();\n        }\n        this.isSelected = e.action === 'escape' ? false : this.isSelected;\n        switch (e.action) {\n            case 'down':\n            case 'up':\n                this.isUpDownKey = true;\n                this.updateUpDownAction(e);\n                break;\n            case 'tab':\n                if (this.isPopupOpen) {\n                    e.preventDefault();\n                    var li = this.list.querySelector('.' + dropDownBaseClasses.selected);\n                    if (li) {\n                        this.setSelection(li, e);\n                    }\n                    if (this.isPopupOpen) {\n                        this.hidePopup(e);\n                    }\n                }\n                break;\n            case 'enter':\n                if (this.isPopupOpen) {\n                    e.preventDefault();\n                    if (this.popupObj && this.popupObj.element.contains(this.selectedLI)) {\n                        this.updateSelectedItem(this.selectedLI, e, false, true);\n                    }\n                }\n                break;\n            case 'escape':\n                if (this.isPopupOpen) {\n                    this.hidePopup(e);\n                }\n                break;\n        }\n    };\n    Mention.prototype.updateUpDownAction = function (e) {\n        var focusEle = this.list.querySelector('.' + dropDownBaseClasses.focus);\n        if (this.isSelectFocusItem(focusEle)) {\n            this.setSelection(focusEle, e);\n        }\n        else if (!isNullOrUndefined(this.liCollections)) {\n            var li = this.list.querySelector('.' + dropDownBaseClasses.selected);\n            if (!isNullOrUndefined(li)) {\n                var value = this.getFormattedValue(li.getAttribute('data-value'));\n                this.activeIndex = this.getIndexByValue(value);\n            }\n            var index = e.action === 'down' ? this.activeIndex + 1 : this.activeIndex - 1;\n            var startIndex = 0;\n            startIndex = e.action === 'down' && isNullOrUndefined(this.activeIndex) ? 0 : this.liCollections.length - 1;\n            index = index < 0 ? this.liCollections.length - 1 : index === this.liCollections.length ? 0 : index;\n            var nextItem = isNullOrUndefined(this.activeIndex) ?\n                this.liCollections[startIndex] : this.liCollections[index];\n            if (!isNullOrUndefined(nextItem)) {\n                this.setSelection(nextItem, e);\n            }\n        }\n        if (this.isPopupOpen) {\n            e.preventDefault();\n        }\n    };\n    Mention.prototype.isSelectFocusItem = function (element) {\n        return !isNullOrUndefined(element);\n    };\n    Mention.prototype.unBindCommonEvent = function () {\n        if (!Browser.isDevice) {\n            this.keyboardModule.destroy();\n        }\n    };\n    Mention.prototype.onKeyUp = function (e) {\n        var rangetextContent;\n        if (this.isUpDownKey && this.isPopupOpen && e.keyCode === 229) {\n            this.isUpDownKey = false;\n            return;\n        }\n        this.isTyped = e.code !== 'Enter' && e.code !== 'Space' && e.code !== 'ArrowDown' && e.code !== 'ArrowUp' ? true : false;\n        var isRteImage = document.activeElement.parentElement && document.activeElement.parentElement.querySelector('.e-rte-image') ? true : false;\n        if (document.activeElement != this.inputElement && !isRteImage) {\n            this.inputElement.focus();\n        }\n        if (this.isContentEditable(this.inputElement)) {\n            this.range = this.getCurrentRange();\n            rangetextContent = this.range.startContainer.textContent.split('');\n        }\n        var currentRange = this.getTextRange();\n        var lastWordRange = this.getLastLetter(currentRange);\n        var lastTwoLetters = this.mentionChar.toString() + this.mentionChar.toString();\n        // eslint-disable-next-line security/detect-non-literal-regexp\n        var Regex = new RegExp(this.mentionChar.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&'), 'g');\n        var charRegex = new RegExp('[a-zA-Z]', 'g');\n        if (e.key === 'Shift' || e.keyCode === 37 || e.keyCode === 39) {\n            return;\n        }\n        if (this.beforePopupOpen && this.isPopupOpen && lastWordRange == lastTwoLetters) {\n            this.hidePopup();\n            return;\n        }\n        if ((!currentRange || !lastWordRange) || e.code === 'Enter' || e.keyCode === 27 ||\n            (lastWordRange.match(Regex) && lastWordRange.match(Regex).length > 1) ||\n            (this.isContentEditable(this.inputElement) && this.range.startContainer &&\n                this.range.startContainer.previousElementSibling && this.range.startContainer.previousElementSibling.tagName !== 'BR' && this.range.startContainer.textContent.split('').length > 0 &&\n                (rangetextContent.length === 1 || rangetextContent[rangetextContent.length - 2].indexOf('') === -1 ||\n                    this.range.startContainer.nodeType === 1))) {\n            if (this.allowSpaces && currentRange && currentRange.trim() !== '' && charRegex.test(currentRange) && currentRange.indexOf(this.mentionChar) !== -1\n                && !this.isMatchedText() && (currentRange.length > 1 && currentRange.replace(/\\u00A0/g, ' ').charAt(currentRange.length - 2) !== ' ') &&\n                (this.list && this.list.querySelectorAll('ul').length > 0)) {\n                this.queryString = currentRange.substring(currentRange.lastIndexOf(this.mentionChar) + 1).replace('\\u00a0', ' ');\n                this.searchLists(e);\n            }\n            else if (this.isPopupOpen && (!this.allowSpaces || !lastWordRange) && (e.code !== 'ArrowDown' && e.code !== 'ArrowUp')) {\n                this.hidePopup();\n                this.lineBreak = true;\n            }\n            return;\n        }\n        this.queryString = lastWordRange.replace(this.mentionChar, '');\n        if (this.mentionChar.charCodeAt(0) === lastWordRange.charCodeAt(0) &&\n            this.queryString !== '' && e.keyCode !== 38 && e.keyCode !== 40 && !this.lineBreak) {\n            this.searchLists(e);\n            if (!this.isPopupOpen && this.queryString.length >= this.minLength) {\n                if (!this.isContentEditable(this.inputElement)) {\n                    this.showPopup();\n                }\n                else if (this.isContentEditable(this.inputElement) && this.range && this.range.startContainer !== this.inputElement && e.keyCode !== 9) {\n                    this.showPopup();\n                }\n            }\n        }\n        else if (lastWordRange.indexOf(this.mentionChar) === 0 && !this.isPopupOpen && e.keyCode !== 8 && (!this.popupObj ||\n            (isNullOrUndefined(this.target) && !document.body.contains(this.popupObj.element) ||\n                !isNullOrUndefined(this.target) && document.body.contains(this.popupObj.element)))) {\n            if (this.initRemoteRender && this.list && this.list.classList.contains('e-nodata')) {\n                this.searchLists(e);\n            }\n            this.resetList(this.dataSource, this.fields);\n            if (isNullOrUndefined(this.list)) {\n                this.initValue();\n            }\n            if (!this.isPopupOpen && e.keyCode !== 38 && e.keyCode !== 40 && this.queryString.length >= this.minLength) {\n                this.didPopupOpenByTypingInitialChar = true;\n                this.showPopup();\n                if (this.initRemoteRender && this.list.querySelectorAll('li').length === 0) {\n                    this.showWaitingSpinner();\n                }\n                this.lineBreak = false;\n            }\n        }\n        else if (this.allowSpaces && this.queryString !== '' && currentRange && currentRange.trim() !== '' && currentRange.replace('\\u00a0', ' ').lastIndexOf(' ') < currentRange.length - 1 &&\n            e.keyCode !== 38 && e.keyCode !== 40 && e.keyCode !== 8 && this.mentionChar.charCodeAt(0) === lastWordRange.charCodeAt(0)) {\n            this.queryString = currentRange.substring(currentRange.lastIndexOf(this.mentionChar) + 1).replace('\\u00a0', ' ');\n            this.searchLists(e);\n        }\n        else if (this.queryString === '' && this.isPopupOpen && e.keyCode !== 38 && e.keyCode !== 40 && this.mentionChar.charCodeAt(0) === lastWordRange.charCodeAt(0)) {\n            this.searchLists(e);\n            if (!this.isListResetted) {\n                this.resetList(this.dataSource, this.fields);\n            }\n        }\n        this.isListResetted = false;\n    };\n    Mention.prototype.isMatchedText = function () {\n        var isMatched = false;\n        for (var i = 0; i < (this.liCollections && this.liCollections.length); i++) {\n            if (this.getTextRange() &&\n                this.getTextRange().substring(this.getTextRange().lastIndexOf(this.mentionChar) + 1).replace('\\u00a0', ' ').trim() === this.liCollections[i].getAttribute('data-value').toLowerCase()) {\n                isMatched = true;\n            }\n        }\n        return isMatched;\n    };\n    Mention.prototype.getCurrentRange = function () {\n        this.range = this.inputElement.ownerDocument.getSelection().getRangeAt(0);\n        return this.range;\n    };\n    Mention.prototype.searchLists = function (e) {\n        var _this = this;\n        this.isDataFetched = false;\n        if (isNullOrUndefined(this.list)) {\n            _super.prototype.render.call(this);\n            this.unWireListEvents();\n            this.wireListEvents();\n        }\n        if (e.type !== 'mousedown' && (e.keyCode === 40 || e.keyCode === 38)) {\n            this.queryString = this.queryString === '' ? null : this.queryString;\n            this.beforePopupOpen = true;\n            this.resetList(this.dataSource, this.fields);\n            return;\n        }\n        this.isSelected = false;\n        this.activeIndex = null;\n        var eventArgs = {\n            preventDefaultAction: false,\n            text: this.queryString,\n            updateData: function (dataSource, query, fields) {\n                if (eventArgs.cancel) {\n                    return;\n                }\n                _this.isFiltered = true;\n                _this.filterAction(dataSource, query, fields);\n            },\n            cancel: false\n        };\n        this.trigger('filtering', eventArgs, function (eventArgs) {\n            if (!eventArgs.cancel && !_this.isFiltered && !eventArgs.preventDefaultAction) {\n                _this.filterAction(_this.dataSource, null, _this.fields);\n            }\n        });\n    };\n    Mention.prototype.filterAction = function (dataSource, query, fields) {\n        this.beforePopupOpen = true;\n        if (this.queryString.length >= this.minLength) {\n            this.resetList(dataSource, fields, query);\n            this.isListResetted = true;\n        }\n        else {\n            if (this.isPopupOpen) {\n                this.hidePopup();\n            }\n            this.beforePopupOpen = false;\n        }\n        this.setDataIndex();\n        this.renderReactTemplates();\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    Mention.prototype.onActionComplete = function (ulElement, list, e, isUpdated) {\n        _super.prototype.onActionComplete.call(this, ulElement, list, e);\n        if (this.isActive) {\n            if (!isNullOrUndefined(ulElement)) {\n                attributes(ulElement, { 'id': this.inputElement.id + '_options', 'role': 'listbox', 'aria-hidden': 'false' });\n            }\n            var focusItem = ulElement.querySelector('.' + dropDownBaseClasses.li);\n            if (focusItem) {\n                focusItem.classList.add(dropDownBaseClasses.selected);\n                this.selectedLI = focusItem;\n                var value = this.getFormattedValue(focusItem.getAttribute('data-value'));\n                this.selectEventCallback(focusItem, this.getDataByValue(value), value, true);\n            }\n            if (this.beforePopupOpen && this.isPopupOpen) {\n                if (!isNullOrUndefined(this.popupObj.element)) {\n                    this.popupObj.element.remove();\n                }\n                this.renderPopup();\n            }\n        }\n    };\n    Mention.prototype.setDataIndex = function () {\n        for (var i = 0; this.liCollections && i < this.liCollections.length; i++) {\n            this.liCollections[i].setAttribute('data-index', i.toString());\n        }\n    };\n    Mention.prototype.listOption = function (dataSource, fieldsSettings) {\n        var _this = this;\n        var fields = _super.prototype.listOption.call(this, dataSource, fieldsSettings);\n        if (isNullOrUndefined(fields.itemCreated)) {\n            fields.itemCreated = function (e) {\n                if (_this.highlight) {\n                    if (_this.inputElement.tagName === _this.getNgDirective() && _this.itemTemplate) {\n                        setTimeout(function () {\n                            highlightSearch(e.item, _this.queryString, _this.ignoreCase, _this.filterType);\n                        }, 0);\n                    }\n                    else {\n                        highlightSearch(e.item, _this.queryString, _this.ignoreCase, _this.filterType);\n                    }\n                }\n            };\n        }\n        else {\n            var itemCreated_1 = fields.itemCreated;\n            fields.itemCreated = function (e) {\n                if (_this.highlight) {\n                    highlightSearch(e.item, _this.queryString, _this.ignoreCase, _this.filterType);\n                }\n                itemCreated_1.apply(_this, [e]);\n            };\n        }\n        return fields;\n    };\n    Mention.prototype.elementValue = function () {\n        if (!this.isContentEditable(this.inputElement)) {\n            return this.inputElement.value.replace(this.mentionChar, '');\n        }\n        else {\n            return this.inputElement.textContent.replace(this.mentionChar, '');\n        }\n    };\n    Mention.prototype.getQuery = function (query) {\n        var filterQuery = query ? query.clone() : this.query ? this.query.clone() : new Query();\n        var filterType = (this.queryString === '' && !isNullOrUndefined(this.elementValue())) ? 'equal' : this.filterType;\n        var queryString = (this.queryString === '' && !isNullOrUndefined(this.elementValue())) ?\n            this.elementValue() : this.queryString;\n        if (this.isFiltered) {\n            return filterQuery;\n        }\n        if (this.queryString !== null && this.queryString !== '') {\n            var dataType = this.typeOfData(this.dataSource).typeof;\n            if (!(this.dataSource instanceof DataManager) && dataType === 'string' || dataType === 'number') {\n                filterQuery.where('', filterType, queryString, this.ignoreCase, this.ignoreAccent);\n            }\n            else {\n                var mapping = !isNullOrUndefined(this.fields.text) ? this.fields.text : '';\n                filterQuery.where(mapping, filterType, queryString, this.ignoreCase, this.ignoreAccent);\n            }\n        }\n        if (!isNullOrUndefined(this.suggestionCount)) {\n            // Since defualt value of suggestioncount is 25, checked the condition\n            if (this.suggestionCount !== 25) {\n                for (var queryElements = 0; queryElements < filterQuery.queries.length; queryElements++) {\n                    if (filterQuery.queries[queryElements].fn === 'onTake') {\n                        filterQuery.queries.splice(queryElements, 1);\n                    }\n                }\n            }\n            filterQuery.take(this.suggestionCount);\n        }\n        return filterQuery;\n    };\n    Mention.prototype.renderHightSearch = function () {\n        if (this.highlight) {\n            for (var i = 0; i < this.liCollections.length; i++) {\n                var isHighlight = this.ulElement.querySelector('.e-active');\n                if (!isHighlight) {\n                    revertHighlightSearch(this.liCollections[i]);\n                    highlightSearch(this.liCollections[i], this.queryString, this.ignoreCase, this.filterType);\n                }\n            }\n        }\n    };\n    Mention.prototype.getTextRange = function () {\n        var text;\n        if (!this.isContentEditable(this.inputElement)) {\n            var component = this.inputElement;\n            if (!isNullOrUndefined(component)) {\n                var startPos = component.selectionStart;\n                if (component.value && startPos >= 0) {\n                    text = component.value.substring(0, startPos);\n                }\n            }\n        }\n        else {\n            if (this.range) {\n                var selectedElem = this.range.startContainer;\n                if (!isNullOrUndefined(selectedElem)) {\n                    var workingNodeContent = selectedElem.textContent;\n                    var selectStartOffset = this.range.startOffset;\n                    if (workingNodeContent && selectStartOffset >= 0) {\n                        text = workingNodeContent.substring(0, selectStartOffset);\n                    }\n                }\n            }\n        }\n        return text;\n    };\n    Mention.prototype.getLastLetter = function (text) {\n        if (isNullOrUndefined(text)) {\n            return '';\n        }\n        var textValue = text.replace(/\\u00A0/g, ' ');\n        var words = textValue.split(/\\s+/);\n        var wordCnt = words.length - 1;\n        return words[wordCnt].trim();\n    };\n    Mention.prototype.isContentEditable = function (element) {\n        return element && element.nodeName !== 'INPUT' && element.nodeName !== 'TEXTAREA';\n    };\n    /**\n     * Opens the popup that displays the list of items.\n     *\n     * @returns {void}\n     */\n    Mention.prototype.showPopup = function () {\n        this.beforePopupOpen = true;\n        if (document.activeElement != this.inputElement) {\n            this.inputElement.focus();\n        }\n        this.queryString = this.didPopupOpenByTypingInitialChar ? this.queryString : '';\n        this.didPopupOpenByTypingInitialChar = false;\n        if (this.isContentEditable(this.inputElement)) {\n            this.range = this.getCurrentRange();\n        }\n        if (!this.isTyped) {\n            this.resetList(this.dataSource, this.fields);\n        }\n        if (isNullOrUndefined(this.list)) {\n            this.initValue();\n        }\n        this.renderPopup();\n        attributes(this.inputElement, { 'aria-activedescendant': this.selectedElementID });\n        if (this.selectedElementID == null) {\n            this.inputElement.removeAttribute('aria-activedescendant');\n        }\n    };\n    /* eslint-disable valid-jsdoc, jsdoc/require-param */\n    /**\n     * Hides the popup if it is in an open state.\n     *\n     * @returns {void}\n     */\n    Mention.prototype.hidePopup = function (e) {\n        this.removeSelection();\n        this.closePopup(0, e);\n    };\n    Mention.prototype.closePopup = function (delay, e) {\n        var _this = this;\n        if (!(this.popupObj && document.body.contains(this.popupObj.element) && this.beforePopupOpen)) {\n            return;\n        }\n        EventHandler.remove(document, 'mousedown', this.onDocumentClick);\n        this.inputElement.removeAttribute('aria-owns');\n        this.inputElement.removeAttribute('aria-activedescendant');\n        this.beforePopupOpen = false;\n        var animModel = {\n            name: 'FadeOut',\n            duration: 100,\n            delay: delay ? delay : 0\n        };\n        var popupInstance = this.popupObj;\n        var eventArgs = { popup: popupInstance, cancel: false, animation: animModel, event: e || null };\n        this.trigger('closed', eventArgs, function (eventArgs) {\n            if (!eventArgs.cancel && _this.popupObj) {\n                if (_this.isPopupOpen) {\n                    _this.popupObj.hide(new Animation(eventArgs.animation));\n                }\n                else {\n                    _this.destroyPopup();\n                }\n            }\n        });\n    };\n    Mention.prototype.renderPopup = function () {\n        var _this = this;\n        var args = { cancel: false };\n        this.trigger('beforeOpen', args, function (args) {\n            if (!args.cancel) {\n                var popupEle_1;\n                if (isNullOrUndefined(_this.target)) {\n                    popupEle_1 = _this.createElement('div', {\n                        id: _this.inputElement.id + '_popup', className: 'e-mention e-popup ' + (_this.cssClass != null ? _this.cssClass : '')\n                    });\n                }\n                else {\n                    popupEle_1 = _this.element;\n                    if (_this.cssClass != null) {\n                        addClass([popupEle_1], _this.cssClass.split(' '));\n                    }\n                }\n                if (!isNullOrUndefined(_this.target)) {\n                    popupEle_1.id = _this.inputElement.id + '_popup';\n                }\n                _this.listHeight = formatUnit(_this.popupHeight);\n                if (!isNullOrUndefined(_this.list.querySelector('li')) && !_this.initRemoteRender) {\n                    var li = _this.list.querySelector('.' + dropDownBaseClasses.focus);\n                    if (!isNullOrUndefined(li)) {\n                        _this.selectedLI = li;\n                        var value = _this.getFormattedValue(li.getAttribute('data-value'));\n                        _this.selectEventCallback(li, _this.getDataByValue(value), value, true);\n                    }\n                }\n                append([_this.list], popupEle_1);\n                if (_this.inputElement.parentElement && _this.inputElement.parentElement.parentElement &&\n                    _this.inputElement.parentElement.parentElement.classList.contains('e-richtexteditor')) {\n                    if (popupEle_1.firstElementChild && popupEle_1.firstElementChild.childElementCount > 0) {\n                        popupEle_1.firstElementChild.setAttribute('aria-owns', _this.inputElement.parentElement.parentElement.id);\n                    }\n                }\n                if ((!_this.popupObj || !document.body.contains(_this.popupObj.element)) ||\n                    !document.contains(popupEle_1) && isNullOrUndefined(_this.target)) {\n                    document.body.appendChild(popupEle_1);\n                }\n                var coordinates_1;\n                popupEle_1.style.visibility = 'hidden';\n                _this.setHeight(popupEle_1);\n                var offsetValue = 0;\n                var left = 0;\n                _this.initializePopup(popupEle_1, offsetValue, left);\n                _this.checkCollision(popupEle_1);\n                popupEle_1.style.visibility = 'visible';\n                var popupLeft_1 = popupEle_1.parentElement.offsetWidth - popupEle_1.offsetWidth;\n                var popupHeight_1 = popupEle_1.offsetHeight;\n                addClass([popupEle_1], ['e-mention', 'e-popup', 'e-popup-close']);\n                if (!isNullOrUndefined(_this.list)) {\n                    _this.unWireListEvents();\n                    _this.wireListEvents();\n                }\n                _this.selectedElementID = _this.selectedLI ? _this.selectedLI.id : null;\n                attributes(_this.inputElement, { 'aria-owns': _this.inputElement.id + '_options', 'aria-activedescendant': _this.selectedElementID });\n                if (_this.selectedElementID == null) {\n                    _this.inputElement.removeAttribute('aria-activedescendant');\n                }\n                var animModel = { name: 'FadeIn', duration: 100 };\n                _this.beforePopupOpen = true;\n                var popupInstance = _this.popupObj;\n                var eventArgs = { popup: popupInstance, cancel: false, animation: animModel };\n                _this.trigger('opened', eventArgs, function (eventArgs) {\n                    if (!eventArgs.cancel) {\n                        _this.renderReactTemplates();\n                        if (_this.popupObj) {\n                            _this.popupObj.show(new Animation(eventArgs.animation), (_this.zIndex === 1000) ? _this.inputElement : null);\n                        }\n                        if (isNullOrUndefined(_this.getTriggerCharPosition())) {\n                            return;\n                        }\n                        coordinates_1 = _this.getCoordinates(_this.inputElement, _this.getTriggerCharPosition());\n                        if (!_this.isCollided) {\n                            popupEle_1.style.cssText = 'top: '.concat(coordinates_1.top.toString(), 'px;\\n left: ').concat(coordinates_1.left.toString(), 'px;\\nposition: absolute;\\n display: block;');\n                        }\n                        else {\n                            if (_this.collision.length > 0 && _this.collision.indexOf('right') > -1 && _this.collision.indexOf('bottom') === -1) {\n                                popupEle_1.style.cssText = 'top: '.concat(coordinates_1.top.toString(), 'px;\\n left: ').concat(popupLeft_1.toString(), 'px;\\nposition: absolute;\\n display: block;');\n                            }\n                            else if (_this.collision && _this.collision.length > 0 && _this.collision.indexOf('bottom') > -1 && _this.collision.indexOf('right') === -1) {\n                                popupEle_1.style.left = formatUnit(coordinates_1.left);\n                                popupEle_1.style.top = formatUnit(coordinates_1.top - parseInt(popupHeight_1.toString()));\n                            }\n                            else if (_this.collision && _this.collision.length > 0 && _this.collision.indexOf('bottom') > -1 && _this.collision.indexOf('right') > -1) {\n                                popupEle_1.style.left = formatUnit(popupLeft_1);\n                                popupEle_1.style.top = formatUnit(coordinates_1.top - parseInt(popupHeight_1.toString()));\n                            }\n                            else {\n                                popupEle_1.style.left = formatUnit(coordinates_1.left);\n                                popupEle_1.style.top = formatUnit(coordinates_1.top - parseInt(_this.popupHeight.toString()));\n                            }\n                            _this.isCollided = false;\n                            _this.collision = [];\n                        }\n                        popupEle_1.style.width = _this.popupWidth !== '100%' && !isNullOrUndefined(_this.popupWidth) ? formatUnit(_this.popupWidth) : 'auto';\n                        _this.setHeight(popupEle_1);\n                        popupEle_1.style.zIndex = _this.zIndex === 1000 ? getZindexPartial(popupEle_1).toString() : _this.zIndex.toString();\n                    }\n                    else {\n                        _this.beforePopupOpen = false;\n                        _this.destroyPopup();\n                    }\n                });\n            }\n            else {\n                _this.beforePopupOpen = false;\n            }\n        });\n    };\n    Mention.prototype.setHeight = function (popupEle) {\n        if (this.popupHeight !== 'auto' && this.list) {\n            this.list.style.maxHeight = (parseInt(this.listHeight, 10) - 2).toString() + 'px'; // due to box-sizing property\n            popupEle.style.maxHeight = formatUnit(this.popupHeight);\n        }\n        else {\n            popupEle.style.height = 'auto';\n        }\n    };\n    Mention.prototype.checkCollision = function (popupEle) {\n        if (!Browser.isDevice || (Browser.isDevice && !(this.getModuleName() === 'mention'))) {\n            var coordinates = this.getCoordinates(this.inputElement, this.getTriggerCharPosition());\n            this.collision = isCollide(popupEle, null, coordinates.left, coordinates.top);\n            if (this.collision.length > 0) {\n                popupEle.style.marginTop = -parseInt(getComputedStyle(popupEle).marginTop, 10) + 'px';\n                this.isCollided = true;\n            }\n            this.popupObj.resolveCollision();\n        }\n    };\n    Mention.prototype.getTriggerCharPosition = function () {\n        var mostRecentTriggerCharPos;\n        var currentRange = this.getTextRange();\n        if (currentRange !== undefined && currentRange !== null) {\n            mostRecentTriggerCharPos = 0;\n            var idx = currentRange.lastIndexOf(this.mentionChar);\n            if (idx >= mostRecentTriggerCharPos) {\n                mostRecentTriggerCharPos = idx;\n            }\n        }\n        return mostRecentTriggerCharPos ? mostRecentTriggerCharPos : 0;\n    };\n    Mention.prototype.initializePopup = function (element, offsetValue, left) {\n        var _this = this;\n        this.popupObj = new Popup(element, {\n            width: this.setWidth(), targetType: 'relative',\n            relateTo: this.inputElement, collision: { X: 'flip', Y: 'flip' }, offsetY: offsetValue,\n            enableRtl: this.enableRtl, offsetX: left, position: { X: 'left', Y: 'bottom' }, actionOnScroll: 'hide',\n            zIndex: this.zIndex,\n            close: function () {\n                _this.destroyPopup();\n            },\n            open: function () {\n                EventHandler.add(document, 'mousedown', _this.onDocumentClick, _this);\n                _this.isPopupOpen = true;\n                _this.setDataIndex();\n            }\n        });\n    };\n    Mention.prototype.setWidth = function () {\n        var width = formatUnit(this.popupWidth);\n        if (width.indexOf('%') > -1) {\n            var inputWidth = this.inputElement.offsetWidth * parseFloat(width) / 100;\n            width = inputWidth.toString() + 'px';\n        }\n        return width;\n    };\n    Mention.prototype.destroyPopup = function () {\n        this.isPopupOpen = false;\n        this.popupObj.destroy();\n        if (isNullOrUndefined(this.target)) {\n            detach(this.popupObj.element);\n        }\n        else {\n            this.popupObj.element.innerHTML = '';\n            this.popupObj.element.removeAttribute('style');\n            this.popupObj.element.removeAttribute('aria-disabled');\n        }\n    };\n    Mention.prototype.onDocumentClick = function (e) {\n        var target = e.target;\n        if (!(!isNullOrUndefined(this.popupObj) && closest(target, '#' + this.popupObj.element.id))) {\n            this.hidePopup(e);\n        }\n    };\n    Mention.prototype.getCoordinates = function (element, position) {\n        var properties = ['direction', 'boxSizing', 'width', 'height', 'overflowX', 'overflowY', 'borderTopWidth', 'borderRightWidth', 'borderBottomWidth', 'borderLeftWidth', 'paddingTop', 'paddingRight', 'paddingBottom', 'paddingLeft', 'fontStyle', 'fontVariant', 'fontWeight', 'fontStretch', 'fontSize', 'fontSizeAdjust', 'lineHeight', 'fontFamily', 'textAlign', 'textTransform', 'textIndent', 'textDecoration', 'letterSpacing', 'wordSpacing'];\n        var div;\n        var span;\n        var range;\n        var globalRange;\n        var coordinates;\n        var computed;\n        var rect;\n        if (!this.isContentEditable(this.inputElement)) {\n            div = this.createElement('div', { className: 'e-form-mirror-div' });\n            document.body.appendChild(div);\n            computed = getComputedStyle(element);\n            div.style.position = 'absolute';\n            div.style.visibility = 'hidden';\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            properties.forEach(function (prop) {\n                // eslint-disable-next-line security/detect-object-injection\n                div.style[prop] = computed[prop];\n            });\n            div.textContent = element.value.substring(0, position);\n            if (this.inputElement.nodeName === 'INPUT') {\n                div.textContent = div.textContent.replace(/\\s/g, '\\u00a0');\n            }\n            span = this.createElement('span');\n            span.textContent = element.value.substring(position) || '.';\n            div.appendChild(span);\n            rect = element.getBoundingClientRect();\n        }\n        else {\n            var selectedNodePosition = this.getTriggerCharPosition();\n            globalRange = this.range;\n            range = document.createRange();\n            if (this.getTextRange() && this.getTextRange().lastIndexOf(this.mentionChar) !== -1) {\n                range.setStart(globalRange.startContainer, selectedNodePosition);\n                range.setEnd(globalRange.startContainer, selectedNodePosition);\n            }\n            else {\n                range.setStart(globalRange.startContainer, globalRange.startOffset);\n                range.setEnd(globalRange.startContainer, globalRange.endOffset);\n            }\n            this.isTyped = false;\n            range.collapse(false);\n            rect = range.getBoundingClientRect().top === 0 ? range.startContainer.getClientRects()[0] : range.getBoundingClientRect();\n        }\n        var doc = document.documentElement;\n        var windowLeft = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0);\n        var windowTop = (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0);\n        var width = 0;\n        if (!isNullOrUndefined(range) && range.getBoundingClientRect().top === 0) {\n            for (var i = 0; i < this.range.startContainer.childNodes.length; i++) {\n                if (this.range.startContainer.childNodes[i].nodeType !== Node.TEXT_NODE && this.range.startContainer.childNodes[i].textContent.trim() !== '') {\n                    width += this.range.startContainer.childNodes[i].getClientRects()[0].width;\n                }\n                else if (this.range.startContainer.childNodes[i].textContent !== '') {\n                    var span_1 = document.createElement(\"span\");\n                    span_1.innerHTML = this.range.startContainer.childNodes[i].nodeValue;\n                    document.body.appendChild(span_1);\n                    var textNodeWidth = span_1.offsetWidth;\n                    document.body.removeChild(span_1);\n                    width += textNodeWidth;\n                }\n            }\n        }\n        if (!this.isContentEditable(this.inputElement)) {\n            coordinates = {\n                top: rect.top + windowTop + span.offsetTop + parseInt(computed.borderTopWidth, 10) +\n                    parseInt(computed.fontSize, 10) + 3 - element.scrollTop - (this.isCollided ? 10 : 0),\n                left: rect.left + windowLeft + span.offsetLeft + parseInt(computed.borderLeftWidth, 10)\n            };\n            document.body.removeChild(div);\n        }\n        else {\n            if (this.collision && this.collision.length > 0 && this.collision.indexOf('right') > -1 && this.collision.indexOf('bottom') === -1) {\n                coordinates = {\n                    top: rect.top + windowTop + parseInt(getComputedStyle(this.inputElement).fontSize, 10),\n                    left: rect.left + windowLeft + width\n                };\n            }\n            else {\n                coordinates = {\n                    top: rect.top + windowTop + parseInt(getComputedStyle(this.inputElement).fontSize, 10) - (this.isCollided ? 10 : 0),\n                    left: rect.left + windowLeft + width\n                };\n            }\n        }\n        return coordinates;\n    };\n    Mention.prototype.initValue = function () {\n        this.renderList();\n        if (this.dataSource instanceof DataManager) {\n            this.initRemoteRender = true;\n        }\n        else {\n            this.updateValues();\n        }\n    };\n    Mention.prototype.updateValues = function () {\n        var li = this.list.querySelector('.' + dropDownBaseClasses.focus);\n        if (!isNullOrUndefined(li)) {\n            this.setSelection(li, null);\n        }\n    };\n    Mention.prototype.renderList = function () {\n        _super.prototype.render.call(this);\n        this.unWireListEvents();\n        this.wireListEvents();\n    };\n    /**\n     * Event binding for list\n     *\n     * @returns {void}\n     */\n    Mention.prototype.wireListEvents = function () {\n        EventHandler.add(this.list, 'click', this.onMouseClick, this);\n        EventHandler.add(this.list, 'mouseover', this.onMouseOver, this);\n        EventHandler.add(this.list, 'mouseout', this.onMouseLeave, this);\n    };\n    /**\n     * Event un binding for list items.\n     *\n     * @returns {void}\n     */\n    Mention.prototype.unWireListEvents = function () {\n        EventHandler.remove(this.list, 'click', this.onMouseClick);\n        EventHandler.remove(this.list, 'mouseover', this.onMouseOver);\n        EventHandler.remove(this.list, 'mouseout', this.onMouseLeave);\n    };\n    Mention.prototype.onMouseClick = function (e) {\n        var target = e.target;\n        var li = closest(target, '.' + dropDownBaseClasses.li);\n        if (!this.isValidLI(li)) {\n            return;\n        }\n        this.isSelected = true;\n        this.setSelection(li, e);\n        var delay = 100;\n        this.closePopup(delay, e);\n        this.inputElement.focus();\n    };\n    Mention.prototype.updateSelectedItem = function (li, e, preventSelect, isSelection) {\n        var _this = this;\n        this.removeSelection();\n        li.classList.add(dropDownBaseClasses.selected);\n        this.removeHover();\n        var value = this.getFormattedValue(li.getAttribute('data-value'));\n        var selectedData = this.getDataByValue(value);\n        if (!preventSelect && !isNullOrUndefined(e) && !(e.action === \"down\" || e.action === \"up\")) {\n            var items = this.detachChanges(selectedData);\n            this.isSelected = true;\n            var eventArgs = {\n                e: e,\n                item: li,\n                itemData: items,\n                isInteracted: e ? true : false,\n                cancel: false\n            };\n            this.trigger('select', eventArgs, function (eventArgs) {\n                if (eventArgs.cancel) {\n                    li.classList.remove(dropDownBaseClasses.selected);\n                    _this.isSelected = false;\n                    _this.isSelectCancel = true;\n                }\n                else {\n                    _this.selectEventCallback(li, selectedData, value);\n                    if (isSelection) {\n                        _this.setSelectOptions(li, e);\n                    }\n                }\n            });\n        }\n        else {\n            this.selectEventCallback(li, selectedData, value);\n            if (isSelection) {\n                this.setSelectOptions(li, e);\n            }\n        }\n    };\n    Mention.prototype.setSelection = function (li, e) {\n        if (this.isValidLI(li) && (!li.classList.contains(dropDownBaseClasses.selected) || (this.isPopupOpen && this.isSelected\n            && li.classList.contains(dropDownBaseClasses.selected)))) {\n            this.updateSelectedItem(li, e, false, true);\n        }\n        else {\n            this.setSelectOptions(li, e);\n        }\n    };\n    Mention.prototype.setSelectOptions = function (li, e) {\n        if (this.list) {\n            this.removeHover();\n        }\n        this.previousSelectedLI = (!isNullOrUndefined(this.selectedLI)) ? this.selectedLI : null;\n        this.selectedLI = li;\n        if (this.isPopupOpen && !isNullOrUndefined(this.selectedLI)) {\n            this.setScrollPosition(e);\n        }\n        if (e && (e.keyCode === 38 || e.keyCode === 40)) {\n            return;\n        }\n        if (isNullOrUndefined(e) || this.setValue(e)) {\n            return;\n        }\n    };\n    Mention.prototype.setScrollPosition = function (e) {\n        if (!isNullOrUndefined(e)) {\n            switch (e.action) {\n                case 'pageDown':\n                case 'down':\n                case 'end':\n                    this.scrollBottom();\n                    break;\n                default:\n                    this.scrollTop();\n                    break;\n            }\n        }\n        else {\n            this.scrollBottom(true);\n        }\n    };\n    Mention.prototype.scrollBottom = function (isInitial) {\n        if (!isNullOrUndefined(this.selectedLI)) {\n            var currentOffset = this.list.offsetHeight;\n            var nextBottom = this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop;\n            var nextOffset = this.list.scrollTop + nextBottom - currentOffset;\n            nextOffset = isInitial ? nextOffset + parseInt(getComputedStyle(this.list).paddingTop, 10) * 2 : nextOffset;\n            var boxRange = this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop;\n            if (this.activeIndex === 0) {\n                this.list.scrollTop = 0;\n            }\n            else if (nextBottom > currentOffset || !(boxRange > 0 && this.list.offsetHeight > boxRange)) {\n                this.list.scrollTop = nextOffset;\n            }\n        }\n    };\n    Mention.prototype.scrollTop = function () {\n        if (!isNullOrUndefined(this.selectedLI)) {\n            var nextOffset = this.selectedLI.offsetTop - this.list.scrollTop;\n            nextOffset = this.fields.groupBy && nextOffset;\n            var boxRange = (this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop);\n            if (this.activeIndex === 0) {\n                this.list.scrollTop = 0;\n            }\n            else if (nextOffset < 0) {\n                this.list.scrollTop = this.list.scrollTop + nextOffset;\n            }\n            else if (!(boxRange > 0 && this.list.offsetHeight > boxRange)) {\n                this.list.scrollTop = this.selectedLI.offsetTop;\n            }\n        }\n    };\n    Mention.prototype.selectEventCallback = function (li, selectedData, value, selectLi) {\n        this.previousItemData = (!isNullOrUndefined(this.itemData)) ? this.itemData : null;\n        this.item = li;\n        this.itemData = selectedData;\n        var focusedItem = this.list.querySelector('.' + dropDownBaseClasses.focus);\n        if (focusedItem) {\n            removeClass([focusedItem], dropDownBaseClasses.focus);\n        }\n        if (selectLi) {\n            addClass([li], dropDownBaseClasses.selected);\n        }\n        li.setAttribute('aria-selected', 'true');\n        this.activeIndex = this.getIndexByValue(value);\n    };\n    Mention.prototype.detachChanges = function (value) {\n        var items;\n        if (typeof value === 'string' ||\n            typeof value === 'boolean' ||\n            typeof value === 'number') {\n            items = Object.defineProperties({}, {\n                value: {\n                    value: value,\n                    enumerable: true\n                },\n                text: {\n                    value: value,\n                    enumerable: true\n                }\n            });\n        }\n        else {\n            items = value;\n        }\n        return items;\n    };\n    Mention.prototype.setValue = function (e) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (!this.isReact) {\n            if (!isNullOrUndefined(this.displayTemplate)) {\n                this.setDisplayTemplate();\n            }\n            this.updateMentionValue(e);\n            return true;\n        }\n        else {\n            if (!isNullOrUndefined(this.displayTemplate)) {\n                this.setDisplayTemplate(e);\n            }\n            else {\n                this.updateMentionValue(e);\n            }\n            return true;\n        }\n    };\n    Mention.prototype.updateMentionValue = function (e) {\n        var dataItem = this.getItemData();\n        var textSuffix;\n        var value;\n        var endPos;\n        var range;\n        var globalRange;\n        var selection = this.inputElement.ownerDocument.getSelection();\n        var startPos = this.getTriggerCharPosition();\n        textSuffix = typeof this.suffixText === 'string' ? this.suffixText : '';\n        if (this.isSelectCancel) {\n            this.isSelectCancel = false;\n            return;\n        }\n        if (dataItem.text !== null) {\n            value = this.mentionVal(dataItem.text);\n        }\n        if (!this.isContentEditable(this.inputElement)) {\n            var myField = this.inputElement;\n            var currentTriggerSnippet = this.getTextRange().substring(startPos + this.mentionChar.length, this.getTextRange().length);\n            value += textSuffix;\n            endPos = startPos + this.mentionChar.length;\n            endPos += currentTriggerSnippet.length;\n            myField.value = myField.value.substring(0, startPos) + value + myField.value.substring(endPos, myField.value.length);\n            myField.selectionStart = startPos + value.length;\n            myField.selectionEnd = startPos + value.length;\n            if (this.isPopupOpen) {\n                this.hidePopup();\n            }\n            this.onChangeEvent(e);\n        }\n        else {\n            endPos = this.getTriggerCharPosition() + this.mentionChar.length;\n            if (this.range && (this.range.startContainer.textContent.trim() !== this.mentionChar)) {\n                endPos = this.range.endOffset;\n            }\n            globalRange = this.range;\n            range = document.createRange();\n            if (((this.getTextRange() && this.getTextRange().lastIndexOf(this.mentionChar) !== -1) || this.getTextRange() && this.getTextRange().trim() === this.mentionChar)) {\n                range.setStart(globalRange.startContainer, startPos);\n                range.setEnd(globalRange.startContainer, endPos);\n            }\n            else {\n                if (globalRange.commonAncestorContainer.textContent.trim() !== '' && !isNullOrUndefined(globalRange.commonAncestorContainer.textContent.trim()) && this.getTextRange() && this.getTextRange().lastIndexOf(this.mentionChar) !== -1) {\n                    range.setStart(globalRange.startContainer, globalRange.startOffset - 1);\n                    range.setEnd(globalRange.startContainer, globalRange.endOffset - 1);\n                }\n                else {\n                    range.setStart(globalRange.startContainer, globalRange.startOffset);\n                    range.setEnd(globalRange.startContainer, globalRange.endOffset);\n                }\n            }\n            this.isTyped = false;\n            range.deleteContents();\n            var element = this.createElement('div');\n            element.innerHTML = value;\n            var frag = document.createDocumentFragment();\n            var node = void 0;\n            var lastNode = void 0;\n            // eslint-disable-next-line no-cond-assign\n            while (node = element.firstChild) {\n                lastNode = frag.appendChild(node);\n            }\n            range.insertNode(frag);\n            if (lastNode) {\n                range = range.cloneRange();\n                range.setStartAfter(lastNode);\n                range.collapse(true);\n                selection.removeAllRanges();\n                selection.addRange(range);\n            }\n            if (this.isPopupOpen) {\n                this.hidePopup();\n            }\n            //New event to update the RichTextEditor value, when a mention item is selected using mouse click action. \n            if (!isNullOrUndefined(e.pointerType) && e.pointerType === 'mouse') {\n                var event_1 = new CustomEvent('content-changed', { detail: { click: true } });\n                this.inputElement.dispatchEvent(event_1);\n            }\n            \n            this.onChangeEvent(e);\n        }\n    };\n    Mention.prototype.mentionVal = function (value) {\n        var showChar = this.showMentionChar ? this.mentionChar : '';\n        if (!isNullOrUndefined(this.displayTemplate) && !isNullOrUndefined(this.displayTempElement)) {\n            value = this.displayTempElement.innerHTML;\n        }\n        if (this.isContentEditable(this.inputElement)) {\n            if (Browser.isAndroid) {\n                return '<span contenteditable=\"true\" class=\"e-mention-chip\">' + showChar + value + '</span>'.concat(typeof this.suffixText === 'string' ? this.suffixText : ' ');\n            }\n            else {\n                return '<span contenteditable=\"false\" class=\"e-mention-chip\">' + showChar + value + '</span>'.concat(typeof this.suffixText === 'string' ? this.suffixText : ' ');\n            }\n        }\n        else {\n            return showChar + value;\n        }\n    };\n    Mention.prototype.setDisplayTemplate = function (e) {\n        var _this = this;\n        var compiledString;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (this.isReact) {\n            this.clearTemplate(['displayTemplate']);\n            if (this.displayTempElement) {\n                detach(this.displayTempElement);\n                this.displayTempElement = null;\n            }\n        }\n        if (!this.displayTempElement) {\n            this.displayTempElement = this.createElement('div');\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (!this.isReact) {\n            this.displayTempElement.innerHTML = '';\n        }\n        compiledString = compile(this.displayTemplate);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var displayCompTemp = compiledString(this.itemData, this, 'displayTemplate', this.displayTemplateId, this.isStringTemplate, null, this.displayTempElement);\n        if (displayCompTemp && displayCompTemp.length > 0) {\n            append(displayCompTemp, this.displayTempElement);\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (!this.isReact) {\n            this.renderTemplates();\n        }\n        else {\n            this.renderTemplates(function () {\n                _this.updateMentionValue(e);\n            });\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    Mention.prototype.renderTemplates = function (callBack) {\n        this.renderReactTemplates(callBack);\n    };\n    Mention.prototype.setSpinnerTemplate = function () {\n        var _this = this;\n        var compiledString;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (this.isReact) {\n            this.clearTemplate(['spinnerTemplate']);\n            if (this.spinnerTemplateElement) {\n                detach(this.spinnerTemplateElement);\n                this.spinnerTemplateElement = null;\n            }\n        }\n        if (!this.spinnerTemplateElement) {\n            this.spinnerTemplateElement = this.createElement('div');\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (!this.isReact) {\n            this.spinnerTemplateElement.innerHTML = '';\n        }\n        compiledString = compile(this.spinnerTemplate);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        var spinnerCompTemp = compiledString(null, this, 'spinnerTemplate', this.spinnerTemplateId, this.isStringTemplate, null, this.spinnerTemplateElement);\n        if (spinnerCompTemp && spinnerCompTemp.length > 0) {\n            for (var i = 0; i < spinnerCompTemp.length; i++) {\n                this.spinnerTemplateElement.appendChild(spinnerCompTemp[i]);\n            }\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (!this.isReact) {\n            this.renderTemplates();\n            this.popupObj.element.appendChild(this.spinnerTemplateElement);\n        }\n        else {\n            this.renderTemplates(function () {\n                _this.popupObj.element.appendChild(_this.spinnerTemplateElement);\n            });\n        }\n    };\n    Mention.prototype.onChangeEvent = function (eve) {\n        this.isSelected = false;\n        var items = this.detachMentionChanges(this.itemData);\n        var preItems;\n        if (typeof this.previousItemData === 'string' ||\n            typeof this.previousItemData === 'boolean' ||\n            typeof this.previousItemData === 'number') {\n            preItems = Object.defineProperties({}, {\n                value: {\n                    value: this.previousItemData,\n                    enumerable: true\n                },\n                text: {\n                    value: this.previousItemData,\n                    enumerable: true\n                }\n            });\n        }\n        else {\n            preItems = this.previousItemData;\n        }\n        var eventArgs = {\n            e: eve,\n            item: this.item,\n            itemData: items,\n            previousItem: this.previousSelectedLI,\n            previousItemData: preItems,\n            isInteracted: eve ? true : false,\n            value: this.item.innerHTML,\n            element: this.inputElement\n        };\n        this.trigger('change', eventArgs);\n    };\n    Mention.prototype.detachMentionChanges = function (value) {\n        var items;\n        if (typeof value === 'string' ||\n            typeof value === 'boolean' ||\n            typeof value === 'number') {\n            items = Object.defineProperties({}, {\n                value: {\n                    value: value,\n                    enumerable: true\n                },\n                text: {\n                    value: value,\n                    enumerable: true\n                }\n            });\n        }\n        else {\n            items = value;\n        }\n        return items;\n    };\n    Mention.prototype.getItemData = function () {\n        var fields = this.fields;\n        var dataItem = null;\n        dataItem = this.itemData;\n        var dataValue;\n        var dataText;\n        if (!isNullOrUndefined(dataItem)) {\n            dataValue = getValue(fields.value, dataItem);\n            dataText = getValue(fields.text, dataItem);\n        }\n        var value = (!isNullOrUndefined(dataItem) &&\n            !isUndefined(dataValue) ? dataValue : dataItem);\n        var text = (!isNullOrUndefined(dataItem) &&\n            !isUndefined(dataValue) ? dataText : dataItem);\n        return { value: value, text: text };\n    };\n    Mention.prototype.removeSelection = function () {\n        if (this.list) {\n            var selectedItems = this.list.querySelectorAll('.' + dropDownBaseClasses.selected);\n            if (selectedItems.length) {\n                removeClass(selectedItems, dropDownBaseClasses.selected);\n                selectedItems[0].removeAttribute('aria-selected');\n            }\n        }\n    };\n    Mention.prototype.onMouseOver = function (e) {\n        var currentLi = closest(e.target, '.' + dropDownBaseClasses.li);\n        this.setHover(currentLi);\n    };\n    Mention.prototype.setHover = function (li) {\n        if (this.isValidLI(li) && !li.classList.contains(dropDownBaseClasses.hover)) {\n            this.removeHover();\n            addClass([li], dropDownBaseClasses.hover);\n        }\n    };\n    Mention.prototype.removeHover = function () {\n        if (this.list) {\n            var hoveredItem = this.list.querySelectorAll('.' + dropDownBaseClasses.hover);\n            if (hoveredItem && hoveredItem.length) {\n                removeClass(hoveredItem, dropDownBaseClasses.hover);\n            }\n        }\n    };\n    Mention.prototype.isValidLI = function (li) {\n        return (li && li.hasAttribute('role') && li.getAttribute('role') === 'option');\n    };\n    Mention.prototype.onMouseLeave = function () {\n        this.removeHover();\n    };\n    /**\n     * Search the entered text and show it in the suggestion list if available.\n     *\n     * @returns {void}\n     */\n    Mention.prototype.search = function (text, positionX, positionY) {\n        if (this.isContentEditable(this.inputElement)) {\n            this.range = this.getCurrentRange();\n        }\n        var currentRange = this.getTextRange();\n        var lastWordRange = this.getLastLetter(currentRange);\n        if ((this.ignoreCase && (text === lastWordRange || text === lastWordRange.toLowerCase()))\n            || !this.ignoreCase && text === lastWordRange) {\n            this.resetList(this.dataSource, this.fields);\n        }\n        else {\n            if (this.isPopupOpen) {\n                this.hidePopup();\n            }\n            return;\n        }\n        if (isNullOrUndefined(this.list)) {\n            this.renderList();\n            this.renderPopup();\n        }\n        else {\n            this.showPopup();\n        }\n        this.popupObj.element.style.left = formatUnit(positionX);\n        this.popupObj.element.style.top = formatUnit(positionY);\n    };\n    /**\n     * Removes the component from the DOM and detaches all its related event handlers. Also it removes the attributes and classes.\n     *\n     * @method destroy\n     * @returns {void}\n     */\n    Mention.prototype.destroy = function () {\n        this.hidePopup();\n        this.unWireEvent();\n        if (this.list) {\n            this.unWireListEvents();\n        }\n        if (this.inputElement && !this.inputElement.classList.contains('e-' + this.getModuleName())) {\n            return;\n        }\n        this.previousSelectedLI = null;\n        this.item = null;\n        this.selectedLI = null;\n        this.popupObj = null;\n        _super.prototype.destroy.call(this);\n    };\n    Mention.prototype.getLocaleName = function () {\n        return 'mention';\n    };\n    Mention.prototype.getNgDirective = function () {\n        return 'EJS-MENTION';\n    };\n    /**\n     * Return the module name of this component.\n     *\n     * @private\n     * @returns {string} Return the module name of this component.\n     */\n    Mention.prototype.getModuleName = function () {\n        return 'mention';\n    };\n    __decorate$7([\n        Property(null)\n    ], Mention.prototype, \"cssClass\", void 0);\n    __decorate$7([\n        Property('@')\n    ], Mention.prototype, \"mentionChar\", void 0);\n    __decorate$7([\n        Property(false)\n    ], Mention.prototype, \"showMentionChar\", void 0);\n    __decorate$7([\n        Property(false)\n    ], Mention.prototype, \"allowSpaces\", void 0);\n    __decorate$7([\n        Property(null)\n    ], Mention.prototype, \"suffixText\", void 0);\n    __decorate$7([\n        Property(25)\n    ], Mention.prototype, \"suggestionCount\", void 0);\n    __decorate$7([\n        Property(0)\n    ], Mention.prototype, \"minLength\", void 0);\n    __decorate$7([\n        Property('None')\n    ], Mention.prototype, \"sortOrder\", void 0);\n    __decorate$7([\n        Property(true)\n    ], Mention.prototype, \"ignoreCase\", void 0);\n    __decorate$7([\n        Property(false)\n    ], Mention.prototype, \"highlight\", void 0);\n    __decorate$7([\n        Property()\n    ], Mention.prototype, \"locale\", void 0);\n    __decorate$7([\n        Property('auto')\n    ], Mention.prototype, \"popupWidth\", void 0);\n    __decorate$7([\n        Property('300px')\n    ], Mention.prototype, \"popupHeight\", void 0);\n    __decorate$7([\n        Property(null)\n    ], Mention.prototype, \"displayTemplate\", void 0);\n    __decorate$7([\n        Property(null)\n    ], Mention.prototype, \"itemTemplate\", void 0);\n    __decorate$7([\n        Property('No records found')\n    ], Mention.prototype, \"noRecordsTemplate\", void 0);\n    __decorate$7([\n        Property(null)\n    ], Mention.prototype, \"spinnerTemplate\", void 0);\n    __decorate$7([\n        Property()\n    ], Mention.prototype, \"target\", void 0);\n    __decorate$7([\n        Property([])\n    ], Mention.prototype, \"dataSource\", void 0);\n    __decorate$7([\n        Property(null)\n    ], Mention.prototype, \"query\", void 0);\n    __decorate$7([\n        Property('Contains')\n    ], Mention.prototype, \"filterType\", void 0);\n    __decorate$7([\n        Complex({ text: null, value: null, iconCss: null, groupBy: null }, FieldSettings)\n    ], Mention.prototype, \"fields\", void 0);\n    __decorate$7([\n        Event()\n    ], Mention.prototype, \"actionBegin\", void 0);\n    __decorate$7([\n        Event()\n    ], Mention.prototype, \"actionComplete\", void 0);\n    __decorate$7([\n        Event()\n    ], Mention.prototype, \"actionFailure\", void 0);\n    __decorate$7([\n        Event()\n    ], Mention.prototype, \"change\", void 0);\n    __decorate$7([\n        Event()\n    ], Mention.prototype, \"beforeOpen\", void 0);\n    __decorate$7([\n        Event()\n    ], Mention.prototype, \"opened\", void 0);\n    __decorate$7([\n        Event()\n    ], Mention.prototype, \"closed\", void 0);\n    __decorate$7([\n        Event()\n    ], Mention.prototype, \"select\", void 0);\n    __decorate$7([\n        Event()\n    ], Mention.prototype, \"filtering\", void 0);\n    __decorate$7([\n        Event()\n    ], Mention.prototype, \"created\", void 0);\n    __decorate$7([\n        Event()\n    ], Mention.prototype, \"destroyed\", void 0);\n    Mention = __decorate$7([\n        NotifyPropertyChanges\n    ], Mention);\n    return Mention;\n}(DropDownBase));\n\n/**\n * export all modules from current location\n */\n\n/**\n * export all modules from current location\n */\n\nexport { incrementalSearch, Search, escapeCharRegExp, resetIncrementalSearchValues, highlightSearch, revertHighlightSearch, VirtualScroll, FieldSettings, dropDownBaseClasses, DropDownBase, dropDownListClasses, DropDownList, Fields, TreeSettings, DropDownTree, ComboBox, AutoComplete, MultiSelect, CheckBoxSelection, createFloatLabel, updateFloatLabelState, removeFloating, setPlaceHolder, floatLabelFocus, floatLabelBlur, encodePlaceholder, SelectionSettings, ToolbarSettings, ListBox, Mention };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}